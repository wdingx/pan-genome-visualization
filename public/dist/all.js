function updatePresence(t){var e=d3.select("#mytree1"),n=e.selectAll("circle"),r=e.selectAll("path.tnt_tree_link"),i=svg_all.selectAll("text");n.style("fill",function(e){if(0!=e.name.indexOf("NODE_")&&""!=e.name)return"1"==e.genePresence[parseInt(t)-1]?(node_color_tmp[e.name]="blue","blue"):(node_color_tmp[e.name]="red","red")}),r.style("stroke",function(t){return 0!=t.target.name.indexOf("NODE_")&&""!=t.target.name?node_color_tmp[t.target.name]:"gray"}),i.style("fill",function(t){if(void 0!==t&&""!=t.name)return node_color_tmp[t.name]})}function updateGainLossEvent(t){var e=genePresence_Dt[t],n=d3.select("#mytree1"),r=n.selectAll("path.tnt_tree_link");r.style("stroke-width","1px").style("stroke-dasharray","none");for(var i in e){var o=e[i],a=o[0],s=o[1],l=r.filter(function(t,e){if(t.target.name==a)return t.target});l.style("stroke",function(){return"1-0"==s?"red":"0-0"==s?"red":"0-1"==s?"blue":"1-1"==s?"blue":void 0}).style("stroke-width",function(){return"1-0"==s?"3px":"0-0"==s?"1px":"0-1"==s?"3px":"1-1"==s?"1px":void 0}).style("stroke-dasharray",function(t){return"1-0"==s?t.source.parent?"6,6":"1,0":"0-0"==s?"none":"0-1"==s?"none":"1-1"==s?"none":void 0})}}function format_annotation(t){for(var e=t.allAnn.split("@"),n='<table cellpadding="5" cellspacing="0" border="0" style="padding-right:50px;"><tr><td>Annotation detail:</td> <td>Counts:</td></tr>',r=0;r<e.length;r++){var i=e[r].split("#"),o=i[0],a=i[1];n+="<tr><td>"+o+"</td> <td>"+a+"</td></tr>"}return n+="</table>"}function format_dup_detail(t){for(var e=t.dup_detail.split("@"),n='<table cellpadding="5" cellspacing="0" border="0" style="padding-right:50px;"><tr><td>strain name:</td> <td>Counts:</td></tr>',r=0;r<e.length;r++){var i=e[r].split("#"),o=i[0],a=i[1];void 0==a&&(a=""),n+="<tr><td>"+o+"</td> <td>"+a+"</td></tr>"}return n+="</table>"}function clickShowMsa(t){function e(t){var e=d3.select("#mytree2");e.selectAll("*").remove(),e=d3.select("#mytree2"),render("mytree2",aln_file_path+t.msa.split(".")[0]+".tree.json",e)}function n(t,e){var n=document.getElementById(t);n.value=e}$("#dc-data-table tbody").on("click","td.ann-details-control",function(){var e=$(this).closest("tr"),n=t.row(e);n.child.isShown()?(n.child.hide(),e.removeClass("shown")):(n.child(format_annotation(n.data())).show(),e.addClass("shown"))}),$("#dc-data-table tbody").on("click","td.dup-details-control",function(){var e=$(this).closest("tr"),n=t.row(e);n.child.isShown()?(n.child.hide(),e.removeClass("shown")):(n.child(format_dup_detail(n.data())).show(),e.addClass("shown"))}),$("#dc-data-table tbody").on("click",".btn.btn-primary.btn-xs",function(){var r=t.row($(this).parents("tr")).data();console.log(r.msa),msaLoad(aln_file_path+r.msa.split(".aa")[0]+".nu.aln","nucleotide"),ann_majority=r.ann,e(r),updatePresence(r.geneId),updateGainLossEvent(r.geneId),$("#tree-rotate").bootstrapToggle("off"),n("dropdown_select","genePresence"),removeLegend(),legendOptionValue=""}),$("#dc-data-table tbody").on("click",".btn.btn-info.btn-xs",function(){var r=t.row($(this).parents("tr")).data();console.log(r.msa),msaLoad(aln_file_path+r.msa,"taylor"),ann_majority=r.ann,e(r),geneId_GV=r.geneId,updatePresence(r.geneId),updateGainLossEvent(r.geneId),$("#tree-rotate").bootstrapToggle("off"),n("dropdown_select","genePresence"),removeLegend(),legendOptionValue=""})}function msaLoad(t,e){var n=document.getElementById("snippetDiv"),r=require("msa"),i={el:n,importURL:t};i.vis={conserv:!1,overviewbox:!1},i.zoomer={alignmentWidth:"auto",alignmentHeight:250,rowHeight:18,labelWidth:100,labelFontsize:"13px",labelIdLength:20,menuFontsize:"12px",menuMarginLeft:"3px",menuPadding:"3px 4px 3px 4px",menuItemFontsize:"14px",menuItemLineHeight:"14px"},i.colorscheme={scheme:e},i.config={};var o=r(i);o.g.on("row:click",function(t){console.log(t)}),o.g.on("column:click",function(t){console.log(t)});var a={};a.msa=o;var s=new r.menu.defaultmenu(a);o.addView("menu",s)}function rotate_tree(t,e){function n(t,e){return"M"+t.source.y+","+t.source.x+"V"+t.target.x+"H"+t.target.y}t.selectAll(".tnt_tree_node").attr("transform",function(t){return width=winInnerWidth/3.15,t.x=t.x,t.y=width-t.y,"translate("+t.y+","+t.x+")"}),t.selectAll(".tnt_tree_label").attr("transform",function(){return"left-right"==e?"translate(5,3)":"translate(-10,3)"}).attr("text-anchor",function(){return"left-right"==e?"start":"end"}),t.selectAll(".tnt_tree_link").attr("d",n)}function search(t){d3.selectAll("circle").style("fill",function(e){var n=e.name;if(n.toLowerCase().indexOf(t.toLowerCase())>-1&&0!=t.length)return color_leaf_node_highlight}).style("r",function(e){var n=e.name;if(n.toLowerCase().indexOf(t.toLowerCase())>-1&&0!=t.length)return size_node_leaf_highlight})}function isNumeric(t){return!isNaN(t)}function assign_color(t){var e=meta_detail.indexOf("unknown");for(e>-1&&(meta_detail.splice(e,1),tmp_meta_color_set.unknown="#FFFFFF"),i=0;i<meta_detail.length;i++){var n=meta_detail[i];tmp_meta_color_set_keys.push(n),tmp_meta_color_set[n]=t[i]}void 0!=tmp_meta_color_set.unknown&&tmp_meta_color_set_keys.push("unknown"),metaColor_sets[meta_type_key]=tmp_meta_color_set,metaColor_set_keys[meta_type_key]=tmp_meta_color_set_keys}function removeLegend(){legend.selectAll(".legend").remove()}function makeLegend(t){function e(e){var n=d3.select(this).attr("text");svg1.selectAll("circle").filter(function(e){if(e[t]===n)return e;if(isNumeric(n)){var r=metaColor_set_keys[t],i=r.indexOf(parseFloat(n)),o=Math.round(10*e[t])/10;if(o>r[i-1]&&o<=r[i])return e}}).attr("r",size_node_leaf_highlight)}function n(e){var n=d3.select(this).attr("text");svg1.selectAll("circle").filter(function(e){if(e[t]===n)return e;if(isNumeric(n)){var r=metaColor_set_keys[t],i=r.indexOf(parseFloat(n)),o=Math.round(10*e[t])/10;if(o>r[i-1]&&o<=r[i])return e}}).attr("r",size_node_leaf)}if("genePresence"==legendOptionValue)updatePresence(geneId_GV),updateGainLossEvent(geneId_GV);else if(""!=legendOptionValue){var r=legend.selectAll(".legend").data(metaColor_set_keys[t]).enter().append("g").attr("class","legend").attr("transform",function(t,e){var n=20,r=legendRectSize+legendSpacing,i=Math.floor(e/n),o=e%n,a=145*i+5,s=o*r+5;return"translate("+a+","+s+")"});return r.append("rect").attr("width",legendRectSize).attr("height",legendRectSize).attr("text",function(t){return t}).attr("fill",function(e){var n=metaColor_sets[t][e];return d3.rgb(n).toString()}).attr("stroke",function(e){var n=metaColor_sets[t][e];return d3.rgb(n).darker([.4]).toString()}).on("mouseover",e).on("mouseout",n),r.append("text").attr("x",legendRectSize+legendSpacing+5).attr("y",legendRectSize-legendSpacing).attr("text",function(t){return t}).text(function(t){return t.toString()}).on("mouseover",e).on("mouseout",n),r}}function updateData(t){var e=svg1.selectAll("circle"),n=(svg1.selectAll("text"),svg1.selectAll(".tnt_tree_link"));legendOptionValue=t;var r=metaColor_sets[t];removeLegend(),makeLegend(t),"genePresence"!=t?(e.style("fill",function(e){if(0!=e.name.indexOf("NODE_")&&""!=e.name){if(0==isNumeric(metaColor_set_keys[t][0])){var n=r[e[t]];return node_color_tmp[e.name]=n,d3.selectAll("circle.pt"+e.name).style("fill",n),n}if("unknown"==e[t]){var n="#FFFFFF";return node_color_tmp[e.name]=n,d3.selectAll("circle.pt"+e.name).style("fill",n),n}var o=metaColor_set_keys[t],a=Math.round(10*e[t])/10;for(i=1;i<=o.length;i++)if(a>=o[i-1]&&a<=o[i]){var n=r[o[i]];return node_color_tmp[e.name]=n,d3.selectAll("circle.pt"+e.name).style("fill",n),n}}}),n.style("stroke",function(e){if(0==e.target.name.indexOf("NODE_")||""==e.target.name)return branch_color;if(0==isNumeric(metaColor_set_keys[t][0]))return d3.rgb(r[e.target[t]]).darker([.8]).toString();var n=metaColor_set_keys[t],o=Math.round(10*e.target[t])/10;for(i=1;i<=n.length;i++)return o>=n[i-1]&&o<=n[i]?d3.rgb(r[e.target[t]]).darker([.8]).toString():branch_color})):svg2.selectAll("g.tnt_tree_node.leaf").selectAll("circle").style("fill","blue")}var safe_color_set=["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],more_color_set=["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"],species_dt={Papn:"Pseudomonas aeruginosa",Sasm:"Staphylococcus aureus",Campy:"Campylobacter",Pmnr:"Prochlorococcus marinus roary",Pmnawg:"Prochlorococcus marinus Pmnawg",Pmnb:"Prochlorococcus marinus Pmnb"};if(function(){"use strict";function t(t){return t.split("").reverse().join("")}function e(t,e){return t.substring(0,e.length)===e}function n(t,e){return t.slice(-1*e.length)===e}function r(t,e,n){if((t[e]||t[n])&&t[e]===t[n])throw new Error(e)}function i(t){return"number"==typeof t&&isFinite(t)}function o(t,e){var n=Math.pow(10,e);return(Math.round(t*n)/n).toFixed(e)}function a(e,n,r,a,s,l,u,c,f,h,d,p){var g,v,m,y=p,b="",x="";return l&&(p=l(p)),!!i(p)&&(e!==!1&&0===parseFloat(p.toFixed(e))&&(p=0),p<0&&(g=!0,p=Math.abs(p)),e!==!1&&(p=o(p,e)),p=p.toString(),p.indexOf(".")!==-1?(v=p.split("."),m=v[0],r&&(b=r+v[1])):m=p,n&&(m=t(m).match(/.{1,3}/g),m=t(m.join(t(n)))),g&&c&&(x+=c),a&&(x+=a),g&&f&&(x+=f),x+=m,x+=b,s&&(x+=s),h&&(x=h(x,y)),x)}function s(t,r,o,a,s,l,u,c,f,h,d,p){var g,v="";return d&&(p=d(p)),!(!p||"string"!=typeof p)&&(c&&e(p,c)&&(p=p.replace(c,""),g=!0),a&&e(p,a)&&(p=p.replace(a,"")),f&&e(p,f)&&(p=p.replace(f,""),g=!0),s&&n(p,s)&&(p=p.slice(0,-1*s.length)),r&&(p=p.split(r).join("")),o&&(p=p.replace(o,".")),g&&(v+="-"),v+=p,v=v.replace(/[^0-9\.\-.]/g,""),""!==v&&(v=Number(v),u&&(v=u(v)),!!i(v)&&v))}function l(t){var e,n,i,o={};for(e=0;e<f.length;e+=1)if(n=f[e],i=t[n],void 0===i)"negative"!==n||o.negativeBefore?"mark"===n&&"."!==o.thousand?o[n]=".":o[n]=!1:o[n]="-";else if("decimals"===n){if(!(i>=0&&i<8))throw new Error(n);o[n]=i}else if("encoder"===n||"decoder"===n||"edit"===n||"undo"===n){if("function"!=typeof i)throw new Error(n);o[n]=i}else{if("string"!=typeof i)throw new Error(n);o[n]=i}return r(o,"mark","thousand"),r(o,"prefix","negative"),r(o,"prefix","negativeBefore"),o}function u(t,e,n){var r,i=[];for(r=0;r<f.length;r+=1)i.push(t[f[r]]);return i.push(n),e.apply("",i)}function c(t){return this instanceof c?void("object"==typeof t&&(t=l(t),this.to=function(e){return u(t,a,e)},this.from=function(e){return u(t,s,e)})):new c(t)}var f=["decimals","thousand","mark","prefix","postfix","encoder","decoder","negativeBefore","negative","edit","undo"];window.wNumb=c}(),!function(t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():window.noUiSlider=t()}(function(){"use strict";function t(t){return t.filter(function(t){return!this[t]&&(this[t]=!0)},{})}function e(t,e){return Math.round(t/e)*e}function n(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,r=n.documentElement,i=f();return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(i.x=0),{top:e.top+i.y-r.clientTop,left:e.left+i.x-r.clientLeft}}function r(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function i(t,e,n){l(t,e),setTimeout(function(){u(t,e)},n)}function o(t){return Math.max(Math.min(t,100),0)}function a(t){return Array.isArray(t)?t:[t]}function s(t){var e=t.split(".");return e.length>1?e[1].length:0}function l(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function u(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function c(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)}function f(){var t=void 0!==window.pageXOffset,e="CSS1Compat"===(document.compatMode||""),n=t?window.pageXOffset:e?document.documentElement.scrollLeft:document.body.scrollLeft,r=t?window.pageYOffset:e?document.documentElement.scrollTop:document.body.scrollTop;return{x:n,y:r}}function h(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function d(t,e){return 100/(e-t)}function p(t,e){return 100*e/(t[1]-t[0])}function g(t,e){return p(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}function v(t,e){return e*(t[1]-t[0])/100+t[0]}function m(t,e){for(var n=1;t>=e[n];)n+=1;return n}function y(t,e,n){if(n>=t.slice(-1)[0])return 100;var r,i,o,a,s=m(n,t);return r=t[s-1],i=t[s],o=e[s-1],a=e[s],o+g([r,i],n)/d(o,a)}function b(t,e,n){if(n>=100)return t.slice(-1)[0];var r,i,o,a,s=m(n,e);return r=t[s-1],i=t[s],o=e[s-1],a=e[s],v([r,i],(n-o)*d(o,a))}function x(t,n,r,i){if(100===i)return i;var o,a,s=m(i,t);return r?(o=t[s-1],a=t[s],i-o>(a-o)/2?a:o):n[s-1]?t[s-1]+e(i-t[s-1],n[s-1]):i}function _(t,e,n){var i;if("number"==typeof e&&(e=[e]),"[object Array]"!==Object.prototype.toString.call(e))throw new Error("noUiSlider: 'range' contains invalid value.");if(i="min"===t?0:"max"===t?100:parseFloat(t),!r(i)||!r(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");n.xPct.push(i),n.xVal.push(e[0]),i?n.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(n.xSteps[0]=e[1])}function w(t,e,n){return!e||void(n.xSteps[t]=p([n.xVal[t],n.xVal[t+1]],e)/d(n.xPct[t],n.xPct[t+1]))}function S(t,e,n,r){this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.snap=e,this.direction=n;var i,o=[];for(i in t)t.hasOwnProperty(i)&&o.push([t[i],i]);for(o.length&&"object"==typeof o[0][0]?o.sort(function(t,e){return t[0][0]-e[0][0]}):o.sort(function(t,e){return t[0]-e[0]}),i=0;i<o.length;i++)_(o[i][1],o[i][0],this);for(this.xNumSteps=this.xSteps.slice(0),i=0;i<this.xNumSteps.length;i++)w(i,this.xNumSteps[i],this)}function T(t,e){if(!r(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function C(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider: 'range' 'min' and 'max' cannot be equal.");t.spectrum=new S(e,t.snap,t.dir,t.singleStep)}function k(t,e){if(e=a(e),!Array.isArray(e)||!e.length||e.length>2)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function A(t,e){if(t.snap=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.")}function D(t,e){if(t.animate=e,"boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.")}function E(t,e){if(t.animationDuration=e,"number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.")}function M(t,e){if("lower"===e&&1===t.handles)t.connect=1;else if("upper"===e&&1===t.handles)t.connect=2;else if(e===!0&&2===t.handles)t.connect=3;else{if(e!==!1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");t.connect=0}}function j(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function N(t,e){if(!r(e))throw new Error("noUiSlider: 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider: 'margin' option is only supported on linear sliders.")}function L(t,e){if(!r(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders.")}function R(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1,t.connect=[0,2,1,3][t.connect];break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function I(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,r=e.indexOf("drag")>=0,i=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,a=e.indexOf("hover")>=0;if(r&&!t.connect)throw new Error("noUiSlider: 'drag' behaviour must be used with 'connect': true.");t.events={tap:n||o,drag:r,fixed:i,snap:o,hover:a}}function O(t,e){var n;if(e!==!1)if(e===!0)for(t.tooltips=[],n=0;n<t.handles;n++)t.tooltips.push(!0);else{if(t.tooltips=a(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");t.tooltips.forEach(function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})}}function F(t,e){if(t.format=e,"function"==typeof e.to&&"function"==typeof e.from)return!0;throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.")}function z(t,e){if(void 0!==e&&"string"!=typeof e&&e!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function P(t,e){if(void 0!==e&&"object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix){t.cssClasses={};for(var n in e)e.hasOwnProperty(n)&&(t.cssClasses[n]=t.cssPrefix+e[n])}else t.cssClasses=e}function q(t){var e,n={margin:0,limit:0,animate:!0,animationDuration:300,format:$};e={step:{r:!1,t:T},start:{r:!0,t:k},connect:{r:!0,t:M},direction:{r:!0,t:R},snap:{r:!1,t:A},animate:{r:!1,t:D},animationDuration:{r:!1,t:E},range:{r:!0,t:C},orientation:{r:!1,t:j},margin:{r:!1,t:N},limit:{r:!1,t:L},behaviour:{r:!0,t:I},format:{r:!1,t:F},tooltips:{r:!1,t:O},cssPrefix:{r:!1,t:z},cssClasses:{r:!1,t:P}};var r={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",stacking:"stacking",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};return Object.keys(e).forEach(function(i){if(void 0===t[i]&&void 0===r[i]){if(e[i].r)throw new Error("noUiSlider: '"+i+"' is required.");return!0}e[i].t(n,void 0===t[i]?r[i]:t[i])}),n.pips=t.pips,n.style=n.ort?"top":"left",n}function H(e,r,d){function p(t,e,n){var r=t+e[0],i=t+e[1];return n?(0>r&&(i+=Math.abs(r)),i>100&&(r-=i-100),[o(r),o(i)]):[r,i]}function g(t,e){t.preventDefault();var n,r,i=0===t.type.indexOf("touch"),o=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer"),s=t;return 0===t.type.indexOf("MSPointer")&&(a=!0),i&&(n=t.changedTouches[0].pageX,r=t.changedTouches[0].pageY),e=e||f(),(o||a)&&(n=t.clientX+e.x,r=t.clientY+e.y),s.pageOffset=e,s.points=[n,r],s.cursor=o||a,s}function v(t,e){var n=document.createElement("div"),i=document.createElement("div"),o=[r.cssClasses.handleLower,r.cssClasses.handleUpper];return t&&o.reverse(),l(i,r.cssClasses.handle),l(i,o[e]),l(n,r.cssClasses.origin),n.appendChild(i),n}function m(t,e,n){switch(t){case 1:l(e,r.cssClasses.connect),l(n[0],r.cssClasses.background);break;case 3:l(n[1],r.cssClasses.background);case 2:l(n[0],r.cssClasses.connect);case 0:l(e,r.cssClasses.background)}}function y(t,e,n){var r,i=[];for(r=0;t>r;r+=1)i.push(n.appendChild(v(e,r)));return i}function b(t,e,n){l(n,r.cssClasses.target),0===t?l(n,r.cssClasses.ltr):l(n,r.cssClasses.rtl),0===e?l(n,r.cssClasses.horizontal):l(n,r.cssClasses.vertical);var i=document.createElement("div");return l(i,r.cssClasses.base),n.appendChild(i),i}function x(t,e){if(!r.tooltips[e])return!1;var n=document.createElement("div");return n.className=r.cssClasses.tooltip,t.firstChild.appendChild(n)}function _(){r.dir&&r.tooltips.reverse();var t=Y.map(x);r.dir&&(t.reverse(),r.tooltips.reverse()),W("update",function(e,n,i){t[n]&&(t[n].innerHTML=r.tooltips[n]===!0?e[n]:r.tooltips[n].to(i[n]))})}function w(t,e,n){if("range"===t||"steps"===t)return Q.xVal;if("count"===t){var r,i=100/(e-1),o=0;for(e=[];(r=o++*i)<=100;)e.push(r);t="positions"}return"positions"===t?e.map(function(t){return Q.fromStepping(n?Q.getStep(t):t)}):"values"===t?n?e.map(function(t){return Q.fromStepping(Q.getStep(Q.toStepping(t)))}):e:void 0}function S(e,n,r){function i(t,e){return(t+e).toFixed(7)/1}var o=Q.direction,a={},s=Q.xVal[0],l=Q.xVal[Q.xVal.length-1],u=!1,c=!1,f=0;return Q.direction=0,r=t(r.slice().sort(function(t,e){return t-e})),r[0]!==s&&(r.unshift(s),u=!0),r[r.length-1]!==l&&(r.push(l),c=!0),r.forEach(function(t,o){var s,l,h,d,p,g,v,m,y,b,x=t,_=r[o+1];if("steps"===n&&(s=Q.xNumSteps[o]),s||(s=_-x),x!==!1&&void 0!==_)for(l=x;_>=l;l=i(l,s)){for(d=Q.toStepping(l),p=d-f,m=p/e,y=Math.round(m),b=p/y,h=1;y>=h;h+=1)g=f+h*b,a[g.toFixed(5)]=["x",0];v=r.indexOf(l)>-1?1:"steps"===n?2:0,!o&&u&&(v=0),l===_&&c||(a[d.toFixed(5)]=[l,v]),f=d}}),Q.direction=o,a}function T(t,e,n){function i(t,e){var n=e===r.cssClasses.value,i=n?h:d,o=n?c:f;return e+" "+i[r.ort]+" "+o[t]}function o(t,e,n){return'class="'+i(n[1],e)+'" style="'+r.style+": "+t+'%"'}function a(t,i){Q.direction&&(t=100-t),i[1]=i[1]&&e?e(i[0],i[1]):i[1],u+="<div "+o(t,r.cssClasses.marker,i)+"></div>",i[1]&&(u+="<div "+o(t,r.cssClasses.value,i)+">"+n.to(i[0])+"</div>")}var s=document.createElement("div"),u="",c=[r.cssClasses.valueNormal,r.cssClasses.valueLarge,r.cssClasses.valueSub],f=[r.cssClasses.markerNormal,r.cssClasses.markerLarge,r.cssClasses.markerSub],h=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],d=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];return l(s,r.cssClasses.pips),l(s,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(t).forEach(function(e){a(e,t[e])}),s.innerHTML=u,s}function C(t){var e=t.mode,n=t.density||1,r=t.filter||!1,i=t.values||!1,o=t.stepped||!1,a=w(e,i,o),s=S(n,e,a),l=t.format||{to:Math.round};return Z.appendChild(T(s,r,l))}function k(){var t=G.getBoundingClientRect(),e="offset"+["Width","Height"][r.ort];return 0===r.ort?t.width||G[e]:t.height||G[e]}function A(t,e,n){var i;for(i=0;i<r.handles;i++)if(-1===K[i])return;void 0!==e&&1!==r.handles&&(e=Math.abs(e-r.dir)),Object.keys(et).forEach(function(r){var i=r.split(".")[0];t===i&&et[r].forEach(function(t){t.call(X,a(H()),e,a(D(Array.prototype.slice.call(tt))),n||!1,K)})})}function D(t){return 1===t.length?t[0]:r.dir?t.reverse():t}function E(t,e,n,i){var o=function(e){return!Z.hasAttribute("disabled")&&(!c(Z,r.cssClasses.tap)&&(e=g(e,i.pageOffset),!(t===J.start&&void 0!==e.buttons&&e.buttons>1)&&((!i.hover||!e.buttons)&&(e.calcPoint=e.points[r.ort],void n(e,i)))))},a=[];return t.split(" ").forEach(function(t){e.addEventListener(t,o,!1),a.push([t,o])}),a}function M(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return j(t,e);var n,r,i=e.handles||Y,o=!1,a=100*(t.calcPoint-e.start)/e.baseSize,s=i[0]===Y[0]?0:1;if(n=p(a,e.positions,i.length>1),o=F(i[0],n[s],1===i.length),i.length>1){if(o=F(i[1],n[s?0:1],!1)||o)for(r=0;r<e.handles.length;r++)A("slide",r)}else o&&A("slide",s)}function j(t,e){var n=G.querySelector("."+r.cssClasses.active),i=e.handles[0]===Y[0]?0:1;null!==n&&u(n,r.cssClasses.active),t.cursor&&(document.body.style.cursor="",document.body.removeEventListener("selectstart",document.body.noUiListener));var o=document.documentElement;o.noUiListeners.forEach(function(t){o.removeEventListener(t[0],t[1])}),u(Z,r.cssClasses.drag),A("set",i),A("change",i),void 0!==e.handleNumber&&A("end",e.handleNumber)}function N(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&j(t,e)}function L(t,e){var n=document.documentElement;if(1===e.handles.length){if(e.handles[0].hasAttribute("disabled"))return!1;l(e.handles[0].children[0],r.cssClasses.active)}t.preventDefault(),t.stopPropagation();var i=E(J.move,n,M,{start:t.calcPoint,baseSize:k(),pageOffset:t.pageOffset,handles:e.handles,handleNumber:e.handleNumber,buttonsProperty:t.buttons,positions:[K[0],K[Y.length-1]]}),o=E(J.end,n,j,{handles:e.handles,handleNumber:e.handleNumber}),a=E("mouseout",n,N,{handles:e.handles,handleNumber:e.handleNumber});if(n.noUiListeners=i.concat(o,a),t.cursor){document.body.style.cursor=getComputedStyle(t.target).cursor,Y.length>1&&l(Z,r.cssClasses.drag);var s=function(){return!1};document.body.noUiListener=s,document.body.addEventListener("selectstart",s,!1)}void 0!==e.handleNumber&&A("start",e.handleNumber)}function R(t){var e,o,a=t.calcPoint,s=0;return t.stopPropagation(),Y.forEach(function(t){s+=n(t)[r.style]}),e=s/2>a||1===Y.length?0:1,Y[e].hasAttribute("disabled")&&(e=e?0:1),a-=n(G)[r.style],o=100*a/k(),r.events.snap||i(Z,r.cssClasses.tap,r.animationDuration),!Y[e].hasAttribute("disabled")&&(F(Y[e],o),A("slide",e,!0),A("set",e,!0),A("change",e,!0),void(r.events.snap&&L(t,{handles:[Y[e]]})))}function I(t){var e=t.calcPoint-n(G)[r.style],i=Q.getStep(100*e/k()),o=Q.fromStepping(i);Object.keys(et).forEach(function(t){"hover"===t.split(".")[0]&&et[t].forEach(function(t){t.call(X,o)})})}function O(t){if(t.fixed||Y.forEach(function(t,e){E(J.start,t.children[0],L,{handles:[t],handleNumber:e})}),t.tap&&E(J.start,G,R,{handles:Y}),t.hover&&E(J.move,G,I,{hover:!0}),t.drag){var e=[G.querySelector("."+r.cssClasses.connect)];l(e[0],r.cssClasses.draggable),t.fixed&&e.push(Y[e[0]===Y[0]?1:0].children[0]),e.forEach(function(t){E(J.start,t,L,{handles:Y})})}}function F(t,e,n){var i=t!==Y[0]?1:0,a=K[0]+r.margin,s=K[1]-r.margin,c=K[0]+r.limit,f=K[1]-r.limit;return Y.length>1&&(e=i?Math.max(e,a):Math.min(e,s)),n!==!1&&r.limit&&Y.length>1&&(e=i?Math.min(e,c):Math.max(e,f)),e=Q.getStep(e),e=o(e),e!==K[i]&&(window.requestAnimationFrame?window.requestAnimationFrame(function(){t.style[r.style]=e+"%"}):t.style[r.style]=e+"%",t.previousSibling||(u(t,r.cssClasses.stacking),e>50&&l(t,r.cssClasses.stacking)),K[i]=e,tt[i]=Q.fromStepping(e),A("update",i),!0)}function z(t,e){var n,i,o;for(r.limit&&(t+=1),n=0;t>n;n+=1)i=n%2,o=e[i],null!==o&&o!==!1&&("number"==typeof o&&(o=String(o)),o=r.format.from(o),(o===!1||isNaN(o)||F(Y[i],Q.toStepping(o),n===3-r.dir)===!1)&&A("update",i))}function P(t,e){var n,o,s=a(t);for(e=void 0===e||!!e,r.dir&&r.handles>1&&s.reverse(),r.animate&&-1!==K[0]&&i(Z,r.cssClasses.tap,r.animationDuration),n=Y.length>1?3:1,1===s.length&&(n=1),z(n,s),o=0;o<Y.length;o++)null!==s[o]&&e&&A("set",o)}function H(){var t,e=[];for(t=0;t<r.handles;t+=1)e[t]=r.format.to(tt[t]);return D(e)}function B(){for(var t in r.cssClasses)r.cssClasses.hasOwnProperty(t)&&u(Z,r.cssClasses[t]);for(;Z.firstChild;)Z.removeChild(Z.firstChild);delete Z.noUiSlider}function $(){var t=K.map(function(t,e){var n=Q.getApplicableStep(t),r=s(String(n[2])),i=tt[e],o=100===t?null:n[2],a=Number((i-n[2]).toFixed(r)),l=0===t?null:a>=n[1]?n[2]:n[0]||!1;return[l,o]});return D(t)}function W(t,e){et[t]=et[t]||[],et[t].push(e),"update"===t.split(".")[0]&&Y.forEach(function(t,e){A("update",e)})}function U(t){var e=t&&t.split(".")[0],n=e&&t.substring(e.length);Object.keys(et).forEach(function(t){var r=t.split(".")[0],i=t.substring(r.length);e&&e!==r||n&&n!==i||delete et[t]})}function V(t,e){var n=H(),i=q({start:[0,0],margin:t.margin,limit:t.limit,step:void 0===t.step?r.singleStep:t.step,range:t.range,animate:t.animate,snap:void 0===t.snap?r.snap:t.snap});["margin","limit","range","animate"].forEach(function(e){void 0!==t[e]&&(r[e]=t[e])}),i.spectrum.direction=Q.direction,Q=i.spectrum,K=[-1,-1],P(t.start||n,e)}var G,Y,X,J=h(),Z=e,K=[-1,-1],Q=r.spectrum,tt=[],et={};if(Z.noUiSlider)throw new Error("Slider was already initialized.");return G=b(r.dir,r.ort,Z),Y=y(r.handles,r.dir,G),m(r.connect,Z,Y),r.pips&&C(r.pips),r.tooltips&&_(),X={destroy:B,steps:$,on:W,off:U,get:H,set:P,updateOptions:V,options:d,target:Z,pips:C},O(r.events),X}function B(t,e){if(!t.nodeName)throw new Error("noUiSlider.create requires a single element.");var n=q(e,t),r=H(t,n,e);return r.set(n.start),t.noUiSlider=r,r}S.prototype.getMargin=function(t){return 2===this.xPct.length&&p(this.xVal,t)},S.prototype.toStepping=function(t){return t=y(this.xVal,this.xPct,t),this.direction&&(t=100-t),t},S.prototype.fromStepping=function(t){return this.direction&&(t=100-t),b(this.xVal,this.xPct,t)},S.prototype.getStep=function(t){return this.direction&&(t=100-t),t=x(this.xPct,this.xSteps,this.snap,t),this.direction&&(t=100-t),t},S.prototype.getApplicableStep=function(t){var e=m(t,this.xPct),n=100===t?2:1;return[this.xNumSteps[e-2],this.xVal[e-n],this.xNumSteps[e-n]]},S.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var $={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};return{create:B}}),!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=!!t&&"length"in t&&t.length,n=ot.type(t);return"function"!==n&&!ot.isWindow(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function r(t,e,n){if(ot.isFunction(e))return ot.grep(t,function(t,r){return!!e.call(t,r,t)!==n});if(e.nodeType)return ot.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(gt.test(e))return ot.filter(e,t,n);e=ot.filter(e,t)}return ot.grep(t,function(t){return Q.call(e,t)>-1!==n})}function i(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e={};return ot.each(t.match(_t)||[],function(t,n){e[n]=!0}),e}function a(){X.removeEventListener("DOMContentLoaded",a),t.removeEventListener("load",a),ot.ready()}function s(){this.expando=ot.expando+s.uid++}function l(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Dt,"-$&").toLowerCase(),n=t.getAttribute(r),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:At.test(n)?ot.parseJSON(n):n)}catch(i){}kt.set(t,e,n)}else n=void 0;return n}function u(t,e,n,r){var i,o=1,a=20,s=r?function(){return r.cur()}:function(){return ot.css(t,e,"")},l=s(),u=n&&n[3]||(ot.cssNumber[e]?"":"px"),c=(ot.cssNumber[e]||"px"!==u&&+l)&&Mt.exec(ot.css(t,e));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do o=o||".5",c/=o,ot.style(t,e,c+u);while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(c=+c||+l||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=u,r.start=c,r.end=i)),i}function c(t,e){var n="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e||"*"):"undefined"!=typeof t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&ot.nodeName(t,e)?ot.merge([t],n):n}function f(t,e){for(var n=0,r=t.length;r>n;n++)Ct.set(t[n],"globalEval",!e||Ct.get(e[n],"globalEval"))}function h(t,e,n,r,i){for(var o,a,s,l,u,h,d=e.createDocumentFragment(),p=[],g=0,v=t.length;v>g;g++)if(o=t[g],o||0===o)if("object"===ot.type(o))ot.merge(p,o.nodeType?[o]:o);else if(Ft.test(o)){for(a=a||d.appendChild(e.createElement("div")),s=(Rt.exec(o)||["",""])[1].toLowerCase(),l=Ot[s]||Ot._default,a.innerHTML=l[1]+ot.htmlPrefilter(o)+l[2],h=l[0];h--;)a=a.lastChild;ot.merge(p,a.childNodes),a=d.firstChild,a.textContent=""}else p.push(e.createTextNode(o));for(d.textContent="",g=0;o=p[g++];)if(r&&ot.inArray(o,r)>-1)i&&i.push(o);else if(u=ot.contains(o.ownerDocument,o),a=c(d.appendChild(o),"script"),u&&f(a),n)for(h=0;o=a[h++];)It.test(o.type||"")&&n.push(o);return d}function d(){return!0}function p(){return!1}function g(){try{return X.activeElement}catch(t){}}function v(t,e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=void 0);for(s in e)v(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),i===!1)i=p;else if(!i)return t;return 1===o&&(a=i,i=function(t){return ot().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=ot.guid++)),t.each(function(){ot.event.add(this,e,i,r,n)})}function m(t,e){return ot.nodeName(t,"table")&&ot.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t;
}function y(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function b(t){var e=Wt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function x(t,e){var n,r,i,o,a,s,l,u;if(1===e.nodeType){if(Ct.hasData(t)&&(o=Ct.access(t),a=Ct.set(e,o),u=o.events)){delete a.handle,a.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)ot.event.add(e,i,u[i][n])}kt.hasData(t)&&(s=kt.access(t),l=ot.extend({},s),kt.set(e,l))}}function _(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Lt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function w(t,e,n,r){e=Z.apply([],e);var i,o,a,s,l,u,f=0,d=t.length,p=d-1,g=e[0],v=ot.isFunction(g);if(v||d>1&&"string"==typeof g&&!rt.checkClone&&$t.test(g))return t.each(function(i){var o=t.eq(i);v&&(e[0]=g.call(this,i,o.html())),w(o,e,n,r)});if(d&&(i=h(e,t[0].ownerDocument,!1,t,r),o=i.firstChild,1===i.childNodes.length&&(i=o),o||r)){for(a=ot.map(c(i,"script"),y),s=a.length;d>f;f++)l=i,f!==p&&(l=ot.clone(l,!0,!0),s&&ot.merge(a,c(l,"script"))),n.call(t[f],l,f);if(s)for(u=a[a.length-1].ownerDocument,ot.map(a,b),f=0;s>f;f++)l=a[f],It.test(l.type||"")&&!Ct.access(l,"globalEval")&&ot.contains(u,l)&&(l.src?ot._evalUrl&&ot._evalUrl(l.src):ot.globalEval(l.textContent.replace(Ut,"")))}return t}function S(t,e,n){for(var r,i=e?ot.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||ot.cleanData(c(r)),r.parentNode&&(n&&ot.contains(r.ownerDocument,r)&&f(c(r,"script")),r.parentNode.removeChild(r));return t}function T(t,e){var n=ot(e.createElement(t)).appendTo(e.body),r=ot.css(n[0],"display");return n.detach(),r}function C(t){var e=X,n=Gt[t];return n||(n=T(t,e),"none"!==n&&n||(Vt=(Vt||ot("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Vt[0].contentDocument,e.write(),e.close(),n=T(t,e),Vt.detach()),Gt[t]=n),n}function k(t,e,n){var r,i,o,a,s=t.style;return n=n||Jt(t),a=n?n.getPropertyValue(e)||n[e]:void 0,""!==a&&void 0!==a||ot.contains(t.ownerDocument,t)||(a=ot.style(t,e)),n&&!rt.pixelMarginRight()&&Xt.test(a)&&Yt.test(e)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o),void 0!==a?a+"":a}function A(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function D(t){if(t in re)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=ne.length;n--;)if(t=ne[n]+e,t in re)return t}function E(t,e,n){var r=Mt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function M(t,e,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ot.css(t,n+jt[o],!0,i)),r?("content"===n&&(a-=ot.css(t,"padding"+jt[o],!0,i)),"margin"!==n&&(a-=ot.css(t,"border"+jt[o]+"Width",!0,i))):(a+=ot.css(t,"padding"+jt[o],!0,i),"padding"!==n&&(a+=ot.css(t,"border"+jt[o]+"Width",!0,i)));return a}function j(e,n,r){var i=!0,o="width"===n?e.offsetWidth:e.offsetHeight,a=Jt(e),s="border-box"===ot.css(e,"boxSizing",!1,a);if(X.msFullscreenElement&&t.top!==t&&e.getClientRects().length&&(o=Math.round(100*e.getBoundingClientRect()[n])),0>=o||null==o){if(o=k(e,n,a),(0>o||null==o)&&(o=e.style[n]),Xt.test(o))return o;i=s&&(rt.boxSizingReliable()||o===e.style[n]),o=parseFloat(o)||0}return o+M(e,n,r||(s?"border":"content"),i,a)+"px"}function N(t,e){for(var n,r,i,o=[],a=0,s=t.length;s>a;a++)r=t[a],r.style&&(o[a]=Ct.get(r,"olddisplay"),n=r.style.display,e?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Nt(r)&&(o[a]=Ct.access(r,"olddisplay",C(r.nodeName)))):(i=Nt(r),"none"===n&&i||Ct.set(r,"olddisplay",i?n:ot.css(r,"display"))));for(a=0;s>a;a++)r=t[a],r.style&&(e&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=e?o[a]||"":"none"));return t}function L(t,e,n,r,i){return new L.prototype.init(t,e,n,r,i)}function R(){return t.setTimeout(function(){ie=void 0}),ie=ot.now()}function I(t,e){var n,r=0,i={height:t};for(e=e?1:0;4>r;r+=2-e)n=jt[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function O(t,e,n){for(var r,i=(P.tweeners[e]||[]).concat(P.tweeners["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,e,t))return r}function F(t,e,n){var r,i,o,a,s,l,u,c,f=this,h={},d=t.style,p=t.nodeType&&Nt(t),g=Ct.get(t,"fxshow");n.queue||(s=ot._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,ot.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],u=ot.css(t,"display"),c="none"===u?Ct.get(t,"olddisplay")||C(t.nodeName):u,"inline"===c&&"none"===ot.css(t,"float")&&(d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(r in e)if(i=e[r],ae.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!g||void 0===g[r])continue;p=!0}h[r]=g&&g[r]||ot.style(t,r)}else u=void 0;if(ot.isEmptyObject(h))"inline"===("none"===u?C(t.nodeName):u)&&(d.display=u);else{g?"hidden"in g&&(p=g.hidden):g=Ct.access(t,"fxshow",{}),o&&(g.hidden=!p),p?ot(t).show():f.done(function(){ot(t).hide()}),f.done(function(){var e;Ct.remove(t,"fxshow");for(e in h)ot.style(t,e,h[e])});for(r in h)a=O(p?g[r]:0,r,f),r in g||(g[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function z(t,e){var n,r,i,o,a;for(n in t)if(r=ot.camelCase(n),i=e[r],o=t[n],ot.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),a=ot.cssHooks[r],a&&"expand"in a){o=a.expand(o),delete t[r];for(n in o)n in t||(t[n]=o[n],e[n]=i)}else e[r]=i}function P(t,e,n){var r,i,o=0,a=P.prefilters.length,s=ot.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var e=ie||R(),n=Math.max(0,u.startTime+u.duration-e),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),1>o&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:ot.extend({},e),opts:ot.extend(!0,{specialEasing:{},easing:ot.easing._default},n),originalProperties:e,originalOptions:n,startTime:ie||R(),duration:n.duration,tweens:[],createTween:function(e,n){var r=ot.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(r),r},stop:function(e){var n=0,r=e?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return e?(s.notifyWith(t,[u,1,0]),s.resolveWith(t,[u,e])):s.rejectWith(t,[u,e]),this}}),c=u.props;for(z(c,u.opts.specialEasing);a>o;o++)if(r=P.prefilters[o].call(u,t,c,u.opts))return ot.isFunction(r.stop)&&(ot._queueHooks(u.elem,u.opts.queue).stop=ot.proxy(r.stop,r)),r;return ot.map(c,O,u),ot.isFunction(u.opts.start)&&u.opts.start.call(t,u),ot.fx.timer(ot.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function q(t){return t.getAttribute&&t.getAttribute("class")||""}function H(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(_t)||[];if(ot.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function B(t,e,n,r){function i(s){var l;return o[s]=!0,ot.each(t[s]||[],function(t,s){var u=s(e,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=t===ke;return i(e.dataTypes[0])||!o["*"]&&i("*")}function $(t,e){var n,r,i=ot.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&ot.extend(!0,t,r),t}function W(t,e,n){for(var r,i,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||t.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function U(t,e,n,r){var i,o,a,s,l,u={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[i]:u[i]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function V(t,e,n,r){var i;if(ot.isArray(e))ot.each(e,function(e,i){n||Me.test(t)?r(t,i):V(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)});else if(n||"object"!==ot.type(e))r(t,e);else for(i in e)V(t+"["+i+"]",e[i],n,r)}function G(t){return ot.isWindow(t)?t:9===t.nodeType&&t.defaultView}var Y=[],X=t.document,J=Y.slice,Z=Y.concat,K=Y.push,Q=Y.indexOf,tt={},et=tt.toString,nt=tt.hasOwnProperty,rt={},it="2.2.3",ot=function(t,e){return new ot.fn.init(t,e)},at=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,st=/^-ms-/,lt=/-([\da-z])/gi,ut=function(t,e){return e.toUpperCase()};ot.fn=ot.prototype={jquery:it,constructor:ot,selector:"",length:0,toArray:function(){return J.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:J.call(this)},pushStack:function(t){var e=ot.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t){return ot.each(this,t)},map:function(t){return this.pushStack(ot.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(J.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:Y.sort,splice:Y.splice},ot.extend=ot.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||ot.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],r=t[e],a!==r&&(u&&r&&(ot.isPlainObject(r)||(i=ot.isArray(r)))?(i?(i=!1,o=n&&ot.isArray(n)?n:[]):o=n&&ot.isPlainObject(n)?n:{},a[e]=ot.extend(u,o,r)):void 0!==r&&(a[e]=r));return a},ot.extend({expando:"jQuery"+(it+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ot.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){var e=t&&t.toString();return!ot.isArray(t)&&e-parseFloat(e)+1>=0},isPlainObject:function(t){var e;if("object"!==ot.type(t)||t.nodeType||ot.isWindow(t))return!1;if(t.constructor&&!nt.call(t,"constructor")&&!nt.call(t.constructor.prototype||{},"isPrototypeOf"))return!1;for(e in t);return void 0===e||nt.call(t,e)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?tt[et.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=ot.trim(t),t&&(1===t.indexOf("use strict")?(e=X.createElement("script"),e.text=t,X.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(st,"ms-").replace(lt,ut)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e){var r,i=0;if(n(t))for(r=t.length;r>i&&e.call(t[i],i,t[i])!==!1;i++);else for(i in t)if(e.call(t[i],i,t[i])===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(at,"")},makeArray:function(t,e){var r=e||[];return null!=t&&(n(Object(t))?ot.merge(r,"string"==typeof t?[t]:t):K.call(r,t)),r},inArray:function(t,e,n){return null==e?-1:Q.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;n>r;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r,i=[],o=0,a=t.length,s=!n;a>o;o++)r=!e(t[o],o),r!==s&&i.push(t[o]);return i},map:function(t,e,r){var i,o,a=0,s=[];if(n(t))for(i=t.length;i>a;a++)o=e(t[a],a,r),null!=o&&s.push(o);else for(a in t)o=e(t[a],a,r),null!=o&&s.push(o);return Z.apply([],s)},guid:1,proxy:function(t,e){var n,r,i;return"string"==typeof e&&(n=t[e],e=t,t=n),ot.isFunction(t)?(r=J.call(arguments,2),i=function(){return t.apply(e||this,r.concat(J.call(arguments)))},i.guid=t.guid=t.guid||ot.guid++,i):void 0},now:Date.now,support:rt}),"function"==typeof Symbol&&(ot.fn[Symbol.iterator]=Y[Symbol.iterator]),ot.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){tt["[object "+e+"]"]=e.toLowerCase()});var ct=function(t){function e(t,e,n,r){var i,o,a,s,l,u,f,d,p=e&&e.ownerDocument,g=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==g&&9!==g&&11!==g)return n;if(!r&&((e?e.ownerDocument||e:q)!==N&&j(e),e=e||N,R)){if(11!==g&&(u=mt.exec(t)))if(i=u[1]){if(9===g){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(p&&(a=p.getElementById(i))&&z(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return K.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&_.getElementsByClassName&&e.getElementsByClassName)return K.apply(n,e.getElementsByClassName(i)),n}if(_.qsa&&!U[t+" "]&&(!I||!I.test(t))){if(1!==g)p=e,d=t;else if("object"!==e.nodeName.toLowerCase()){for((s=e.getAttribute("id"))?s=s.replace(bt,"\\$&"):e.setAttribute("id",s=P),f=C(t),o=f.length,l=ht.test(s)?"#"+s:"[id='"+s+"']";o--;)f[o]=l+" "+h(f[o]);d=f.join(","),p=yt.test(t)&&c(e.parentNode)||e}if(d)try{return K.apply(n,p.querySelectorAll(d)),n}catch(v){}finally{s===P&&e.removeAttribute("id")}}}return A(t.replace(st,"$1"),e,n,r)}function n(){function t(n,r){return e.push(n+" ")>w.cacheLength&&delete t[e.shift()],t[n+" "]=r}var e=[];return t}function r(t){return t[P]=!0,t}function i(t){var e=N.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),r=n.length;r--;)w.attrHandle[n[r]]=e}function a(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||G)-(~t.sourceIndex||G);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return r(function(e){return e=+e,r(function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function f(){}function h(t){for(var e=0,n=t.length,r="";n>e;e++)r+=t[e].value;return r}function d(t,e,n){var r=e.dir,i=n&&"parentNode"===r,o=B++;return e.first?function(e,n,o){for(;e=e[r];)if(1===e.nodeType||i)return t(e,n,o)}:function(e,n,a){var s,l,u,c=[H,o];if(a){for(;e=e[r];)if((1===e.nodeType||i)&&t(e,n,a))return!0}else for(;e=e[r];)if(1===e.nodeType||i){if(u=e[P]||(e[P]={}),l=u[e.uniqueID]||(u[e.uniqueID]={}),(s=l[r])&&s[0]===H&&s[1]===o)return c[2]=s[2];if(l[r]=c,c[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function g(t,n,r){for(var i=0,o=n.length;o>i;i++)e(t,n[i],r);return r}function v(t,e,n,r,i){for(var o,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),u&&e.push(s)));return a}function m(t,e,n,i,o,a){return i&&!i[P]&&(i=m(i)),o&&!o[P]&&(o=m(o,a)),r(function(r,a,s,l){var u,c,f,h=[],d=[],p=a.length,m=r||g(e||"*",s.nodeType?[s]:s,[]),y=!t||!r&&e?m:v(m,h,t,s,l),b=n?o||(r?t:p||i)?[]:a:y;if(n&&n(y,b,s,l),i)for(u=v(b,d),i(u,[],s,l),c=u.length;c--;)(f=u[c])&&(b[d[c]]=!(y[d[c]]=f));if(r){if(o||t){if(o){for(u=[],c=b.length;c--;)(f=b[c])&&u.push(y[c]=f);o(null,b=[],u,l)}for(c=b.length;c--;)(f=b[c])&&(u=o?tt(r,f):h[c])>-1&&(r[u]=!(a[u]=f))}}else b=v(b===a?b.splice(p,b.length):b),o?o(null,a,b,l):K.apply(a,b)})}function y(t){for(var e,n,r,i=t.length,o=w.relative[t[0].type],a=o||w.relative[" "],s=o?1:0,l=d(function(t){return t===e},a,!0),u=d(function(t){return tt(e,t)>-1},a,!0),c=[function(t,n,r){var i=!o&&(r||n!==D)||((e=n).nodeType?l(t,n,r):u(t,n,r));return e=null,i}];i>s;s++)if(n=w.relative[t[s].type])c=[d(p(c),n)];else{if(n=w.filter[t[s].type].apply(null,t[s].matches),n[P]){for(r=++s;i>r&&!w.relative[t[r].type];r++);return m(s>1&&p(c),s>1&&h(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(st,"$1"),n,r>s&&y(t.slice(s,r)),i>r&&y(t=t.slice(r)),i>r&&h(t))}c.push(n)}return p(c)}function b(t,n){var i=n.length>0,o=t.length>0,a=function(r,a,s,l,u){var c,f,h,d=0,p="0",g=r&&[],m=[],y=D,b=r||o&&w.find.TAG("*",u),x=H+=null==y?1:Math.random()||.1,_=b.length;for(u&&(D=a===N||a||u);p!==_&&null!=(c=b[p]);p++){if(o&&c){for(f=0,a||c.ownerDocument===N||(j(c),s=!R);h=t[f++];)if(h(c,a||N,s)){l.push(c);break}u&&(H=x)}i&&((c=!h&&c)&&d--,r&&g.push(c))}if(d+=p,i&&p!==d){for(f=0;h=n[f++];)h(g,m,a,s);if(r){if(d>0)for(;p--;)g[p]||m[p]||(m[p]=J.call(l));m=v(m)}K.apply(l,m),u&&!r&&m.length>0&&d+n.length>1&&e.uniqueSort(l)}return u&&(H=x,D=y),g};return i?r(a):a}var x,_,w,S,T,C,k,A,D,E,M,j,N,L,R,I,O,F,z,P="sizzle"+1*new Date,q=t.document,H=0,B=0,$=n(),W=n(),U=n(),V=function(t,e){return t===e&&(M=!0),0},G=1<<31,Y={}.hasOwnProperty,X=[],J=X.pop,Z=X.push,K=X.push,Q=X.slice,tt=function(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",rt="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",it="\\["+nt+"*("+rt+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",ot=":("+rt+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+it+")*)|.*)\\)|)",at=new RegExp(nt+"+","g"),st=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),lt=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ct=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),ft=new RegExp(ot),ht=new RegExp("^"+rt+"$"),dt={ID:new RegExp("^#("+rt+")"),CLASS:new RegExp("^\\.("+rt+")"),TAG:new RegExp("^("+rt+"|[*])"),ATTR:new RegExp("^"+it),PSEUDO:new RegExp("^"+ot),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},pt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,mt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,bt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),_t=function(t,e,n){var r="0x"+e-65536;return r!==r||n?e:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},wt=function(){j()};try{K.apply(X=Q.call(q.childNodes),q.childNodes),X[q.childNodes.length].nodeType}catch(St){K={apply:X.length?function(t,e){Z.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}_=e.support={},T=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},j=e.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:q;return r!==N&&9===r.nodeType&&r.documentElement?(N=r,L=N.documentElement,R=!T(N),(n=N.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",wt,!1):n.attachEvent&&n.attachEvent("onunload",wt)),_.attributes=i(function(t){return t.className="i",!t.getAttribute("className")}),_.getElementsByTagName=i(function(t){return t.appendChild(N.createComment("")),!t.getElementsByTagName("*").length}),_.getElementsByClassName=vt.test(N.getElementsByClassName),_.getById=i(function(t){return L.appendChild(t).id=P,!N.getElementsByName||!N.getElementsByName(P).length}),_.getById?(w.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&R){var n=e.getElementById(t);return n?[n]:[]}},w.filter.ID=function(t){var e=t.replace(xt,_t);return function(t){return t.getAttribute("id")===e}}):(delete w.find.ID,w.filter.ID=function(t){var e=t.replace(xt,_t);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),w.find.TAG=_.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):_.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},w.find.CLASS=_.getElementsByClassName&&function(t,e){return"undefined"!=typeof e.getElementsByClassName&&R?e.getElementsByClassName(t):void 0},O=[],I=[],(_.qsa=vt.test(N.querySelectorAll))&&(i(function(t){L.appendChild(t).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&I.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+P+"-]").length||I.push("~="),t.querySelectorAll(":checked").length||I.push(":checked"),t.querySelectorAll("a#"+P+"+*").length||I.push(".#.+[+~]")}),i(function(t){var e=N.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(_.matchesSelector=vt.test(F=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&i(function(t){_.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),O.push("!=",ot)}),I=I.length&&new RegExp(I.join("|")),O=O.length&&new RegExp(O.join("|")),e=vt.test(L.compareDocumentPosition),z=e||vt.test(L.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return M=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!_.sortDetached&&e.compareDocumentPosition(t)===n?t===N||t.ownerDocument===q&&z(q,t)?-1:e===N||e.ownerDocument===q&&z(q,e)?1:E?tt(E,t)-tt(E,e):0:4&n?-1:1)}:function(t,e){if(t===e)return M=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],l=[e];if(!i||!o)return t===N?-1:e===N?1:i?-1:o?1:E?tt(E,t)-tt(E,e):0;if(i===o)return a(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)l.unshift(n);for(;s[r]===l[r];)r++;return r?a(s[r],l[r]):s[r]===q?-1:l[r]===q?1:0},N):N},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==N&&j(t),n=n.replace(ct,"='$1']"),_.matchesSelector&&R&&!U[n+" "]&&(!O||!O.test(n))&&(!I||!I.test(n)))try{var r=F.call(t,n);if(r||_.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(i){}return e(n,N,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==N&&j(t),z(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==N&&j(t);var n=w.attrHandle[e.toLowerCase()],r=n&&Y.call(w.attrHandle,e.toLowerCase())?n(t,e,!R):void 0;return void 0!==r?r:_.attributes||!R?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],r=0,i=0;if(M=!_.detectDuplicates,E=!_.sortStable&&t.slice(0),t.sort(V),M){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return E=null,t},S=e.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=S(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=S(e);return n},w=e.selectors={cacheLength:50,createPseudo:r,match:dt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,_t),t[3]=(t[3]||t[4]||t[5]||"").replace(xt,_t),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return dt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&ft.test(n)&&(e=C(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,_t).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=$[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&$(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,r){return function(i){var o=e.attr(i,t);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(at," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,l){var u,c,f,h,d,p,g=o!==a?"nextSibling":"previousSibling",v=e.parentNode,m=s&&e.nodeName.toLowerCase(),y=!l&&!s,b=!1;if(v){if(o){for(;g;){for(h=e;h=h[g];)if(s?h.nodeName.toLowerCase()===m:1===h.nodeType)return!1;p=g="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?v.firstChild:v.lastChild],a&&y){for(h=v,f=h[P]||(h[P]={}),c=f[h.uniqueID]||(f[h.uniqueID]={}),u=c[t]||[],d=u[0]===H&&u[1],b=d&&u[2],h=d&&v.childNodes[d];h=++d&&h&&h[g]||(b=d=0)||p.pop();)if(1===h.nodeType&&++b&&h===e){c[t]=[H,d,b];break}}else if(y&&(h=e,f=h[P]||(h[P]={}),c=f[h.uniqueID]||(f[h.uniqueID]={}),u=c[t]||[],d=u[0]===H&&u[1],b=d),b===!1)for(;(h=++d&&h&&h[g]||(b=d=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==m:1!==h.nodeType)||!++b||(y&&(f=h[P]||(h[P]={}),c=f[h.uniqueID]||(f[h.uniqueID]={}),c[t]=[H,b]),h!==e)););return b-=i,b===r||b%r===0&&b/r>=0}}},PSEUDO:function(t,n){var i,o=w.pseudos[t]||w.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[P]?o(n):o.length>1?(i=[t,t,"",n],w.setFilters.hasOwnProperty(t.toLowerCase())?r(function(t,e){for(var r,i=o(t,n),a=i.length;a--;)r=tt(t,i[a]),t[r]=!(e[r]=i[a])}):function(t){return o(t,0,i)}):o}},pseudos:{not:r(function(t){var e=[],n=[],i=k(t.replace(st,"$1"));return i[P]?r(function(t,e,n,r){for(var o,a=i(t,null,r,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,r,o){return e[0]=t,i(e,null,o,n),e[0]=null,!n.pop()}}),has:r(function(t){return function(n){return e(t,n).length>0}}),contains:r(function(t){return t=t.replace(xt,_t),function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:r(function(t){return ht.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,_t).toLowerCase(),function(e){var n;do if(n=R?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===L},focus:function(t){return t===N.activeElement&&(!N.hasFocus||N.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!w.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return pt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var r=0>n?n+e:n;--r>=0;)t.push(r);return t}),gt:u(function(t,e,n){for(var r=0>n?n+e:n;++r<e;)t.push(r);return t})}},w.pseudos.nth=w.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})w.pseudos[x]=l(x);return f.prototype=w.filters=w.pseudos,w.setFilters=new f,C=e.tokenize=function(t,n){var r,i,o,a,s,l,u,c=W[t+" "];if(c)return n?0:c.slice(0);for(s=t,l=[],u=w.preFilter;s;){r&&!(i=lt.exec(s))||(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ut.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(st," ")}),s=s.slice(r.length));for(a in w.filter)!(i=dt[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?e.error(t):W(t,l).slice(0)},k=e.compile=function(t,e){var n,r=[],i=[],o=U[t+" "];if(!o){for(e||(e=C(t)),n=e.length;n--;)o=y(e[n]),o[P]?r.push(o):i.push(o);o=U(t,b(i,r)),o.selector=t}return o},A=e.select=function(t,e,n,r){var i,o,a,s,l,u="function"==typeof t&&t,f=!r&&C(t=u.selector||t);if(n=n||[],1===f.length){if(o=f[0]=f[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&_.getById&&9===e.nodeType&&R&&w.relative[o[1].type]){if(e=(w.find.ID(a.matches[0].replace(xt,_t),e)||[])[0],!e)return n;u&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=dt.needsContext.test(t)?0:o.length;i--&&(a=o[i],!w.relative[s=a.type]);)if((l=w.find[s])&&(r=l(a.matches[0].replace(xt,_t),yt.test(o[0].type)&&c(e.parentNode)||e))){if(o.splice(i,1),t=r.length&&h(o),!t)return K.apply(n,r),n;break}}return(u||k(t,f))(r,e,!R,n,!e||yt.test(t)&&c(e.parentNode)||e),n},_.sortStable=P.split("").sort(V).join("")===P,_.detectDuplicates=!!M,j(),_.sortDetached=i(function(t){return 1&t.compareDocumentPosition(N.createElement("div"))}),i(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),_.attributes&&i(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),i(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var r;return n?void 0:t[e]===!0?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),e}(t);ot.find=ct,ot.expr=ct.selectors,ot.expr[":"]=ot.expr.pseudos,ot.uniqueSort=ot.unique=ct.uniqueSort,ot.text=ct.getText,ot.isXMLDoc=ct.isXML,ot.contains=ct.contains;var ft=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&ot(t).is(n))break;r.push(t)}return r},ht=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},dt=ot.expr.match.needsContext,pt=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,gt=/^.[^:#\[\.,]*$/;ot.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?ot.find.matchesSelector(r,t)?[r]:[]:ot.find.matches(t,ot.grep(e,function(t){return 1===t.nodeType}))},ot.fn.extend({find:function(t){var e,n=this.length,r=[],i=this;if("string"!=typeof t)return this.pushStack(ot(t).filter(function(){
for(e=0;n>e;e++)if(ot.contains(i[e],this))return!0}));for(e=0;n>e;e++)ot.find(t,i[e],r);return r=this.pushStack(n>1?ot.unique(r):r),r.selector=this.selector?this.selector+" "+t:t,r},filter:function(t){return this.pushStack(r(this,t||[],!1))},not:function(t){return this.pushStack(r(this,t||[],!0))},is:function(t){return!!r(this,"string"==typeof t&&dt.test(t)?ot(t):t||[],!1).length}});var vt,mt=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,yt=ot.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||vt,"string"==typeof t){if(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:mt.exec(t),!r||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof ot?e[0]:e,ot.merge(this,ot.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:X,!0)),pt.test(r[1])&&ot.isPlainObject(e))for(r in e)ot.isFunction(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return i=X.getElementById(r[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=X,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):ot.isFunction(t)?void 0!==n.ready?n.ready(t):t(ot):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),ot.makeArray(t,this))};yt.prototype=ot.fn,vt=ot(X);var bt=/^(?:parents|prev(?:Until|All))/,xt={children:!0,contents:!0,next:!0,prev:!0};ot.fn.extend({has:function(t){var e=ot(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(ot.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,r=0,i=this.length,o=[],a=dt.test(t)||"string"!=typeof t?ot(t,e||this.context):0;i>r;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ot.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?ot.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?Q.call(ot(t),this[0]):Q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(ot.uniqueSort(ot.merge(this.get(),ot(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ot.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return ft(t,"parentNode")},parentsUntil:function(t,e,n){return ft(t,"parentNode",n)},next:function(t){return i(t,"nextSibling")},prev:function(t){return i(t,"previousSibling")},nextAll:function(t){return ft(t,"nextSibling")},prevAll:function(t){return ft(t,"previousSibling")},nextUntil:function(t,e,n){return ft(t,"nextSibling",n)},prevUntil:function(t,e,n){return ft(t,"previousSibling",n)},siblings:function(t){return ht((t.parentNode||{}).firstChild,t)},children:function(t){return ht(t.firstChild)},contents:function(t){return t.contentDocument||ot.merge([],t.childNodes)}},function(t,e){ot.fn[t]=function(n,r){var i=ot.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ot.filter(r,i)),this.length>1&&(xt[t]||ot.uniqueSort(i),bt.test(t)&&i.reverse()),this.pushStack(i)}});var _t=/\S+/g;ot.Callbacks=function(t){t="string"==typeof t?o(t):ot.extend({},t);var e,n,r,i,a=[],s=[],l=-1,u=function(){for(i=t.once,r=e=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)a[l].apply(n[0],n[1])===!1&&t.stopOnFalse&&(l=a.length,n=!1);t.memory||(n=!1),e=!1,i&&(a=n?[]:"")},c={add:function(){return a&&(n&&!e&&(l=a.length-1,s.push(n)),function r(e){ot.each(e,function(e,n){ot.isFunction(n)?t.unique&&c.has(n)||a.push(n):n&&n.length&&"string"!==ot.type(n)&&r(n)})}(arguments),n&&!e&&u()),this},remove:function(){return ot.each(arguments,function(t,e){for(var n;(n=ot.inArray(e,a,n))>-1;)a.splice(n,1),l>=n&&l--}),this},has:function(t){return t?ot.inArray(t,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return i=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return i=s=[],n||(a=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=n||[],n=[t,n.slice?n.slice():n],s.push(n),e||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!r}};return c},ot.extend({Deferred:function(t){var e=[["resolve","done",ot.Callbacks("once memory"),"resolved"],["reject","fail",ot.Callbacks("once memory"),"rejected"],["notify","progress",ot.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return ot.Deferred(function(n){ot.each(e,function(e,o){var a=ot.isFunction(t[e])&&t[e];i[o[1]](function(){var t=a&&a.apply(this,arguments);t&&ot.isFunction(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===r?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?ot.extend(t,r):r}},i={};return r.pipe=r.then,ot.each(e,function(t,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,r,i=0,o=J.call(arguments),a=o.length,s=1!==a||t&&ot.isFunction(t.promise)?a:0,l=1===s?t:ot.Deferred(),u=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?J.call(arguments):i,r===e?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(e=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&ot.isFunction(o[i].promise)?o[i].promise().progress(u(i,n,e)).done(u(i,r,o)).fail(l.reject):--s;return s||l.resolveWith(r,o),l.promise()}});var wt;ot.fn.ready=function(t){return ot.ready.promise().done(t),this},ot.extend({isReady:!1,readyWait:1,holdReady:function(t){t?ot.readyWait++:ot.ready(!0)},ready:function(t){(t===!0?--ot.readyWait:ot.isReady)||(ot.isReady=!0,t!==!0&&--ot.readyWait>0||(wt.resolveWith(X,[ot]),ot.fn.triggerHandler&&(ot(X).triggerHandler("ready"),ot(X).off("ready"))))}}),ot.ready.promise=function(e){return wt||(wt=ot.Deferred(),"complete"===X.readyState||"loading"!==X.readyState&&!X.documentElement.doScroll?t.setTimeout(ot.ready):(X.addEventListener("DOMContentLoaded",a),t.addEventListener("load",a))),wt.promise(e)},ot.ready.promise();var St=function(t,e,n,r,i,o,a){var s=0,l=t.length,u=null==n;if("object"===ot.type(n)){i=!0;for(s in n)St(t,e,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,ot.isFunction(r)||(a=!0),u&&(a?(e.call(t,r),e=null):(u=e,e=function(t,e,n){return u.call(ot(t),n)})),e))for(;l>s;s++)e(t[s],n,a?r:r.call(t[s],s,e(t[s],n)));return i?t:u?e.call(t):l?e(t[0],n):o},Tt=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};s.uid=1,s.prototype={register:function(t,e){var n=e||{};return t.nodeType?t[this.expando]=n:Object.defineProperty(t,this.expando,{value:n,writable:!0,configurable:!0}),t[this.expando]},cache:function(t){if(!Tt(t))return{};var e=t[this.expando];return e||(e={},Tt(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[e]=n;else for(r in e)i[r]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][e]},access:function(t,e,n){var r;return void 0===e||e&&"string"==typeof e&&void 0===n?(r=this.get(t,e),void 0!==r?r:this.get(t,ot.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r,i,o=t[this.expando];if(void 0!==o){if(void 0===e)this.register(t);else{ot.isArray(e)?r=e.concat(e.map(ot.camelCase)):(i=ot.camelCase(e),e in o?r=[e,i]:(r=i,r=r in o?[r]:r.match(_t)||[])),n=r.length;for(;n--;)delete o[r[n]]}(void 0===e||ot.isEmptyObject(o))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!ot.isEmptyObject(e)}};var Ct=new s,kt=new s,At=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Dt=/[A-Z]/g;ot.extend({hasData:function(t){return kt.hasData(t)||Ct.hasData(t)},data:function(t,e,n){return kt.access(t,e,n)},removeData:function(t,e){kt.remove(t,e)},_data:function(t,e,n){return Ct.access(t,e,n)},_removeData:function(t,e){Ct.remove(t,e)}}),ot.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=kt.get(o),1===o.nodeType&&!Ct.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=ot.camelCase(r.slice(5)),l(o,r,i[r])));Ct.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each(function(){kt.set(this,t)}):St(this,function(e){var n,r;if(o&&void 0===e){if(n=kt.get(o,t)||kt.get(o,t.replace(Dt,"-$&").toLowerCase()),void 0!==n)return n;if(r=ot.camelCase(t),n=kt.get(o,r),void 0!==n)return n;if(n=l(o,r,void 0),void 0!==n)return n}else r=ot.camelCase(t),this.each(function(){var n=kt.get(this,r);kt.set(this,r,e),t.indexOf("-")>-1&&void 0!==n&&kt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){kt.remove(this,t)})}}),ot.extend({queue:function(t,e,n){var r;return t?(e=(e||"fx")+"queue",r=Ct.get(t,e),n&&(!r||ot.isArray(n)?r=Ct.access(t,e,ot.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=ot.queue(t,e),r=n.length,i=n.shift(),o=ot._queueHooks(t,e),a=function(){ot.dequeue(t,e)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Ct.get(t,n)||Ct.access(t,n,{empty:ot.Callbacks("once memory").add(function(){Ct.remove(t,[e+"queue",n])})})}}),ot.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?ot.queue(this[0],t):void 0===e?this:this.each(function(){var n=ot.queue(this,t,e);ot._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&ot.dequeue(this,t)})},dequeue:function(t){return this.each(function(){ot.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=ot.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=Ct.get(o[a],t+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var Et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Mt=new RegExp("^(?:([+-])=|)("+Et+")([a-z%]*)$","i"),jt=["Top","Right","Bottom","Left"],Nt=function(t,e){return t=e||t,"none"===ot.css(t,"display")||!ot.contains(t.ownerDocument,t)},Lt=/^(?:checkbox|radio)$/i,Rt=/<([\w:-]+)/,It=/^$|\/(?:java|ecma)script/i,Ot={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ot.optgroup=Ot.option,Ot.tbody=Ot.tfoot=Ot.colgroup=Ot.caption=Ot.thead,Ot.th=Ot.td;var Ft=/<|&#?\w+;/;!function(){var t=X.createDocumentFragment(),e=t.appendChild(X.createElement("div")),n=X.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),rt.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",rt.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var zt=/^key/,Pt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,qt=/^([^.]*)(?:\.(.+)|)/;ot.event={global:{},add:function(t,e,n,r,i){var o,a,s,l,u,c,f,h,d,p,g,v=Ct.get(t);if(v)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=ot.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof ot&&ot.event.triggered!==e.type?ot.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(_t)||[""],u=e.length;u--;)s=qt.exec(e[u])||[],d=g=s[1],p=(s[2]||"").split(".").sort(),d&&(f=ot.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=ot.event.special[d]||{},c=ot.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ot.expr.match.needsContext.test(i),namespace:p.join(".")},o),(h=l[d])||(h=l[d]=[],h.delegateCount=0,f.setup&&f.setup.call(t,r,p,a)!==!1||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),ot.event.global[d]=!0)},remove:function(t,e,n,r,i){var o,a,s,l,u,c,f,h,d,p,g,v=Ct.hasData(t)&&Ct.get(t);if(v&&(l=v.events)){for(e=(e||"").match(_t)||[""],u=e.length;u--;)if(s=qt.exec(e[u])||[],d=g=s[1],p=(s[2]||"").split(".").sort(),d){for(f=ot.event.special[d]||{},d=(r?f.delegateType:f.bindType)||d,h=l[d]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)c=h[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(h.splice(o,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(t,c));a&&!h.length&&(f.teardown&&f.teardown.call(t,p,v.handle)!==!1||ot.removeEvent(t,d,v.handle),delete l[d])}else for(d in l)ot.event.remove(t,d+e[u],n,r,!0);ot.isEmptyObject(l)&&Ct.remove(t,"handle events")}},dispatch:function(t){t=ot.event.fix(t);var e,n,r,i,o,a=[],s=J.call(arguments),l=(Ct.get(this,"events")||{})[t.type]||[],u=ot.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=ot.event.handlers.call(this,t,l),e=0;(i=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!t.isImmediatePropagationStopped();)t.rnamespace&&!t.rnamespace.test(o.namespace)||(t.handleObj=o,t.data=o.data,r=((ot.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s),void 0!==r&&(t.result=r)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,r,i,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&("click"!==t.type||isNaN(t.button)||t.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],n=0;s>n;n++)o=e[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?ot(i,this).index(l)>-1:ot.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,r,i,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||X,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[ot.expando])return t;var e,n,r,i=t.type,o=t,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=Pt.test(i)?this.mouseHooks:zt.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,t=new ot.Event(o),e=r.length;e--;)n=r[e],t[n]=o[n];return t.target||(t.target=X),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==g()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===g()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&ot.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return ot.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},ot.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},ot.Event=function(t,e){return this instanceof ot.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?d:p):this.type=t,e&&ot.extend(this,e),this.timeStamp=t&&t.timeStamp||ot.now(),void(this[ot.expando]=!0)):new ot.Event(t,e)},ot.Event.prototype={constructor:ot.Event,isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=d,t&&t.stopImmediatePropagation(),this.stopPropagation()}},ot.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){ot.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||ot.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),ot.fn.extend({on:function(t,e,n,r){return v(this,t,e,n,r)},one:function(t,e,n,r){return v(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,ot(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return e!==!1&&"function"!=typeof e||(n=e,e=void 0),n===!1&&(n=p),this.each(function(){ot.event.remove(this,t,n,e)})}});var Ht=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Bt=/<script|<style|<link/i,$t=/checked\s*(?:[^=]|=\s*.checked.)/i,Wt=/^true\/(.*)/,Ut=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ot.extend({htmlPrefilter:function(t){return t.replace(Ht,"<$1></$2>")},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),l=ot.contains(t.ownerDocument,t);if(!(rt.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||ot.isXMLDoc(t)))for(a=c(s),o=c(t),r=0,i=o.length;i>r;r++)_(o[r],a[r]);if(e)if(n)for(o=o||c(t),a=a||c(s),r=0,i=o.length;i>r;r++)x(o[r],a[r]);else x(t,s);return a=c(s,"script"),a.length>0&&f(a,!l&&c(t,"script")),s},cleanData:function(t){for(var e,n,r,i=ot.event.special,o=0;void 0!==(n=t[o]);o++)if(Tt(n)){if(e=n[Ct.expando]){if(e.events)for(r in e.events)i[r]?ot.event.remove(n,r):ot.removeEvent(n,r,e.handle);n[Ct.expando]=void 0}n[kt.expando]&&(n[kt.expando]=void 0)}}}),ot.fn.extend({domManip:w,detach:function(t){return S(this,t,!0)},remove:function(t){return S(this,t)},text:function(t){return St(this,function(t){return void 0===t?ot.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return w(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=m(this,t);e.appendChild(t)}})},prepend:function(){return w(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=m(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return w(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return w(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(ot.cleanData(c(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return ot.clone(this,t,e)})},html:function(t){return St(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Bt.test(t)&&!Ot[(Rt.exec(t)||["",""])[1].toLowerCase()]){t=ot.htmlPrefilter(t);try{for(;r>n;n++)e=this[n]||{},1===e.nodeType&&(ot.cleanData(c(e,!1)),e.innerHTML=t);e=0}catch(i){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return w(this,arguments,function(e){var n=this.parentNode;ot.inArray(this,t)<0&&(ot.cleanData(c(this)),n&&n.replaceChild(e,this))},t)}}),ot.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){ot.fn[t]=function(t){for(var n,r=[],i=ot(t),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),ot(i[a])[e](n),K.apply(r,n.get());return this.pushStack(r)}});var Vt,Gt={HTML:"block",BODY:"block"},Yt=/^margin/,Xt=new RegExp("^("+Et+")(?!px)[a-z%]+$","i"),Jt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},Zt=function(t,e,n,r){var i,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];i=n.apply(t,r||[]);for(o in e)t.style[o]=a[o];return i},Kt=X.documentElement;!function(){function e(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Kt.appendChild(a);var e=t.getComputedStyle(s);n="1%"!==e.top,o="2px"===e.marginLeft,r="4px"===e.width,s.style.marginRight="50%",i="4px"===e.marginRight,Kt.removeChild(a)}var n,r,i,o,a=X.createElement("div"),s=X.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",rt.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),ot.extend(rt,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==r&&e(),r},pixelMarginRight:function(){return null==r&&e(),i},reliableMarginLeft:function(){return null==r&&e(),o},reliableMarginRight:function(){var e,n=s.appendChild(X.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Kt.appendChild(a),e=!parseFloat(t.getComputedStyle(n).marginRight),Kt.removeChild(a),s.removeChild(n),e}}))}();var Qt=/^(none|table(?!-c[ea]).+)/,te={position:"absolute",visibility:"hidden",display:"block"},ee={letterSpacing:"0",fontWeight:"400"},ne=["Webkit","O","Moz","ms"],re=X.createElement("div").style;ot.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=k(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=ot.camelCase(e),l=t.style;return e=ot.cssProps[s]||(ot.cssProps[s]=D(s)||s),a=ot.cssHooks[e]||ot.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e]:(o=typeof n,"string"===o&&(i=Mt.exec(n))&&i[1]&&(n=u(t,e,i),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=i&&i[3]||(ot.cssNumber[s]?"":"px")),rt.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(l[e]=n))))}},css:function(t,e,n,r){var i,o,a,s=ot.camelCase(e);return e=ot.cssProps[s]||(ot.cssProps[s]=D(s)||s),a=ot.cssHooks[e]||ot.cssHooks[s],a&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=k(t,e,r)),"normal"===i&&e in ee&&(i=ee[e]),""===n||n?(o=parseFloat(i),n===!0||isFinite(o)?o||0:i):i}}),ot.each(["height","width"],function(t,e){ot.cssHooks[e]={get:function(t,n,r){return n?Qt.test(ot.css(t,"display"))&&0===t.offsetWidth?Zt(t,te,function(){return j(t,e,r)}):j(t,e,r):void 0},set:function(t,n,r){var i,o=r&&Jt(t),a=r&&M(t,e,r,"border-box"===ot.css(t,"boxSizing",!1,o),o);return a&&(i=Mt.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=ot.css(t,e)),E(t,n,a)}}}),ot.cssHooks.marginLeft=A(rt.reliableMarginLeft,function(t,e){return e?(parseFloat(k(t,"marginLeft"))||t.getBoundingClientRect().left-Zt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px":void 0}),ot.cssHooks.marginRight=A(rt.reliableMarginRight,function(t,e){return e?Zt(t,{display:"inline-block"},k,[t,"marginRight"]):void 0}),ot.each({margin:"",padding:"",border:"Width"},function(t,e){ot.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[t+jt[r]+e]=o[r]||o[r-2]||o[0];return i}},Yt.test(t)||(ot.cssHooks[t+e].set=E)}),ot.fn.extend({css:function(t,e){return St(this,function(t,e,n){var r,i,o={},a=0;if(ot.isArray(e)){for(r=Jt(t),i=e.length;i>a;a++)o[e[a]]=ot.css(t,e[a],!1,r);return o}return void 0!==n?ot.style(t,e,n):ot.css(t,e)},t,e,arguments.length>1)},show:function(){return N(this,!0)},hide:function(){return N(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Nt(this)?ot(this).show():ot(this).hide()})}}),ot.Tween=L,L.prototype={constructor:L,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||ot.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ot.cssNumber[n]?"":"px")},cur:function(){var t=L.propHooks[this.prop];return t&&t.get?t.get(this):L.propHooks._default.get(this)},run:function(t){var e,n=L.propHooks[this.prop];return this.options.duration?this.pos=e=ot.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=ot.css(t.elem,t.prop,""),e&&"auto"!==e?e:0)},set:function(t){ot.fx.step[t.prop]?ot.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[ot.cssProps[t.prop]]&&!ot.cssHooks[t.prop]?t.elem[t.prop]=t.now:ot.style(t.elem,t.prop,t.now+t.unit)}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ot.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},ot.fx=L.prototype.init,ot.fx.step={};var ie,oe,ae=/^(?:toggle|show|hide)$/,se=/queueHooks$/;ot.Animation=ot.extend(P,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return u(n.elem,t,Mt.exec(e),n),n}]},tweener:function(t,e){ot.isFunction(t)?(e=t,t=["*"]):t=t.match(_t);for(var n,r=0,i=t.length;i>r;r++)n=t[r],P.tweeners[n]=P.tweeners[n]||[],P.tweeners[n].unshift(e)},prefilters:[F],prefilter:function(t,e){e?P.prefilters.unshift(t):P.prefilters.push(t)}}),ot.speed=function(t,e,n){var r=t&&"object"==typeof t?ot.extend({},t):{complete:n||!n&&e||ot.isFunction(t)&&t,duration:t,easing:n&&e||e&&!ot.isFunction(e)&&e};return r.duration=ot.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ot.fx.speeds?ot.fx.speeds[r.duration]:ot.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){ot.isFunction(r.old)&&r.old.call(this),r.queue&&ot.dequeue(this,r.queue)},r},ot.fn.extend({fadeTo:function(t,e,n,r){return this.filter(Nt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=ot.isEmptyObject(t),o=ot.speed(e,n,r),a=function(){var e=P(this,ot.extend({},t),o);(i||Ct.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,i=null!=t&&t+"queueHooks",o=ot.timers,a=Ct.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&se.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||ot.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=Ct.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=ot.timers,a=r?r.length:0;for(n.finish=!0,ot.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish})}}),ot.each(["toggle","show","hide"],function(t,e){var n=ot.fn[e];ot.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,r,i)}}),ot.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){ot.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}}),ot.timers=[],ot.fx.tick=function(){var t,e=0,n=ot.timers;for(ie=ot.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||ot.fx.stop(),ie=void 0},ot.fx.timer=function(t){ot.timers.push(t),t()?ot.fx.start():ot.timers.pop()},ot.fx.interval=13,ot.fx.start=function(){oe||(oe=t.setInterval(ot.fx.tick,ot.fx.interval))},ot.fx.stop=function(){t.clearInterval(oe),oe=null},ot.fx.speeds={slow:600,fast:200,_default:400},ot.fn.delay=function(e,n){return e=ot.fx?ot.fx.speeds[e]||e:e,n=n||"fx",this.queue(n,function(n,r){var i=t.setTimeout(n,e);r.stop=function(){t.clearTimeout(i)}})},function(){var t=X.createElement("input"),e=X.createElement("select"),n=e.appendChild(X.createElement("option"));t.type="checkbox",rt.checkOn=""!==t.value,rt.optSelected=n.selected,e.disabled=!0,rt.optDisabled=!n.disabled,t=X.createElement("input"),t.value="t",t.type="radio",rt.radioValue="t"===t.value}();var le,ue=ot.expr.attrHandle;ot.fn.extend({attr:function(t,e){return St(this,ot.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){ot.removeAttr(this,t)})}}),ot.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof t.getAttribute?ot.prop(t,e,n):(1===o&&ot.isXMLDoc(t)||(e=e.toLowerCase(),i=ot.attrHooks[e]||(ot.expr.match.bool.test(e)?le:void 0)),void 0!==n?null===n?void ot.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=ot.find.attr(t,e),null==r?void 0:r))},attrHooks:{type:{set:function(t,e){if(!rt.radioValue&&"radio"===e&&ot.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r,i=0,o=e&&e.match(_t);if(o&&1===t.nodeType)for(;n=o[i++];)r=ot.propFix[n]||n,ot.expr.match.bool.test(n)&&(t[r]=!1),t.removeAttribute(n)}}),le={set:function(t,e,n){return e===!1?ot.removeAttr(t,n):t.setAttribute(n,n),n}},ot.each(ot.expr.match.bool.source.match(/\w+/g),function(t,e){var n=ue[e]||ot.find.attr;ue[e]=function(t,e,r){var i,o;return r||(o=ue[e],ue[e]=i,i=null!=n(t,e,r)?e.toLowerCase():null,ue[e]=o),i}});var ce=/^(?:input|select|textarea|button)$/i,fe=/^(?:a|area)$/i;ot.fn.extend({prop:function(t,e){return St(this,ot.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[ot.propFix[t]||t]})}}),ot.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&ot.isXMLDoc(t)||(e=ot.propFix[e]||e,i=ot.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=ot.find.attr(t,"tabindex");return e?parseInt(e,10):ce.test(t.nodeName)||fe.test(t.nodeName)&&t.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),rt.optSelected||(ot.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ot.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ot.propFix[this.toLowerCase()]=this});var he=/[\t\r\n\f]/g;ot.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,l=0;if(ot.isFunction(t))return this.each(function(e){ot(this).addClass(t.call(this,e,q(this)))});if("string"==typeof t&&t)for(e=t.match(_t)||[];n=this[l++];)if(i=q(n),
r=1===n.nodeType&&(" "+i+" ").replace(he," ")){for(a=0;o=e[a++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");s=ot.trim(r),i!==s&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,l=0;if(ot.isFunction(t))return this.each(function(e){ot(this).removeClass(t.call(this,e,q(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(_t)||[];n=this[l++];)if(i=q(n),r=1===n.nodeType&&(" "+i+" ").replace(he," ")){for(a=0;o=e[a++];)for(;r.indexOf(" "+o+" ")>-1;)r=r.replace(" "+o+" "," ");s=ot.trim(r),i!==s&&n.setAttribute("class",s)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):ot.isFunction(t)?this.each(function(n){ot(this).toggleClass(t.call(this,n,q(this),e),e)}):this.each(function(){var e,r,i,o;if("string"===n)for(r=0,i=ot(this),o=t.match(_t)||[];e=o[r++];)i.hasClass(e)?i.removeClass(e):i.addClass(e);else void 0!==t&&"boolean"!==n||(e=q(this),e&&Ct.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||t===!1?"":Ct.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+q(n)+" ").replace(he," ").indexOf(e)>-1)return!0;return!1}});var de=/\r/g,pe=/[\x20\t\r\n\f]+/g;ot.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=ot.isFunction(t),this.each(function(n){var i;1===this.nodeType&&(i=r?t.call(this,n,ot(this).val()):t,null==i?i="":"number"==typeof i?i+="":ot.isArray(i)&&(i=ot.map(i,function(t){return null==t?"":t+""})),e=ot.valHooks[this.type]||ot.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))})):i?(e=ot.valHooks[i.type]||ot.valHooks[i.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(de,""):null==n?"":n)):void 0}}),ot.extend({valHooks:{option:{get:function(t){var e=ot.find.attr(t,"value");return null!=e?e:ot.trim(ot.text(t)).replace(pe," ")}},select:{get:function(t){for(var e,n,r=t.options,i=t.selectedIndex,o="select-one"===t.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],(n.selected||l===i)&&(rt.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ot.nodeName(n.parentNode,"optgroup"))){if(e=ot(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=ot.makeArray(e),a=i.length;a--;)r=i[a],(r.selected=ot.inArray(ot.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),ot.each(["radio","checkbox"],function(){ot.valHooks[this]={set:function(t,e){return ot.isArray(e)?t.checked=ot.inArray(ot(t).val(),e)>-1:void 0}},rt.checkOn||(ot.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var ge=/^(?:focusinfocus|focusoutblur)$/;ot.extend(ot.event,{trigger:function(e,n,r,i){var o,a,s,l,u,c,f,h=[r||X],d=nt.call(e,"type")?e.type:e,p=nt.call(e,"namespace")?e.namespace.split("."):[];if(a=s=r=r||X,3!==r.nodeType&&8!==r.nodeType&&!ge.test(d+ot.event.triggered)&&(d.indexOf(".")>-1&&(p=d.split("."),d=p.shift(),p.sort()),u=d.indexOf(":")<0&&"on"+d,e=e[ot.expando]?e:new ot.Event(d,"object"==typeof e&&e),e.isTrigger=i?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:ot.makeArray(n,[e]),f=ot.event.special[d]||{},i||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!i&&!f.noBubble&&!ot.isWindow(r)){for(l=f.delegateType||d,ge.test(l+d)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(r.ownerDocument||X)&&h.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=h[o++])&&!e.isPropagationStopped();)e.type=o>1?l:f.bindType||d,c=(Ct.get(a,"events")||{})[e.type]&&Ct.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&Tt(a)&&(e.result=c.apply(a,n),e.result===!1&&e.preventDefault());return e.type=d,i||e.isDefaultPrevented()||f._default&&f._default.apply(h.pop(),n)!==!1||!Tt(r)||u&&ot.isFunction(r[d])&&!ot.isWindow(r)&&(s=r[u],s&&(r[u]=null),ot.event.triggered=d,r[d](),ot.event.triggered=void 0,s&&(r[u]=s)),e.result}},simulate:function(t,e,n){var r=ot.extend(new ot.Event,n,{type:t,isSimulated:!0});ot.event.trigger(r,null,e),r.isDefaultPrevented()&&n.preventDefault()}}),ot.fn.extend({trigger:function(t,e){return this.each(function(){ot.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?ot.event.trigger(t,e,n,!0):void 0}}),ot.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){ot.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),ot.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),rt.focusin="onfocusin"in t,rt.focusin||ot.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){ot.event.simulate(e,t.target,ot.event.fix(t))};ot.event.special[e]={setup:function(){var r=this.ownerDocument||this,i=Ct.access(r,e);i||r.addEventListener(t,n,!0),Ct.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=Ct.access(r,e)-1;i?Ct.access(r,e,i):(r.removeEventListener(t,n,!0),Ct.remove(r,e))}}});var ve=t.location,me=ot.now(),ye=/\?/;ot.parseJSON=function(t){return JSON.parse(t+"")},ot.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(r){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||ot.error("Invalid XML: "+e),n};var be=/#.*$/,xe=/([?&])_=[^&]*/,_e=/^(.*?):[ \t]*([^\r\n]*)$/gm,we=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Se=/^(?:GET|HEAD)$/,Te=/^\/\//,Ce={},ke={},Ae="*/".concat("*"),De=X.createElement("a");De.href=ve.href,ot.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ve.href,type:"GET",isLocal:we.test(ve.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ae,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ot.parseJSON,"text xml":ot.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?$($(t,ot.ajaxSettings),e):$(ot.ajaxSettings,t)},ajaxPrefilter:H(Ce),ajaxTransport:H(ke),ajax:function(e,n){function r(e,n,r,s){var u,f,y,b,_,S=n;2!==x&&(x=2,l&&t.clearTimeout(l),i=void 0,a=s||"",w.readyState=e>0?4:0,u=e>=200&&300>e||304===e,r&&(b=W(h,w,r)),b=U(h,b,w,u),u?(h.ifModified&&(_=w.getResponseHeader("Last-Modified"),_&&(ot.lastModified[o]=_),_=w.getResponseHeader("etag"),_&&(ot.etag[o]=_)),204===e||"HEAD"===h.type?S="nocontent":304===e?S="notmodified":(S=b.state,f=b.data,y=b.error,u=!y)):(y=S,!e&&S||(S="error",0>e&&(e=0))),w.status=e,w.statusText=(n||S)+"",u?g.resolveWith(d,[f,S,w]):g.rejectWith(d,[w,S,y]),w.statusCode(m),m=void 0,c&&p.trigger(u?"ajaxSuccess":"ajaxError",[w,h,u?f:y]),v.fireWith(d,[w,S]),c&&(p.trigger("ajaxComplete",[w,h]),--ot.active||ot.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=void 0),n=n||{};var i,o,a,s,l,u,c,f,h=ot.ajaxSetup({},n),d=h.context||h,p=h.context&&(d.nodeType||d.jquery)?ot(d):ot.event,g=ot.Deferred(),v=ot.Callbacks("once memory"),m=h.statusCode||{},y={},b={},x=0,_="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===x){if(!s)for(s={};e=_e.exec(a);)s[e[1].toLowerCase()]=e[2];e=s[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return x||(t=b[n]=b[n]||t,y[t]=e),this},overrideMimeType:function(t){return x||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>x)for(e in t)m[e]=[m[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||_;return i&&i.abort(e),r(0,e),this}};if(g.promise(w).complete=v.add,w.success=w.done,w.error=w.fail,h.url=((e||h.url||ve.href)+"").replace(be,"").replace(Te,ve.protocol+"//"),h.type=n.method||n.type||h.method||h.type,h.dataTypes=ot.trim(h.dataType||"*").toLowerCase().match(_t)||[""],null==h.crossDomain){u=X.createElement("a");try{u.href=h.url,u.href=u.href,h.crossDomain=De.protocol+"//"+De.host!=u.protocol+"//"+u.host}catch(S){h.crossDomain=!0}}if(h.data&&h.processData&&"string"!=typeof h.data&&(h.data=ot.param(h.data,h.traditional)),B(Ce,h,n,w),2===x)return w;c=ot.event&&h.global,c&&0===ot.active++&&ot.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!Se.test(h.type),o=h.url,h.hasContent||(h.data&&(o=h.url+=(ye.test(o)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=xe.test(o)?o.replace(xe,"$1_="+me++):o+(ye.test(o)?"&":"?")+"_="+me++)),h.ifModified&&(ot.lastModified[o]&&w.setRequestHeader("If-Modified-Since",ot.lastModified[o]),ot.etag[o]&&w.setRequestHeader("If-None-Match",ot.etag[o])),(h.data&&h.hasContent&&h.contentType!==!1||n.contentType)&&w.setRequestHeader("Content-Type",h.contentType),w.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+Ae+"; q=0.01":""):h.accepts["*"]);for(f in h.headers)w.setRequestHeader(f,h.headers[f]);if(h.beforeSend&&(h.beforeSend.call(d,w,h)===!1||2===x))return w.abort();_="abort";for(f in{success:1,error:1,complete:1})w[f](h[f]);if(i=B(ke,h,n,w)){if(w.readyState=1,c&&p.trigger("ajaxSend",[w,h]),2===x)return w;h.async&&h.timeout>0&&(l=t.setTimeout(function(){w.abort("timeout")},h.timeout));try{x=1,i.send(y,r)}catch(S){if(!(2>x))throw S;r(-1,S)}}else r(-1,"No Transport");return w},getJSON:function(t,e,n){return ot.get(t,e,n,"json")},getScript:function(t,e){return ot.get(t,void 0,e,"script")}}),ot.each(["get","post"],function(t,e){ot[e]=function(t,n,r,i){return ot.isFunction(n)&&(i=i||r,r=n,n=void 0),ot.ajax(ot.extend({url:t,type:e,dataType:i,data:n,success:r},ot.isPlainObject(t)&&t))}}),ot._evalUrl=function(t){return ot.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ot.fn.extend({wrapAll:function(t){var e;return ot.isFunction(t)?this.each(function(e){ot(this).wrapAll(t.call(this,e))}):(this[0]&&(e=ot(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return ot.isFunction(t)?this.each(function(e){ot(this).wrapInner(t.call(this,e))}):this.each(function(){var e=ot(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=ot.isFunction(t);return this.each(function(n){ot(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){ot.nodeName(this,"body")||ot(this).replaceWith(this.childNodes)}).end()}}),ot.expr.filters.hidden=function(t){return!ot.expr.filters.visible(t)},ot.expr.filters.visible=function(t){return t.offsetWidth>0||t.offsetHeight>0||t.getClientRects().length>0};var Ee=/%20/g,Me=/\[\]$/,je=/\r?\n/g,Ne=/^(?:submit|button|image|reset|file)$/i,Le=/^(?:input|select|textarea|keygen)/i;ot.param=function(t,e){var n,r=[],i=function(t,e){e=ot.isFunction(e)?e():null==e?"":e,r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=ot.ajaxSettings&&ot.ajaxSettings.traditional),ot.isArray(t)||t.jquery&&!ot.isPlainObject(t))ot.each(t,function(){i(this.name,this.value)});else for(n in t)V(n,t[n],e,i);return r.join("&").replace(Ee,"+")},ot.fn.extend({serialize:function(){return ot.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ot.prop(this,"elements");return t?ot.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ot(this).is(":disabled")&&Le.test(this.nodeName)&&!Ne.test(t)&&(this.checked||!Lt.test(t))}).map(function(t,e){var n=ot(this).val();return null==n?null:ot.isArray(n)?ot.map(n,function(t){return{name:e.name,value:t.replace(je,"\r\n")}}):{name:e.name,value:n.replace(je,"\r\n")}}).get()}}),ot.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(e){}};var Re={0:200,1223:204},Ie=ot.ajaxSettings.xhr();rt.cors=!!Ie&&"withCredentials"in Ie,rt.ajax=Ie=!!Ie,ot.ajaxTransport(function(e){var n,r;return rt.cors||Ie&&!e.crossDomain?{send:function(i,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(a in i)s.setRequestHeader(a,i[a]);n=function(t){return function(){n&&(n=r=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Re[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),r=s.onerror=n("error"),void 0!==s.onabort?s.onabort=r:s.onreadystatechange=function(){4===s.readyState&&t.setTimeout(function(){n&&r()})},n=n("abort");try{s.send(e.hasContent&&e.data||null)}catch(l){if(n)throw l}},abort:function(){n&&n()}}:void 0}),ot.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ot.globalEval(t),t}}}),ot.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),ot.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(r,i){e=ot("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),X.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Oe=[],Fe=/(=)\?(?=&|$)|\?\?/;ot.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Oe.pop()||ot.expando+"_"+me++;return this[t]=!0,t}}),ot.ajaxPrefilter("json jsonp",function(e,n,r){var i,o,a,s=e.jsonp!==!1&&(Fe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fe.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(i=e.jsonpCallback=ot.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Fe,"$1"+i):e.jsonp!==!1&&(e.url+=(ye.test(e.url)?"&":"?")+e.jsonp+"="+i),e.converters["script json"]=function(){return a||ot.error(i+" was not called"),a[0]},e.dataTypes[0]="json",o=t[i],t[i]=function(){a=arguments},r.always(function(){void 0===o?ot(t).removeProp(i):t[i]=o,e[i]&&(e.jsonpCallback=n.jsonpCallback,Oe.push(i)),a&&ot.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),ot.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||X;var r=pt.exec(t),i=!n&&[];return r?[e.createElement(r[1])]:(r=h([t],e,i),i&&i.length&&ot(i).remove(),ot.merge([],r.childNodes))};var ze=ot.fn.load;ot.fn.load=function(t,e,n){if("string"!=typeof t&&ze)return ze.apply(this,arguments);var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=ot.trim(t.slice(s)),t=t.slice(0,s)),ot.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&ot.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,a.html(r?ot("<div>").append(ot.parseHTML(t)).find(r):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},ot.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){ot.fn[e]=function(t){return this.on(e,t)}}),ot.expr.filters.animated=function(t){return ot.grep(ot.timers,function(e){return t===e.elem}).length},ot.offset={setOffset:function(t,e,n){var r,i,o,a,s,l,u,c=ot.css(t,"position"),f=ot(t),h={};"static"===c&&(t.style.position="relative"),s=f.offset(),o=ot.css(t,"top"),l=ot.css(t,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(r=f.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),ot.isFunction(e)&&(e=e.call(t,n,ot.extend({},s))),null!=e.top&&(h.top=e.top-s.top+a),null!=e.left&&(h.left=e.left-s.left+i),"using"in e?e.using.call(t,h):f.css(h)}},ot.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){ot.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(e=o.documentElement,ot.contains(e,r)?(i=r.getBoundingClientRect(),n=G(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var t,e,n=this[0],r={top:0,left:0};return"fixed"===ot.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),ot.nodeName(t[0],"html")||(r=t.offset()),r.top+=ot.css(t[0],"borderTopWidth",!0),r.left+=ot.css(t[0],"borderLeftWidth",!0)),{top:e.top-r.top-ot.css(n,"marginTop",!0),left:e.left-r.left-ot.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===ot.css(t,"position");)t=t.offsetParent;return t||Kt})}}),ot.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;ot.fn[t]=function(r){return St(this,function(t,r,i){var o=G(t);return void 0===i?o?o[e]:t[r]:void(o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i)},t,r,arguments.length)}}),ot.each(["top","left"],function(t,e){ot.cssHooks[e]=A(rt.pixelPosition,function(t,n){return n?(n=k(t,e),Xt.test(n)?ot(t).position()[e]+"px":n):void 0})}),ot.each({Height:"height",Width:"width"},function(t,e){ot.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,r){ot.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||i===!0?"margin":"border");return St(this,function(e,n,r){var i;return ot.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(i=e.documentElement,Math.max(e.body["scroll"+t],i["scroll"+t],e.body["offset"+t],i["offset"+t],i["client"+t])):void 0===r?ot.css(e,n,a):ot.style(e,n,r,a)},e,o?r:void 0,o,null)}})}),ot.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},size:function(){return this.length}}),ot.fn.andSelf=ot.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ot});var Pe=t.jQuery,qe=t.$;return ot.noConflict=function(e){return t.$===ot&&(t.$=qe),e&&t.jQuery===ot&&(t.jQuery=Pe),ot},e||(t.jQuery=t.$=ot),ot}),function(){function t(t,e){return t.set(e[0],e[1]),t}function e(t,e){return t.add(e),t}function n(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e,n,r){for(var i=-1,o=t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function i(t,e){for(var n=-1,r=t.length;++n<r&&!1!==e(t[n],n,t););return t}function o(t,e){for(var n=t.length;n--&&!1!==e(t[n],n,t););return t}function a(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function s(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function l(t,e){return!!t.length&&-1<m(t,e,0)}function u(t,e,n){for(var r=-1,i=t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function c(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function f(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function h(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function d(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function p(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function g(t,e,n,r){var i;return n(t,function(t,n,o){return e(t,n,o)?(i=r?n:t,!1):void 0}),i}function v(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function m(t,e,n){if(e!==e)return R(t,n);--n;for(var r=t.length;++n<r;)if(t[n]===e)return n;return-1}function y(t,e,n,r){--n;for(var i=t.length;++n<i;)if(r(t[n],e))return n;return-1}function b(t,e){var n=t?t.length:0;return n?w(t,e)/n:V}function x(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function _(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].c;return t}function w(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==W&&(n=n===W?o:n+o)}return n}function S(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function T(t,e){return c(e,function(e){return[e,t[e]]})}function C(t){return function(e){return t(e)}}function k(t,e){return c(e,function(e){return t[e]})}function A(t,e){return t.has(e)}function D(t,e){for(var n=-1,r=t.length;++n<r&&-1<m(e,t[n],0););return n}function E(t,e){for(var n=t.length;n--&&-1<m(e,t[n],0););return n}function M(t){return t&&t.Object===Object?t:null}function j(t){return Ot[t]}function N(t){return Ft[t]}function L(t){return"\\"+qt[t]}function R(t,e,n){var r=t.length;for(e+=n?0:-1;n?e--:++e<r;){var i=t[e];if(i!==i)return e}return-1}function I(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(n){}return e}function O(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}function F(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}function z(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&"__lodash_placeholder__"!==a||(t[n]="__lodash_placeholder__",o[i++]=n)}return o}function P(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function q(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}function H(t){if(!t||!jt.test(t))return t.length;for(var e=Et.lastIndex=0;Et.test(t);)e++;return e}function B(t){return zt[t]}function $(M){function Tt(t){if(zr(t)&&!ua(t)&&!(t instanceof Ot)){if(t instanceof kt)return t;if(wi.call(t,"__wrapped__"))return ar(t)}return new kt(t)}function Ct(){}function kt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=W}function Ot(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Ft(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function zt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Pt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qt(t){var e=-1,n=t?t.length:0;for(this.__data__=new Pt;++e<n;)this.add(t[e])}function $t(t){this.__data__=new zt(t)}function Wt(t,e,n,r){return t===W||Er(t,bi[n])&&!wi.call(r,n)?e:t}function Vt(t,e,n){(n===W||Er(t[e],n))&&("number"!=typeof e||n!==W||e in t)||(t[e]=n)}function Gt(t,e,n){var r=t[e];wi.call(t,e)&&Er(r,n)&&(n!==W||e in t)||(t[e]=n)}function Yt(t,e){for(var n=t.length;n--;)if(Er(t[n][0],e))return n;return-1}function Zt(t,e,n,r){return mo(t,function(t,i,o){e(r,t,n(t),o)}),r}function Kt(t,e){return t&&un(e,ei(e),t)}function Qt(t,e){for(var n=-1,r=null==t,i=e.length,o=Array(i);++n<i;)o[n]=r?W:Qr(t,e[n]);return o}function te(t,e,n){return t===t&&(n!==W&&(t=n>=t?t:n),e!==W&&(t=t>=e?t:e)),t}function ee(t,e,n,r,o,a,s){var l;if(r&&(l=a?r(t,o,a,s):r(t)),l!==W)return l;if(!Fr(t))return t;if(o=ua(t)){if(l=Wn(t),!e)return ln(t,l)}else{var u=Bn(t),c="[object Function]"==u||"[object GeneratorFunction]"==u;if(ca(t))return nn(t,e);if("[object Object]"==u||"[object Arguments]"==u||c&&!a){if(I(t))return a?t:{};if(l=Un(c?{}:t),!e)return cn(t,Kt(l,t))}else{if(!It[u])return a?t:{};l=Vn(t,u,ee,e)}}if(s||(s=new $t),a=s.get(t))return a;if(s.set(t,l),!o)var f=n?pe(t,ei,Hn):ei(t);return i(f||t,function(i,o){f&&(o=i,i=t[o]),Gt(l,o,ee(i,e,n,r,o,t,s))}),l}function ne(t){var e=ei(t),n=e.length;return function(r){if(null==r)return!n;for(var i=n;i--;){var o=e[i],a=t[o],s=r[o];if(s===W&&!(o in Object(r))||!a(s))return!1}return!0}}function re(t){return Fr(t)?Oi(t):{}}function ie(t,e,n){if("function"!=typeof t)throw new mi("Expected a function");return zi(function(){t.apply(W,n)},e)}function oe(t,e,n,r){var i=-1,o=l,a=!0,s=t.length,f=[],h=e.length;if(!s)return f;n&&(e=c(e,C(n))),r?(o=u,a=!1):e.length>=200&&(o=A,a=!1,e=new qt(e));t:for(;++i<s;){var d=t[i],p=n?n(d):d,d=r||0!==d?d:0;if(a&&p===p){for(var g=h;g--;)if(e[g]===p)continue t;f.push(d)}else o(e,p,r)||f.push(d)}return f}function ae(t,e){var n=!0;return mo(t,function(t,r,i){return n=!!e(t,r,i)}),n}function se(t,e,n){for(var r=-1,i=t.length;++r<i;){var o=t[r],a=e(o);if(null!=a&&(s===W?a===a&&!Wr(a):n(a,s)))var s=a,l=o}return l}function le(t,e){var n=[];return mo(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function ue(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=Yn),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?ue(s,e-1,n,r,i):f(i,s):r||(i[i.length]=s)}return i}function ce(t,e){return t&&bo(t,e,ei)}function fe(t,e){return t&&xo(t,e,ei)}function he(t,e){return s(e,function(e){return Rr(t[e])})}function de(t,e){e=Kn(e,t)?[e]:tn(e);for(var n=0,r=e.length;null!=t&&r>n;)t=t[ir(e[n++])];return n&&n==r?t:W}function pe(t,e,n){return e=e(t),ua(t)?e:f(e,n(t))}function ge(t,e){return t>e}function ve(t,e){return wi.call(t,e)||"object"==typeof t&&e in t&&null===Bi(Object(t))}function me(t,e){return e in Object(t)}function ye(t,e,n){for(var r=n?u:l,i=t[0].length,o=t.length,a=o,s=Array(o),f=1/0,h=[];a--;){var d=t[a];a&&e&&(d=c(d,C(e))),f=Gi(d.length,f),s[a]=!n&&(e||i>=120&&d.length>=120)?new qt(a&&d):W}var d=t[0],p=-1,g=s[0];t:for(;++p<i&&f>h.length;){var v=d[p],m=e?e(v):v,v=n||0!==v?v:0;if(g?!A(g,m):!r(h,m,n)){for(a=o;--a;){var y=s[a];if(y?!A(y,m):!r(t[a],m,n))continue t}g&&g.push(m),h.push(v)}}return h}function be(t,e,n){var r={};return ce(t,function(t,i,o){e(r,n(t),i,o)}),r}function xe(t,e,r){return Kn(e,t)||(e=tn(e),t=rr(t,e),e=cr(e)),e=null==t?t:t[ir(e)],null==e?W:n(e,t,r)}function _e(t,e,n,r,i){if(t===e)e=!0;else if(null==t||null==e||!Fr(t)&&!zr(e))e=t!==t&&e!==e;else t:{var o=ua(t),a=ua(e),s="[object Array]",l="[object Array]";o||(s=Bn(t),s="[object Arguments]"==s?"[object Object]":s),a||(l=Bn(e),l="[object Arguments]"==l?"[object Object]":l);var u="[object Object]"==s&&!I(t),a="[object Object]"==l&&!I(e);if((l=s==l)&&!u)i||(i=new $t),e=o||Ur(t)?Ln(t,e,_e,n,r,i):Rn(t,e,s,_e,n,r,i);else{if(!(2&r)&&(o=u&&wi.call(t,"__wrapped__"),s=a&&wi.call(e,"__wrapped__"),o||s)){t=o?t.value():t,e=s?e.value():e,i||(i=new $t),e=_e(t,e,n,r,i);break t}if(l)e:if(i||(i=new $t),o=2&r,s=ei(t),a=s.length,l=ei(e).length,a==l||o){for(u=a;u--;){var c=s[u];if(!(o?c in e:ve(e,c))){e=!1;break e}}if(l=i.get(t))e=l==e;else{l=!0,i.set(t,e);for(var f=o;++u<a;){var c=s[u],h=t[c],d=e[c];if(n)var p=o?n(d,h,c,e,t,i):n(h,d,c,t,e,i);if(p===W?h!==d&&!_e(h,d,n,r,i):!p){l=!1;break}f||(f="constructor"==c)}l&&!f&&(n=t.constructor,r=e.constructor,n!=r&&"constructor"in t&&"constructor"in e&&!("function"==typeof n&&n instanceof n&&"function"==typeof r&&r instanceof r)&&(l=!1)),i["delete"](t),e=l}}else e=!1;else e=!1}}return e}function we(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var s=n[i],l=s[0],u=t[l],c=s[1];if(a&&s[2]){if(u===W&&!(l in t))return!1}else{if(s=new $t,r)var f=r(u,c,l,t,e,s);if(f===W?!_e(c,u,r,3,s):!f)return!1}}return!0}function Se(t){return"function"==typeof t?t:null==t?li:"object"==typeof t?ua(t)?De(t[0],t[1]):Ae(t):hi(t)}function Te(t){t=null==t?t:Object(t);var e,n=[];for(e in t)n.push(e);return n}function Ce(t,e){return e>t}function ke(t,e){var n=-1,r=jr(t)?Array(t.length):[];return mo(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function Ae(t){var e=Pn(t);return 1==e.length&&e[0][2]?er(e[0][0],e[0][1]):function(n){return n===t||we(n,t,e)}}function De(t,e){return Kn(t)&&e===e&&!Fr(e)?er(ir(t),e):function(n){var r=Qr(n,t);return r===W&&r===e?ti(n,t):_e(e,r,W,3)}}function Ee(t,e,n,r,o){if(t!==e){if(!ua(e)&&!Ur(e))var a=ni(e);i(a||e,function(i,s){if(a&&(s=i,i=e[s]),Fr(i)){o||(o=new $t);var l=s,u=o,c=t[l],f=e[l],h=u.get(f);if(h)Vt(t,l,h);else{var h=r?r(c,f,l+"",t,e,u):W,d=h===W;d&&(h=f,ua(f)||Ur(f)?ua(c)?h=c:Nr(c)?h=ln(c):(d=!1,h=ee(f,!0)):Hr(f)||Mr(f)?Mr(c)?h=Zr(c):!Fr(c)||n&&Rr(c)?(d=!1,h=ee(f,!0)):h=c:d=!1),u.set(f,h),d&&Ee(h,f,n,r,u),u["delete"](f),Vt(t,l,h)}}else l=r?r(t[s],i,s+"",t,e,o):W,l===W&&(l=i),Vt(t,s,l)})}}function Me(t,e){var n=t.length;return n?(e+=0>e?n:0,Jn(e,n)?t[e]:W):void 0}function je(t,e,n){var r=-1;return e=c(e.length?e:[li],C(Fn())),t=ke(t,function(t){return{a:c(e,function(e){return e(t)}),b:++r,c:t}}),_(t,function(t,e){var r;t:{r=-1;for(var i=t.a,o=e.a,a=i.length,s=n.length;++r<a;){var l=on(i[r],o[r]);if(l){r=r>=s?l:l*("desc"==n[r]?-1:1);break t}}r=t.b-e.b}return r})}function Ne(t,e){return t=Object(t),h(e,function(e,n){return n in t&&(e[n]=t[n]),e},{})}function Le(t,e){for(var n=-1,r=pe(t,ni,Co),i=r.length,o={};++n<i;){var a=r[n],s=t[a];e(s,a)&&(o[a]=s)}return o}function Re(t){return function(e){return null==e?W:e[t]}}function Ie(t){return function(e){return de(e,t)}}function Oe(t,e,n,r){var i=r?y:m,o=-1,a=e.length,s=t;for(n&&(s=c(t,C(n)));++o<a;)for(var l=0,u=e[o],u=n?n(u):u;-1<(l=i(s,u,l,r));)s!==t&&Pi.call(s,l,1),Pi.call(t,l,1);return t}function Fe(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;if(Jn(i))Pi.call(t,i,1);else if(Kn(i,t))delete t[ir(i)];else{var i=tn(i),a=rr(t,i);null!=a&&delete a[ir(cr(i))]}}}}function ze(t,e){return t+Hi(Xi()*(e-t+1))}function Pe(t,e){var n="";if(!t||1>e||e>9007199254740991)return n;do e%2&&(n+=t),(e=Hi(e/2))&&(t+=t);while(e);return n}function qe(t,e,n,r){e=Kn(e,t)?[e]:tn(e);for(var i=-1,o=e.length,a=o-1,s=t;null!=s&&++i<o;){var l=ir(e[i]);if(Fr(s)){var u=n;if(i!=a){var c=s[l],u=r?r(c,l,s):W;u===W&&(u=null==c?Jn(e[i+1])?[]:{}:c)}Gt(s,l,u)}s=s[l]}return t}function He(t,e,n){var r=-1,i=t.length;for(0>e&&(e=-e>i?0:i+e),n=n>i?i:n,0>n&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0,n=Array(i);++r<i;)n[r]=t[r+e];return n}function Be(t,e){var n;return mo(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function $e(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&2147483647>=i){for(;i>r;){var o=r+i>>>1,a=t[o];null!==a&&!Wr(a)&&(n?e>=a:e>a)?r=o+1:i=o}return i}return We(t,e,li,n)}function We(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,s=null===e,l=Wr(e),u=e===W;o>i;){var c=Hi((i+o)/2),f=n(t[c]),h=f!==W,d=null===f,p=f===f,g=Wr(f);(a?r||p:u?p&&(r||h):s?p&&h&&(r||!d):l?p&&h&&!d&&(r||!g):d||g?0:r?e>=f:e>f)?i=c+1:o=c}return Gi(o,4294967294)}function Ue(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!Er(s,l)){var l=s;o[i++]=0===a?0:a}}return o}function Ve(t){return"number"==typeof t?t:Wr(t)?V:+t}function Ge(t){if("string"==typeof t)return t;if(Wr(t))return vo?vo.call(t):"";var e=t+"";return"0"==e&&1/t==-U?"-0":e}function Ye(t,e,n){var r=-1,i=l,o=t.length,a=!0,s=[],c=s;if(n)a=!1,i=u;else if(o>=200){if(i=e?null:wo(t))return P(i);a=!1,i=A,c=new qt}else c=e?[]:s;t:for(;++r<o;){var f=t[r],h=e?e(f):f,f=n||0!==f?f:0;if(a&&h===h){for(var d=c.length;d--;)if(c[d]===h)continue t;e&&c.push(h),s.push(f)}else i(c,h,n)||(c!==s&&c.push(h),s.push(f))}return s}function Xe(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?He(t,r?0:o,r?o+1:i):He(t,r?o+1:0,r?i:o)}function Je(t,e){var n=t;return n instanceof Ot&&(n=n.value()),h(e,function(t,e){return e.func.apply(e.thisArg,f([t],e.args))},n)}function Ze(t,e,n){for(var r=-1,i=t.length;++r<i;)var o=o?f(oe(o,t[r],e,n),oe(t[r],o,e,n)):t[r];return o&&o.length?Ye(o,e,n):[]}function Ke(t,e,n){for(var r=-1,i=t.length,o=e.length,a={};++r<i;)n(a,t[r],o>r?e[r]:W);return a}function Qe(t){return Nr(t)?t:[]}function tn(t){return ua(t)?t:Ao(t)}function en(t,e,n){var r=t.length;return n=n===W?r:n,!e&&n>=r?t:He(t,e,n)}function nn(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),
n}function rn(t){var e=new t.constructor(t.byteLength);return new ji(e).set(new ji(t)),e}function on(t,e){if(t!==e){var n=t!==W,r=null===t,i=t===t,o=Wr(t),a=e!==W,s=null===e,l=e===e,u=Wr(e);if(!s&&!u&&!o&&t>e||o&&a&&l&&!s&&!u||r&&a&&l||!n&&l||!i)return 1;if(!r&&!o&&!u&&e>t||u&&n&&i&&!r&&!o||s&&n&&i||!a&&i||!l)return-1}return 0}function an(t,e,n,r){var i=-1,o=t.length,a=n.length,s=-1,l=e.length,u=Vi(o-a,0),c=Array(l+u);for(r=!r;++s<l;)c[s]=e[s];for(;++i<a;)(r||o>i)&&(c[n[i]]=t[i]);for(;u--;)c[s++]=t[i++];return c}function sn(t,e,n,r){var i=-1,o=t.length,a=-1,s=n.length,l=-1,u=e.length,c=Vi(o-s,0),f=Array(c+u);for(r=!r;++i<c;)f[i]=t[i];for(c=i;++l<u;)f[c+l]=e[l];for(;++a<s;)(r||o>i)&&(f[c+n[a]]=t[i++]);return f}function ln(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}function un(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var a=e[i],s=r?r(n[a],t[a],a,n,t):t[a];Gt(n,a,s)}return n}function cn(t,e){return un(t,Hn(t),e)}function fn(t,e){return function(n,i){var o=ua(n)?r:Zt,a=e?e():{};return o(n,t,Fn(i),a)}}function hn(t){return Dr(function(e,n){var r=-1,i=n.length,o=i>1?n[i-1]:W,a=i>2?n[2]:W,o=t.length>3&&"function"==typeof o?(i--,o):W;for(a&&Zn(n[0],n[1],a)&&(o=3>i?W:o,i=1),e=Object(e);++r<i;)(a=n[r])&&t(e,a,r,o);return e})}function dn(t,e){return function(n,r){if(null==n)return n;if(!jr(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function pn(t){return function(e,n,r){var i=-1,o=Object(e);r=r(e);for(var a=r.length;a--;){var s=r[t?a:++i];if(!1===n(o[s],s,o))break}return e}}function gn(t,e,n){function r(){return(this&&this!==Xt&&this instanceof r?o:t).apply(i?n:this,arguments)}var i=1&e,o=yn(t);return r}function vn(t){return function(e){e=Kr(e);var n=jt.test(e)?e.match(Et):W,r=n?n[0]:e.charAt(0);return e=n?en(n,1).join(""):e.slice(1),r[t]()+e}}function mn(t){return function(e){return h(ai(oi(e).replace(At,"")),t,"")}}function yn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=re(t.prototype),e=t.apply(n,e);return Fr(e)?e:n}}function bn(t,e,r){function i(){for(var a=arguments.length,s=Array(a),l=a,u=On(i);l--;)s[l]=arguments[l];return l=3>a&&s[0]!==u&&s[a-1]!==u?[]:z(s,u),a-=l.length,r>a?En(t,e,_n,i.placeholder,W,s,l,W,W,r-a):n(this&&this!==Xt&&this instanceof i?o:t,this,s)}var o=yn(t);return i}function xn(t){return Dr(function(e){e=ue(e,1);var n=e.length,r=n,i=kt.prototype.thru;for(t&&e.reverse();r--;){var o=e[r];if("function"!=typeof o)throw new mi("Expected a function");if(i&&!a&&"wrapper"==In(o))var a=new kt([],(!0))}for(r=a?r:n;++r<n;)var o=e[r],i=In(o),s="wrapper"==i?So(o):W,a=s&&Qn(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[In(s[0])].apply(a,s[3]):1==o.length&&Qn(o)?a[i]():a.thru(o);return function(){var t=arguments,r=t[0];if(a&&1==t.length&&ua(r)&&r.length>=200)return a.plant(r).value();for(var i=0,t=n?e[i].apply(this,t):r;++i<n;)t=e[i].call(this,t);return t}})}function _n(t,e,n,r,i,o,a,s,l,u){function c(){for(var m=arguments.length,y=Array(m),b=m;b--;)y[b]=arguments[b];if(p){var x,_=On(c),b=y.length;for(x=0;b--;)y[b]===_&&x++}if(r&&(y=an(y,r,i,p)),o&&(y=sn(y,o,a,p)),m-=x,p&&u>m)return _=z(y,_),En(t,e,_n,c.placeholder,n,y,_,s,l,u-m);if(_=h?n:this,b=d?_[t]:t,m=y.length,s){x=y.length;for(var w=Gi(s.length,x),S=ln(y);w--;){var T=s[w];y[w]=Jn(T,x)?S[T]:W}}else g&&m>1&&y.reverse();return f&&m>l&&(y.length=l),this&&this!==Xt&&this instanceof c&&(b=v||yn(b)),b.apply(_,y)}var f=128&e,h=1&e,d=2&e,p=24&e,g=512&e,v=d?W:yn(t);return c}function wn(t,e){return function(n,r){return be(n,t,e(r))}}function Sn(t){return function(e,n){var r;if(e===W&&n===W)return 0;if(e!==W&&(r=e),n!==W){if(r===W)return n;"string"==typeof e||"string"==typeof n?(e=Ge(e),n=Ge(n)):(e=Ve(e),n=Ve(n)),r=t(e,n)}return r}}function Tn(t){return Dr(function(e){return e=1==e.length&&ua(e[0])?c(e[0],C(Fn())):c(ue(e,1,Xn),C(Fn())),Dr(function(r){var i=this;return t(e,function(t){return n(t,i,r)})})})}function Cn(t,e){e=e===W?" ":Ge(e);var n=e.length;return 2>n?n?Pe(e,t):e:(n=Pe(e,qi(t/H(e))),jt.test(e)?en(n.match(Et),0,t).join(""):n.slice(0,t))}function kn(t,e,r,i){function o(){for(var e=-1,l=arguments.length,u=-1,c=i.length,f=Array(c+l),h=this&&this!==Xt&&this instanceof o?s:t;++u<c;)f[u]=i[u];for(;l--;)f[u++]=arguments[++e];return n(h,a?r:this,f)}var a=1&e,s=yn(t);return o}function An(t){return function(e,n,r){r&&"number"!=typeof r&&Zn(e,n,r)&&(n=r=W),e=Jr(e),e=e===e?e:0,n===W?(n=e,e=0):n=Jr(n)||0,r=r===W?n>e?1:-1:Jr(r)||0;var i=-1;n=Vi(qi((n-e)/(r||1)),0);for(var o=Array(n);n--;)o[t?n:++i]=e,e+=r;return o}}function Dn(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Jr(e),n=Jr(n)),t(e,n)}}function En(t,e,n,r,i,o,a,s,l,u){var c=8&e,f=c?a:W;a=c?W:a;var h=c?o:W;return o=c?W:o,e=(e|(c?32:64))&~(c?64:32),4&e||(e&=-4),e=[t,e,i,h,f,o,a,s,l,u],n=n.apply(W,e),Qn(t)&&ko(n,e),n.placeholder=r,n}function Mn(t){var e=gi[t];return function(t,n){if(t=Jr(t),n=Yr(n)){var r=(Kr(t)+"e").split("e"),r=e(r[0]+"e"+(+r[1]+n)),r=(Kr(r)+"e").split("e");return+(r[0]+"e"+(+r[1]-n))}return e(t)}}function jn(t){return function(e){var n=Bn(e);return"[object Map]"==n?F(e):"[object Set]"==n?q(e):T(e,t(e))}}function Nn(t,e,n,r,i,o,a,s){var l=2&e;if(!l&&"function"!=typeof t)throw new mi("Expected a function");var u=r?r.length:0;if(u||(e&=-97,r=i=W),a=a===W?a:Vi(Yr(a),0),s=s===W?s:Yr(s),u-=i?i.length:0,64&e){var c=r,f=i;r=i=W}var h=l?W:So(t);return o=[t,e,n,r,i,c,f,o,a,s],h&&(n=o[1],t=h[1],e=n|t,r=128==t&&8==n||128==t&&256==n&&h[8]>=o[7].length||384==t&&h[8]>=h[7].length&&8==n,131>e||r)&&(1&t&&(o[2]=h[2],e|=1&n?0:4),(n=h[3])&&(r=o[3],o[3]=r?an(r,n,h[4]):n,o[4]=r?z(o[3],"__lodash_placeholder__"):h[4]),(n=h[5])&&(r=o[5],o[5]=r?sn(r,n,h[6]):n,o[6]=r?z(o[5],"__lodash_placeholder__"):h[6]),(n=h[7])&&(o[7]=n),128&t&&(o[8]=null==o[8]?h[8]:Gi(o[8],h[8])),null==o[9]&&(o[9]=h[9]),o[0]=h[0],o[1]=e),t=o[0],e=o[1],n=o[2],r=o[3],i=o[4],s=o[9]=null==o[9]?l?0:t.length:Vi(o[9]-u,0),!s&&24&e&&(e&=-25),(h?_o:ko)(e&&1!=e?8==e||16==e?bn(t,e,s):32!=e&&33!=e||i.length?_n.apply(W,o):kn(t,e,n,r):gn(t,e,n),o)}function Ln(t,e,n,r,i,o){var a=2&i,s=t.length,l=e.length;if(s!=l&&!(a&&l>s))return!1;if(l=o.get(t))return l==e;var l=-1,u=!0,c=1&i?new qt:W;for(o.set(t,e);++l<s;){var f=t[l],h=e[l];if(r)var d=a?r(h,f,l,e,t,o):r(f,h,l,t,e,o);if(d!==W){if(d)continue;u=!1;break}if(c){if(!p(e,function(t,e){return c.has(e)||f!==t&&!n(f,t,r,i,o)?void 0:c.add(e)})){u=!1;break}}else if(f!==h&&!n(f,h,r,i,o)){u=!1;break}}return o["delete"](t),u}function Rn(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)break;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":if(t.byteLength!=e.byteLength||!r(new ji(t),new ji(e)))break;return!0;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object Number]":return t!=+t?e!=+e:t==+e;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=F;case"[object Set]":if(s||(s=P),t.size!=e.size&&!(2&o))break;return(n=a.get(t))?n==e:(o|=1,a.set(t,e),Ln(s(t),s(e),r,i,o,a));case"[object Symbol]":if(go)return go.call(t)==go.call(e)}return!1}function In(t){for(var e=t.name+"",n=so[e],r=wi.call(so,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function On(t){return(wi.call(Tt,"placeholder")?Tt:t).placeholder}function Fn(){var t=Tt.iteratee||ui,t=t===ui?Se:t;return arguments.length?t(arguments[0],arguments[1]):t}function zn(t,e){var n=t.__data__,r=typeof e;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?n["string"==typeof e?"string":"hash"]:n.map}function Pn(t){t=Aa(t);for(var e=t.length;e--;){var n=t[e][1];t[e][2]=n===n&&!Fr(n)}return t}function qn(t,e){var n=t[e];return Pr(n)?n:W}function Hn(t){return Ri(Object(t))}function Bn(t){return Ci.call(t)}function $n(t,e,n){e=Kn(e,t)?[e]:tn(e);for(var r,i=-1,o=e.length;++i<o;){var a=ir(e[i]);if(!(r=null!=t&&n(t,a)))break;t=t[a]}return r?r:(o=t?t.length:0,!!o&&Or(o)&&Jn(a,o)&&(ua(t)||$r(t)||Mr(t)))}function Wn(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&wi.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Un(t){return"function"!=typeof t.constructor||tr(t)?{}:re(Bi(Object(t)))}function Vn(n,r,i,o){var a=n.constructor;switch(r){case"[object ArrayBuffer]":return rn(n);case"[object Boolean]":case"[object Date]":return new a((+n));case"[object DataView]":return r=o?rn(n.buffer):n.buffer,new n.constructor(r,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return r=o?rn(n.buffer):n.buffer,new n.constructor(r,n.byteOffset,n.length);case"[object Map]":return r=o?i(F(n),!0):F(n),h(r,t,new n.constructor);case"[object Number]":case"[object String]":return new a(n);case"[object RegExp]":return r=new n.constructor(n.source,pt.exec(n)),r.lastIndex=n.lastIndex,r;case"[object Set]":return r=o?i(P(n),!0):P(n),h(r,e,new n.constructor);case"[object Symbol]":return go?Object(go.call(n)):{}}}function Gn(t){var e=t?t.length:W;return Or(e)&&(ua(t)||$r(t)||Mr(t))?S(e,String):null}function Yn(t){return ua(t)||Mr(t)}function Xn(t){return ua(t)&&!(2==t.length&&!Rr(t[0]))}function Jn(t,e){return e=null==e?9007199254740991:e,!!e&&("number"==typeof t||xt.test(t))&&t>-1&&0==t%1&&e>t}function Zn(t,e,n){if(!Fr(n))return!1;var r=typeof e;return!!("number"==r?jr(n)&&Jn(e,n.length):"string"==r&&e in n)&&Er(n[e],t)}function Kn(t,e){if(ua(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Wr(t))||(it.test(t)||!rt.test(t)||null!=e&&t in Object(e))}function Qn(t){var e=In(t),n=Tt[e];return"function"==typeof n&&e in Ot.prototype&&(t===n||(e=So(n),!!e&&t===e[0]))}function tr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||bi)}function er(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==W||t in Object(n)))}}function nr(t,e,n,r,i,o){return Fr(t)&&Fr(e)&&Ee(t,e,W,nr,o.set(e,t)),t}function rr(t,e){return 1==e.length?t:de(t,He(e,0,-1))}function ir(t){if("string"==typeof t||Wr(t))return t;var e=t+"";return"0"==e&&1/t==-U?"-0":e}function or(t){if(null!=t){try{return _i.call(t)}catch(e){}return t+""}return""}function ar(t){if(t instanceof Ot)return t.clone();var e=new kt(t.__wrapped__,t.__chain__);return e.__actions__=ln(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function sr(t,e,n){var r=t?t.length:0;return r?(e=n||e===W?1:Yr(e),He(t,0>e?0:e,r)):[]}function lr(t,e,n){var r=t?t.length:0;return r?(e=n||e===W?1:Yr(e),e=r-e,He(t,0,0>e?0:e)):[]}function ur(t){return t&&t.length?t[0]:W}function cr(t){var e=t?t.length:0;return e?t[e-1]:W}function fr(t,e){return t&&t.length&&e&&e.length?Oe(t,e):t}function hr(t){return t?Zi.call(t):t}function dr(t){if(!t||!t.length)return[];var e=0;return t=s(t,function(t){return Nr(t)?(e=Vi(t.length,e),!0):void 0}),S(e,function(e){return c(t,Re(e))})}function pr(t,e){if(!t||!t.length)return[];var r=dr(t);return null==e?r:c(r,function(t){return n(e,W,t)})}function gr(t){return t=Tt(t),t.__chain__=!0,t}function vr(t,e){return e(t)}function mr(){return this}function yr(t,e){return(ua(t)?i:mo)(t,Fn(e,3))}function br(t,e){return(ua(t)?o:yo)(t,Fn(e,3))}function xr(t,e){return(ua(t)?c:ke)(t,Fn(e,3))}function _r(t,e,n){var r=-1,i=Vr(t),o=i.length,a=o-1;for(e=(n?Zn(t,e,n):e===W)?1:te(Yr(e),0,o);++r<e;)t=ze(r,a),n=i[t],i[t]=i[r],i[r]=n;return i.length=e,i}function wr(t,e,n){return e=n?W:e,e=t&&null==e?t.length:e,Nn(t,128,W,W,W,W,e)}function Sr(t,e){var n;if("function"!=typeof e)throw new mi("Expected a function");return t=Yr(t),function(){return 0<--t&&(n=e.apply(this,arguments)),1>=t&&(e=W),n}}function Tr(t,e,n){return e=n?W:e,t=Nn(t,8,W,W,W,W,W,e),t.placeholder=Tr.placeholder,t}function Cr(t,e,n){return e=n?W:e,t=Nn(t,16,W,W,W,W,W,e),t.placeholder=Cr.placeholder,t}function kr(t,e,n){function r(e){var n=l,r=u;return l=u=W,p=e,f=t.apply(r,n)}function i(t){var n=t-d;return t-=p,!d||n>=e||0>n||v&&t>=c}function o(){var t=Ko();if(i(t))return a(t);var n;n=t-p,t=e-(t-d),n=v?Gi(t,c-n):t,h=zi(o,n)}function a(t){return Ni(h),h=W,m&&l?r(t):(l=u=W,f)}function s(){var t=Ko(),n=i(t);if(l=arguments,u=this,d=t,n){if(h===W)return p=t=d,h=zi(o,e),g?r(t):f;if(v)return Ni(h),h=zi(o,e),r(d)}return h===W&&(h=zi(o,e)),f}var l,u,c,f,h,d=0,p=0,g=!1,v=!1,m=!0;if("function"!=typeof t)throw new mi("Expected a function");return e=Jr(e)||0,Fr(n)&&(g=!!n.leading,c=(v="maxWait"in n)?Vi(Jr(n.maxWait)||0,e):c,m="trailing"in n?!!n.trailing:m),s.cancel=function(){h!==W&&Ni(h),d=p=0,l=u=h=W},s.flush=function(){return h===W?f:a(Ko())},s}function Ar(t,e){function n(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;return o.has(i)?o.get(i):(r=t.apply(this,r),n.cache=o.set(i,r),r)}if("function"!=typeof t||e&&"function"!=typeof e)throw new mi("Expected a function");return n.cache=new(Ar.Cache||Pt),n}function Dr(t,e){if("function"!=typeof t)throw new mi("Expected a function");return e=Vi(e===W?t.length-1:Yr(e),0),function(){for(var r=arguments,i=-1,o=Vi(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];switch(e){case 0:return t.call(this,a);case 1:return t.call(this,r[0],a);case 2:return t.call(this,r[0],r[1],a)}for(o=Array(e+1),i=-1;++i<e;)o[i]=r[i];return o[e]=a,n(t,this,o)}}function Er(t,e){return t===e||t!==t&&e!==e}function Mr(t){return Nr(t)&&wi.call(t,"callee")&&(!Fi.call(t,"callee")||"[object Arguments]"==Ci.call(t))}function jr(t){return null!=t&&Or(To(t))&&!Rr(t)}function Nr(t){return zr(t)&&jr(t)}function Lr(t){return!!zr(t)&&("[object Error]"==Ci.call(t)||"string"==typeof t.message&&"string"==typeof t.name)}function Rr(t){return t=Fr(t)?Ci.call(t):"","[object Function]"==t||"[object GeneratorFunction]"==t}function Ir(t){return"number"==typeof t&&t==Yr(t)}function Or(t){return"number"==typeof t&&t>-1&&0==t%1&&9007199254740991>=t}function Fr(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function zr(t){return!!t&&"object"==typeof t}function Pr(t){return!!Fr(t)&&(Rr(t)||I(t)?Ai:yt).test(or(t))}function qr(t){return"number"==typeof t||zr(t)&&"[object Number]"==Ci.call(t)}function Hr(t){return!(!zr(t)||"[object Object]"!=Ci.call(t)||I(t))&&(t=Bi(Object(t)),null===t||(t=wi.call(t,"constructor")&&t.constructor,"function"==typeof t&&t instanceof t&&_i.call(t)==Ti))}function Br(t){return Fr(t)&&"[object RegExp]"==Ci.call(t)}function $r(t){return"string"==typeof t||!ua(t)&&zr(t)&&"[object String]"==Ci.call(t)}function Wr(t){return"symbol"==typeof t||zr(t)&&"[object Symbol]"==Ci.call(t)}function Ur(t){return zr(t)&&Or(t.length)&&!!Rt[Ci.call(t)]}function Vr(t){if(!t)return[];if(jr(t))return $r(t)?t.match(Et):ln(t);if(Ii&&t[Ii])return O(t[Ii]());var e=Bn(t);return("[object Map]"==e?F:"[object Set]"==e?P:ri)(t)}function Gr(t){return t?(t=Jr(t),t===U||t===-U?1.7976931348623157e308*(0>t?-1:1):t===t?t:0):0===t?t:0}function Yr(t){t=Gr(t);var e=t%1;return t===t?e?t-e:t:0}function Xr(t){return t?te(Yr(t),0,4294967295):0}function Jr(t){if("number"==typeof t)return t;if(Wr(t))return V;if(Fr(t)&&(t=Rr(t.valueOf)?t.valueOf():t,t=Fr(t)?t+"":t),"string"!=typeof t)return 0===t?t:+t;t=t.replace(lt,"");var e=mt.test(t);return e||bt.test(t)?Bt(t.slice(2),e?2:8):vt.test(t)?V:+t}function Zr(t){return un(t,ni(t))}function Kr(t){return null==t?"":Ge(t)}function Qr(t,e,n){return t=null==t?W:de(t,e),t===W?n:t}function ti(t,e){return null!=t&&$n(t,e,me)}function ei(t){var e=tr(t);if(!e&&!jr(t))return Ui(Object(t));var n,r=Gn(t),i=!!r,r=r||[],o=r.length;for(n in t)!ve(t,n)||i&&("length"==n||Jn(n,o))||e&&"constructor"==n||r.push(n);return r}function ni(t){for(var e=-1,n=tr(t),r=Te(t),i=r.length,o=Gn(t),a=!!o,o=o||[],s=o.length;++e<i;){var l=r[e];a&&("length"==l||Jn(l,s))||"constructor"==l&&(n||!wi.call(t,l))||o.push(l)}return o}function ri(t){return t?k(t,ei(t)):[]}function ii(t){return Oa(Kr(t).toLowerCase())}function oi(t){return(t=Kr(t))&&t.replace(_t,j).replace(Dt,"")}function ai(t,e,n){return t=Kr(t),e=n?W:e,e===W&&(e=Nt.test(t)?Mt:ft),t.match(e)||[]}function si(t){return function(){return t}}function li(t){return t}function ui(t){return Se("function"==typeof t?t:ee(t,!0))}function ci(t,e,n){var r=ei(e),o=he(e,r);null!=n||Fr(e)&&(o.length||!r.length)||(n=e,e=t,t=this,o=he(e,ei(e)));var a=!(Fr(n)&&"chain"in n&&!n.chain),s=Rr(t);return i(o,function(n){var r=e[n];t[n]=r,s&&(t.prototype[n]=function(){var e=this.__chain__;if(a||e){var n=t(this.__wrapped__);return(n.__actions__=ln(this.__actions__)).push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,f([this.value()],arguments))})}),t}function fi(){}function hi(t){return Kn(t)?Re(ir(t)):Ie(t)}M=M?Jt.defaults({},M,Jt.pick(Xt,Lt)):Xt;var di=M.Date,pi=M.Error,gi=M.Math,vi=M.RegExp,mi=M.TypeError,yi=M.Array.prototype,bi=M.Object.prototype,xi=M.String.prototype,_i=M.Function.prototype.toString,wi=bi.hasOwnProperty,Si=0,Ti=_i.call(Object),Ci=bi.toString,ki=Xt._,Ai=vi("^"+_i.call(wi).replace(at,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Di=Ut?M.Buffer:W,Ei=M.Reflect,Mi=M.Symbol,ji=M.Uint8Array,Ni=M.clearTimeout,Li=Ei?Ei.f:W,Ri=Object.getOwnPropertySymbols,Ii="symbol"==typeof(Ii=Mi&&Mi.iterator)?Ii:W,Oi=Object.create,Fi=bi.propertyIsEnumerable,zi=M.setTimeout,Pi=yi.splice,qi=gi.ceil,Hi=gi.floor,Bi=Object.getPrototypeOf,$i=M.isFinite,Wi=yi.join,Ui=Object.keys,Vi=gi.max,Gi=gi.min,Yi=M.parseInt,Xi=gi.random,Ji=xi.replace,Zi=yi.reverse,Ki=xi.split,Qi=qn(M,"DataView"),to=qn(M,"Map"),eo=qn(M,"Promise"),no=qn(M,"Set"),ro=qn(M,"WeakMap"),io=qn(Object,"create"),oo=ro&&new ro,ao=!Fi.call({valueOf:1},"valueOf"),so={},lo=or(Qi),uo=or(to),co=or(eo),fo=or(no),ho=or(ro),po=Mi?Mi.prototype:W,go=po?po.valueOf:W,vo=po?po.toString:W;Tt.templateSettings={escape:tt,evaluate:et,interpolate:nt,variable:"",imports:{_:Tt}},Tt.prototype=Ct.prototype,Tt.prototype.constructor=Tt,kt.prototype=re(Ct.prototype),kt.prototype.constructor=kt,Ot.prototype=re(Ct.prototype),Ot.prototype.constructor=Ot,Ft.prototype.clear=function(){this.__data__=io?io(null):{}},Ft.prototype["delete"]=function(t){return this.has(t)&&delete this.__data__[t]},Ft.prototype.get=function(t){var e=this.__data__;return io?(t=e[t],"__lodash_hash_undefined__"===t?W:t):wi.call(e,t)?e[t]:W},Ft.prototype.has=function(t){var e=this.__data__;return io?e[t]!==W:wi.call(e,t)},Ft.prototype.set=function(t,e){return this.__data__[t]=io&&e===W?"__lodash_hash_undefined__":e,this},zt.prototype.clear=function(){this.__data__=[]},zt.prototype["delete"]=function(t){var e=this.__data__;return t=Yt(e,t),!(0>t)&&(t==e.length-1?e.pop():Pi.call(e,t,1),!0)},zt.prototype.get=function(t){var e=this.__data__;return t=Yt(e,t),0>t?W:e[t][1]},zt.prototype.has=function(t){return-1<Yt(this.__data__,t)},zt.prototype.set=function(t,e){var n=this.__data__,r=Yt(n,t);return 0>r?n.push([t,e]):n[r][1]=e,this},Pt.prototype.clear=function(){this.__data__={hash:new Ft,map:new(to||zt),string:new Ft}},Pt.prototype["delete"]=function(t){return zn(this,t)["delete"](t)},Pt.prototype.get=function(t){return zn(this,t).get(t)},Pt.prototype.has=function(t){return zn(this,t).has(t)},Pt.prototype.set=function(t,e){return zn(this,t).set(t,e),this},qt.prototype.add=qt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},qt.prototype.has=function(t){return this.__data__.has(t)},$t.prototype.clear=function(){this.__data__=new zt},$t.prototype["delete"]=function(t){return this.__data__["delete"](t)},$t.prototype.get=function(t){return this.__data__.get(t)},$t.prototype.has=function(t){return this.__data__.has(t)},$t.prototype.set=function(t,e){var n=this.__data__;return n instanceof zt&&200==n.__data__.length&&(n=this.__data__=new Pt(n.__data__)),n.set(t,e),this};var mo=dn(ce),yo=dn(fe,!0),bo=pn(),xo=pn(!0);Li&&!Fi.call({valueOf:1},"valueOf")&&(Te=function(t){return O(Li(t))});var _o=oo?function(t,e){return oo.set(t,e),t}:li,wo=no&&1/P(new no([,-0]))[1]==U?function(t){return new no(t)}:fi,So=oo?function(t){return oo.get(t)}:fi,To=Re("length");Ri||(Hn=function(){return[]});var Co=Ri?function(t){for(var e=[];t;)f(e,Hn(t)),t=Bi(Object(t));return e}:Hn;(Qi&&"[object DataView]"!=Bn(new Qi(new ArrayBuffer(1)))||to&&"[object Map]"!=Bn(new to)||eo&&"[object Promise]"!=Bn(eo.resolve())||no&&"[object Set]"!=Bn(new no)||ro&&"[object WeakMap]"!=Bn(new ro))&&(Bn=function(t){var e=Ci.call(t);if(t=(t="[object Object]"==e?t.constructor:W)?or(t):W)switch(t){case lo:return"[object DataView]";case uo:return"[object Map]";case co:return"[object Promise]";case fo:return"[object Set]";case ho:return"[object WeakMap]"}return e});var ko=function(){var t=0,e=0;return function(n,r){var i=Ko(),o=16-(i-e);if(e=i,o>0){if(150<=++t)return n}else t=0;return _o(n,r)}}(),Ao=Ar(function(t){var e=[];return Kr(t).replace(ot,function(t,n,r,i){e.push(r?i.replace(ht,"$1"):n||t)}),e}),Do=Dr(function(t,e){return Nr(t)?oe(t,ue(e,1,Nr,!0)):[]}),Eo=Dr(function(t,e){var n=cr(e);return Nr(n)&&(n=W),Nr(t)?oe(t,ue(e,1,Nr,!0),Fn(n)):[]}),Mo=Dr(function(t,e){var n=cr(e);return Nr(n)&&(n=W),Nr(t)?oe(t,ue(e,1,Nr,!0),W,n):[]}),jo=Dr(function(t){var e=c(t,Qe);return e.length&&e[0]===t[0]?ye(e):[]}),No=Dr(function(t){var e=cr(t),n=c(t,Qe);return e===cr(n)?e=W:n.pop(),n.length&&n[0]===t[0]?ye(n,Fn(e)):[]}),Lo=Dr(function(t){var e=cr(t),n=c(t,Qe);return e===cr(n)?e=W:n.pop(),n.length&&n[0]===t[0]?ye(n,W,e):[]}),Ro=Dr(fr),Io=Dr(function(t,e){e=ue(e,1);var n=t?t.length:0,r=Qt(t,e);return Fe(t,c(e,function(t){return Jn(t,n)?+t:t}).sort(on)),r}),Oo=Dr(function(t){return Ye(ue(t,1,Nr,!0))}),Fo=Dr(function(t){var e=cr(t);return Nr(e)&&(e=W),Ye(ue(t,1,Nr,!0),Fn(e))}),zo=Dr(function(t){var e=cr(t);return Nr(e)&&(e=W),Ye(ue(t,1,Nr,!0),W,e)}),Po=Dr(function(t,e){return Nr(t)?oe(t,e):[]}),qo=Dr(function(t){return Ze(s(t,Nr))}),Ho=Dr(function(t){var e=cr(t);return Nr(e)&&(e=W),Ze(s(t,Nr),Fn(e))}),Bo=Dr(function(t){var e=cr(t);return Nr(e)&&(e=W),Ze(s(t,Nr),W,e)}),$o=Dr(dr),Wo=Dr(function(t){var e=t.length,e=e>1?t[e-1]:W,e="function"==typeof e?(t.pop(),e):W;return pr(t,e)}),Uo=Dr(function(t){function e(e){return Qt(e,t)}t=ue(t,1);var n=t.length,r=n?t[0]:0,i=this.__wrapped__;return!(n>1||this.__actions__.length)&&i instanceof Ot&&Jn(r)?(i=i.slice(r,+r+(n?1:0)),i.__actions__.push({func:vr,args:[e],thisArg:W}),new kt(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(W),t})):this.thru(e)}),Vo=fn(function(t,e,n){wi.call(t,n)?++t[n]:t[n]=1}),Go=fn(function(t,e,n){wi.call(t,n)?t[n].push(e):t[n]=[e]}),Yo=Dr(function(t,e,r){var i=-1,o="function"==typeof e,a=Kn(e),s=jr(t)?Array(t.length):[];return mo(t,function(t){var l=o?e:a&&null!=t?t[e]:W;s[++i]=l?n(l,t,r):xe(t,e,r)}),s}),Xo=fn(function(t,e,n){t[n]=e}),Jo=fn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),Zo=Dr(function(t,e){if(null==t)return[];var n=e.length;return n>1&&Zn(t,e[0],e[1])?e=[]:n>2&&Zn(e[0],e[1],e[2])&&(e=[e[0]]),e=1==e.length&&ua(e[0])?e[0]:ue(e,1,Xn),je(t,e,[])}),Ko=di.now,Qo=Dr(function(t,e,n){var r=1;if(n.length)var i=z(n,On(Qo)),r=32|r;return Nn(t,r,e,n,i)}),ta=Dr(function(t,e,n){var r=3;if(n.length)var i=z(n,On(ta)),r=32|r;return Nn(e,r,t,n,i)}),ea=Dr(function(t,e){return ie(t,1,e)}),na=Dr(function(t,e,n){return ie(t,Jr(e)||0,n)});Ar.Cache=Pt;var ra=Dr(function(t,e){e=1==e.length&&ua(e[0])?c(e[0],C(Fn())):c(ue(e,1,Xn),C(Fn()));var r=e.length;return Dr(function(i){for(var o=-1,a=Gi(i.length,r);++o<a;)i[o]=e[o].call(this,i[o]);return n(t,this,i)})}),ia=Dr(function(t,e){var n=z(e,On(ia));return Nn(t,32,W,e,n)}),oa=Dr(function(t,e){var n=z(e,On(oa));return Nn(t,64,W,e,n)}),aa=Dr(function(t,e){return Nn(t,256,W,W,W,ue(e,1))}),sa=Dn(ge),la=Dn(function(t,e){return t>=e}),ua=Array.isArray,ca=Di?function(t){return t instanceof Di}:si(!1),fa=Dn(Ce),ha=Dn(function(t,e){return e>=t}),da=hn(function(t,e){if(ao||tr(e)||jr(e))un(e,ei(e),t);else for(var n in e)wi.call(e,n)&&Gt(t,n,e[n])}),pa=hn(function(t,e){if(ao||tr(e)||jr(e))un(e,ni(e),t);else for(var n in e)Gt(t,n,e[n])}),ga=hn(function(t,e,n,r){un(e,ni(e),t,r)}),va=hn(function(t,e,n,r){un(e,ei(e),t,r)}),ma=Dr(function(t,e){return Qt(t,ue(e,1))}),ya=Dr(function(t){return t.push(W,Wt),n(ga,W,t)}),ba=Dr(function(t){return t.push(W,nr),n(Ta,W,t)}),xa=wn(function(t,e,n){t[e]=n},si(li)),_a=wn(function(t,e,n){wi.call(t,e)?t[e].push(n):t[e]=[n]},Fn),wa=Dr(xe),Sa=hn(function(t,e,n){Ee(t,e,n)}),Ta=hn(function(t,e,n,r){Ee(t,e,n,r)}),Ca=Dr(function(t,e){return null==t?{}:(e=c(ue(e,1),ir),Ne(t,oe(pe(t,ni,Co),e)))}),ka=Dr(function(t,e){return null==t?{}:Ne(t,c(ue(e,1),ir))}),Aa=jn(ei),Da=jn(ni),Ea=mn(function(t,e,n){return e=e.toLowerCase(),t+(n?ii(e):e)}),Ma=mn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ja=mn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Na=vn("toLowerCase"),La=mn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Ra=mn(function(t,e,n){return t+(n?" ":"")+Oa(e)}),Ia=mn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Oa=vn("toUpperCase"),Fa=Dr(function(t,e){try{return n(t,W,e)}catch(r){return Lr(r)?r:new pi(r)}}),za=Dr(function(t,e){return i(ue(e,1),function(e){e=ir(e),t[e]=Qo(t[e],t)}),t}),Pa=xn(),qa=xn(!0),Ha=Dr(function(t,e){return function(n){return xe(n,t,e)}}),Ba=Dr(function(t,e){return function(n){return xe(t,n,e)}}),$a=Tn(c),Wa=Tn(a),Ua=Tn(p),Va=An(),Ga=An(!0),Ya=Sn(function(t,e){return t+e}),Xa=Mn("ceil"),Ja=Sn(function(t,e){return t/e}),Za=Mn("floor"),Ka=Sn(function(t,e){return t*e}),Qa=Mn("round"),ts=Sn(function(t,e){return t-e});return Tt.after=function(t,e){if("function"!=typeof e)throw new mi("Expected a function");return t=Yr(t),function(){return 1>--t?e.apply(this,arguments):void 0}},Tt.ary=wr,Tt.assign=da,Tt.assignIn=pa,Tt.assignInWith=ga,Tt.assignWith=va,Tt.at=ma,Tt.before=Sr,Tt.bind=Qo,Tt.bindAll=za,Tt.bindKey=ta,Tt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return ua(t)?t:[t]},Tt.chain=gr,Tt.chunk=function(t,e,n){if(e=(n?Zn(t,e,n):e===W)?1:Vi(Yr(e),0),n=t?t.length:0,!n||1>e)return[];for(var r=0,i=0,o=Array(qi(n/e));n>r;)o[i++]=He(t,r,r+=e);return o},Tt.compact=function(t){for(var e=-1,n=t?t.length:0,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Tt.concat=function(){for(var t=arguments.length,e=Array(t?t-1:0),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return t?f(ua(n)?ln(n):[n],ue(e,1)):[]},Tt.cond=function(t){var e=t?t.length:0,r=Fn();return t=e?c(t,function(t){if("function"!=typeof t[1])throw new mi("Expected a function");return[r(t[0]),t[1]]}):[],Dr(function(r){for(var i=-1;++i<e;){var o=t[i];if(n(o[0],this,r))return n(o[1],this,r)}})},Tt.conforms=function(t){return ne(ee(t,!0))},Tt.constant=si,Tt.countBy=Vo,Tt.create=function(t,e){var n=re(t);return e?Kt(n,e):n},Tt.curry=Tr,Tt.curryRight=Cr,Tt.debounce=kr,Tt.defaults=ya,Tt.defaultsDeep=ba,Tt.defer=ea,Tt.delay=na,Tt.difference=Do,Tt.differenceBy=Eo,Tt.differenceWith=Mo,Tt.drop=sr,Tt.dropRight=lr,Tt.dropRightWhile=function(t,e){return t&&t.length?Xe(t,Fn(e,3),!0,!0):[]},Tt.dropWhile=function(t,e){return t&&t.length?Xe(t,Fn(e,3),!0):[]},Tt.fill=function(t,e,n,r){var i=t?t.length:0;if(!i)return[];for(n&&"number"!=typeof n&&Zn(t,e,n)&&(n=0,r=i),i=t.length,n=Yr(n),0>n&&(n=-n>i?0:i+n),r=r===W||r>i?i:Yr(r),0>r&&(r+=i),r=n>r?0:Xr(r);r>n;)t[n++]=e;return t},Tt.filter=function(t,e){return(ua(t)?s:le)(t,Fn(e,3))},Tt.flatMap=function(t,e){return ue(xr(t,e),1)},Tt.flatMapDeep=function(t,e){return ue(xr(t,e),U)},Tt.flatMapDepth=function(t,e,n){return n=n===W?1:Yr(n),ue(xr(t,e),n)},Tt.flatten=function(t){return t&&t.length?ue(t,1):[]},Tt.flattenDeep=function(t){return t&&t.length?ue(t,U):[]},Tt.flattenDepth=function(t,e){return t&&t.length?(e=e===W?1:Yr(e),ue(t,e)):[]},Tt.flip=function(t){return Nn(t,512)},Tt.flow=Pa,Tt.flowRight=qa,Tt.fromPairs=function(t){for(var e=-1,n=t?t.length:0,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Tt.functions=function(t){return null==t?[]:he(t,ei(t))},Tt.functionsIn=function(t){return null==t?[]:he(t,ni(t))},Tt.groupBy=Go,Tt.initial=function(t){return lr(t,1)},Tt.intersection=jo,Tt.intersectionBy=No,Tt.intersectionWith=Lo,Tt.invert=xa,Tt.invertBy=_a,Tt.invokeMap=Yo,Tt.iteratee=ui,Tt.keyBy=Xo,Tt.keys=ei,Tt.keysIn=ni,Tt.map=xr,Tt.mapKeys=function(t,e){var n={};return e=Fn(e,3),ce(t,function(t,r,i){n[e(t,r,i)]=t}),n},Tt.mapValues=function(t,e){var n={};return e=Fn(e,3),ce(t,function(t,r,i){n[r]=e(t,r,i)}),n},Tt.matches=function(t){return Ae(ee(t,!0))},Tt.matchesProperty=function(t,e){return De(t,ee(e,!0))},Tt.memoize=Ar,Tt.merge=Sa,Tt.mergeWith=Ta,Tt.method=Ha,Tt.methodOf=Ba,Tt.mixin=ci,Tt.negate=function(t){if("function"!=typeof t)throw new mi("Expected a function");return function(){return!t.apply(this,arguments)}},Tt.nthArg=function(t){return t=Yr(t),Dr(function(e){return Me(e,t)})},Tt.omit=Ca,Tt.omitBy=function(t,e){return e=Fn(e),Le(t,function(t,n){return!e(t,n)})},Tt.once=function(t){return Sr(2,t)},Tt.orderBy=function(t,e,n,r){return null==t?[]:(ua(e)||(e=null==e?[]:[e]),n=r?W:n,ua(n)||(n=null==n?[]:[n]),je(t,e,n))},Tt.over=$a,Tt.overArgs=ra,Tt.overEvery=Wa,Tt.overSome=Ua,Tt.partial=ia,Tt.partialRight=oa,Tt.partition=Jo,Tt.pick=ka,Tt.pickBy=function(t,e){return null==t?{}:Le(t,Fn(e))},Tt.property=hi,Tt.propertyOf=function(t){return function(e){return null==t?W:de(t,e)}},Tt.pull=Ro,Tt.pullAll=fr,Tt.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Oe(t,e,Fn(n)):t},Tt.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Oe(t,e,W,n):t},Tt.pullAt=Io,Tt.range=Va,Tt.rangeRight=Ga,Tt.rearg=aa,Tt.reject=function(t,e){var n=ua(t)?s:le;return e=Fn(e,3),n(t,function(t,n,r){return!e(t,n,r)})},Tt.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Fn(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Fe(t,i),n},Tt.rest=Dr,Tt.reverse=hr,Tt.sampleSize=_r,Tt.set=function(t,e,n){return null==t?t:qe(t,e,n)},Tt.setWith=function(t,e,n,r){return r="function"==typeof r?r:W,null==t?t:qe(t,e,n,r)},Tt.shuffle=function(t){return _r(t,4294967295)},Tt.slice=function(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Zn(t,e,n)?(e=0,n=r):(e=null==e?0:Yr(e),n=n===W?r:Yr(n)),He(t,e,n)):[]},Tt.sortBy=Zo,Tt.sortedUniq=function(t){return t&&t.length?Ue(t):[]},Tt.sortedUniqBy=function(t,e){return t&&t.length?Ue(t,Fn(e)):[]},Tt.split=function(t,e,n){return n&&"number"!=typeof n&&Zn(t,e,n)&&(e=n=W),n=n===W?4294967295:n>>>0,n?(t=Kr(t))&&("string"==typeof e||null!=e&&!Br(e))&&(e=Ge(e),""==e&&jt.test(t))?en(t.match(Et),0,n):Ki.call(t,e,n):[]},Tt.spread=function(t,e){if("function"!=typeof t)throw new mi("Expected a function");return e=e===W?0:Vi(Yr(e),0),Dr(function(r){var i=r[e];return r=en(r,0,e),i&&f(r,i),n(t,this,r)})},Tt.tail=function(t){return sr(t,1)},Tt.take=function(t,e,n){return t&&t.length?(e=n||e===W?1:Yr(e),He(t,0,0>e?0:e)):[]},Tt.takeRight=function(t,e,n){var r=t?t.length:0;return r?(e=n||e===W?1:Yr(e),e=r-e,He(t,0>e?0:e,r)):[]},Tt.takeRightWhile=function(t,e){return t&&t.length?Xe(t,Fn(e,3),!1,!0):[]},Tt.takeWhile=function(t,e){return t&&t.length?Xe(t,Fn(e,3)):[]},Tt.tap=function(t,e){return e(t),t},Tt.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new mi("Expected a function");return Fr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),kr(t,e,{leading:r,maxWait:e,trailing:i})},Tt.thru=vr,Tt.toArray=Vr,Tt.toPairs=Aa,Tt.toPairsIn=Da,Tt.toPath=function(t){return ua(t)?c(t,ir):Wr(t)?[t]:ln(Ao(t))},Tt.toPlainObject=Zr,Tt.transform=function(t,e,n){var r=ua(t)||Ur(t);if(e=Fn(e,4),null==n)if(r||Fr(t)){var o=t.constructor;n=r?ua(t)?new o:[]:Rr(o)?re(Bi(Object(t))):{}}else n={};return(r?i:ce)(t,function(t,r,i){return e(n,t,r,i)}),n},Tt.unary=function(t){return wr(t,1)},Tt.union=Oo,Tt.unionBy=Fo,Tt.unionWith=zo,Tt.uniq=function(t){
return t&&t.length?Ye(t):[]},Tt.uniqBy=function(t,e){return t&&t.length?Ye(t,Fn(e)):[]},Tt.uniqWith=function(t,e){return t&&t.length?Ye(t,W,e):[]},Tt.unset=function(t,e){var n;if(null==t)n=!0;else{n=t;var r=e,r=Kn(r,n)?[r]:tn(r);n=rr(n,r),r=ir(cr(r)),n=!(null!=n&&ve(n,r))||delete n[r]}return n},Tt.unzip=dr,Tt.unzipWith=pr,Tt.update=function(t,e,n){return null==t?t:qe(t,e,("function"==typeof n?n:li)(de(t,e)),void 0)},Tt.updateWith=function(t,e,n,r){return r="function"==typeof r?r:W,null!=t&&(t=qe(t,e,("function"==typeof n?n:li)(de(t,e)),r)),t},Tt.values=ri,Tt.valuesIn=function(t){return null==t?[]:k(t,ni(t))},Tt.without=Po,Tt.words=ai,Tt.wrap=function(t,e){return e=null==e?li:e,ia(e,t)},Tt.xor=qo,Tt.xorBy=Ho,Tt.xorWith=Bo,Tt.zip=$o,Tt.zipObject=function(t,e){return Ke(t||[],e||[],Gt)},Tt.zipObjectDeep=function(t,e){return Ke(t||[],e||[],qe)},Tt.zipWith=Wo,Tt.entries=Aa,Tt.entriesIn=Da,Tt.extend=pa,Tt.extendWith=ga,ci(Tt,Tt),Tt.add=Ya,Tt.attempt=Fa,Tt.camelCase=Ea,Tt.capitalize=ii,Tt.ceil=Xa,Tt.clamp=function(t,e,n){return n===W&&(n=e,e=W),n!==W&&(n=Jr(n),n=n===n?n:0),e!==W&&(e=Jr(e),e=e===e?e:0),te(Jr(t),e,n)},Tt.clone=function(t){return ee(t,!1,!0)},Tt.cloneDeep=function(t){return ee(t,!0,!0)},Tt.cloneDeepWith=function(t,e){return ee(t,!0,!0,e)},Tt.cloneWith=function(t,e){return ee(t,!1,!0,e)},Tt.deburr=oi,Tt.divide=Ja,Tt.endsWith=function(t,e,n){t=Kr(t),e=Ge(e);var r=t.length;return n=n===W?r:te(Yr(n),0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n},Tt.eq=Er,Tt.escape=function(t){return(t=Kr(t))&&Q.test(t)?t.replace(Z,N):t},Tt.escapeRegExp=function(t){return(t=Kr(t))&&st.test(t)?t.replace(at,"\\$&"):t},Tt.every=function(t,e,n){var r=ua(t)?a:ae;return n&&Zn(t,e,n)&&(e=W),r(t,Fn(e,3))},Tt.find=function(t,e){if(e=Fn(e,3),ua(t)){var n=v(t,e);return n>-1?t[n]:W}return g(t,e,mo)},Tt.findIndex=function(t,e){return t&&t.length?v(t,Fn(e,3)):-1},Tt.findKey=function(t,e){return g(t,Fn(e,3),ce,!0)},Tt.findLast=function(t,e){if(e=Fn(e,3),ua(t)){var n=v(t,e,!0);return n>-1?t[n]:W}return g(t,e,yo)},Tt.findLastIndex=function(t,e){return t&&t.length?v(t,Fn(e,3),!0):-1},Tt.findLastKey=function(t,e){return g(t,Fn(e,3),fe,!0)},Tt.floor=Za,Tt.forEach=yr,Tt.forEachRight=br,Tt.forIn=function(t,e){return null==t?t:bo(t,Fn(e,3),ni)},Tt.forInRight=function(t,e){return null==t?t:xo(t,Fn(e,3),ni)},Tt.forOwn=function(t,e){return t&&ce(t,Fn(e,3))},Tt.forOwnRight=function(t,e){return t&&fe(t,Fn(e,3))},Tt.get=Qr,Tt.gt=sa,Tt.gte=la,Tt.has=function(t,e){return null!=t&&$n(t,e,ve)},Tt.hasIn=ti,Tt.head=ur,Tt.identity=li,Tt.includes=function(t,e,n,r){return t=jr(t)?t:ri(t),n=n&&!r?Yr(n):0,r=t.length,0>n&&(n=Vi(r+n,0)),$r(t)?r>=n&&-1<t.indexOf(e,n):!!r&&-1<m(t,e,n)},Tt.indexOf=function(t,e,n){var r=t?t.length:0;return r?(n=Yr(n),0>n&&(n=Vi(r+n,0)),m(t,e,n)):-1},Tt.inRange=function(t,e,n){return e=Jr(e)||0,n===W?(n=e,e=0):n=Jr(n)||0,t=Jr(t),t>=Gi(e,n)&&t<Vi(e,n)},Tt.invoke=wa,Tt.isArguments=Mr,Tt.isArray=ua,Tt.isArrayBuffer=function(t){return zr(t)&&"[object ArrayBuffer]"==Ci.call(t)},Tt.isArrayLike=jr,Tt.isArrayLikeObject=Nr,Tt.isBoolean=function(t){return!0===t||!1===t||zr(t)&&"[object Boolean]"==Ci.call(t)},Tt.isBuffer=ca,Tt.isDate=function(t){return zr(t)&&"[object Date]"==Ci.call(t)},Tt.isElement=function(t){return!!t&&1===t.nodeType&&zr(t)&&!Hr(t)},Tt.isEmpty=function(t){if(jr(t)&&(ua(t)||$r(t)||Rr(t.splice)||Mr(t)||ca(t)))return!t.length;if(zr(t)){var e=Bn(t);if("[object Map]"==e||"[object Set]"==e)return!t.size}for(var n in t)if(wi.call(t,n))return!1;return!(ao&&ei(t).length)},Tt.isEqual=function(t,e){return _e(t,e)},Tt.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:W)?n(t,e):W;return r===W?_e(t,e,n):!!r},Tt.isError=Lr,Tt.isFinite=function(t){return"number"==typeof t&&$i(t)},Tt.isFunction=Rr,Tt.isInteger=Ir,Tt.isLength=Or,Tt.isMap=function(t){return zr(t)&&"[object Map]"==Bn(t)},Tt.isMatch=function(t,e){return t===e||we(t,e,Pn(e))},Tt.isMatchWith=function(t,e,n){return n="function"==typeof n?n:W,we(t,e,Pn(e),n)},Tt.isNaN=function(t){return qr(t)&&t!=+t},Tt.isNative=Pr,Tt.isNil=function(t){return null==t},Tt.isNull=function(t){return null===t},Tt.isNumber=qr,Tt.isObject=Fr,Tt.isObjectLike=zr,Tt.isPlainObject=Hr,Tt.isRegExp=Br,Tt.isSafeInteger=function(t){return Ir(t)&&t>=-9007199254740991&&9007199254740991>=t},Tt.isSet=function(t){return zr(t)&&"[object Set]"==Bn(t)},Tt.isString=$r,Tt.isSymbol=Wr,Tt.isTypedArray=Ur,Tt.isUndefined=function(t){return t===W},Tt.isWeakMap=function(t){return zr(t)&&"[object WeakMap]"==Bn(t)},Tt.isWeakSet=function(t){return zr(t)&&"[object WeakSet]"==Ci.call(t)},Tt.join=function(t,e){return t?Wi.call(t,e):""},Tt.kebabCase=Ma,Tt.last=cr,Tt.lastIndexOf=function(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if(n!==W&&(i=Yr(n),i=(0>i?Vi(r+i,0):Gi(i,r-1))+1),e!==e)return R(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1},Tt.lowerCase=ja,Tt.lowerFirst=Na,Tt.lt=fa,Tt.lte=ha,Tt.max=function(t){return t&&t.length?se(t,li,ge):W},Tt.maxBy=function(t,e){return t&&t.length?se(t,Fn(e),ge):W},Tt.mean=function(t){return b(t,li)},Tt.meanBy=function(t,e){return b(t,Fn(e))},Tt.min=function(t){return t&&t.length?se(t,li,Ce):W},Tt.minBy=function(t,e){return t&&t.length?se(t,Fn(e),Ce):W},Tt.multiply=Ka,Tt.nth=function(t,e){return t&&t.length?Me(t,Yr(e)):W},Tt.noConflict=function(){return Xt._===this&&(Xt._=ki),this},Tt.noop=fi,Tt.now=Ko,Tt.pad=function(t,e,n){t=Kr(t);var r=(e=Yr(e))?H(t):0;return!e||r>=e?t:(e=(e-r)/2,Cn(Hi(e),n)+t+Cn(qi(e),n))},Tt.padEnd=function(t,e,n){t=Kr(t);var r=(e=Yr(e))?H(t):0;return e&&e>r?t+Cn(e-r,n):t},Tt.padStart=function(t,e,n){t=Kr(t);var r=(e=Yr(e))?H(t):0;return e&&e>r?Cn(e-r,n)+t:t},Tt.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),t=Kr(t).replace(lt,""),Yi(t,e||(gt.test(t)?16:10))},Tt.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Zn(t,e,n)&&(e=n=W),n===W&&("boolean"==typeof e?(n=e,e=W):"boolean"==typeof t&&(n=t,t=W)),t===W&&e===W?(t=0,e=1):(t=Jr(t)||0,e===W?(e=t,t=0):e=Jr(e)||0),t>e){var r=t;t=e,e=r}return n||t%1||e%1?(n=Xi(),Gi(t+n*(e-t+Ht("1e-"+((n+"").length-1))),e)):ze(t,e)},Tt.reduce=function(t,e,n){var r=ua(t)?h:x,i=3>arguments.length;return r(t,Fn(e,4),n,i,mo)},Tt.reduceRight=function(t,e,n){var r=ua(t)?d:x,i=3>arguments.length;return r(t,Fn(e,4),n,i,yo)},Tt.repeat=function(t,e,n){return e=(n?Zn(t,e,n):e===W)?1:Yr(e),Pe(Kr(t),e)},Tt.replace=function(){var t=arguments,e=Kr(t[0]);return 3>t.length?e:Ji.call(e,t[1],t[2])},Tt.result=function(t,e,n){e=Kn(e,t)?[e]:tn(e);var r=-1,i=e.length;for(i||(t=W,i=1);++r<i;){var o=null==t?W:t[ir(e[r])];o===W&&(r=i,o=n),t=Rr(o)?o.call(t):o}return t},Tt.round=Qa,Tt.runInContext=$,Tt.sample=function(t){t=jr(t)?t:ri(t);var e=t.length;return e>0?t[ze(0,e-1)]:W},Tt.size=function(t){if(null==t)return 0;if(jr(t)){var e=t.length;return e&&$r(t)?H(t):e}return zr(t)&&(e=Bn(t),"[object Map]"==e||"[object Set]"==e)?t.size:ei(t).length},Tt.snakeCase=La,Tt.some=function(t,e,n){var r=ua(t)?p:Be;return n&&Zn(t,e,n)&&(e=W),r(t,Fn(e,3))},Tt.sortedIndex=function(t,e){return $e(t,e)},Tt.sortedIndexBy=function(t,e,n){return We(t,e,Fn(n))},Tt.sortedIndexOf=function(t,e){var n=t?t.length:0;if(n){var r=$e(t,e);if(n>r&&Er(t[r],e))return r}return-1},Tt.sortedLastIndex=function(t,e){return $e(t,e,!0)},Tt.sortedLastIndexBy=function(t,e,n){return We(t,e,Fn(n),!0)},Tt.sortedLastIndexOf=function(t,e){if(t&&t.length){var n=$e(t,e,!0)-1;if(Er(t[n],e))return n}return-1},Tt.startCase=Ra,Tt.startsWith=function(t,e,n){return t=Kr(t),n=te(Yr(n),0,t.length),t.lastIndexOf(Ge(e),n)==n},Tt.subtract=ts,Tt.sum=function(t){return t&&t.length?w(t,li):0},Tt.sumBy=function(t,e){return t&&t.length?w(t,Fn(e)):0},Tt.template=function(t,e,n){var r=Tt.templateSettings;n&&Zn(t,e,n)&&(e=W),t=Kr(t),e=ga({},e,r,Wt),n=ga({},e.imports,r.imports,Wt);var i,o,a=ei(n),s=k(n,a),l=0;n=e.interpolate||wt;var u="__p+='";n=vi((e.escape||wt).source+"|"+n.source+"|"+(n===nt?dt:wt).source+"|"+(e.evaluate||wt).source+"|$","g");var c="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";if(t.replace(n,function(e,n,r,a,s,c){return r||(r=a),u+=t.slice(l,c).replace(St,L),n&&(i=!0,u+="'+__e("+n+")+'"),s&&(o=!0,u+="';"+s+";\n__p+='"),r&&(u+="'+((__t=("+r+"))==null?'':__t)+'"),l=c+e.length,e}),u+="';",(e=e.variable)||(u="with(obj){"+u+"}"),u=(o?u.replace(G,""):u).replace(Y,"$1").replace(X,"$1;"),u="function("+(e||"obj")+"){"+(e?"":"obj||(obj={});")+"var __t,__p=''"+(i?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+u+"return __p}",e=Fa(function(){return Function(a,c+"return "+u).apply(W,s)}),e.source=u,Lr(e))throw e;return e},Tt.times=function(t,e){if(t=Yr(t),1>t||t>9007199254740991)return[];var n=4294967295,r=Gi(t,4294967295);for(e=Fn(e),t-=4294967295,r=S(r,e);++n<t;)e(n);return r},Tt.toFinite=Gr,Tt.toInteger=Yr,Tt.toLength=Xr,Tt.toLower=function(t){return Kr(t).toLowerCase()},Tt.toNumber=Jr,Tt.toSafeInteger=function(t){return te(Yr(t),-9007199254740991,9007199254740991)},Tt.toString=Kr,Tt.toUpper=function(t){return Kr(t).toUpperCase()},Tt.trim=function(t,e,n){return(t=Kr(t))&&(n||e===W)?t.replace(lt,""):t&&(e=Ge(e))?(t=t.match(Et),e=e.match(Et),en(t,D(t,e),E(t,e)+1).join("")):t},Tt.trimEnd=function(t,e,n){return(t=Kr(t))&&(n||e===W)?t.replace(ct,""):t&&(e=Ge(e))?(t=t.match(Et),e=E(t,e.match(Et))+1,en(t,0,e).join("")):t},Tt.trimStart=function(t,e,n){return(t=Kr(t))&&(n||e===W)?t.replace(ut,""):t&&(e=Ge(e))?(t=t.match(Et),e=D(t,e.match(Et)),en(t,e).join("")):t},Tt.truncate=function(t,e){var n=30,r="...";if(Fr(e))var i="separator"in e?e.separator:i,n="length"in e?Yr(e.length):n,r="omission"in e?Ge(e.omission):r;t=Kr(t);var o=t.length;if(jt.test(t))var a=t.match(Et),o=a.length;if(n>=o)return t;if(o=n-H(r),1>o)return r;if(n=a?en(a,0,o).join(""):t.slice(0,o),i===W)return n+r;if(a&&(o+=n.length-o),Br(i)){if(t.slice(o).search(i)){var s=n;for(i.global||(i=vi(i.source,Kr(pt.exec(i))+"g")),i.lastIndex=0;a=i.exec(s);)var l=a.index;n=n.slice(0,l===W?o:l)}}else t.indexOf(Ge(i),o)!=o&&(i=n.lastIndexOf(i),i>-1&&(n=n.slice(0,i)));return n+r},Tt.unescape=function(t){return(t=Kr(t))&&K.test(t)?t.replace(J,B):t},Tt.uniqueId=function(t){var e=++Si;return Kr(t)+e},Tt.upperCase=Ia,Tt.upperFirst=Oa,Tt.each=yr,Tt.eachRight=br,Tt.first=ur,ci(Tt,function(){var t={};return ce(Tt,function(e,n){wi.call(Tt.prototype,n)||(t[n]=e)}),t}(),{chain:!1}),Tt.VERSION="4.12.0",i("bind bindKey curry curryRight partial partialRight".split(" "),function(t){Tt[t].placeholder=Tt}),i(["drop","take"],function(t,e){Ot.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new Ot(this);n=n===W?1:Vi(Yr(n),0);var i=this.clone();return r?i.__takeCount__=Gi(n,i.__takeCount__):i.__views__.push({size:Gi(n,4294967295),type:t+(0>i.__dir__?"Right":"")}),i},Ot.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),i(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;Ot.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Fn(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),i(["head","last"],function(t,e){var n="take"+(e?"Right":"");Ot.prototype[t]=function(){return this[n](1).value()[0]}}),i(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");Ot.prototype[t]=function(){return this.__filtered__?new Ot(this):this[n](1)}}),Ot.prototype.compact=function(){return this.filter(li)},Ot.prototype.find=function(t){return this.filter(t).head()},Ot.prototype.findLast=function(t){return this.reverse().find(t)},Ot.prototype.invokeMap=Dr(function(t,e){return"function"==typeof t?new Ot(this):this.map(function(n){return xe(n,t,e)})}),Ot.prototype.reject=function(t){return t=Fn(t,3),this.filter(function(e){return!t(e)})},Ot.prototype.slice=function(t,e){t=Yr(t);var n=this;return n.__filtered__&&(t>0||0>e)?new Ot(n):(0>t?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==W&&(e=Yr(e),n=0>e?n.dropRight(-e):n.take(e-t)),n)},Ot.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Ot.prototype.toArray=function(){return this.take(4294967295)},ce(Ot.prototype,function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),i=Tt[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);i&&(Tt.prototype[e]=function(){function e(t){return t=i.apply(Tt,f([t],s)),r&&h?t[0]:t}var a=this.__wrapped__,s=r?[1]:arguments,l=a instanceof Ot,u=s[0],c=l||ua(a);c&&n&&"function"==typeof u&&1!=u.length&&(l=c=!1);var h=this.__chain__,d=!!this.__actions__.length,u=o&&!h,l=l&&!d;return!o&&c?(a=l?a:new Ot(this),a=t.apply(a,s),a.__actions__.push({func:vr,args:[e],thisArg:W}),new kt(a,h)):u&&l?t.apply(this,s):(a=this.thru(e),u?r?a.value()[0]:a.value():a)})}),i("pop push shift sort splice unshift".split(" "),function(t){var e=yi[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Tt.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(ua(i)?i:[],t)}return this[n](function(n){return e.apply(ua(n)?n:[],t)})}}),ce(Ot.prototype,function(t,e){var n=Tt[e];if(n){var r=n.name+"";(so[r]||(so[r]=[])).push({name:e,func:n})}}),so[_n(W,2).name]=[{name:"wrapper",func:W}],Ot.prototype.clone=function(){var t=new Ot(this.__wrapped__);return t.__actions__=ln(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=ln(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=ln(this.__views__),t},Ot.prototype.reverse=function(){if(this.__filtered__){var t=new Ot(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t},Ot.prototype.value=function(){var t,e=this.__wrapped__.value(),n=this.__dir__,r=ua(e),i=0>n,o=r?e.length:0;t=o;for(var a=this.__views__,s=0,l=-1,u=a.length;++l<u;){var c=a[l],f=c.size;switch(c.type){case"drop":s+=f;break;case"dropRight":t-=f;break;case"take":t=Gi(t,s+f);break;case"takeRight":s=Vi(s,t-f)}}if(t={start:s,end:t},a=t.start,s=t.end,t=s-a,i=i?s:a-1,a=this.__iteratees__,s=a.length,l=0,u=Gi(t,this.__takeCount__),!r||200>o||o==t&&u==t)return Je(e,this.__actions__);r=[];t:for(;t--&&u>l;){for(i+=n,o=-1,c=e[i];++o<s;){var h=a[o],f=h.type,h=(0,h.iteratee)(c);if(2==f)c=h;else if(!h){if(1==f)continue t;break t}}r[l++]=c}return r},Tt.prototype.at=Uo,Tt.prototype.chain=function(){return gr(this)},Tt.prototype.commit=function(){return new kt(this.value(),this.__chain__)},Tt.prototype.next=function(){this.__values__===W&&(this.__values__=Vr(this.value()));var t=this.__index__>=this.__values__.length,e=t?W:this.__values__[this.__index__++];return{done:t,value:e}},Tt.prototype.plant=function(t){for(var e,n=this;n instanceof Ct;){var r=ar(n);r.__index__=0,r.__values__=W,e?i.__wrapped__=r:e=r;var i=r,n=n.__wrapped__}return i.__wrapped__=t,e},Tt.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof Ot?(this.__actions__.length&&(t=new Ot(this)),t=t.reverse(),t.__actions__.push({func:vr,args:[hr],thisArg:W}),new kt(t,this.__chain__)):this.thru(hr)},Tt.prototype.toJSON=Tt.prototype.valueOf=Tt.prototype.value=function(){return Je(this.__wrapped__,this.__actions__)},Ii&&(Tt.prototype[Ii]=mr),Tt}var W,U=1/0,V=NaN,G=/\b__p\+='';/g,Y=/\b(__p\+=)''\+/g,X=/(__e\(.*?\)|\b__t\))\+'';/g,J=/&(?:amp|lt|gt|quot|#39|#96);/g,Z=/[&<>"'`]/g,K=RegExp(J.source),Q=RegExp(Z.source),tt=/<%-([\s\S]+?)%>/g,et=/<%([\s\S]+?)%>/g,nt=/<%=([\s\S]+?)%>/g,rt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,it=/^\w*$/,ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,at=/[\\^$.*+?()[\]{}|]/g,st=RegExp(at.source),lt=/^\s+|\s+$/g,ut=/^\s+/,ct=/\s+$/,ft=/[a-zA-Z0-9]+/g,ht=/\\(\\)?/g,dt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,pt=/\w*$/,gt=/^0x/i,vt=/^[-+]0x[0-9a-f]+$/i,mt=/^0b[01]+$/i,yt=/^\[object .+?Constructor\]$/,bt=/^0o[0-7]+$/i,xt=/^(?:0|[1-9]\d*)$/,_t=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,wt=/($^)/,St=/['\n\r\u2028\u2029\\]/g,Tt="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*",Ct="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+Tt,kt="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",At=RegExp("[']","g"),Dt=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),Et=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+kt+Tt,"g"),Mt=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['](?:D|LL|M|RE|S|T|VE))?|\\d+",Ct].join("|"),"g"),jt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Nt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lt="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Rt={};Rt["[object Float32Array]"]=Rt["[object Float64Array]"]=Rt["[object Int8Array]"]=Rt["[object Int16Array]"]=Rt["[object Int32Array]"]=Rt["[object Uint8Array]"]=Rt["[object Uint8ClampedArray]"]=Rt["[object Uint16Array]"]=Rt["[object Uint32Array]"]=!0,Rt["[object Arguments]"]=Rt["[object Array]"]=Rt["[object ArrayBuffer]"]=Rt["[object Boolean]"]=Rt["[object DataView]"]=Rt["[object Date]"]=Rt["[object Error]"]=Rt["[object Function]"]=Rt["[object Map]"]=Rt["[object Number]"]=Rt["[object Object]"]=Rt["[object RegExp]"]=Rt["[object Set]"]=Rt["[object String]"]=Rt["[object WeakMap]"]=!1;var It={};It["[object Arguments]"]=It["[object Array]"]=It["[object ArrayBuffer]"]=It["[object DataView]"]=It["[object Boolean]"]=It["[object Date]"]=It["[object Float32Array]"]=It["[object Float64Array]"]=It["[object Int8Array]"]=It["[object Int16Array]"]=It["[object Int32Array]"]=It["[object Map]"]=It["[object Number]"]=It["[object Object]"]=It["[object RegExp]"]=It["[object Set]"]=It["[object String]"]=It["[object Symbol]"]=It["[object Uint8Array]"]=It["[object Uint8ClampedArray]"]=It["[object Uint16Array]"]=It["[object Uint32Array]"]=!0,It["[object Error]"]=It["[object Function]"]=It["[object WeakMap]"]=!1;var Ot={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},zt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Pt={"function":!0,object:!0},qt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ht=parseFloat,Bt=parseInt,$t=Pt[typeof exports]&&exports&&!exports.nodeType?exports:W,Wt=Pt[typeof module]&&module&&!module.nodeType?module:W,Ut=Wt&&Wt.exports===$t?$t:W,Vt=M(Pt[typeof self]&&self),Gt=M(Pt[typeof window]&&window),Yt=M(Pt[typeof this]&&this),Xt=M($t&&Wt&&"object"==typeof global&&global)||Gt!==(Yt&&Yt.window)&&Gt||Vt||Yt||Function("return this")(),Jt=$();(Gt||Vt||{})._=Jt,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return Jt}):$t&&Wt?(Ut&&((Wt.exports=Jt)._=Jt),$t._=Jt):Xt._=Jt}.call(this),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,r=this;t(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||t(r).trigger(t.support.transition.end)};return setTimeout(i,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof e&&i[e].call(n)})}var n='[data-dismiss="alert"]',r=function(e){t(e).on("click",n,this.close)};r.VERSION="3.3.1",r.TRANSITION_DURATION=150,r.prototype.close=function(e){function n(){a.detach().trigger("closed.bs.alert").remove()}var i=t(this),o=i.attr("data-target");o||(o=i.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=t(o);e&&e.preventDefault(),a.length||(a=i.closest(".alert")),a.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(a.removeClass("in"),t.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=r,t.fn.alert.noConflict=function(){return t.fn.alert=i,this},t(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.button"),o="object"==typeof e&&e;i||r.data("bs.button",i=new n(this,o)),"toggle"==e?i.toggle():e&&i.setState(e)})}var n=function(e,r){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.1",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",o=r.data();e+="Text",null==o.resetText&&r.data("resetText",r[i]()),setTimeout(t.proxy(function(){r[i](null==o[e]?this.options[e]:o[e]),"loadingText"==e?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));t&&this.$element.toggleClass("active")};var r=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=r,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=t(n.target);r.hasClass("btn")||(r=r.closest(".btn")),e.call(r,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){t(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.carousel"),o=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e),a="string"==typeof e?e:o.slide;i||r.data("bs.carousel",i=new n(this,o)),"number"==typeof e?i.to(e):a?i[a]():o.interval&&i.pause().cycle()})}var n=function(e,n){this.$element=t(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",t.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.3.1",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(t){if(!/input|textarea/i.test(t.target.tagName)){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()}},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.getItemForDirection=function(t,e){var n="prev"==t?-1:1,r=this.getItemIndex(e),i=(r+n)%this.$items.length;return this.$items.eq(i)},n.prototype.to=function(t){var e=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return t>this.$items.length-1||0>t?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){e.to(t)}):n==t?this.pause().cycle():this.slide(t>n?"next":"prev",this.$items.eq(t))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,r){var i=this.$element.find(".item.active"),o=r||this.getItemForDirection(e,i),a=this.interval,s="next"==e?"left":"right",l="next"==e?"first":"last",u=this;if(!o.length){if(!this.options.wrap)return;o=this.$element.find(".item")[l]()}if(o.hasClass("active"))return this.sliding=!1;var c=o[0],f=t.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(f),!f.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var h=t(this.$indicators.children()[this.getItemIndex(o)]);h&&h.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(o.addClass(e),o[0].offsetWidth,i.addClass(s),o.addClass(s),i.one("bsTransitionEnd",function(){o.removeClass([e,s].join(" ")).addClass("active"),i.removeClass(["active",s].join(" ")),u.sliding=!1,setTimeout(function(){u.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(d)),a&&this.cycle(),this}};var r=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=r,this};var i=function(n){var r,i=t(this),o=t(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),i.data()),s=i.attr("data-slide-to");s&&(a.interval=!1),e.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};t(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(jQuery),+function(t){"use strict";function e(e){var n,r=e.attr("data-target")||(n=e.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return t(r)}function n(e){return this.each(function(){var n=t(this),i=n.data("bs.collapse"),o=t.extend({},r.DEFAULTS,n.data(),"object"==typeof e&&e);!i&&o.toggle&&"show"==e&&(o.toggle=!1),i||n.data("bs.collapse",i=new r(this,o)),"string"==typeof e&&i[e]()})}var r=function(e,n){this.$element=t(e),this.options=t.extend({},r.DEFAULTS,n),this.$trigger=t(this.options.trigger).filter('[href="#'+e.id+'"], [data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.1",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0,trigger:'[data-toggle="collapse"]'},r.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,i=this.$parent&&this.$parent.find("> .panel").children(".in, .collapsing");if(!(i&&i.length&&(e=i.data("bs.collapse"),e&&e.transitioning))){var o=t.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),e||i.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var l=t.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[a](this.$element[0][l])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return t(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(t.proxy(function(n,r){var i=t(r);this.addAriaAndCollapsedClass(e(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(t,e){var n=t.hasClass("in");t.attr("aria-expanded",n),e.toggleClass("collapsed",!n).attr("aria-expanded",n);
};var i=t.fn.collapse;t.fn.collapse=n,t.fn.collapse.Constructor=r,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=t(this);i.attr("data-target")||r.preventDefault();var o=e(i),a=o.data("bs.collapse"),s=a?"toggle":t.extend({},i.data(),{trigger:this});n.call(o,s)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(i).remove(),t(o).each(function(){var r=t(this),i=n(r),o={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&t(n);return r&&r.length?r:e.parent()}function r(e){return this.each(function(){var n=t(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new a(this)),"string"==typeof e&&r[e].call(n)})}var i=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.1",a.prototype.toggle=function(r){var i=t(this);if(!i.is(".disabled, :disabled")){var o=n(i),a=o.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(o.trigger(r=t.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var r=t(this);if(e.preventDefault(),e.stopPropagation(),!r.is(".disabled, :disabled")){var i=n(r),a=i.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&i.find(o).trigger("focus"),r.trigger("click");var s=" li:not(.divider):visible a",l=i.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var u=l.index(e.target);38==e.which&&u>0&&u--,40==e.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=r,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,r){return this.each(function(){var i=t(this),o=i.data("bs.modal"),a=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);o||i.data("bs.modal",o=new n(this,a)),"string"==typeof e?o[e](r):a.show&&o.show(r)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.1",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var r=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.options.backdrop&&r.adjustBackdrop(),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});i?r.$element.find(".modal-dialog").one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').prependTo(this.$element).on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){r.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},n.prototype.handleUpdate=function(){this.options.backdrop&&this.adjustBackdrop(),this.adjustDialog()},n.prototype.adjustBackdrop=function(){this.$backdrop.css("height",0).css("height",this.$element[0].scrollHeight)},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){this.bodyIsOverflowing=document.body.scrollHeight>document.documentElement.clientHeight,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var r=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=r,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=t(this),i=r.attr("href"),o=t(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),e.call(o,a,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.tooltip"),o="object"==typeof e&&e,a=o&&o.selector;(i||"destroy"!=e)&&(a?(i||r.data("bs.tooltip",i={}),i[a]||(i[a]=new n(this,o))):i||r.data("bs.tooltip",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,r){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,r){n[t]!=r&&(e[t]=r)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var r=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!r)return;var i=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var c=this.getPosition(),f=o[0].offsetWidth,h=o[0].offsetHeight;if(u){var d=s,p=this.options.container?t(this.options.container):this.$element.parent(),g=this.getPosition(p);s="bottom"==s&&c.bottom+h>g.bottom?"top":"top"==s&&c.top-h<g.top?"bottom":"right"==s&&c.right+f>g.width?"left":"left"==s&&c.left-f<g.left?"right":s,o.removeClass(d).addClass(s)}var v=this.getCalculatedOffset(s,c,f,h);this.applyPlacement(v,s);var m=function(){var t=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==t&&i.leave(i)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(e,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top=e.top+a,e.left=e.left+s,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var l=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=o&&(e.top=e.top+o-u);var c=this.getViewportAdjustedDelta(n,e,l,u);c.left?e.left+=c.left:e.top+=c.top;var f=/top|bottom/.test(n),h=f?2*c.left-i+l:2*c.top-o+u,d=f?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(h,r[0][d],f)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function r(){"in"!=i.hoverState&&o.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),e&&e()}var i=this,o=this.tip(),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=r?{top:0,left:0}:e.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=r?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,a,s,o)},n.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,l=e.top+o-a.scroll+r;s<a.top?i.top=a.top-s:l>a.top+a.height&&(i.top=a.top+a.height-l)}else{var u=e.left-o,c=e.left+o+n;u<a.left?i.left=a.left-u:c>a.width&&(i.left=a.left+a.width-c)}return i},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var r=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=r,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.popover"),o="object"==typeof e&&e,a=o&&o.selector;(i||"destroy"!=e)&&(a?(i||r.data("bs.popover",i={}),i[a]||(i[a]=new n(this,o))):i||r.data("bs.popover",i=new n(this,o)),"string"==typeof e&&i[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.1",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var r=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=r,this}}(jQuery),+function(t){"use strict";function e(n,r){var i=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(n).is("body")?window:n),this.options=t.extend({},e.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",i),this.refresh(),this.process()}function n(n){return this.each(function(){var r=t(this),i=r.data("bs.scrollspy"),o="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new e(this,o)),"string"==typeof n&&i[n]()})}e.VERSION="3.3.1",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",n=0;t.isWindow(this.$scrollElement[0])||(e="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var r=this;this.$body.find(this.selector).map(function(){var r=t(this),i=r.data("target")||r.attr("href"),o=/^#./.test(i)&&t(i);return o&&o.length&&o.is(":visible")&&[[o[e]().top+n,i]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){r.offsets.push(this[0]),r.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=r)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<i[0])return this.activeTarget=null,this.clear();for(t=i.length;t--;)a!=o[t]&&e>=i[t]&&(!i[t+1]||e<=i[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,this.clear();var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',r=t(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},e.prototype.clear=function(){t(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=r,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof e&&i[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.3.1",n.TRANSITION_DURATION=150,n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),r=e.data("target");if(r||(r=e.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var i=n.find(".active:last a"),o=t.Event("hide.bs.tab",{relatedTarget:e[0]}),a=t.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(o),e.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=t(r);this.activate(e.closest("li"),n),this.activate(s,s.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(e,r,i){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var a=r.find("> .active"),s=i&&t.support.transition&&(a.length&&a.hasClass("fade")||!!r.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var r=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=r,this};var i=function(n){n.preventDefault(),e.call(t(this),"show")};t(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.affix"),o="object"==typeof e&&e;i||r.data("bs.affix",i=new n(this,o)),"string"==typeof e&&i[e]()})}var n=function(e,r){this.options=t.extend({},n.DEFAULTS,r),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.1",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(t,e,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(t-r>=i+a)&&"bottom";var s=null==this.affixed,l=s?i:o.top,u=s?a:e;return null!=n&&n>=l?"top":null!=r&&l+u>=t-r&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=t("body").height();"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,e,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=t.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-e-o})}};var r=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=r,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),e.call(n,r)})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var r=t(this),i=r.data("bs.toggle"),o="object"==typeof e&&e;i||r.data("bs.toggle",i=new n(this,o)),"string"==typeof e&&i[e]&&i[e]()})}var n=function(e,n){this.$element=t(e),this.options=t.extend({},this.defaults(),n),this.render()};n.VERSION="2.2.0",n.DEFAULTS={on:"On",off:"Off",onstyle:"primary",offstyle:"default",size:"normal",style:"",width:null,height:null},n.prototype.defaults=function(){return{on:this.$element.attr("data-on")||n.DEFAULTS.on,off:this.$element.attr("data-off")||n.DEFAULTS.off,onstyle:this.$element.attr("data-onstyle")||n.DEFAULTS.onstyle,offstyle:this.$element.attr("data-offstyle")||n.DEFAULTS.offstyle,size:this.$element.attr("data-size")||n.DEFAULTS.size,style:this.$element.attr("data-style")||n.DEFAULTS.style,width:this.$element.attr("data-width")||n.DEFAULTS.width,height:this.$element.attr("data-height")||n.DEFAULTS.height}},n.prototype.render=function(){this._onstyle="btn-"+this.options.onstyle,this._offstyle="btn-"+this.options.offstyle;var e="large"===this.options.size?"btn-lg":"small"===this.options.size?"btn-sm":"mini"===this.options.size?"btn-xs":"",n=t('<label class="btn">').html(this.options.on).addClass(this._onstyle+" "+e),r=t('<label class="btn">').html(this.options.off).addClass(this._offstyle+" "+e+" active"),i=t('<span class="toggle-handle btn btn-default">').addClass(e),o=t('<div class="toggle-group">').append(n,r,i),a=t('<div class="toggle btn" data-toggle="toggle">').addClass(this.$element.prop("checked")?this._onstyle:this._offstyle+" off").addClass(e).addClass(this.options.style);this.$element.wrap(a),t.extend(this,{$toggle:this.$element.parent(),$toggleOn:n,$toggleOff:r,$toggleGroup:o}),this.$toggle.append(o);var s=this.options.width||Math.max(n.outerWidth(),r.outerWidth())+i.outerWidth()/2,l=this.options.height||Math.max(n.outerHeight(),r.outerHeight());n.addClass("toggle-on"),r.addClass("toggle-off"),this.$toggle.css({width:s,height:l}),this.options.height&&(n.css("line-height",n.height()+"px"),r.css("line-height",r.height()+"px")),this.update(!0),this.trigger(!0)},n.prototype.toggle=function(){this.$element.prop("checked")?this.off():this.on()},n.prototype.on=function(t){return!this.$element.prop("disabled")&&(this.$toggle.removeClass(this._offstyle+" off").addClass(this._onstyle),this.$element.prop("checked",!0),void(t||this.trigger()))},n.prototype.off=function(t){return!this.$element.prop("disabled")&&(this.$toggle.removeClass(this._onstyle).addClass(this._offstyle+" off"),this.$element.prop("checked",!1),void(t||this.trigger()))},n.prototype.enable=function(){this.$toggle.removeAttr("disabled"),this.$element.prop("disabled",!1)},n.prototype.disable=function(){this.$toggle.attr("disabled","disabled"),this.$element.prop("disabled",!0)},n.prototype.update=function(t){this.$element.prop("disabled")?this.disable():this.enable(),this.$element.prop("checked")?this.on(t):this.off(t)},n.prototype.trigger=function(e){this.$element.off("change.bs.toggle"),e||this.$element.change(),this.$element.on("change.bs.toggle",t.proxy(function(){this.update()},this))},n.prototype.destroy=function(){this.$element.off("change.bs.toggle"),this.$toggleGroup.remove(),this.$element.removeData("bs.toggle"),this.$element.unwrap()};var r=t.fn.bootstrapToggle;t.fn.bootstrapToggle=e,t.fn.bootstrapToggle.Constructor=n,t.fn.toggle.noConflict=function(){return t.fn.bootstrapToggle=r,this},t(function(){t("input[type=checkbox][data-toggle^=toggle]").bootstrapToggle()}),t(document).on("click.bs.toggle","div[data-toggle^=toggle]",function(e){var n=t(this).find("input[type=checkbox]");n.bootstrapToggle("toggle"),e.preventDefault()})}(jQuery),!function(t,e,n,r){function i(e,n){this.element=t(e),this.settings=t.extend({},w,n),this._defaults=w,this._name=h,this.init()}function o(e){_&&(e.element.addClass("navbar-hidden").animate({top:-e.element.height()},{queue:!1,duration:e.settings.animationDuration}),t(".dropdown.open .dropdown-toggle",e.element).dropdown("toggle"),_=!1)}function a(t){_||(t.element.removeClass("navbar-hidden").animate({top:0},{queue:!1,duration:t.settings.animationDuration}),_=!0)}function s(t){var e=d.scrollTop(),n=e-b;if(b=e,0>n){if(_)return;(t.settings.showOnUpscroll||f>=e)&&a(t)}else if(n>0){if(!_)return void(t.settings.showOnBottom&&e+x===p.height()&&a(t));e>=f&&o(t)}}function l(t){t.settings.disableAutohide||(y=(new Date).getTime(),s(t))}function u(t){p.on("scroll."+h,function(){(new Date).getTime()-y>m?l(t):(clearTimeout(g),g=setTimeout(function(){l(t)},m))}),d.on("resize."+h,function(){clearTimeout(v),v=setTimeout(function(){x=d.height()},m)})}function c(){p.off("."+h),d.off("."+h)}var f,h="autoHidingNavbar",d=t(e),p=t(n),g=null,v=null,m=70,y=0,b=null,x=d.height(),_=!0,w={disableAutohide:!1,showOnUpscroll:!0,showOnBottom:!0,hideOffset:"auto",animationDuration:200};i.prototype={init:function(){return this.elements={navbar:this.element},this.setDisableAutohide(this.settings.disableAutohide),this.setShowOnUpscroll(this.settings.showOnUpscroll),this.setShowOnBottom(this.settings.showOnBottom),this.setHideOffset(this.settings.hideOffset),this.setAnimationDuration(this.settings.animationDuration),f="auto"===this.settings.hideOffset?this.element.height():this.settings.hideOffset,u(this),this.element},setDisableAutohide:function(t){return this.settings.disableAutohide=t,this.element},setShowOnUpscroll:function(t){return this.settings.showOnUpscroll=t,this.element},setShowOnBottom:function(t){return this.settings.showOnBottom=t,this.element},setHideOffset:function(t){return this.settings.hideOffset=t,this.element},setAnimationDuration:function(t){return this.settings.animationDuration=t,this.element},show:function(){return a(this),this.element},hide:function(){return o(this),this.element},destroy:function(){return c(this),a(this),t.data(this,"plugin_"+h,null),this.element}},t.fn[h]=function(e){var n=arguments;if(e===r||"object"==typeof e)return this.each(function(){t.data(this,"plugin_"+h)||t.data(this,"plugin_"+h,new i(this,e))});if("string"==typeof e&&"_"!==e[0]&&"init"!==e){var o;return this.each(function(){var r=t.data(this,"plugin_"+h);r instanceof i&&"function"==typeof r[e]&&(o=r[e].apply(r,Array.prototype.slice.call(n,1)))}),o!==r?o:this}}}(jQuery,window,document),$("div.navbar-fixed-top").autoHidingNavbar(),!function(){function t(t){return t&&(t.ownerDocument||t.document||t).documentElement}function e(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}function n(t,e){return e>t?-1:t>e?1:t>=e?0:NaN}function r(t){return null===t?NaN:+t}function i(t){return!isNaN(t)}function o(t){return{left:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=e.length);i>r;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function a(t){return t.length}function s(t){for(var e=1;t*e%1;)e*=10;return e}function l(t,e){for(var n in e)Object.defineProperty(t.prototype,n,{value:e[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(t){return(t+="")===ga||t[0]===va?va+t:t}function f(t){return(t+="")[0]===va?t.slice(1):t}function h(t){return c(t)in this._;
}function d(t){return(t=c(t))in this._&&delete this._[t]}function p(){var t=[];for(var e in this._)t.push(f(e));return t}function g(){var t=0;for(var e in this._)++t;return t}function v(){for(var t in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(t){return t}function b(t,e,n){return function(){var r=n.apply(e,arguments);return r===e?t:r}}function x(t,e){if(e in t)return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var n=0,r=ma.length;r>n;++n){var i=ma[n]+e;if(i in t)return i}}function _(){}function w(){}function S(t){function e(){for(var e,r=n,i=-1,o=r.length;++i<o;)(e=r[i].on)&&e.apply(this,arguments);return t}var n=[],r=new u;return e.on=function(e,i){var o,a=r.get(e);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(e)),i&&n.push(r.set(e,{on:i})),t)},e}function T(){na.event.preventDefault()}function C(){for(var t,e=na.event;t=e.sourceEvent;)e=t;return e}function k(t){for(var e=new w,n=0,r=arguments.length;++n<r;)e[arguments[n]]=S(e);return e.of=function(n,r){return function(i){try{var o=i.sourceEvent=na.event;i.target=t,na.event=i,e[i.type].apply(n,r)}finally{na.event=o}}},e}function A(t){return ba(t,Sa),t}function D(t){return"function"==typeof t?t:function(){return xa(t,this)}}function E(t){return"function"==typeof t?t:function(){return _a(t,this)}}function M(t,e){function n(){this.removeAttribute(t)}function r(){this.removeAttributeNS(t.space,t.local)}function i(){this.setAttribute(t,e)}function o(){this.setAttributeNS(t.space,t.local,e)}function a(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}function s(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}return t=na.ns.qualify(t),null==e?t.local?r:n:"function"==typeof e?t.local?s:a:t.local?o:i}function j(t){return t.trim().replace(/\s+/g," ")}function N(t){return new RegExp("(?:^|\\s+)"+na.requote(t)+"(?:\\s+|$)","g")}function L(t){return(t+"").trim().split(/^|\s+/)}function R(t,e){function n(){for(var n=-1;++n<i;)t[n](this,e)}function r(){for(var n=-1,r=e.apply(this,arguments);++n<i;)t[n](this,r)}t=L(t).map(I);var i=t.length;return"function"==typeof e?r:n}function I(t){var e=N(t);return function(n,r){if(i=n.classList)return r?i.add(t):i.remove(t);var i=n.getAttribute("class")||"";r?(e.lastIndex=0,e.test(i)||n.setAttribute("class",j(i+" "+t))):n.setAttribute("class",j(i.replace(e," ")))}}function O(t,e,n){function r(){this.style.removeProperty(t)}function i(){this.style.setProperty(t,e,n)}function o(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}return null==e?r:"function"==typeof e?o:i}function F(t,e){function n(){delete this[t]}function r(){this[t]=e}function i(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}return null==e?n:"function"==typeof e?i:r}function z(t){function e(){var e=this.ownerDocument,n=this.namespaceURI;return n?e.createElementNS(n,t):e.createElement(t)}function n(){return this.ownerDocument.createElementNS(t.space,t.local)}return"function"==typeof t?t:(t=na.ns.qualify(t)).local?n:e}function P(){var t=this.parentNode;t&&t.removeChild(this)}function q(t){return{__data__:t}}function H(t){return function(){return wa(this,t)}}function B(t){return arguments.length||(t=n),function(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}}function $(t,e){for(var n=0,r=t.length;r>n;n++)for(var i,o=t[n],a=0,s=o.length;s>a;a++)(i=o[a])&&e(i,a,n);return t}function W(t){return ba(t,Ca),t}function U(t){var e,n;return function(r,i,o){var a,s=t[o].update,l=s.length;for(o!=n&&(n=o,e=0),i>=e&&(e=i+1);!(a=s[e])&&++e<l;);return a}}function V(t,e,n){function r(){var e=this[a];e&&(this.removeEventListener(t,e,e.$),delete this[a])}function i(){var i=l(e,ia(arguments));r.call(this),this.addEventListener(t,this[a]=i,i.$=n),i._=e}function o(){var e,n=new RegExp("^__on([^.]+)"+na.requote(t)+"$");for(var r in this)if(e=r.match(n)){var i=this[r];this.removeEventListener(e[1],i,i.$),delete this[r]}}var a="__on"+t,s=t.indexOf("."),l=G;s>0&&(t=t.slice(0,s));var u=ka.get(t);return u&&(t=u,l=Y),s?e?i:r:e?_:o}function G(t,e){return function(n){var r=na.event;na.event=n,e[0]=this.__data__;try{t.apply(this,e)}finally{na.event=r}}}function Y(t,e){var n=G(t,e);return function(t){var e=this,r=t.relatedTarget;r&&(r===e||8&r.compareDocumentPosition(e))||n.call(e,t)}}function X(n){var r=".dragsuppress-"+ ++Da,i="click"+r,o=na.select(e(n)).on("touchmove"+r,T).on("dragstart"+r,T).on("selectstart"+r,T);if(null==Aa&&(Aa=!("onselectstart"in n)&&x(n.style,"userSelect")),Aa){var a=t(n).style,s=a[Aa];a[Aa]="none"}return function(t){if(o.on(r,null),Aa&&(a[Aa]=s),t){var e=function(){o.on(i,null)};o.on(i,function(){T(),e()},!0),setTimeout(e,0)}}}function J(t,n){n.changedTouches&&(n=n.changedTouches[0]);var r=t.ownerSVGElement||t;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Ea){var o=e(t);if(o.scrollX||o.scrollY){r=na.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Ea=!(a.f||a.e),r.remove()}}return Ea?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var s=t.getBoundingClientRect();return[n.clientX-s.left-t.clientLeft,n.clientY-s.top-t.clientTop]}function Z(){return na.event.changedTouches[0].identifier}function K(t){return t>0?1:0>t?-1:0}function Q(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function tt(t){return t>1?0:-1>t?Na:Math.acos(t)}function et(t){return t>1?Ia:-1>t?-Ia:Math.asin(t)}function nt(t){return((t=Math.exp(t))-1/t)/2}function rt(t){return((t=Math.exp(t))+1/t)/2}function it(t){return((t=Math.exp(2*t))-1)/(t+1)}function ot(t){return(t=Math.sin(t/2))*t}function at(){}function st(t,e,n){return this instanceof st?(this.h=+t,this.s=+e,void(this.l=+n)):arguments.length<2?t instanceof st?new st(t.h,t.s,t.l):_t(""+t,wt,st):new st(t,e,n)}function lt(t,e,n){function r(t){return t>360?t-=360:0>t&&(t+=360),60>t?o+(a-o)*t/60:180>t?a:240>t?o+(a-o)*(240-t)/60:o}function i(t){return Math.round(255*r(t))}var o,a;return t=isNaN(t)?0:(t%=360)<0?t+360:t,e=isNaN(e)?0:0>e?0:e>1?1:e,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+e):n+e-n*e,o=2*n-a,new mt(i(t+120),i(t),i(t-120))}function ut(t,e,n){return this instanceof ut?(this.h=+t,this.c=+e,void(this.l=+n)):arguments.length<2?t instanceof ut?new ut(t.h,t.c,t.l):t instanceof ft?dt(t.l,t.a,t.b):dt((t=St((t=na.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new ut(t,e,n)}function ct(t,e,n){return isNaN(t)&&(t=0),isNaN(e)&&(e=0),new ft(n,Math.cos(t*=Oa)*e,Math.sin(t)*e)}function ft(t,e,n){return this instanceof ft?(this.l=+t,this.a=+e,void(this.b=+n)):arguments.length<2?t instanceof ft?new ft(t.l,t.a,t.b):t instanceof ut?ct(t.h,t.c,t.l):St((t=mt(t)).r,t.g,t.b):new ft(t,e,n)}function ht(t,e,n){var r=(t+16)/116,i=r+e/500,o=r-n/200;return i=pt(i)*Ga,r=pt(r)*Ya,o=pt(o)*Xa,new mt(vt(3.2404542*i-1.5371385*r-.4985314*o),vt(-.969266*i+1.8760108*r+.041556*o),vt(.0556434*i-.2040259*r+1.0572252*o))}function dt(t,e,n){return t>0?new ut(Math.atan2(n,e)*Fa,Math.sqrt(e*e+n*n),t):new ut(NaN,NaN,t)}function pt(t){return t>.206893034?t*t*t:(t-4/29)/7.787037}function gt(t){return t>.008856?Math.pow(t,1/3):7.787037*t+4/29}function vt(t){return Math.round(255*(.00304>=t?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function mt(t,e,n){return this instanceof mt?(this.r=~~t,this.g=~~e,void(this.b=~~n)):arguments.length<2?t instanceof mt?new mt(t.r,t.g,t.b):_t(""+t,mt,lt):new mt(t,e,n)}function yt(t){return new mt(t>>16,t>>8&255,255&t)}function bt(t){return yt(t)+""}function xt(t){return 16>t?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function _t(t,e,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/i.exec(t))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return e(Ct(i[0]),Ct(i[1]),Ct(i[2]))}return(o=Ka.get(t.toLowerCase()))?e(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a=a>>4|a,s=240&o,s=s>>4|s,l=15&o,l=l<<4|l):7===t.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),e(a,s,l))}function wt(t,e,n){var r,i,o=Math.min(t/=255,e/=255,n/=255),a=Math.max(t,e,n),s=a-o,l=(a+o)/2;return s?(i=.5>l?s/(a+o):s/(2-a-o),r=t==a?(e-n)/s+(n>e?6:0):e==a?(n-t)/s+2:(t-e)/s+4,r*=60):(r=NaN,i=l>0&&1>l?0:r),new st(r,i,l)}function St(t,e,n){t=Tt(t),e=Tt(e),n=Tt(n);var r=gt((.4124564*t+.3575761*e+.1804375*n)/Ga),i=gt((.2126729*t+.7151522*e+.072175*n)/Ya),o=gt((.0193339*t+.119192*e+.9503041*n)/Xa);return ft(116*i-16,500*(r-i),200*(i-o))}function Tt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ct(t){var e=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*e):e}function kt(t){return"function"==typeof t?t:function(){return t}}function At(t){return function(e,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Dt(e,n,t,r)}}function Dt(t,e,n,r){function i(){var t,e=l.status;if(!e&&Mt(l)||e>=200&&300>e||304===e){try{t=n.call(o,l)}catch(r){return void a.error.call(o,r)}a.load.call(o,t)}else a.error.call(o,l)}var o={},a=na.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(t)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(t){var e=na.event;na.event=t;try{a.progress.call(o,l)}finally{na.event=e}},o.header=function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==e?delete s[t]:s[t]=e+"",o)},o.mimeType=function(t){return arguments.length?(e=null==t?null:t+"",o):e},o.responseType=function(t){return arguments.length?(u=t,o):u},o.response=function(t){return n=t,o},["get","post"].forEach(function(t){o[t]=function(){return o.send.apply(o,[t].concat(ia(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,t,!0),null==e||"accept"in s||(s.accept=e+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=e&&l.overrideMimeType&&l.overrideMimeType(e),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",function(t){i(null,t)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},na.rebind(o,a,"on"),null==r?o:o.get(Et(r))}function Et(t){return 1===t.length?function(e,n){t(null==e?n:null)}:t}function Mt(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function jt(){var t=Nt(),e=Lt()-t;e>24?(isFinite(e)&&(clearTimeout(ns),ns=setTimeout(jt,e)),es=0):(es=1,is(jt))}function Nt(){var t=Date.now();for(rs=Qa;rs;)t>=rs.t&&(rs.f=rs.c(t-rs.t)),rs=rs.n;return t}function Lt(){for(var t,e=Qa,n=1/0;e;)e.f?e=t?t.n=e.n:Qa=e.n:(e.t<n&&(n=e.t),e=(t=e).n);return ts=t,n}function Rt(t,e){return e-(t?Math.ceil(Math.log(t)/Math.LN10):1)}function It(t,e){var n=Math.pow(10,3*pa(8-e));return{scale:e>8?function(t){return t/n}:function(t){return t*n},symbol:t}}function Ot(t){var e=t.decimal,n=t.thousands,r=t.grouping,i=t.currency,o=r&&n?function(t,e){for(var i=t.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>e));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:y;return function(t){var n=as.exec(t),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],h=n[8],d=n[9],p=1,g="",v="",m=!1,y=!0;switch(h&&(h=+h.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),d){case"n":f=!0,d="g";break;case"%":p=100,v="%",d="f";break;case"p":p=100,v="%",d="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+d.toLowerCase());case"c":y=!1;case"d":m=!0,h=0;break;case"s":p=-1,d="r"}"$"===l&&(g=i[0],v=i[1]),"r"!=d||h||(d="g"),null!=h&&("g"==d?h=Math.max(1,Math.min(21,h)):("e"==d||"f"==d)&&(h=Math.max(0,Math.min(20,h)))),d=ss.get(d)||Ft;var b=u&&f;return function(t){var n=v;if(m&&t%1)return"";var i=0>t||0===t&&0>1/t?(t=-t,"-"):"-"===s?"":s;if(0>p){var l=na.formatPrefix(t,h);t=l.scale(t),n=l.symbol+v}else t*=p;t=d(t,h);var x,_,w=t.lastIndexOf(".");if(0>w){var S=y?t.lastIndexOf("e"):-1;0>S?(x=t,_=""):(x=t.substring(0,S),_=t.substring(S))}else x=t.substring(0,w),_=e+t.substring(w+1);!u&&f&&(x=o(x,1/0));var T=g.length+x.length+_.length+(b?0:i.length),C=c>T?new Array(T=c-T+1).join(r):"";return b&&(x=o(C+x,C.length?c-_.length:1/0)),i+=g,t=x+_,("<"===a?i+t+C:">"===a?C+i+t:"^"===a?C.substring(0,T>>=1)+i+t+C.substring(T):i+(b?t:C+t))+n}}}function Ft(t){return t+""}function zt(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Pt(t,e,n){function r(e){var n=t(e),r=o(n,1);return r-e>e-n?n:r}function i(n){return e(n=t(new us(n-1)),1),n}function o(t,n){return e(t=new us((+t)),n),t}function a(t,r,o){var a=i(t),s=[];if(o>1)for(;r>a;)n(a)%o||s.push(new Date((+a))),e(a,1);else for(;r>a;)s.push(new Date((+a))),e(a,1);return s}function s(t,e,n){try{us=zt;var r=new zt;return r._=t,a(r,e,n)}finally{us=Date}}t.floor=t,t.round=r,t.ceil=i,t.offset=o,t.range=a;var l=t.utc=qt(t);return l.floor=l,l.round=qt(r),l.ceil=qt(i),l.offset=qt(o),l.range=s,t}function qt(t){return function(e,n){try{us=zt;var r=new zt;return r._=e,t(r,n)._}finally{us=Date}}}function Ht(t){function e(t){function e(e){for(var n,i,o,a=[],s=-1,l=0;++s<r;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=fs[n=t.charAt(++s)])&&(n=t.charAt(++s)),(o=D[n])&&(n=o(e,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(t.slice(l,s)),a.join("")}var r=t.length;return e.parse=function(e){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,t,e,0);if(i!=e.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var o=null!=r.Z&&us!==zt,a=new(o?zt:us);return"j"in r?a.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),o?a._:a},e.toString=function(){return t},e}function n(t,e,n,r){for(var i,o,a,s=0,l=e.length,u=n.length;l>s;){if(r>=u)return-1;if(i=e.charCodeAt(s++),37===i){if(a=e.charAt(s++),o=E[a in fs?e.charAt(s++):a],!o||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(t,e,n){w.lastIndex=0;var r=w.exec(e.slice(n));return r?(t.w=S.get(r[0].toLowerCase()),n+r[0].length):-1}function i(t,e,n){x.lastIndex=0;var r=x.exec(e.slice(n));return r?(t.w=_.get(r[0].toLowerCase()),n+r[0].length):-1}function o(t,e,n){k.lastIndex=0;var r=k.exec(e.slice(n));return r?(t.m=A.get(r[0].toLowerCase()),n+r[0].length):-1}function a(t,e,n){T.lastIndex=0;var r=T.exec(e.slice(n));return r?(t.m=C.get(r[0].toLowerCase()),n+r[0].length):-1}function s(t,e,r){return n(t,D.c.toString(),e,r)}function l(t,e,r){return n(t,D.x.toString(),e,r)}function u(t,e,r){return n(t,D.X.toString(),e,r)}function c(t,e,n){var r=b.get(e.slice(n,n+=2).toLowerCase());return null==r?-1:(t.p=r,n)}var f=t.dateTime,h=t.date,d=t.time,p=t.periods,g=t.days,v=t.shortDays,m=t.months,y=t.shortMonths;e.utc=function(t){function n(t){try{us=zt;var e=new us;return e._=t,r(e)}finally{us=Date}}var r=e(t);return n.parse=function(t){try{us=zt;var e=r.parse(t);return e&&e._}finally{us=Date}},n.toString=r.toString,n},e.multi=e.utc.multi=se;var b=na.map(),x=$t(g),_=Wt(g),w=$t(v),S=Wt(v),T=$t(m),C=Wt(m),k=$t(y),A=Wt(y);p.forEach(function(t,e){b.set(t.toLowerCase(),e)});var D={a:function(t){return v[t.getDay()]},A:function(t){return g[t.getDay()]},b:function(t){return y[t.getMonth()]},B:function(t){return m[t.getMonth()]},c:e(f),d:function(t,e){return Bt(t.getDate(),e,2)},e:function(t,e){return Bt(t.getDate(),e,2)},H:function(t,e){return Bt(t.getHours(),e,2)},I:function(t,e){return Bt(t.getHours()%12||12,e,2)},j:function(t,e){return Bt(1+ls.dayOfYear(t),e,3)},L:function(t,e){return Bt(t.getMilliseconds(),e,3)},m:function(t,e){return Bt(t.getMonth()+1,e,2)},M:function(t,e){return Bt(t.getMinutes(),e,2)},p:function(t){return p[+(t.getHours()>=12)]},S:function(t,e){return Bt(t.getSeconds(),e,2)},U:function(t,e){return Bt(ls.sundayOfYear(t),e,2)},w:function(t){return t.getDay()},W:function(t,e){return Bt(ls.mondayOfYear(t),e,2)},x:e(h),X:e(d),y:function(t,e){return Bt(t.getFullYear()%100,e,2)},Y:function(t,e){return Bt(t.getFullYear()%1e4,e,4)},Z:oe,"%":function(){return"%"}},E={a:r,A:i,b:o,B:a,c:s,d:Qt,e:Qt,H:ee,I:ee,j:te,L:ie,m:Kt,M:ne,p:c,S:re,U:Vt,w:Ut,W:Gt,x:l,X:u,y:Xt,Y:Yt,Z:Jt,"%":ae};return e}function Bt(t,e,n){var r=0>t?"-":"",i=(r?-t:t)+"",o=i.length;return r+(n>o?new Array(n-o+1).join(e)+i:i)}function $t(t){return new RegExp("^(?:"+t.map(na.requote).join("|")+")","i")}function Wt(t){for(var e=new u,n=-1,r=t.length;++n<r;)e.set(t[n].toLowerCase(),n);return e}function Ut(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Vt(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Gt(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function Yt(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Xt(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.y=Zt(+r[0]),n+r[0].length):-1}function Jt(t,e,n){return/^[+-]\d{4}$/.test(e=e.slice(n,n+5))?(t.Z=-e,n+5):-1}function Zt(t){return t+(t>68?1900:2e3)}function Kt(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Qt(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function te(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+3));return r?(t.j=+r[0],n+r[0].length):-1}function ee(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function ne(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function re(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function ie(t,e,n){hs.lastIndex=0;var r=hs.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function oe(t){var e=t.getTimezoneOffset(),n=e>0?"-":"+",r=pa(e)/60|0,i=pa(e)%60;return n+Bt(r,"0",2)+Bt(i,"0",2)}function ae(t,e,n){ds.lastIndex=0;var r=ds.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function se(t){for(var e=t.length,n=-1;++n<e;)t[n][0]=this(t[n][0]);return function(e){for(var n=0,r=t[n];!r[1](e);)r=t[++n];return r[0](e)}}function le(){}function ue(t,e,n){var r=n.s=t+e,i=r-t,o=r-i;n.t=t-o+(e-i)}function ce(t,e){t&&ms.hasOwnProperty(t.type)&&ms[t.type](t,e)}function fe(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function he(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)fe(t[n],e,1);e.polygonEnd()}function de(){function t(t,e){t*=Oa,e=e*Oa/2+Na/4;var n=t-r,a=n>=0?1:-1,s=a*n,l=Math.cos(e),u=Math.sin(e),c=o*u,f=i*l+c*Math.cos(s),h=c*a*Math.sin(s);bs.add(Math.atan2(h,f)),r=t,i=l,o=u}var e,n,r,i,o;xs.point=function(a,s){xs.point=t,r=(e=a)*Oa,i=Math.cos(s=(n=s)*Oa/2+Na/4),o=Math.sin(s)},xs.lineEnd=function(){t(e,n)}}function pe(t){var e=t[0],n=t[1],r=Math.cos(n);return[r*Math.cos(e),r*Math.sin(e),Math.sin(n)]}function ge(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function ve(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function me(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ye(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function be(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function xe(t){return[Math.atan2(t[1],t[0]),et(t[2])]}function _e(t,e){return pa(t[0]-e[0])<Ma&&pa(t[1]-e[1])<Ma}function we(t,e){t*=Oa;var n=Math.cos(e*=Oa);Se(n*Math.cos(t),n*Math.sin(t),Math.sin(e))}function Se(t,e,n){++_s,Ss+=(t-Ss)/_s,Ts+=(e-Ts)/_s,Cs+=(n-Cs)/_s}function Te(){function t(t,i){t*=Oa;var o=Math.cos(i*=Oa),a=o*Math.cos(t),s=o*Math.sin(t),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-e*l)*u+(u=e*s-n*a)*u),e*a+n*s+r*l);ws+=u,ks+=u*(e+(e=a)),As+=u*(n+(n=s)),Ds+=u*(r+(r=l)),Se(e,n,r)}var e,n,r;Ns.point=function(i,o){i*=Oa;var a=Math.cos(o*=Oa);e=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Ns.point=t,Se(e,n,r)}}function Ce(){Ns.point=we}function ke(){function t(t,e){t*=Oa;var n=Math.cos(e*=Oa),a=n*Math.cos(t),s=n*Math.sin(t),l=Math.sin(e),u=i*l-o*s,c=o*a-r*l,f=r*s-i*a,h=Math.sqrt(u*u+c*c+f*f),d=r*a+i*s+o*l,p=h&&-tt(d)/h,g=Math.atan2(h,d);Es+=p*u,Ms+=p*c,js+=p*f,ws+=g,ks+=g*(r+(r=a)),As+=g*(i+(i=s)),Ds+=g*(o+(o=l)),Se(r,i,o)}var e,n,r,i,o;Ns.point=function(a,s){e=a,n=s,Ns.point=t,a*=Oa;var l=Math.cos(s*=Oa);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),Se(r,i,o)},Ns.lineEnd=function(){t(e,n),Ns.lineEnd=Ce,Ns.point=we}}function Ae(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return n=e.invert(n,r),n&&t.invert(n[0],n[1])}),n}function De(){return!0}function Ee(t,e,n,r,i){var o=[],a=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e];if(_e(n,r)){i.lineStart();for(var s=0;e>s;++s)i.point((n=t[s])[0],n[1]);return void i.lineEnd()}var l=new je(n,t,null,(!0)),u=new je(n,null,l,(!1));l.o=u,o.push(l),a.push(u),l=new je(r,t,null,(!1)),u=new je(r,null,l,(!0)),l.o=u,o.push(l),a.push(u)}}),a.sort(e),Me(o),Me(a),o.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c,f,h=o[0];;){for(var d=h,p=!0;d.v;)if((d=d.n)===h)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(p)for(var s=0,u=c.length;u>s;++s)i.point((f=c[s])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(p){c=d.p.z;for(var s=c.length-1;s>=0;--s)i.point((f=c[s])[0],f[1])}else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,p=!p}while(!d.v);i.lineEnd()}}}function Me(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function je(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ne(t,e,n,r){return function(i,o){function a(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&o.point(e,n)}function s(t,e){var n=i(t,e);v.point(n[0],n[1])}function l(){y.point=s,v.lineStart()}function u(){y.point=a,v.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);x.point(n[0],n[1])}function f(){x.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),x.lineEnd();var t,e=x.clean(),n=b.buffer(),r=n.length;if(g.pop(),p.push(g),g=null,r)if(1&e){t=n[0];var i,r=t.length-1,a=-1;if(r>0){for(_||(o.polygonStart(),_=!0),o.lineStart();++a<r;)o.point((i=t[a])[0],i[1]);o.lineEnd()}}else r>1&&2&e&&n.push(n.pop().concat(n.shift())),d.push(n.filter(Le))}var d,p,g,v=e(o),m=i.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=h,d=[],p=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,d=na.merge(d);var t=Pe(m,p);d.length?(_||(o.polygonStart(),_=!0),Ee(d,Ie,t,n,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),d=p=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Re(),x=e(b),_=!1;return y}}function Le(t){return t.length>1}function Re(){var t,e=[];return{lineStart:function(){e.push(t=[])},point:function(e,n){t.push([e,n])},lineEnd:_,buffer:function(){var n=e;return e=[],t=null,n},rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))}}}function Ie(t,e){return((t=t.x)[0]<0?t[1]-Ia-Ma:Ia-t[1])-((e=e.x)[0]<0?e[1]-Ia-Ma:Ia-e[1])}function Oe(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(o,a){var s=o>0?Na:-Na,l=pa(o-n);pa(l-Na)<Ma?(t.point(n,r=(r+a)/2>0?Ia:-Ia),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),t.point(o,r),e=0):i!==s&&l>=Na&&(pa(n-i)<Ma&&(n-=i*Ma),pa(o-s)<Ma&&(o-=s*Ma),r=Fe(n,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(s,r),e=0),t.point(n=o,r=a),i=s},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function Fe(t,e,n,r){var i,o,a=Math.sin(t-n);return pa(a)>Ma?Math.atan((Math.sin(e)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(e))*Math.sin(t))/(i*o*a)):(e+r)/2}function ze(t,e,n,r){var i;if(null==t)i=n*Ia,r.point(-Na,i),r.point(0,i),r.point(Na,i),r.point(Na,0),r.point(Na,-i),r.point(0,-i),r.point(-Na,-i),r.point(-Na,0),r.point(-Na,i);else if(pa(t[0]-e[0])>Ma){var o=t[0]<e[0]?Na:-Na;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function Pe(t,e){var n=t[0],r=t[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;bs.reset();for(var s=0,l=e.length;l>s;++s){var u=e[s],c=u.length;if(c)for(var f=u[0],h=f[0],d=f[1]/2+Na/4,p=Math.sin(d),g=Math.cos(d),v=1;;){v===c&&(v=0),t=u[v];var m=t[0],y=t[1]/2+Na/4,b=Math.sin(y),x=Math.cos(y),_=m-h,w=_>=0?1:-1,S=w*_,T=S>Na,C=p*b;if(bs.add(Math.atan2(C*w*Math.sin(S),g*x+C*Math.cos(S))),o+=T?_+w*La:_,T^h>=n^m>=n){var k=ve(pe(f),pe(t));be(k);var A=ve(i,k);be(A);var D=(T^_>=0?-1:1)*et(A[2]);(r>D||r===D&&(k[0]||k[1]))&&(a+=T^_>=0?1:-1)}if(!v++)break;h=m,p=b,g=x,f=t}}return(-Ma>o||Ma>o&&0>bs)^1&a}function qe(t){function e(t,e){return Math.cos(t)*Math.cos(e)>o}function n(t){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,h){var d,p=[f,h],g=e(f,h),v=a?g?0:i(f,h):g?i(f+(0>f?Na:-Na),h):0;if(!n&&(u=l=g)&&t.lineStart(),g!==l&&(d=r(n,p),(_e(n,d)||_e(p,d))&&(p[0]+=Ma,p[1]+=Ma,g=e(p[0],p[1]))),g!==l)c=0,g?(t.lineStart(),d=r(p,n),t.point(d[0],d[1])):(d=r(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(s&&n&&a^g){var m;v&o||!(m=r(p,n,!0))||(c=0,a?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||n&&_e(n,p)||t.point(p[0],p[1]),n=p,l=g,o=v},lineEnd:function(){l&&t.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(t,e,n){var r=pe(t),i=pe(e),a=[1,0,0],s=ve(r,i),l=ge(s,s),u=s[0],c=l-u*u;if(!c)return!n&&t;var f=o*l/c,h=-o*u/c,d=ve(a,s),p=ye(a,f),g=ye(s,h);me(p,g);var v=d,m=ge(p,v),y=ge(v,v),b=m*m-y*(ge(p,p)-1);if(!(0>b)){var x=Math.sqrt(b),_=ye(v,(-m-x)/y);if(me(_,p),_=xe(_),!n)return _;var w,S=t[0],T=e[0],C=t[1],k=e[1];S>T&&(w=S,S=T,T=w);var A=T-S,D=pa(A-Na)<Ma,E=D||Ma>A;if(!D&&C>k&&(w=C,C=k,k=w),E?D?C+k>0^_[1]<(pa(_[0]-S)<Ma?C:k):C<=_[1]&&_[1]<=k:A>Na^(S<=_[0]&&_[0]<=T)){var M=ye(v,(-m+x)/y);return me(M,p),[_,xe(M)]}}}function i(e,n){var r=a?t:Na-t,i=0;return-r>e?i|=1:e>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var o=Math.cos(t),a=o>0,s=pa(o)>Ma,l=pn(t,6*Oa);return Ne(e,n,l,a?[0,-t]:[-Na,t-Na])}function He(t,e,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=s.x,f=s.y,h=0,d=1,p=c-l,g=f-u;if(o=t-l,p||!(o>0)){if(o/=p,0>p){if(h>o)return;d>o&&(d=o)}else if(p>0){if(o>d)return;o>h&&(h=o)}if(o=n-l,p||!(0>o)){if(o/=p,0>p){if(o>d)return;o>h&&(h=o)}else if(p>0){if(h>o)return;d>o&&(d=o)}if(o=e-u,g||!(o>0)){if(o/=g,0>g){if(h>o)return;d>o&&(d=o)}else if(g>0){if(o>d)return;o>h&&(h=o)}if(o=r-u,g||!(0>o)){if(o/=g,0>g){if(o>d)return;o>h&&(h=o)}else if(g>0){if(h>o)return;d>o&&(d=o)}return h>0&&(i.a={x:l+h*p,y:u+h*g}),1>d&&(i.b={x:l+d*p,y:u+d*g}),i}}}}}}function Be(t,e,n,r){function i(r,i){return pa(r[0]-t)<Ma?i>0?0:3:pa(r[0]-n)<Ma?i>0?2:1:pa(r[1]-e)<Ma?i>0?1:0:i>0?3:2}function o(t,e){return a(t.x,e.x)}function a(t,e){var n=i(t,1),r=i(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){function l(t){for(var e=0,n=v.length,r=t[1],i=0;n>i;++i)for(var o,a=1,s=v[i],l=s.length,u=s[0];l>a;++a)o=s[a],u[1]<=r?o[1]>r&&Q(u,o,t)>0&&++e:o[1]<=r&&Q(u,o,t)<0&&--e,u=o;return 0!==e}function u(o,s,l,u){var c=0,f=0;if(null==o||(c=i(o,l))!==(f=i(s,l))||a(o,s)<0^l>0){do u.point(0===c||3===c?t:n,c>1?r:e);while((c=(c+l+4)%4)!==f)}else u.point(s[0],s[1])}function c(i,o){return i>=t&&n>=i&&o>=e&&r>=o}function f(t,e){c(t,e)&&s.point(t,e)}function h(){E.point=p,v&&v.push(m=[]),T=!0,S=!1,_=w=NaN}function d(){g&&(p(y,b),x&&S&&A.rejoin(),g.push(A.buffer())),E.point=f,S&&s.lineEnd()}function p(t,e){t=Math.max(-Rs,Math.min(Rs,t)),e=Math.max(-Rs,Math.min(Rs,e));var n=c(t,e);if(v&&m.push([t,e]),T)y=t,b=e,x=n,T=!1,n&&(s.lineStart(),s.point(t,e));else if(n&&S)s.point(t,e);else{var r={a:{x:_,y:w},b:{x:t,y:e}};D(r)?(S||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),C=!1):n&&(s.lineStart(),s.point(t,e),C=!1)}_=t,w=e,S=n}var g,v,m,y,b,x,_,w,S,T,C,k=s,A=Re(),D=He(t,e,n,r),E={point:f,lineStart:h,lineEnd:d,polygonStart:function(){s=A,g=[],v=[],C=!0},polygonEnd:function(){s=k,g=na.merge(g);var e=l([t,r]),n=C&&e,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&Ee(g,o,e,u,s),s.polygonEnd()),g=v=m=null}};return E}}function $e(t){var e=0,n=Na/3,r=an(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Na/180,n=t[1]*Na/180):[e/Na*180,n/Na*180]},i}function We(t,e){function n(t,e){var n=Math.sqrt(o-2*i*Math.sin(e))/i;return[n*Math.sin(t*=i),a-n*Math.cos(t)]}var r=Math.sin(t),i=(r+Math.sin(e))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(t,e){var n=a-e;return[Math.atan2(t,n)/i,et((o-(t*t+n*n)*i*i)/(2*i))]},n}function Ue(){function t(t,e){Os+=i*t-r*e,r=t,i=e}var e,n,r,i;Hs.point=function(o,a){Hs.point=t,e=r=o,n=i=a},Hs.lineEnd=function(){t(e,n)}}function Ve(t,e){Fs>t&&(Fs=t),t>Ps&&(Ps=t),zs>e&&(zs=e),e>qs&&(qs=e)}function Ge(){function t(t,e){a.push("M",t,",",e,o)}function e(t,e){a.push("M",t,",",e),s.point=n}function n(t,e){a.push("L",t,",",e)}function r(){s.point=t}function i(){a.push("Z")}var o=Ye(4.5),a=[],s={point:t,lineStart:function(){s.point=e},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=t},pointRadius:function(t){return o=Ye(t),s},result:function(){if(a.length){var t=a.join("");return a=[],t}}};return s}function Ye(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Xe(t,e){Ss+=t,Ts+=e,++Cs}function Je(){function t(t,r){var i=t-e,o=r-n,a=Math.sqrt(i*i+o*o);ks+=a*(e+t)/2,As+=a*(n+r)/2,Ds+=a,Xe(e=t,n=r)}var e,n;$s.point=function(r,i){$s.point=t,Xe(e=r,n=i)}}function Ze(){$s.point=Xe}function Ke(){function t(t,e){var n=t-r,o=e-i,a=Math.sqrt(n*n+o*o);ks+=a*(r+t)/2,As+=a*(i+e)/2,Ds+=a,a=i*t-r*e,Es+=a*(r+t),Ms+=a*(i+e),js+=3*a,Xe(r=t,i=e)}var e,n,r,i;$s.point=function(o,a){$s.point=t,Xe(e=r=o,n=i=a)},$s.lineEnd=function(){t(e,n)}}function Qe(t){function e(e,n){t.moveTo(e+a,n),t.arc(e,n,a,0,La)}function n(e,n){t.moveTo(e,n),s.point=r}function r(e,n){t.lineTo(e,n)}function i(){s.point=e}function o(){t.closePath()}var a=4.5,s={point:e,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=e},pointRadius:function(t){return a=t,s},result:_};return s}function tn(t){function e(t){return(s?r:n)(t)}function n(e){return rn(e,function(n,r){n=t(n,r),e.point(n[0],n[1])})}function r(e){function n(n,r){n=t(n,r),e.point(n[0],n[1])}function r(){b=NaN,T.point=o,e.lineStart()}function o(n,r){var o=pe([n,r]),a=t(n,r);i(b,x,y,_,w,S,b=a[0],x=a[1],y=n,_=o[0],w=o[1],S=o[2],s,e),e.point(b,x)}function a(){T.point=n,e.lineEnd()}function l(){r(),T.point=u,T.lineEnd=c}function u(t,e){o(f=t,h=e),d=b,p=x,g=_,v=w,m=S,T.point=o}function c(){i(b,x,y,_,w,S,d,p,f,g,v,m,s,e),T.lineEnd=a,a()}var f,h,d,p,g,v,m,y,b,x,_,w,S,T={point:n,lineStart:r,lineEnd:a,polygonStart:function(){e.polygonStart(),T.lineStart=l},polygonEnd:function(){e.polygonEnd(),T.lineStart=r}};return T}function i(e,n,r,s,l,u,c,f,h,d,p,g,v,m){var y=c-e,b=f-n,x=y*y+b*b;if(x>4*o&&v--){var _=s+d,w=l+p,S=u+g,T=Math.sqrt(_*_+w*w+S*S),C=Math.asin(S/=T),k=pa(pa(S)-1)<Ma||pa(r-h)<Ma?(r+h)/2:Math.atan2(w,_),A=t(k,C),D=A[0],E=A[1],M=D-e,j=E-n,N=b*M-y*j;(N*N/x>o||pa((y*M+b*j)/x-.5)>.3||a>s*d+l*p+u*g)&&(i(e,n,r,s,l,u,D,E,k,_/=T,w/=T,S,v,m),m.point(D,E),i(D,E,k,_,w,S,c,f,h,d,p,g,v,m))}}var o=.5,a=Math.cos(30*Oa),s=16;return e.precision=function(t){return arguments.length?(s=(o=t*t)>0&&16,e):Math.sqrt(o)},e}function en(t){var e=tn(function(e,n){return t([e*Fa,n*Fa])});return function(t){return sn(e(t))}}function nn(t){this.stream=t}function rn(t,e){return{point:e,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd();
}}}function on(t){return an(function(){return t})()}function an(t){function e(t){return t=s(t[0]*Oa,t[1]*Oa),[t[0]*h+l,u-t[1]*h]}function n(t){return t=s.invert((t[0]-l)/h,(u-t[1])/h),t&&[t[0]*Fa,t[1]*Fa]}function r(){s=Ae(a=cn(m,b,x),o);var t=o(g,v);return l=d-t[0]*h,u=p+t[1]*h,i()}function i(){return c&&(c.valid=!1,c=null),e}var o,a,s,l,u,c,f=tn(function(t,e){return t=o(t,e),[t[0]*h+l,u-t[1]*h]}),h=150,d=480,p=250,g=0,v=0,m=0,b=0,x=0,_=Ls,w=y,S=null,T=null;return e.stream=function(t){return c&&(c.valid=!1),c=sn(_(a,f(w(t)))),c.valid=!0,c},e.clipAngle=function(t){return arguments.length?(_=null==t?(S=t,Ls):qe((S=+t)*Oa),i()):S},e.clipExtent=function(t){return arguments.length?(T=t,w=t?Be(t[0][0],t[0][1],t[1][0],t[1][1]):y,i()):T},e.scale=function(t){return arguments.length?(h=+t,r()):h},e.translate=function(t){return arguments.length?(d=+t[0],p=+t[1],r()):[d,p]},e.center=function(t){return arguments.length?(g=t[0]%360*Oa,v=t[1]%360*Oa,r()):[g*Fa,v*Fa]},e.rotate=function(t){return arguments.length?(m=t[0]%360*Oa,b=t[1]%360*Oa,x=t.length>2?t[2]%360*Oa:0,r()):[m*Fa,b*Fa,x*Fa]},na.rebind(e,f,"precision"),function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,r()}}function sn(t){return rn(t,function(e,n){t.point(e*Oa,n*Oa)})}function ln(t,e){return[t,e]}function un(t,e){return[t>Na?t-La:-Na>t?t+La:t,e]}function cn(t,e,n){return t?e||n?Ae(hn(t),dn(e,n)):hn(t):e||n?dn(e,n):un}function fn(t){return function(e,n){return e+=t,[e>Na?e-La:-Na>e?e+La:e,n]}}function hn(t){var e=fn(t);return e.invert=fn(-t),e}function dn(t,e){function n(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),et(c*o+l*a)]}var r=Math.cos(t),i=Math.sin(t),o=Math.cos(e),a=Math.sin(e);return n.invert=function(t,e){var n=Math.cos(e),s=Math.cos(t)*n,l=Math.sin(t)*n,u=Math.sin(e),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),et(c*r-s*i)]},n}function pn(t,e){var n=Math.cos(t),r=Math.sin(t);return function(i,o,a,s){var l=a*e;null!=i?(i=gn(n,i),o=gn(n,o),(a>0?o>i:i>o)&&(i+=a*La)):(i=t+a*La,o=t-.5*l);for(var u,c=i;a>0?c>o:o>c;c-=l)s.point((u=xe([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function gn(t,e){var n=pe(e);n[0]-=t,be(n);var r=tt(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ma)%(2*Math.PI)}function vn(t,e,n){var r=na.range(t,e-Ma,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function mn(t,e,n){var r=na.range(t,e-Ma,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function yn(t){return t.source}function bn(t){return t.target}function xn(t,e,n,r){var i=Math.cos(e),o=Math.sin(e),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(t),u=i*Math.sin(t),c=a*Math.cos(n),f=a*Math.sin(n),h=2*Math.asin(Math.sqrt(ot(r-e)+i*a*ot(n-t))),d=1/Math.sin(h),p=h?function(t){var e=Math.sin(t*=h)*d,n=Math.sin(h-t)*d,r=n*l+e*c,i=n*u+e*f,a=n*o+e*s;return[Math.atan2(i,r)*Fa,Math.atan2(a,Math.sqrt(r*r+i*i))*Fa]}:function(){return[t*Fa,e*Fa]};return p.distance=h,p}function _n(){function t(t,i){var o=Math.sin(i*=Oa),a=Math.cos(i),s=pa((t*=Oa)-e),l=Math.cos(s);Ws+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),e=t,n=o,r=a}var e,n,r;Us.point=function(i,o){e=i*Oa,n=Math.sin(o*=Oa),r=Math.cos(o),Us.point=t},Us.lineEnd=function(){Us.point=Us.lineEnd=_}}function wn(t,e){function n(e,n){var r=Math.cos(e),i=Math.cos(n),o=t(r*i);return[o*i*Math.sin(e),o*Math.sin(n)]}return n.invert=function(t,n){var r=Math.sqrt(t*t+n*n),i=e(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(t*o,r*a),Math.asin(r&&n*o/r)]},n}function Sn(t,e){function n(t,e){a>0?-Ia+Ma>e&&(e=-Ia+Ma):e>Ia-Ma&&(e=Ia-Ma);var n=a/Math.pow(i(e),o);return[n*Math.sin(o*t),a-n*Math.cos(o*t)]}var r=Math.cos(t),i=function(t){return Math.tan(Na/4+t/2)},o=t===e?Math.sin(t):Math.log(r/Math.cos(e))/Math.log(i(e)/i(t)),a=r*Math.pow(i(t),o)/o;return o?(n.invert=function(t,e){var n=a-e,r=K(o)*Math.sqrt(t*t+n*n);return[Math.atan2(t,n)/o,2*Math.atan(Math.pow(a/r,1/o))-Ia]},n):Cn}function Tn(t,e){function n(t,e){var n=o-e;return[n*Math.sin(i*t),o-n*Math.cos(i*t)]}var r=Math.cos(t),i=t===e?Math.sin(t):(r-Math.cos(e))/(e-t),o=r/i+t;return pa(i)<Ma?ln:(n.invert=function(t,e){var n=o-e;return[Math.atan2(t,n)/i,o-K(i)*Math.sqrt(t*t+n*n)]},n)}function Cn(t,e){return[t,Math.log(Math.tan(Na/4+e/2))]}function kn(t){var e,n=on(t),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var t=r.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.translate=function(){var t=i.apply(n,arguments);return t===n?e?n.clipExtent(null):n:t},n.clipExtent=function(t){var a=o.apply(n,arguments);if(a===n){if(e=null==t){var s=Na*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else e&&(a=null);return a},n.clipExtent(null)}function An(t,e){return[Math.log(Math.tan(Na/4+e/2)),-t]}function Dn(t){return t[0]}function En(t){return t[1]}function Mn(t){for(var e=t.length,n=[0,1],r=2,i=2;e>i;i++){for(;r>1&&Q(t[n[r-2]],t[n[r-1]],t[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function jn(t,e){return t[0]-e[0]||t[1]-e[1]}function Nn(t,e,n){return(n[0]-e[0])*(t[1]-e[1])<(n[1]-e[1])*(t[0]-e[0])}function Ln(t,e,n,r){var i=t[0],o=n[0],a=e[0]-i,s=r[0]-o,l=t[1],u=n[1],c=e[1]-l,f=r[1]-u,h=(s*(l-u)-f*(i-o))/(f*a-s*c);return[i+h*a,l+h*c]}function Rn(t){var e=t[0],n=t[t.length-1];return!(e[0]-n[0]||e[1]-n[1])}function In(){nr(this),this.edge=this.site=this.circle=null}function On(t){var e=rl.pop()||new In;return e.site=t,e}function Fn(t){Gn(t),tl.remove(t),rl.push(t),nr(t)}function zn(t){var e=t.circle,n=e.x,r=e.cy,i={x:n,y:r},o=t.P,a=t.N,s=[t];Fn(t);for(var l=o;l.circle&&pa(n-l.circle.x)<Ma&&pa(r-l.circle.cy)<Ma;)o=l.P,s.unshift(l),Fn(l),l=o;s.unshift(l),Gn(l);for(var u=a;u.circle&&pa(n-u.circle.x)<Ma&&pa(r-u.circle.cy)<Ma;)a=u.N,s.push(u),Fn(u),u=a;s.push(u),Gn(u);var c,f=s.length;for(c=1;f>c;++c)u=s[c],l=s[c-1],Qn(u.edge,l.site,u.site,i);l=s[0],u=s[f-1],u.edge=Zn(l.site,u.site,null,i),Vn(l),Vn(u)}function Pn(t){for(var e,n,r,i,o=t.x,a=t.y,s=tl._;s;)if(r=qn(s,a)-o,r>Ma)s=s.L;else{if(i=o-Hn(s,a),!(i>Ma)){r>-Ma?(e=s.P,n=s):i>-Ma?(e=s,n=s.N):e=n=s;break}if(!s.R){e=s;break}s=s.R}var l=On(t);if(tl.insert(e,l),e||n){if(e===n)return Gn(e),n=On(e.site),tl.insert(l,n),l.edge=n.edge=Zn(e.site,l.site),Vn(e),void Vn(n);if(!n)return void(l.edge=Zn(e.site,l.site));Gn(e),Gn(n);var u=e.site,c=u.x,f=u.y,h=t.x-c,d=t.y-f,p=n.site,g=p.x-c,v=p.y-f,m=2*(h*v-d*g),y=h*h+d*d,b=g*g+v*v,x={x:(v*y-d*b)/m+c,y:(h*b-g*y)/m+f};Qn(n.edge,u,p,x),l.edge=Zn(u,t,null,x),n.edge=Zn(t,p,null,x),Vn(e),Vn(n)}}function qn(t,e){var n=t.site,r=n.x,i=n.y,o=i-e;if(!o)return r;var a=t.P;if(!a)return-1/0;n=a.site;var s=n.x,l=n.y,u=l-e;if(!u)return s;var c=s-r,f=1/o-1/u,h=c/u;return f?(-h+Math.sqrt(h*h-2*f*(c*c/(-2*u)-l+u/2+i-o/2)))/f+r:(r+s)/2}function Hn(t,e){var n=t.N;if(n)return qn(n,e);var r=t.site;return r.y===e?r.x:1/0}function Bn(t){this.site=t,this.edges=[]}function $n(t){for(var e,n,r,i,o,a,s,l,u,c,f=t[0][0],h=t[1][0],d=t[0][1],p=t[1][1],g=Qs,v=g.length;v--;)if(o=g[v],o&&o.prepare())for(s=o.edges,l=s.length,a=0;l>a;)c=s[a].end(),r=c.x,i=c.y,u=s[++a%l].start(),e=u.x,n=u.y,(pa(r-e)>Ma||pa(i-n)>Ma)&&(s.splice(a,0,new tr(Kn(o.site,c,pa(r-f)<Ma&&p-i>Ma?{x:f,y:pa(e-f)<Ma?n:p}:pa(i-p)<Ma&&h-r>Ma?{x:pa(n-p)<Ma?e:h,y:p}:pa(r-h)<Ma&&i-d>Ma?{x:h,y:pa(e-h)<Ma?n:d}:pa(i-d)<Ma&&r-f>Ma?{x:pa(n-d)<Ma?e:f,y:d}:null),o.site,null)),++l)}function Wn(t,e){return e.angle-t.angle}function Un(){nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vn(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,f=o.y-s,h=2*(l*f-u*c);if(!(h>=-ja)){var d=l*l+u*u,p=c*c+f*f,g=(f*d-u*p)/h,v=(l*p-c*d)/h,f=v+s,m=il.pop()||new Un;m.arc=t,m.site=i,m.x=g+a,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,t.circle=m;for(var y=null,b=nl._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}nl.insert(y,m),y||(el=m)}}}}function Gn(t){var e=t.circle;e&&(e.P||(el=e.N),nl.remove(e),il.push(e),nr(e),t.circle=null)}function Yn(t){for(var e,n=Ks,r=He(t[0][0],t[0][1],t[1][0],t[1][1]),i=n.length;i--;)e=n[i],(!Xn(e,t)||!r(e)||pa(e.a.x-e.b.x)<Ma&&pa(e.a.y-e.b.y)<Ma)&&(e.a=e.b=null,n.splice(i,1))}function Xn(t,e){var n=t.b;if(n)return!0;var r,i,o=t.a,a=e[0][0],s=e[1][0],l=e[0][1],u=e[1][1],c=t.l,f=t.r,h=c.x,d=c.y,p=f.x,g=f.y,v=(h+p)/2,m=(d+g)/2;if(g===d){if(a>v||v>=s)return;if(h>p){if(o){if(o.y>=u)return}else o={x:v,y:l};n={x:v,y:u}}else{if(o){if(o.y<l)return}else o={x:v,y:u};n={x:v,y:l}}}else if(r=(h-p)/(g-d),i=m-r*v,-1>r||r>1)if(h>p){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(g>d){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return t.a=o,t.b=n,!0}function Jn(t,e){this.l=t,this.r=e,this.a=this.b=null}function Zn(t,e,n,r){var i=new Jn(t,e);return Ks.push(i),n&&Qn(i,t,e,n),r&&Qn(i,e,t,r),Qs[t.i].edges.push(new tr(i,t,e)),Qs[e.i].edges.push(new tr(i,e,t)),i}function Kn(t,e,n){var r=new Jn(t,null);return r.a=e,r.b=n,Ks.push(r),r}function Qn(t,e,n,r){t.a||t.b?t.l===n?t.b=r:t.a=r:(t.a=r,t.l=e,t.r=n)}function tr(t,e,n){var r=t.a,i=t.b;this.edge=t,this.site=e,this.angle=n?Math.atan2(n.y-e.y,n.x-e.x):t.l===e?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function er(){this._=null}function nr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function rr(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ir(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function or(t){for(;t.L;)t=t.L;return t}function ar(t,e){var n,r,i,o=t.sort(sr).pop();for(Ks=[],Qs=new Array(t.length),tl=new er,nl=new er;;)if(i=el,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))(o.x!==n||o.y!==r)&&(Qs[o.i]=new Bn(o),Pn(o),n=o.x,r=o.y),o=t.pop();else{if(!i)break;zn(i.arc)}e&&(Yn(e),$n(e));var a={cells:Qs,edges:Ks};return tl=nl=Ks=Qs=null,a}function sr(t,e){return e.y-t.y||e.x-t.x}function lr(t,e,n){return(t.x-n.x)*(e.y-t.y)-(t.x-e.x)*(n.y-t.y)}function ur(t){return t.x}function cr(t){return t.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hr(t,e,n,r,i,o){if(!t(e,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=e.nodes;l[0]&&hr(t,l[0],n,r,a,s),l[1]&&hr(t,l[1],a,r,i,s),l[2]&&hr(t,l[2],n,s,a,o),l[3]&&hr(t,l[3],a,s,i,o)}}function dr(t,e,n,r,i,o,a){var s,l=1/0;return function u(t,c,f,h,d){if(!(c>o||f>a||r>h||i>d)){if(p=t.point){var p,g=e-t.x,v=n-t.y,m=g*g+v*v;if(l>m){var y=Math.sqrt(l=m);r=e-y,i=n-y,o=e+y,a=n+y,s=p}}for(var b=t.nodes,x=.5*(c+h),_=.5*(f+d),w=e>=x,S=n>=_,T=S<<1|w,C=T+4;C>T;++T)if(t=b[3&T])switch(3&T){case 0:u(t,c,f,x,_);break;case 1:u(t,x,f,h,_);break;case 2:u(t,c,_,x,d);break;case 3:u(t,x,_,h,d)}}}(t,r,i,o,a),s}function pr(t,e){t=na.rgb(t),e=na.rgb(e);var n=t.r,r=t.g,i=t.b,o=e.r-n,a=e.g-r,s=e.b-i;return function(t){return"#"+xt(Math.round(n+o*t))+xt(Math.round(r+a*t))+xt(Math.round(i+s*t))}}function gr(t,e){var n,r={},i={};for(n in t)n in e?r[n]=yr(t[n],e[n]):i[n]=t[n];for(n in e)n in t||(i[n]=e[n]);return function(t){for(n in r)i[n]=r[n](t);return i}}function vr(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function mr(t,e){var n,r,i,o=al.lastIndex=sl.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=al.exec(t))&&(r=sl.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:vr(n,r)})),o=sl.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(e=l[0].x,function(t){return e(t)+""}):function(){return e}:(e=l.length,function(t){for(var n,r=0;e>r;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function yr(t,e){for(var n,r=na.interpolators.length;--r>=0&&!(n=na.interpolators[r](t,e)););return n}function br(t,e){var n,r=[],i=[],o=t.length,a=e.length,s=Math.min(t.length,e.length);for(n=0;s>n;++n)r.push(yr(t[n],e[n]));for(;o>n;++n)i[n]=t[n];for(;a>n;++n)i[n]=e[n];return function(t){for(n=0;s>n;++n)i[n]=r[n](t);return i}}function xr(t){return function(e){return 0>=e?0:e>=1?1:t(e)}}function _r(t){return function(e){return 1-t(1-e)}}function wr(t){return function(e){return.5*(.5>e?t(2*e):2-t(2-2*e))}}function Sr(t){return t*t}function Tr(t){return t*t*t}function Cr(t){if(0>=t)return 0;if(t>=1)return 1;var e=t*t,n=e*t;return 4*(.5>t?n:3*(t-e)+n-.75)}function kr(t){return function(e){return Math.pow(e,t)}}function Ar(t){return 1-Math.cos(t*Ia)}function Dr(t){return Math.pow(2,10*(t-1))}function Er(t){return 1-Math.sqrt(1-t*t)}function Mr(t,e){var n;return arguments.length<2&&(e=.45),arguments.length?n=e/La*Math.asin(1/t):(t=1,n=e/4),function(r){return 1+t*Math.pow(2,-10*r)*Math.sin((r-n)*La/e)}}function jr(t){return t||(t=1.70158),function(e){return e*e*((t+1)*e-t)}}function Nr(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function Lr(t,e){t=na.hcl(t),e=na.hcl(e);var n=t.h,r=t.c,i=t.l,o=e.h-n,a=e.c-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.c:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return ct(n+o*t,r+a*t,i+s*t)+""}}function Rr(t,e){t=na.hsl(t),e=na.hsl(e);var n=t.h,r=t.s,i=t.l,o=e.h-n,a=e.s-r,s=e.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?e.s:r),isNaN(o)?(o=0,n=isNaN(n)?e.h:n):o>180?o-=360:-180>o&&(o+=360),function(t){return lt(n+o*t,r+a*t,i+s*t)+""}}function Ir(t,e){t=na.lab(t),e=na.lab(e);var n=t.l,r=t.a,i=t.b,o=e.l-n,a=e.a-r,s=e.b-i;return function(t){return ht(n+o*t,r+a*t,i+s*t)+""}}function Or(t,e){return e-=t,function(n){return Math.round(t+e*n)}}function Fr(t){var e=[t.a,t.b],n=[t.c,t.d],r=Pr(e),i=zr(e,n),o=Pr(qr(n,e,-i))||0;e[0]*n[1]<n[0]*e[1]&&(e[0]*=-1,e[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(e[1],e[0]):Math.atan2(-n[0],n[1]))*Fa,this.translate=[t.e,t.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*Fa:0}function zr(t,e){return t[0]*e[0]+t[1]*e[1]}function Pr(t){var e=Math.sqrt(zr(t,t));return e&&(t[0]/=e,t[1]/=e),e}function qr(t,e,n){return t[0]+=n*e[0],t[1]+=n*e[1],t}function Hr(t,e){var n,r=[],i=[],o=na.transform(t),a=na.transform(e),s=o.translate,l=a.translate,u=o.rotate,c=a.rotate,f=o.skew,h=a.skew,d=o.scale,p=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:vr(s[0],l[0])},{i:3,x:vr(s[1],l[1])})):r.push(l[0]||l[1]?"translate("+l+")":""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:vr(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),f!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:vr(f,h)}):h&&r.push(r.pop()+"skewX("+h+")"),d[0]!=p[0]||d[1]!=p[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:vr(d[0],p[0])},{i:n-2,x:vr(d[1],p[1])})):(1!=p[0]||1!=p[1])&&r.push(r.pop()+"scale("+p+")"),n=i.length,function(t){for(var e,o=-1;++o<n;)r[(e=i[o]).i]=e.x(t);return r.join("")}}function Br(t,e){return e=(e-=t=+t)||1/e,function(n){return(n-t)/e}}function $r(t,e){return e=(e-=t=+t)||1/e,function(n){return Math.max(0,Math.min(1,(n-t)/e))}}function Wr(t){for(var e=t.source,n=t.target,r=Vr(e,n),i=[e];e!==r;)e=e.parent,i.push(e);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Ur(t){for(var e=[],n=t.parent;null!=n;)e.push(t),t=n,n=n.parent;return e.push(t),e}function Vr(t,e){if(t===e)return t;for(var n=Ur(t),r=Ur(e),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function Gr(t){t.fixed|=2}function Yr(t){t.fixed&=-7}function Xr(t){t.fixed|=4,t.px=t.x,t.py=t.y}function Jr(t){t.fixed&=-5}function Zr(t,e,n){var r=0,i=0;if(t.charge=0,!t.leaf)for(var o,a=t.nodes,s=a.length,l=-1;++l<s;)o=a[l],null!=o&&(Zr(o,e,n),t.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(t.point){t.leaf||(t.point.x+=Math.random()-.5,t.point.y+=Math.random()-.5);var u=e*n[t.point.index];t.charge+=t.pointCharge=u,r+=u*t.point.x,i+=u*t.point.y}t.cx=r/t.charge,t.cy=i/t.charge}function Kr(t,e){return na.rebind(t,e,"sort","children","value"),t.nodes=t,t.links=ii,t}function Qr(t,e){for(var n=[t];null!=(t=n.pop());)if(e(t),(i=t.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function ti(t,e){for(var n=[t],r=[];null!=(t=n.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(t=r.pop());)e(t)}function ei(t){return t.children}function ni(t){return t.value}function ri(t,e){return e.value-t.value}function ii(t){return na.merge(t.map(function(t){return(t.children||[]).map(function(e){return{source:t,target:e}})}))}function oi(t){return t.x}function ai(t){return t.y}function si(t,e,n){t.y0=e,t.y=n}function li(t){return na.range(t.length)}function ui(t){for(var e=-1,n=t[0].length,r=[];++e<n;)r[e]=0;return r}function ci(t){for(var e,n=1,r=0,i=t[0][1],o=t.length;o>n;++n)(e=t[n][1])>i&&(r=n,i=e);return r}function fi(t){return t.reduce(hi,0)}function hi(t,e){return t+e[1]}function di(t,e){return pi(t,Math.ceil(Math.log(e.length)/Math.LN2+1))}function pi(t,e){for(var n=-1,r=+t[0],i=(t[1]-r)/e,o=[];++n<=e;)o[n]=i*n+r;return o}function gi(t){return[na.min(t),na.max(t)]}function vi(t,e){return t.value-e.value}function mi(t,e){var n=t._pack_next;t._pack_next=e,e._pack_prev=t,e._pack_next=n,n._pack_prev=e}function yi(t,e){t._pack_next=e,e._pack_prev=t}function bi(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return.999*i*i>n*n+r*r}function xi(t){function e(t){c=Math.min(t.x-t.r,c),f=Math.max(t.x+t.r,f),h=Math.min(t.y-t.r,h),d=Math.max(t.y+t.r,d)}if((n=t.children)&&(u=n.length)){var n,r,i,o,a,s,l,u,c=1/0,f=-1/0,h=1/0,d=-1/0;if(n.forEach(_i),r=n[0],r.x=-r.r,r.y=0,e(r),u>1&&(i=n[1],i.x=i.r,i.y=0,e(i),u>2))for(o=n[2],Ti(r,i,o),e(o),mi(r,o),r._pack_prev=o,mi(o,i),i=r._pack_next,a=3;u>a;a++){Ti(r,i,o=n[a]);var p=0,g=1,v=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(bi(s,o)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!bi(l,o);l=l._pack_prev,v++);p?(v>g||g==v&&i.r<r.r?yi(r,i=s):yi(r=l,i),a--):(mi(r,o),i=o,e(o))}var m=(c+f)/2,y=(h+d)/2,b=0;for(a=0;u>a;a++)o=n[a],o.x-=m,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));t.r=b,n.forEach(wi)}}function _i(t){t._pack_next=t._pack_prev=t}function wi(t){delete t._pack_next,delete t._pack_prev}function Si(t,e,n,r){var i=t.children;if(t.x=e+=r*t.x,t.y=n+=r*t.y,t.r*=r,i)for(var o=-1,a=i.length;++o<a;)Si(i[o],e,n,r)}function Ti(t,e,n){var r=t.r+n.r,i=e.x-t.x,o=e.y-t.y;if(r&&(i||o)){var a=e.r+n.r,s=i*i+o*o;a*=a,r*=r;var l=.5+(r-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=t.x+l*i+u*o,n.y=t.y+l*o-u*i}else n.x=t.x+r,n.y=t.y}function Ci(t,e){return t.parent==e.parent?1:2}function ki(t){var e=t.children;return e.length?e[0]:t.t}function Ai(t){var e,n=t.children;return(e=n.length)?n[e-1]:t.t}function Di(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Ei(t){for(var e,n=0,r=0,i=t.children,o=i.length;--o>=0;)e=i[o],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function Mi(t,e,n){return t.a.parent===e.parent?t.a:n}function ji(t){return 1+na.max(t,function(t){return t.y})}function Ni(t){return t.reduce(function(t,e){return t+e.x},0)/t.length}function Li(t){var e=t.children;return e&&e.length?Li(e[0]):t}function Ri(t){var e,n=t.children;return n&&(e=n.length)?Ri(n[e-1]):t}function Ii(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function Oi(t,e){var n=t.x+e[3],r=t.y+e[0],i=t.dx-e[1]-e[3],o=t.dy-e[0]-e[2];return 0>i&&(n+=i/2,i=0),0>o&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Fi(t){var e=t[0],n=t[t.length-1];return n>e?[e,n]:[n,e]}function zi(t){return t.rangeExtent?t.rangeExtent():Fi(t.range())}function Pi(t,e,n,r){var i=n(t[0],t[1]),o=r(e[0],e[1]);return function(t){return o(i(t))}}function qi(t,e){var n,r=0,i=t.length-1,o=t[r],a=t[i];return o>a&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}function Hi(t){return t?{floor:function(e){return Math.floor(e/t)*t},ceil:function(e){return Math.ceil(e/t)*t}}:yl}function Bi(t,e,n,r){var i=[],o=[],a=0,s=Math.min(t.length,e.length)-1;for(t[s]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<=s;)i.push(n(t[a-1],t[a])),o.push(r(e[a-1],e[a]));return function(e){var n=na.bisect(t,e,1,s)-1;return o[n](i[n](e))}}function $i(t,e,n,r){function i(){var i=Math.min(t.length,e.length)>2?Bi:Pi,l=r?$r:Br;return a=i(t,e,l,n),s=i(e,t,l,yr),o}function o(t){return a(t)}var a,s;return o.invert=function(t){return s(t)},o.domain=function(e){return arguments.length?(t=e.map(Number),i()):t},o.range=function(t){return arguments.length?(e=t,i()):e},o.rangeRound=function(t){return o.range(t).interpolate(Or)},o.clamp=function(t){return arguments.length?(r=t,i()):r},o.interpolate=function(t){return arguments.length?(n=t,i()):n},o.ticks=function(e){return Gi(t,e)},o.tickFormat=function(e,n){return Yi(t,e,n)},o.nice=function(e){return Ui(t,e),i()},o.copy=function(){return $i(t,e,n,r)},i()}function Wi(t,e){return na.rebind(t,e,"range","rangeRound","interpolate","clamp")}function Ui(t,e){return qi(t,Hi(Vi(t,e)[2]))}function Vi(t,e){null==e&&(e=10);var n=Fi(t),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/e)/Math.LN10)),o=e/r*i;return.15>=o?i*=10:.35>=o?i*=5:.75>=o&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Gi(t,e){return na.range.apply(na,Vi(t,e))}function Yi(t,e,n){var r=Vi(t,e);if(n){var i=as.exec(n);if(i.shift(),"s"===i[8]){var o=na.formatPrefix(Math.max(pa(r[0]),pa(r[1])));return i[7]||(i[7]="."+Xi(o.scale(r[2]))),i[8]="f",n=na.format(i.join("")),function(t){return n(o.scale(t))+o.symbol}}i[7]||(i[7]="."+Ji(i[8],r)),n=i.join("")}else n=",."+Xi(r[2])+"f";return na.format(n)}function Xi(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}function Ji(t,e){var n=Xi(e[2]);return t in bl?Math.abs(n-Xi(Math.max(pa(e[0]),pa(e[1]))))+ +("e"!==t):n-2*("%"===t)}function Zi(t,e,n,r){function i(t){return(n?Math.log(0>t?0:t):-Math.log(t>0?0:-t))/Math.log(e)}function o(t){return n?Math.pow(e,t):-Math.pow(e,-t)}function a(e){return t(i(e))}return a.invert=function(e){return o(t.invert(e))},a.domain=function(e){return arguments.length?(n=e[0]>=0,t.domain((r=e.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(e=+n,t.domain(r.map(i)),a):e},a.nice=function(){var e=qi(r.map(i),n?Math:_l);return t.domain(e),r=e.map(o),a},a.ticks=function(){var t=Fi(r),a=[],s=t[0],l=t[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),f=e%1?2:e;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var h=1;f>h;h++)a.push(o(u)*h);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var h=f-1;h>0;h--)a.push(o(u)*h);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(t,e){if(!arguments.length)return xl;arguments.length<2?e=xl:"function"!=typeof e&&(e=na.format(e));var r,s=Math.max(.1,t/a.ticks().length),l=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(t){return t/o(l(i(t)+r))<=s?e(t):""}},a.copy=function(){return Zi(t.copy(),e,n,r)},Wi(a,t)}function Ki(t,e,n){function r(e){return t(i(e))}var i=Qi(e),o=Qi(1/e);return r.invert=function(e){return o(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain((n=e.map(Number)).map(i)),r):n},r.ticks=function(t){return Gi(n,t)},r.tickFormat=function(t,e){return Yi(n,t,e)},r.nice=function(t){return r.domain(Ui(n,t))},r.exponent=function(a){return arguments.length?(i=Qi(e=a),o=Qi(1/e),t.domain(n.map(i)),r):e},r.copy=function(){return Ki(t.copy(),e,n)},Wi(r,t)}function Qi(t){return function(e){return 0>e?-Math.pow(-e,t):Math.pow(e,t)}}function to(t,e){function n(n){return o[((i.get(n)||("range"===e.t?i.set(n,t.push(n)):NaN))-1)%o.length]}function r(e,n){return na.range(t.length).map(function(t){return e+n*t})}var i,o,a;return n.domain=function(r){if(!arguments.length)return t;t=[],i=new u;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,t.push(o));return n[e.t].apply(n,e.a)},n.range=function(t){return arguments.length?(o=t,a=0,e={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=t.length<2?(l=(l+u)/2,0):(u-l)/(t.length-1+s);return o=r(l+c*s/2,c),a=0,e={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=t.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(t.length-1+s)|0;return o=r(l+Math.round(c*s/2+(u-l-(t.length-1+s)*c)/2),c),a=0,e={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],h=(f-c)/(t.length-s+2*l);return o=r(c+h*l,h),u&&o.reverse(),a=h*(1-s),e={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],f=i[1-u],h=Math.floor((f-c)/(t.length-s+2*l));return o=r(c+Math.round((f-c-(t.length-s)*h)/2),h),u&&o.reverse(),a=Math.round(h*(1-s)),e={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Fi(e.a[0])},n.copy=function(){return to(t,e)},n.domain(t)}function eo(t,e){function o(){var n=0,r=e.length;for(s=[];++n<r;)s[n-1]=na.quantile(t,n/r);return a}function a(t){return isNaN(t=+t)?void 0:e[na.bisect(s,t)]}var s;return a.domain=function(e){return arguments.length?(t=e.map(r).filter(i).sort(n),o()):t},a.range=function(t){return arguments.length?(e=t,o()):e},a.quantiles=function(){return s},a.invertExtent=function(n){return n=e.indexOf(n),0>n?[NaN,NaN]:[n>0?s[n-1]:t[0],n<s.length?s[n]:t[t.length-1]]},a.copy=function(){return eo(t,e)},o()}function no(t,e,n){function r(e){return n[Math.max(0,Math.min(a,Math.floor(o*(e-t))))]}function i(){return o=n.length/(e-t),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(t=+n[0],e=+n[n.length-1],i()):[t,e]},r.range=function(t){return arguments.length?(n=t,i()):n},r.invertExtent=function(e){return e=n.indexOf(e),e=0>e?NaN:e/o+t,[e,e+1/o]},r.copy=function(){return no(t,e,n)},i()}function ro(t,e){function n(n){return n>=n?e[na.bisect(t,n)]:void 0}return n.domain=function(e){return arguments.length?(t=e,n):t},n.range=function(t){return arguments.length?(e=t,n):e},n.invertExtent=function(n){return n=e.indexOf(n),[t[n-1],t[n]]},n.copy=function(){return ro(t,e)},n}function io(t){function e(t){return+t}return e.invert=e,e.domain=e.range=function(n){return arguments.length?(t=n.map(e),e):t},e.ticks=function(e){return Gi(t,e)},e.tickFormat=function(e,n){return Yi(t,e,n)},e.copy=function(){return io(t)},e}function oo(){return 0}function ao(t){return t.innerRadius}function so(t){return t.outerRadius}function lo(t){return t.startAngle}function uo(t){return t.endAngle}function co(t){return t&&t.padAngle}function fo(t,e,n,r){return(t-n)*e-(e-r)*t>0?0:1}function ho(t,e,n,r,i){var o=t[0]-e[0],a=t[1]-e[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=t[0]+l,f=t[1]+u,h=e[0]+l,d=e[1]+u,p=(c+h)/2,g=(f+d)/2,v=h-c,m=d-f,y=v*v+m*m,b=n-r,x=c*d-h*f,_=(0>m?-1:1)*Math.sqrt(b*b*y-x*x),w=(x*m-v*_)/y,S=(-x*v-m*_)/y,T=(x*m+v*_)/y,C=(-x*v+m*_)/y,k=w-p,A=S-g,D=T-p,E=C-g;return k*k+A*A>D*D+E*E&&(w=T,S=C),[[w-l,S-u],[w*n/b,S*n/b]]}function po(t){function e(e){function a(){u.push("M",o(t(c),s))}for(var l,u=[],c=[],f=-1,h=e.length,d=kt(n),p=kt(r);++f<h;)i.call(this,l=e[f],f)?c.push([+d.call(this,l,f),+p.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=Dn,r=En,i=De,o=go,a=o.key,s=.7;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.defined=function(t){return arguments.length?(i=t,e):i},e.interpolate=function(t){return arguments.length?(a="function"==typeof t?o=t:(o=Al.get(t)||go).key,e):a},e.tension=function(t){return arguments.length?(s=t,e):s},e}function go(t){return t.join("L")}function vo(t){return go(t)+"Z"}function mo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r[0]+(r=t[e])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function yo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("V",(r=t[e])[1],"H",r[0]);return i.join("")}function bo(t){for(var e=0,n=t.length,r=t[0],i=[r[0],",",r[1]];++e<n;)i.push("H",(r=t[e])[0],"V",r[1]);return i.join("")}function xo(t,e){return t.length<4?go(t):t[1]+So(t.slice(1,-1),To(t,e))}function _o(t,e){return t.length<3?go(t):t[0]+So((t.push(t[0]),t),To([t[t.length-2]].concat(t,[t[1]]),e))}function wo(t,e){return t.length<3?go(t):t[0]+So(t,To(t,e))}function So(t,e){if(e.length<1||t.length!=e.length&&t.length!=e.length+2)return go(t);var n=t.length!=e.length,r="",i=t[0],o=t[1],a=e[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],l=2),e.length>1){s=e[1],o=t[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<e.length;u++,l++)o=t[l],s=e[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=t[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function To(t,e){for(var n,r=[],i=(1-e)/2,o=t[0],a=t[1],s=1,l=t.length;++s<l;)n=o,o=a,a=t[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Co(t){if(t.length<3)return go(t);var e=1,n=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Eo(Ml,a),",",Eo(Ml,s)];for(t.push(t[n-1]);++e<=n;)r=t[e],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Mo(l,a,s);return t.pop(),l.push("L",r),l.join("")}function ko(t){if(t.length<4)return go(t);for(var e,n=[],r=-1,i=t.length,o=[0],a=[0];++r<3;)e=t[r],o.push(e[0]),a.push(e[1]);for(n.push(Eo(Ml,o)+","+Eo(Ml,a)),--r;++r<i;)e=t[r],o.shift(),o.push(e[0]),a.shift(),a.push(e[1]),Mo(n,o,a);return n.join("")}function Ao(t){for(var e,n,r=-1,i=t.length,o=i+4,a=[],s=[];++r<4;)n=t[r%i],a.push(n[0]),s.push(n[1]);for(e=[Eo(Ml,a),",",Eo(Ml,s)],--r;++r<o;)n=t[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Mo(e,a,s);return e.join("")}function Do(t,e){var n=t.length-1;if(n)for(var r,i,o=t[0][0],a=t[0][1],s=t[n][0]-o,l=t[n][1]-a,u=-1;++u<=n;)r=t[u],i=u/n,r[0]=e*r[0]+(1-e)*(o+i*s),r[1]=e*r[1]+(1-e)*(a+i*l);return Co(t)}function Eo(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function Mo(t,e,n){t.push("C",Eo(Dl,e),",",Eo(Dl,n),",",Eo(El,e),",",Eo(El,n),",",Eo(Ml,e),",",Eo(Ml,n))}function jo(t,e){return(e[1]-t[1])/(e[0]-t[0])}function No(t){for(var e=0,n=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=jo(i,o);++e<n;)r[e]=(a+(a=jo(i=o,o=t[e+1])))/2;return r[e]=a,r}function Lo(t){for(var e,n,r,i,o=[],a=No(t),s=-1,l=t.length-1;++s<l;)e=jo(t[s],t[s+1]),pa(e)<Ma?a[s]=a[s+1]=0:(n=a[s]/e,r=a[s+1]/e,i=n*n+r*r,i>9&&(i=3*e/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r));for(s=-1;++s<=l;)i=(t[Math.min(l,s+1)][0]-t[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function Ro(t){return t.length<3?go(t):t[0]+So(t,Lo(t))}function Io(t){for(var e,n,r,i=-1,o=t.length;++i<o;)e=t[i],n=e[0],r=e[1]-Ia,e[0]=n*Math.cos(r),e[1]=n*Math.sin(r);return t}function Oo(t){function e(e){function l(){g.push("M",s(t(m),f),c,u(t(v.reverse()),f),"Z")}for(var h,d,p,g=[],v=[],m=[],y=-1,b=e.length,x=kt(n),_=kt(i),w=n===r?function(){return d}:kt(r),S=i===o?function(){return p}:kt(o);++y<b;)a.call(this,h=e[y],y)?(v.push([d=+x.call(this,h,y),p=+_.call(this,h,y)]),m.push([+w.call(this,h,y),+S.call(this,h,y)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=Dn,r=Dn,i=0,o=En,a=De,s=go,l=s.key,u=s,c="L",f=.7;return e.x=function(t){return arguments.length?(n=r=t,e):r},e.x0=function(t){return arguments.length?(n=t,e):n},e.x1=function(t){return arguments.length?(r=t,e):r},e.y=function(t){return arguments.length?(i=o=t,e):o},e.y0=function(t){return arguments.length?(i=t,e):i},e.y1=function(t){return arguments.length?(o=t,e):o},e.defined=function(t){return arguments.length?(a=t,e):a},e.interpolate=function(t){return arguments.length?(l="function"==typeof t?s=t:(s=Al.get(t)||go).key,u=s.reverse||s,c=s.closed?"M":"L",e):l},e.tension=function(t){return arguments.length?(f=t,e):f},e}function Fo(t){return t.radius}function zo(t){return[t.x,t.y]}function Po(t){return function(){var e=t.apply(this,arguments),n=e[0],r=e[1]-Ia;return[n*Math.cos(r),n*Math.sin(r)]}}function qo(){return 64}function Ho(){return"circle"}function Bo(t){var e=Math.sqrt(t/Na);return"M0,"+e+"A"+e+","+e+" 0 1,1 0,"+-e+"A"+e+","+e+" 0 1,1 0,"+e+"Z"}function $o(t){return function(){var e,n;(e=this[t])&&(n=e[e.active])&&(--e.count?delete e[e.active]:delete this[t],
e.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Wo(t,e,n){return ba(t,Fl),t.namespace=e,t.id=n,t}function Uo(t,e,n,r){var i=t.id,o=t.namespace;return $(t,"function"==typeof n?function(t,a,s){t[o][i].tween.set(e,r(n.call(t,t.__data__,a,s)))}:(n=r(n),function(t){t[o][i].tween.set(e,n)}))}function Vo(t){return null==t&&(t=""),function(){this.textContent=t}}function Go(t){return null==t?"__transition__":"__transition_"+t+"__"}function Yo(t,e,n,r,i){var o=t[n]||(t[n]={active:0,count:0}),a=o[r];if(!a){var s=i.time;a=o[r]={tween:new u,time:s,delay:i.delay,duration:i.duration,ease:i.ease,index:e},i=null,++o.count,na.timer(function(i){function l(n){if(o.active>r)return c();var i=o[o.active];i&&(--o.count,delete o[o.active],i.event&&i.event.interrupt.call(t,t.__data__,i.index)),o.active=r,a.event&&a.event.start.call(t,t.__data__,e),a.tween.forEach(function(n,r){(r=r.call(t,t.__data__,e))&&g.push(r)}),h=a.ease,f=a.duration,na.timer(function(){return p.c=u(n||1)?De:u,1},0,s)}function u(n){if(o.active!==r)return 1;for(var i=n/f,s=h(i),l=g.length;l>0;)g[--l].call(t,s);return i>=1?(a.event&&a.event.end.call(t,t.__data__,e),c()):void 0}function c(){return--o.count?delete o[r]:delete t[n],1}var f,h,d=a.delay,p=rs,g=[];return p.t=d+s,i>=d?l(i-d):void(p.c=l)},0,s)}}function Xo(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate("+(isFinite(r)?r:n(t))+",0)"})}function Jo(t,e,n){t.attr("transform",function(t){var r=e(t);return"translate(0,"+(isFinite(r)?r:n(t))+")"})}function Zo(t){return t.toISOString()}function Ko(t,e,n){function r(e){return t(e)}function i(t,n){var r=t[1]-t[0],i=r/n,o=na.bisect(Vl,i);return o==Vl.length?[e.year,Vi(t.map(function(t){return t/31536e6}),n)[2]]:o?e[i/Vl[o-1]<Vl[o]/i?o-1:o]:[Xl,Vi(t,n)[2]]}return r.invert=function(e){return Qo(t.invert(e))},r.domain=function(e){return arguments.length?(t.domain(e),r):t.domain().map(Qo)},r.nice=function(t,e){function n(n){return!isNaN(n)&&!t.range(n,Qo(+n+1),e).length}var o=r.domain(),a=Fi(o),s=null==t?i(a,10):"number"==typeof t&&i(a,t);return s&&(t=s[0],e=s[1]),r.domain(qi(o,e>1?{floor:function(e){for(;n(e=t.floor(e));)e=Qo(e-1);return e},ceil:function(e){for(;n(e=t.ceil(e));)e=Qo(+e+1);return e}}:t))},r.ticks=function(t,e){var n=Fi(r.domain()),o=null==t?i(n,10):"number"==typeof t?i(n,t):!t.range&&[{range:t},e];return o&&(t=o[0],e=o[1]),t.range(n[0],Qo(+n[1]+1),1>e?1:e)},r.tickFormat=function(){return n},r.copy=function(){return Ko(t.copy(),e,n)},Wi(r,t)}function Qo(t){return new Date(t)}function ta(t){return JSON.parse(t.responseText)}function ea(t){var e=oa.createRange();return e.selectNode(oa.body),e.createContextualFragment(t.responseText)}var na={version:"3.5.5"},ra=[].slice,ia=function(t){return ra.call(t)},oa=this.document;if(oa)try{ia(oa.documentElement.childNodes)[0].nodeType}catch(aa){ia=function(t){for(var e=t.length,n=new Array(e);e--;)n[e]=t[e];return n}}if(Date.now||(Date.now=function(){return+new Date}),oa)try{oa.createElement("DIV").style.setProperty("opacity",0,"")}catch(sa){var la=this.Element.prototype,ua=la.setAttribute,ca=la.setAttributeNS,fa=this.CSSStyleDeclaration.prototype,ha=fa.setProperty;la.setAttribute=function(t,e){ua.call(this,t,e+"")},la.setAttributeNS=function(t,e,n){ca.call(this,t,e,n+"")},fa.setProperty=function(t,e,n){ha.call(this,t,e+"",n)}}na.ascending=n,na.descending=function(t,e){return t>e?-1:e>t?1:e>=t?0:NaN},na.min=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&n>r&&(n=r)}return n},na.max=function(t,e){var n,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=t[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=e.call(t,t[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=e.call(t,t[i],i))&&r>n&&(n=r)}return n},na.extent=function(t,e){var n,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t[o])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++o<a;)if(null!=(r=e.call(t,t[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e.call(t,t[o],o))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},na.sum=function(t,e){var n,r=0,o=t.length,a=-1;if(1===arguments.length)for(;++a<o;)i(n=+t[a])&&(r+=n);else for(;++a<o;)i(n=+e.call(t,t[a],a))&&(r+=n);return r},na.mean=function(t,e){var n,o=0,a=t.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)i(n=r(t[s]))?o+=n:--l;else for(;++s<a;)i(n=r(e.call(t,t[s],s)))?o+=n:--l;return l?o/l:void 0},na.quantile=function(t,e){var n=(t.length-1)*e+1,r=Math.floor(n),i=+t[r-1],o=n-r;return o?i+o*(t[r]-i):i},na.median=function(t,e){var o,a=[],s=t.length,l=-1;if(1===arguments.length)for(;++l<s;)i(o=r(t[l]))&&a.push(o);else for(;++l<s;)i(o=r(e.call(t,t[l],l)))&&a.push(o);return a.length?na.quantile(a.sort(n),.5):void 0},na.variance=function(t,e){var n,o,a=t.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)i(n=r(t[u]))&&(o=n-s,s+=o/++c,l+=o*(n-s));else for(;++u<a;)i(n=r(e.call(t,t[u],u)))&&(o=n-s,s+=o/++c,l+=o*(n-s));return c>1?l/(c-1):void 0},na.deviation=function(){var t=na.variance.apply(this,arguments);return t?Math.sqrt(t):t};var da=o(n);na.bisectLeft=da.left,na.bisect=na.bisectRight=da.right,na.bisector=function(t){return o(1===t.length?function(e,r){return n(t(e),r)}:t)},na.shuffle=function(t,e,n){(o=arguments.length)<3&&(n=t.length,2>o&&(e=0));for(var r,i,o=n-e;o;)i=Math.random()*o--|0,r=t[o+e],t[o+e]=t[i+e],t[i+e]=r;return t},na.permute=function(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r},na.pairs=function(t){for(var e,n=0,r=t.length-1,i=t[0],o=new Array(0>r?0:r);r>n;)o[n]=[e=i,i=t[++n]];return o},na.zip=function(){if(!(r=arguments.length))return[];for(var t=-1,e=na.min(arguments,a),n=new Array(e);++t<e;)for(var r,i=-1,o=n[t]=new Array(r);++i<r;)o[i]=arguments[i][t];return n},na.transpose=function(t){return na.zip.apply(na,t)},na.keys=function(t){var e=[];for(var n in t)e.push(n);return e},na.values=function(t){var e=[];for(var n in t)e.push(t[n]);return e},na.entries=function(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e},na.merge=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--a]=r[e];return n};var pa=Math.abs;na.range=function(t,e,n){if(arguments.length<3&&(n=1,arguments.length<2&&(e=t,t=0)),(e-t)/n===1/0)throw new Error("infinite range");var r,i=[],o=s(pa(n)),a=-1;if(t*=o,e*=o,n*=o,0>n)for(;(r=t+n*++a)>e;)i.push(r/o);else for(;(r=t+n*++a)<e;)i.push(r/o);return i},na.map=function(t,e){var n=new u;if(t instanceof u)t.forEach(function(t,e){n.set(t,e)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)n.set(i,t[i]);else for(;++i<o;)n.set(e.call(t,r=t[i],i),r)}else for(var a in t)n.set(a,t[a]);return n};var ga="__proto__",va="\0";l(u,{has:h,get:function(t){return this._[c(t)]},set:function(t,e){return this._[c(t)]=e},remove:d,keys:p,values:function(){var t=[];for(var e in this._)t.push(this._[e]);return t},entries:function(){var t=[];for(var e in this._)t.push({key:f(e),value:this._[e]});return t},size:g,empty:v,forEach:function(t){for(var e in this._)t.call(this,f(e),this._[e])}}),na.nest=function(){function t(e,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var l,c,f,h,d=-1,p=a.length,g=o[s++],v=new u;++d<p;)(h=v.get(l=g(c=a[d])))?h.push(c):v.set(l,[c]);return e?(c=e(),f=function(n,r){c.set(n,t(e,r,s))}):(c={},f=function(n,r){c[n]=t(e,r,s)}),v.forEach(f),c}function e(t,n){if(n>=o.length)return t;var r=[],i=a[n++];return t.forEach(function(t,i){r.push({key:t,values:e(i,n)})}),i?r.sort(function(t,e){return i(t.key,e.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(e,n){return t(n,e,0)},i.entries=function(n){return e(t(na.map,n,0),0)},i.key=function(t){return o.push(t),i},i.sortKeys=function(t){return a[o.length-1]=t,i},i.sortValues=function(t){return n=t,i},i.rollup=function(t){return r=t,i},i},na.set=function(t){var e=new m;if(t)for(var n=0,r=t.length;r>n;++n)e.add(t[n]);return e},l(m,{has:h,add:function(t){return this._[c(t+="")]=!0,t},remove:d,values:p,size:g,empty:v,forEach:function(t){for(var e in this._)t.call(this,f(e))}}),na.behavior={},na.rebind=function(t,e){for(var n,r=1,i=arguments.length;++r<i;)t[n=arguments[r]]=b(t,e,e[n]);return t};var ma=["webkit","ms","moz","Moz","o","O"];na.dispatch=function(){for(var t=new w,e=-1,n=arguments.length;++e<n;)t[arguments[e]]=S(t);return t},w.prototype.on=function(t,e){var n=t.indexOf("."),r="";if(n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),t)return arguments.length<2?this[t].on(r):this[t].on(r,e);if(2===arguments.length){if(null==e)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},na.event=null,na.requote=function(t){return t.replace(ya,"\\$&")};var ya=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ba={}.__proto__?function(t,e){t.__proto__=e}:function(t,e){for(var n in e)t[n]=e[n]},xa=function(t,e){return e.querySelector(t)},_a=function(t,e){return e.querySelectorAll(t)},wa=function(t,e){var n=t.matches||t[x(t,"matchesSelector")];return(wa=function(t,e){return n.call(t,e)})(t,e)};"function"==typeof Sizzle&&(xa=function(t,e){return Sizzle(t,e)[0]||null},_a=Sizzle,wa=Sizzle.matchesSelector),na.selection=function(){return na.select(oa.documentElement)};var Sa=na.selection.prototype=[];Sa.select=function(t){var e,n,r,i,o=[];t=D(t);for(var a=-1,s=this.length;++a<s;){o.push(e=[]),e.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(e.push(n=t.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):e.push(null)}return A(o)},Sa.selectAll=function(t){var e,n,r=[];t=E(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(e=ia(t.call(n,n.__data__,s,i))),e.parentNode=n);return A(r)};var Ta={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};na.ns={prefix:Ta,qualify:function(t){var e=t.indexOf(":"),n=t;return e>=0&&(n=t.slice(0,e),t=t.slice(e+1)),Ta.hasOwnProperty(n)?{space:Ta[n],local:t}:t}},Sa.attr=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node();return t=na.ns.qualify(t),t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}for(e in t)this.each(M(e,t[e]));return this}return this.each(M(t,e))},Sa.classed=function(t,e){if(arguments.length<2){if("string"==typeof t){var n=this.node(),r=(t=L(t)).length,i=-1;if(e=n.classList){for(;++i<r;)if(!e.contains(t[i]))return!1}else for(e=n.getAttribute("class");++i<r;)if(!N(t[i]).test(e))return!1;return!0}for(e in t)this.each(R(e,t[e]));return this}return this.each(R(t,e))},Sa.style=function(t,n,r){var i=arguments.length;if(3>i){if("string"!=typeof t){2>i&&(n="");for(r in t)this.each(O(r,t[r],n));return this}if(2>i){var o=this.node();return e(o).getComputedStyle(o,null).getPropertyValue(t)}r=""}return this.each(O(t,n,r))},Sa.property=function(t,e){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(e in t)this.each(F(e,t[e]));return this}return this.each(F(t,e))},Sa.text=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}:null==t?function(){this.textContent=""}:function(){this.textContent=t}):this.node().textContent},Sa.html=function(t){return arguments.length?this.each("function"==typeof t?function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}:null==t?function(){this.innerHTML=""}:function(){this.innerHTML=t}):this.node().innerHTML},Sa.append=function(t){return t=z(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Sa.insert=function(t,e){return t=z(t),e=D(e),this.select(function(){return this.insertBefore(t.apply(this,arguments),e.apply(this,arguments)||null)})},Sa.remove=function(){return this.each(P)},Sa.data=function(t,e){function n(t,n){var r,i,o,a=t.length,f=n.length,h=Math.min(a,f),d=new Array(f),p=new Array(f),g=new Array(a);if(e){var v,m=new u,y=new Array(a);for(r=-1;++r<a;)m.has(v=e.call(i=t[r],i.__data__,r))?g[r]=i:m.set(v,i),y[r]=v;for(r=-1;++r<f;)(i=m.get(v=e.call(n,o=n[r],r)))?i!==!0&&(d[r]=i,i.__data__=o):p[r]=q(o),m.set(v,!0);for(r=-1;++r<a;)m.get(y[r])!==!0&&(g[r]=t[r])}else{for(r=-1;++r<h;)i=t[r],o=n[r],i?(i.__data__=o,d[r]=i):p[r]=q(o);for(;f>r;++r)p[r]=q(n[r]);for(;a>r;++r)g[r]=t[r]}p.update=d,p.parentNode=d.parentNode=g.parentNode=t.parentNode,s.push(p),l.push(d),c.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(t=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(t[o]=i.__data__);return t}var s=W([]),l=A([]),c=A([]);if("function"==typeof t)for(;++o<a;)n(r=this[o],t.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],t);return l.enter=function(){return s},l.exit=function(){return c},l},Sa.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Sa.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]),e.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return A(i)},Sa.order=function(){for(var t=-1,e=this.length;++t<e;)for(var n,r=this[t],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},Sa.sort=function(t){t=B.apply(this,arguments);for(var e=-1,n=this.length;++e<n;)this[e].sort(t);return this.order()},Sa.each=function(t){return $(this,function(e,n,r){t.call(e,e.__data__,n,r)})},Sa.call=function(t){var e=ia(arguments);return t.apply(e[0]=this,e),this},Sa.empty=function(){return!this.node()},Sa.node=function(){for(var t=0,e=this.length;e>t;t++)for(var n=this[t],r=0,i=n.length;i>r;r++){var o=n[r];if(o)return o}return null},Sa.size=function(){var t=0;return $(this,function(){++t}),t};var Ca=[];na.selection.enter=W,na.selection.enter.prototype=Ca,Ca.append=Sa.append,Ca.empty=Sa.empty,Ca.node=Sa.node,Ca.call=Sa.call,Ca.size=Sa.size,Ca.select=function(t){for(var e,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(e=[]),e.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(e.push(r[u]=n=t.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):e.push(null)}return A(a)},Ca.insert=function(t,e){return arguments.length<2&&(e=U(this)),Sa.insert.call(this,t,e)},na.select=function(e){var n;return"string"==typeof e?(n=[xa(e,oa)],n.parentNode=oa.documentElement):(n=[e],n.parentNode=t(e)),A([n])},na.selectAll=function(t){var e;return"string"==typeof t?(e=ia(_a(t,oa)),e.parentNode=oa.documentElement):(e=t,e.parentNode=null),A([e])},Sa.on=function(t,e,n){var r=arguments.length;if(3>r){if("string"!=typeof t){2>r&&(e=!1);for(n in t)this.each(V(n,t[n],e));return this}if(2>r)return(r=this.node()["__on"+t])&&r._;n=!1}return this.each(V(t,e,n))};var ka=na.map({mouseenter:"mouseover",mouseleave:"mouseout"});oa&&ka.forEach(function(t){"on"+t in oa&&ka.remove(t)});var Aa,Da=0;na.mouse=function(t){return J(t,C())};var Ea=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;na.touch=function(t,e,n){if(arguments.length<3&&(n=e,e=C().changedTouches),e)for(var r,i=0,o=e.length;o>i;++i)if((r=e[i]).identifier===n)return J(t,r)},na.behavior.drag=function(){function t(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(t,e,n,o,a){return function(){function s(){var t,n,r=e(h,g);r&&(t=r[0]-b[0],n=r[1]-b[1],p|=t|n,b=r,d({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:t,dy:n}))}function l(){e(h,g)&&(m.on(o+v,null).on(a+v,null),y(p&&na.event.target===f),d({type:"dragend"}))}var u,c=this,f=na.event.target,h=c.parentNode,d=r.of(c,arguments),p=0,g=t(),v=".drag"+(null==g?"":"-"+g),m=na.select(n(f)).on(o+v,s).on(a+v,l),y=X(f),b=e(h,g);i?(u=i.apply(c,arguments),u=[u.x-b[0],u.y-b[1]]):u=[0,0],d({type:"dragstart"})}}var r=k(t,"drag","dragstart","dragend"),i=null,o=n(_,na.mouse,e,"mousemove","mouseup"),a=n(Z,na.touch,y,"touchmove","touchend");return t.origin=function(e){return arguments.length?(i=e,t):i},na.rebind(t,r,"on")},na.touches=function(t,e){return arguments.length<2&&(e=C().touches),e?ia(e).map(function(e){var n=J(t,e);return n.identifier=e.identifier,n}):[]};var Ma=1e-6,ja=Ma*Ma,Na=Math.PI,La=2*Na,Ra=La-Ma,Ia=Na/2,Oa=Na/180,Fa=180/Na,za=Math.SQRT2,Pa=2,qa=4;na.interpolateZoom=function(t,e){function n(t){var e=t*y;if(m){var n=rt(g),a=o/(Pa*h)*(n*it(za*e+g)-nt(g));return[r+a*u,i+a*c,o*n/rt(za*e+g)]}return[r+t*u,i+t*c,o*Math.exp(za*e)]}var r=t[0],i=t[1],o=t[2],a=e[0],s=e[1],l=e[2],u=a-r,c=s-i,f=u*u+c*c,h=Math.sqrt(f),d=(l*l-o*o+qa*f)/(2*o*Pa*h),p=(l*l-o*o-qa*f)/(2*l*Pa*h),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(p*p+1)-p),m=v-g,y=(m||Math.log(l/o))/za;return n.duration=1e3*y,n},na.behavior.zoom=function(){function t(t){t.on(j,f).on(Ba+".zoom",d).on("dblclick.zoom",p).on(R,h)}function n(t){return[(t[0]-C.x)/C.k,(t[1]-C.y)/C.k]}function r(t){return[t[0]*C.k+C.x,t[1]*C.k+C.y]}function i(t){C.k=Math.max(D[0],Math.min(D[1],t))}function o(t,e){e=r(e),C.x+=t[0]-e[0],C.y+=t[1]-e[1]}function a(e,n,r,a){e.__chart__={x:C.x,y:C.y,k:C.k},i(Math.pow(2,a)),o(v=n,r),e=na.select(e),E>0&&(e=e.transition().duration(E)),e.call(t.event)}function s(){_&&_.domain(x.range().map(function(t){return(t-C.x)/C.k}).map(x.invert)),S&&S.domain(w.range().map(function(t){return(t-C.y)/C.k}).map(w.invert))}function l(t){M++||t({type:"zoomstart"})}function u(t){s(),t({type:"zoom",scale:C.k,translate:[C.x,C.y]})}function c(t){--M||t({type:"zoomend"}),v=null}function f(){function t(){f=1,o(na.mouse(i),d),u(s)}function r(){h.on(N,null).on(L,null),p(f&&na.event.target===a),c(s)}var i=this,a=na.event.target,s=I.of(i,arguments),f=0,h=na.select(e(i)).on(N,t).on(L,r),d=n(na.mouse(i)),p=X(i);Ol.call(i),l(s)}function h(){function t(){var t=na.touches(p);return d=C.k,t.forEach(function(t){t.identifier in v&&(v[t.identifier]=n(t))}),t}function e(){var e=na.event.target;na.select(e).on(x,r).on(_,s),w.push(e);for(var n=na.event.changedTouches,i=0,o=n.length;o>i;++i)v[n[i].identifier]=null;var l=t(),u=Date.now();if(1===l.length){if(500>u-b){var c=l[0];a(p,c,v[c.identifier],Math.floor(Math.log(C.k)/Math.LN2)+1),T()}b=u}else if(l.length>1){var c=l[0],f=l[1],h=c[0]-f[0],d=c[1]-f[1];m=h*h+d*d}}function r(){var t,e,n,r,a=na.touches(p);Ol.call(p);for(var s=0,l=a.length;l>s;++s,r=null)if(n=a[s],r=v[n.identifier]){if(e)break;t=n,e=r}if(r){var c=(c=n[0]-t[0])*c+(c=n[1]-t[1])*c,f=m&&Math.sqrt(c/m);t=[(t[0]+n[0])/2,(t[1]+n[1])/2],e=[(e[0]+r[0])/2,(e[1]+r[1])/2],i(f*d)}b=null,o(t,e),u(g)}function s(){if(na.event.touches.length){for(var e=na.event.changedTouches,n=0,r=e.length;r>n;++n)delete v[e[n].identifier];for(var i in v)return void t()}na.selectAll(w).on(y,null),S.on(j,f).on(R,h),k(),c(g)}var d,p=this,g=I.of(p,arguments),v={},m=0,y=".zoom-"+na.event.changedTouches[0].identifier,x="touchmove"+y,_="touchend"+y,w=[],S=na.select(p),k=X(p);e(),l(g),S.on(j,null).on(R,e)}function d(){var t=I.of(this,arguments);y?clearTimeout(y):(g=n(v=m||na.mouse(this)),Ol.call(this),l(t)),y=setTimeout(function(){y=null,c(t)},50),T(),i(Math.pow(2,.002*Ha())*C.k),o(v,g),u(t)}function p(){var t=na.mouse(this),e=Math.log(C.k)/Math.LN2;a(this,t,n(t),na.event.shiftKey?Math.ceil(e)-1:Math.floor(e)+1)}var g,v,m,y,b,x,_,w,S,C={x:0,y:0,k:1},A=[960,500],D=$a,E=250,M=0,j="mousedown.zoom",N="mousemove.zoom",L="mouseup.zoom",R="touchstart.zoom",I=k(t,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in oa?(Ha=function(){return-na.event.deltaY*(na.event.deltaMode?120:1)},"wheel"):"onmousewheel"in oa?(Ha=function(){return na.event.wheelDelta},"mousewheel"):(Ha=function(){return-na.event.detail},"MozMousePixelScroll")),t.event=function(t){t.each(function(){var t=I.of(this,arguments),e=C;Rl?na.select(this).transition().each("start.zoom",function(){C=this.__chart__||{x:0,y:0,k:1},l(t)}).tween("zoom:zoom",function(){var n=A[0],r=A[1],i=v?v[0]:n/2,o=v?v[1]:r/2,a=na.interpolateZoom([(i-C.x)/C.k,(o-C.y)/C.k,n/C.k],[(i-e.x)/e.k,(o-e.y)/e.k,n/e.k]);return function(e){var r=a(e),s=n/r[2];this.__chart__=C={x:i-r[0]*s,y:o-r[1]*s,k:s},u(t)}}).each("interrupt.zoom",function(){c(t)}).each("end.zoom",function(){c(t)}):(this.__chart__=C,l(t),u(t),c(t))})},t.translate=function(e){return arguments.length?(C={x:+e[0],y:+e[1],k:C.k},s(),t):[C.x,C.y]},t.scale=function(e){return arguments.length?(C={x:C.x,y:C.y,k:+e},s(),t):C.k},t.scaleExtent=function(e){return arguments.length?(D=null==e?$a:[+e[0],+e[1]],t):D},t.center=function(e){return arguments.length?(m=e&&[+e[0],+e[1]],t):m},t.size=function(e){return arguments.length?(A=e&&[+e[0],+e[1]],t):A},t.duration=function(e){return arguments.length?(E=+e,t):E},t.x=function(e){return arguments.length?(_=e,x=e.copy(),C={x:0,y:0,k:1},t):_},t.y=function(e){return arguments.length?(S=e,w=e.copy(),C={x:0,y:0,k:1},t):S},na.rebind(t,I,"on")};var Ha,Ba,$a=[0,1/0];na.color=at,at.prototype.toString=function(){return this.rgb()+""},na.hsl=st;var Wa=st.prototype=new at;Wa.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,this.l/t)},Wa.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new st(this.h,this.s,t*this.l)},Wa.rgb=function(){return lt(this.h,this.s,this.l)},na.hcl=ut;var Ua=ut.prototype=new at;Ua.brighter=function(t){return new ut(this.h,this.c,Math.min(100,this.l+Va*(arguments.length?t:1)))},Ua.darker=function(t){return new ut(this.h,this.c,Math.max(0,this.l-Va*(arguments.length?t:1)))},Ua.rgb=function(){return ct(this.h,this.c,this.l).rgb()},na.lab=ft;var Va=18,Ga=.95047,Ya=1,Xa=1.08883,Ja=ft.prototype=new at;Ja.brighter=function(t){return new ft(Math.min(100,this.l+Va*(arguments.length?t:1)),this.a,this.b)},Ja.darker=function(t){return new ft(Math.max(0,this.l-Va*(arguments.length?t:1)),this.a,this.b)},Ja.rgb=function(){return ht(this.l,this.a,this.b)},na.rgb=mt;var Za=mt.prototype=new at;Za.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var e=this.r,n=this.g,r=this.b,i=30;return e||n||r?(e&&i>e&&(e=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new mt(Math.min(255,e/t),Math.min(255,n/t),Math.min(255,r/t))):new mt(i,i,i)},Za.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new mt(t*this.r,t*this.g,t*this.b)},Za.hsl=function(){return wt(this.r,this.g,this.b)},Za.toString=function(){return"#"+xt(this.r)+xt(this.g)+xt(this.b)};var Ka=na.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Ka.forEach(function(t,e){Ka.set(t,yt(e))}),na.functor=kt,na.xhr=At(y),na.dsv=function(t,e){function n(t,n,o){arguments.length<3&&(o=n,n=null);var a=Dt(t,e,null==n?r:i(n),o);return a.row=function(t){return arguments.length?a.response(null==(n=t)?r:i(t)):n},a}function r(t){return n.parse(t.responseText)}function i(t){return function(e){return n.parse(e.responseText,t)}}function o(e){return e.map(a).join(t)}function a(t){return s.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}var s=new RegExp('["'+t+"\n]"),l=t.charCodeAt(0);return n.parse=function(t,e){var r;return n.parseRows(t,function(t,n){if(r)return r(t,n-1);var i=new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}");r=e?function(t,n){return e(i(t),n)}:i})},n.parseRows=function(t,e){function n(){if(c>=u)return a;if(i)return i=!1,o;var e=c;if(34===t.charCodeAt(e)){for(var n=e;n++<u;)if(34===t.charCodeAt(n)){if(34!==t.charCodeAt(n+1))break;++n}c=n+2;var r=t.charCodeAt(n+1);return 13===r?(i=!0,10===t.charCodeAt(n+2)&&++c):10===r&&(i=!0),t.slice(e+1,n).replace(/""/g,'"')}for(;u>c;){var r=t.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===t.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return t.slice(e,c-s)}return t.slice(e)}for(var r,i,o={},a={},s=[],u=t.length,c=0,f=0;(r=n())!==a;){for(var h=[];r!==o&&r!==a;)h.push(r),r=n();e&&null==(h=e(h,f++))||s.push(h)}return s},n.format=function(e){if(Array.isArray(e[0]))return n.formatRows(e);var r=new m,i=[];return e.forEach(function(t){for(var e in t)r.has(e)||i.push(r.add(e))}),[i.map(a).join(t)].concat(e.map(function(e){return i.map(function(t){return a(e[t])}).join(t)})).join("\n")},n.formatRows=function(t){return t.map(o).join("\n")},n},na.csv=na.dsv(",","text/csv"),na.tsv=na.dsv("\t","text/tab-separated-values");var Qa,ts,es,ns,rs,is=this[x(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};na.timer=function(t,e,n){var r=arguments.length;2>r&&(e=0),3>r&&(n=Date.now());var i=n+e,o={c:t,t:i,f:!1,n:null};ts?ts.n=o:Qa=o,ts=o,es||(ns=clearTimeout(ns),es=1,is(jt))},na.timer.flush=function(){Nt(),Lt()},na.round=function(t,e){return e?Math.round(t*(e=Math.pow(10,e)))/e:Math.round(t)};var os=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"].map(It);na.formatPrefix=function(t,e){var n=0;return t&&(0>t&&(t*=-1),e&&(t=na.round(t,Rt(t,e))),n=1+Math.floor(1e-12+Math.log(t)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),os[8+n/3]};var as=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ss=na.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,e){return t.toPrecision(e)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},r:function(t,e){return(t=na.round(t,Rt(t,e))).toFixed(Math.max(0,Math.min(20,Rt(t*(1+1e-15),e))))}}),ls=na.time={},us=Date;zt.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){cs.setUTCDate.apply(this._,arguments)},setDay:function(){cs.setUTCDay.apply(this._,arguments)},setFullYear:function(){cs.setUTCFullYear.apply(this._,arguments)},setHours:function(){cs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){cs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){cs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){cs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){cs.setUTCSeconds.apply(this._,arguments)},setTime:function(){cs.setTime.apply(this._,arguments)}};var cs=Date.prototype;ls.year=Pt(function(t){return t=ls.day(t),t.setMonth(0,1),t},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t){return t.getFullYear()}),ls.years=ls.year.range,ls.years.utc=ls.year.utc.range,ls.day=Pt(function(t){var e=new us(2e3,0);return e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),e},function(t,e){t.setDate(t.getDate()+e)},function(t){return t.getDate()-1}),ls.days=ls.day.range,ls.days.utc=ls.day.utc.range,ls.dayOfYear=function(t){var e=ls.year(t);return Math.floor((t-e-6e4*(t.getTimezoneOffset()-e.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=ls[t]=Pt(function(t){return(t=ls.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,e){t.setDate(t.getDate()+7*Math.floor(e))},function(t){var n=ls.year(t).getDay();return Math.floor((ls.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});ls[t+"s"]=n.range,ls[t+"s"].utc=n.utc.range,ls[t+"OfYear"]=function(t){var n=ls.year(t).getDay();return Math.floor((ls.dayOfYear(t)+(n+e)%7)/7)}}),ls.week=ls.sunday,ls.weeks=ls.sunday.range,ls.weeks.utc=ls.sunday.utc.range,ls.weekOfYear=ls.sundayOfYear;var fs={"-":"",_:" ",0:"0"},hs=/^\s*\d+/,ds=/^%/;na.locale=function(t){return{numberFormat:Ot(t),timeFormat:Ht(t)}};var ps=na.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});na.format=ps.numberFormat,na.geo={},le.prototype={s:0,t:0,add:function(t){ue(t,this.t,gs),ue(gs.s,this.s,this),this.s?this.t+=gs.t:this.s=gs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gs=new le;na.geo.stream=function(t,e){t&&vs.hasOwnProperty(t.type)?vs[t.type](t,e):ce(t,e)};var vs={Feature:function(t,e){ce(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)ce(n[r].geometry,e)}},ms={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){fe(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)fe(n[r],e,0)},Polygon:function(t,e){he(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)he(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)ce(n[r],e);
}};na.geo.area=function(t){return ys=0,na.geo.stream(t,xs),ys};var ys,bs=new le,xs={sphere:function(){ys+=4*Na},point:_,lineStart:_,lineEnd:_,polygonStart:function(){bs.reset(),xs.lineStart=de},polygonEnd:function(){var t=2*bs;ys+=0>t?4*Na+t:t,xs.lineStart=xs.lineEnd=xs.point=_}};na.geo.bounds=function(){function t(t,e){b.push(x=[c=t,h=t]),f>e&&(f=e),e>d&&(d=e)}function e(e,n){var r=pe([e*Oa,n*Oa]);if(m){var i=ve(m,r),o=[i[1],-i[0],0],a=ve(o,i);be(a),a=xe(a);var l=e-p,u=l>0?1:-1,g=a[0]*Fa*u,v=pa(l)>180;if(v^(g>u*p&&u*e>g)){var y=a[1]*Fa;y>d&&(d=y)}else if(g=(g+360)%360-180,v^(g>u*p&&u*e>g)){var y=-a[1]*Fa;f>y&&(f=y)}else f>n&&(f=n),n>d&&(d=n);v?p>e?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e):h>=c?(c>e&&(c=e),e>h&&(h=e)):e>p?s(c,e)>s(c,h)&&(h=e):s(e,h)>s(c,h)&&(c=e)}else t(e,n);m=r,p=e}function n(){_.point=e}function r(){x[0]=c,x[1]=h,_.point=t,m=null}function i(t,n){if(m){var r=t-p;y+=pa(r)>180?r+(r>0?360:-360):r}else g=t,v=n;xs.point(t,n),e(t,n)}function o(){xs.lineStart()}function a(){i(g,v),xs.lineEnd(),pa(y)>Ma&&(c=-(h=180)),x[0]=c,x[1]=h,m=null}function s(t,e){return(e-=t)<0?e+360:e}function l(t,e){return t[0]-e[0]}function u(t,e){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var c,f,h,d,p,g,v,m,y,b,x,_={point:t,lineStart:n,lineEnd:r,polygonStart:function(){_.point=i,_.lineStart=o,_.lineEnd=a,y=0,xs.polygonStart()},polygonEnd:function(){xs.polygonEnd(),_.point=t,_.lineStart=n,_.lineEnd=r,0>bs?(c=-(h=180),f=-(d=90)):y>Ma?d=90:-Ma>y&&(f=-90),x[0]=c,x[1]=h}};return function(t){d=h=-(c=f=1/0),b=[],na.geo.stream(t,_);var e=b.length;if(e){b.sort(l);for(var n,r=1,i=b[0],o=[i];e>r;++r)n=b[r],u(n[0],i)||u(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):o.push(i=n);for(var a,n,p=-1/0,e=o.length-1,r=0,i=o[e];e>=r;i=n,++r)n=o[r],(a=s(i[1],n[0]))>p&&(p=a,c=n[0],h=i[1])}return b=x=null,1/0===c||1/0===f?[[NaN,NaN],[NaN,NaN]]:[[c,f],[h,d]]}}(),na.geo.centroid=function(t){_s=ws=Ss=Ts=Cs=ks=As=Ds=Es=Ms=js=0,na.geo.stream(t,Ns);var e=Es,n=Ms,r=js,i=e*e+n*n+r*r;return ja>i&&(e=ks,n=As,r=Ds,Ma>ws&&(e=Ss,n=Ts,r=Cs),i=e*e+n*n+r*r,ja>i)?[NaN,NaN]:[Math.atan2(n,e)*Fa,et(r/Math.sqrt(i))*Fa]};var _s,ws,Ss,Ts,Cs,ks,As,Ds,Es,Ms,js,Ns={sphere:_,point:we,lineStart:Te,lineEnd:Ce,polygonStart:function(){Ns.lineStart=ke},polygonEnd:function(){Ns.lineStart=Te}},Ls=Ne(De,Oe,ze,[-Na,-Na/2]),Rs=1e9;na.geo.clipExtent=function(){var t,e,n,r,i,o,a={stream:function(t){return i&&(i.valid=!1),i=o(t),i.valid=!0,i},extent:function(s){return arguments.length?(o=Be(t=+s[0][0],e=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[t,e],[n,r]]}};return a.extent([[0,0],[960,500]])},(na.geo.conicEqualArea=function(){return $e(We)}).raw=We,na.geo.albers=function(){return na.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},na.geo.albersUsa=function(){function t(t){var o=t[0],a=t[1];return e=null,n(o,a),e||(r(o,a),e)||i(o,a),e}var e,n,r,i,o=na.geo.albers(),a=na.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=na.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){e=[t,n]}};return t.invert=function(t){var e=o.scale(),n=o.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&.234>i&&r>=-.425&&-.214>r?a:i>=.166&&.234>i&&r>=-.214&&-.115>r?s:o).invert(t)},t.stream=function(t){var e=o.stream(t),n=a.stream(t),r=s.stream(t);return{point:function(t,i){e.point(t,i),n.point(t,i),r.point(t,i)},sphere:function(){e.sphere(),n.sphere(),r.sphere()},lineStart:function(){e.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){e.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){e.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){e.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},t.precision=function(e){return arguments.length?(o.precision(e),a.precision(e),s.precision(e),t):o.precision()},t.scale=function(e){return arguments.length?(o.scale(e),a.scale(.35*e),s.scale(e),t.translate(o.translate())):o.scale()},t.translate=function(e){if(!arguments.length)return o.translate();var u=o.scale(),c=+e[0],f=+e[1];return n=o.translate(e).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=a.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Ma,f+.12*u+Ma],[c-.214*u-Ma,f+.234*u-Ma]]).stream(l).point,i=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Ma,f+.166*u+Ma],[c-.115*u-Ma,f+.234*u-Ma]]).stream(l).point,t},t.scale(1070)};var Is,Os,Fs,zs,Ps,qs,Hs={point:_,lineStart:_,lineEnd:_,polygonStart:function(){Os=0,Hs.lineStart=Ue},polygonEnd:function(){Hs.lineStart=Hs.lineEnd=Hs.point=_,Is+=pa(Os/2)}},Bs={point:Ve,lineStart:_,lineEnd:_,polygonStart:_,polygonEnd:_},$s={point:Xe,lineStart:Je,lineEnd:Ze,polygonStart:function(){$s.lineStart=Ke},polygonEnd:function(){$s.point=Xe,$s.lineStart=Je,$s.lineEnd=Ze}};na.geo.path=function(){function t(t){return t&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),na.geo.stream(t,a)),o.result()}function e(){return a=null,t}var n,r,i,o,a,s=4.5;return t.area=function(t){return Is=0,na.geo.stream(t,i(Hs)),Is},t.centroid=function(t){return Ss=Ts=Cs=ks=As=Ds=Es=Ms=js=0,na.geo.stream(t,i($s)),js?[Es/js,Ms/js]:Ds?[ks/Ds,As/Ds]:Cs?[Ss/Cs,Ts/Cs]:[NaN,NaN]},t.bounds=function(t){return Ps=qs=-(Fs=zs=1/0),na.geo.stream(t,i(Bs)),[[Fs,zs],[Ps,qs]]},t.projection=function(t){return arguments.length?(i=(n=t)?t.stream||en(t):y,e()):n},t.context=function(t){return arguments.length?(o=null==(r=t)?new Ge:new Qe(t),"function"!=typeof s&&o.pointRadius(s),e()):r},t.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(o.pointRadius(+e),+e),t):s},t.projection(na.geo.albersUsa()).context(null)},na.geo.transform=function(t){return{stream:function(e){var n=new nn(e);for(var r in t)n[r]=t[r];return n}}},nn.prototype={point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},na.geo.projection=on,na.geo.projectionMutator=an,(na.geo.equirectangular=function(){return on(ln)}).raw=ln.invert=ln,na.geo.rotation=function(t){function e(e){return e=t(e[0]*Oa,e[1]*Oa),e[0]*=Fa,e[1]*=Fa,e}return t=cn(t[0]%360*Oa,t[1]*Oa,t.length>2?t[2]*Oa:0),e.invert=function(e){return e=t.invert(e[0]*Oa,e[1]*Oa),e[0]*=Fa,e[1]*=Fa,e},e},un.invert=ln,na.geo.circle=function(){function t(){var t="function"==typeof r?r.apply(this,arguments):r,e=cn(-t[0]*Oa,-t[1]*Oa,0).invert,i=[];return n(null,null,1,{point:function(t,n){i.push(t=e(t,n)),t[0]*=Fa,t[1]*=Fa}}),{type:"Polygon",coordinates:[i]}}var e,n,r=[0,0],i=6;return t.origin=function(e){return arguments.length?(r=e,t):r},t.angle=function(r){return arguments.length?(n=pn((e=+r)*Oa,i*Oa),t):e},t.precision=function(r){return arguments.length?(n=pn(e*Oa,(i=+r)*Oa),t):i},t.angle(90)},na.geo.distance=function(t,e){var n,r=(e[0]-t[0])*Oa,i=t[1]*Oa,o=e[1]*Oa,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((n=f*a)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},na.geo.graticule=function(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return na.range(Math.ceil(o/v)*v,i,v).map(h).concat(na.range(Math.ceil(u/m)*m,l,m).map(d)).concat(na.range(Math.ceil(r/p)*p,n,p).filter(function(t){return pa(t%v)>Ma}).map(c)).concat(na.range(Math.ceil(s/g)*g,a,g).filter(function(t){return pa(t%m)>Ma}).map(f))}var n,r,i,o,a,s,l,u,c,f,h,d,p=10,g=p,v=90,m=360,y=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[h(o).concat(d(l).slice(1),h(i).reverse().slice(1),d(u).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.majorExtent(e).minorExtent(e):t.minorExtent()},t.majorExtent=function(e){return arguments.length?(o=+e[0][0],i=+e[1][0],u=+e[0][1],l=+e[1][1],o>i&&(e=o,o=i,i=e),u>l&&(e=u,u=l,l=e),t.precision(y)):[[o,u],[i,l]]},t.minorExtent=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),t.precision(y)):[[r,s],[n,a]]},t.step=function(e){return arguments.length?t.majorStep(e).minorStep(e):t.minorStep()},t.majorStep=function(e){return arguments.length?(v=+e[0],m=+e[1],t):[v,m]},t.minorStep=function(e){return arguments.length?(p=+e[0],g=+e[1],t):[p,g]},t.precision=function(e){return arguments.length?(y=+e,c=vn(s,a,90),f=mn(r,n,y),h=vn(u,l,90),d=mn(o,i,y),t):y},t.majorExtent([[-180,-90+Ma],[180,90-Ma]]).minorExtent([[-180,-80-Ma],[180,80+Ma]])},na.geo.greatArc=function(){function t(){return{type:"LineString",coordinates:[e||r.apply(this,arguments),n||i.apply(this,arguments)]}}var e,n,r=yn,i=bn;return t.distance=function(){return na.geo.distance(e||r.apply(this,arguments),n||i.apply(this,arguments))},t.source=function(n){return arguments.length?(r=n,e="function"==typeof n?null:n,t):r},t.target=function(e){return arguments.length?(i=e,n="function"==typeof e?null:e,t):i},t.precision=function(){return arguments.length?t:0},t},na.geo.interpolate=function(t,e){return xn(t[0]*Oa,t[1]*Oa,e[0]*Oa,e[1]*Oa)},na.geo.length=function(t){return Ws=0,na.geo.stream(t,Us),Ws};var Ws,Us={sphere:_,point:_,lineStart:_n,lineEnd:_,polygonStart:_,polygonEnd:_},Vs=wn(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(na.geo.azimuthalEqualArea=function(){return on(Vs)}).raw=Vs;var Gs=wn(function(t){var e=Math.acos(t);return e&&e/Math.sin(e)},y);(na.geo.azimuthalEquidistant=function(){return on(Gs)}).raw=Gs,(na.geo.conicConformal=function(){return $e(Sn)}).raw=Sn,(na.geo.conicEquidistant=function(){return $e(Tn)}).raw=Tn;var Ys=wn(function(t){return 1/t},Math.atan);(na.geo.gnomonic=function(){return on(Ys)}).raw=Ys,Cn.invert=function(t,e){return[t,2*Math.atan(Math.exp(e))-Ia]},(na.geo.mercator=function(){return kn(Cn)}).raw=Cn;var Xs=wn(function(){return 1},Math.asin);(na.geo.orthographic=function(){return on(Xs)}).raw=Xs;var Js=wn(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});(na.geo.stereographic=function(){return on(Js)}).raw=Js,An.invert=function(t,e){return[-e,2*Math.atan(Math.exp(t))-Ia]},(na.geo.transverseMercator=function(){var t=kn(An),e=t.center,n=t.rotate;return t.center=function(t){return t?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return t?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90])}).raw=An,na.geom={},na.geom.hull=function(t){function e(t){if(t.length<3)return[];var e,i=kt(n),o=kt(r),a=t.length,s=[],l=[];for(e=0;a>e;e++)s.push([+i.call(this,t[e],e),+o.call(this,t[e],e),e]);for(s.sort(jn),e=0;a>e;e++)l.push([s[e][0],-s[e][1]]);var u=Mn(s),c=Mn(l),f=c[0]===u[0],h=c[c.length-1]===u[u.length-1],d=[];for(e=u.length-1;e>=0;--e)d.push(t[s[u[e]][2]]);for(e=+f;e<c.length-h;++e)d.push(t[s[c[e]][2]]);return d}var n=Dn,r=En;return arguments.length?e(t):(e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e)},na.geom.polygon=function(t){return ba(t,Zs),t};var Zs=na.geom.polygon.prototype=[];Zs.area=function(){for(var t,e=-1,n=this.length,r=this[n-1],i=0;++e<n;)t=r,r=this[e],i+=t[1]*r[0]-t[0]*r[1];return.5*i},Zs.centroid=function(t){var e,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)e=s,s=this[r],n=e[0]*s[1]-s[0]*e[1],o+=(e[0]+s[0])*n,a+=(e[1]+s[1])*n;return[o*t,a*t]},Zs.clip=function(t){for(var e,n,r,i,o,a,s=Rn(t),l=-1,u=this.length-Rn(this),c=this[u-1];++l<u;){for(e=t.slice(),t.length=0,i=this[l],o=e[(r=e.length-s)-1],n=-1;++n<r;)a=e[n],Nn(a,c,i)?(Nn(o,c,i)||t.push(Ln(o,a,c,i)),t.push(a)):Nn(o,c,i)&&t.push(Ln(o,a,c,i)),o=a;s&&t.push(t[0]),c=i}return t};var Ks,Qs,tl,el,nl,rl=[],il=[];Bn.prototype.prepare=function(){for(var t,e=this.edges,n=e.length;n--;)t=e[n].edge,t.b&&t.a||e.splice(n,1);return e.sort(Wn),e.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},er.prototype={insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=or(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(rr(this,n),t=n,n=t.U),n.C=!1,r.C=!0,ir(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(ir(this,n),t=n,n=t.U),n.C=!1,r.C=!0,rr(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,o=t.L,a=t.R;if(n=o?a?or(a):o:a,i?i.L===t?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=t.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=a,a.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,rr(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,ir(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,rr(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,ir(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,rr(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,ir(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}},na.geom.voronoi=function(t){function e(t){var e=new Array(t.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return ar(n(t),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=e[s]=l.length?l.map(function(t){var e=t.start();return[e.x,e.y]}):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[];c.point=t[s]}),e}function n(t){return t.map(function(t,e){return{x:Math.round(o(t,e)/Ma)*Ma,y:Math.round(a(t,e)/Ma)*Ma,i:e}})}var r=Dn,i=En,o=r,a=i,s=ol;return t?e(t):(e.links=function(t){return ar(n(t)).edges.filter(function(t){return t.l&&t.r}).map(function(e){return{source:t[e.l.i],target:t[e.r.i]}})},e.triangles=function(t){var e=[];return ar(n(t)).cells.forEach(function(n,r){for(var i,o,a=n.site,s=n.edges.sort(Wn),l=-1,u=s.length,c=s[u-1].edge,f=c.l===a?c.r:c.l;++l<u;)i=c,o=f,c=s[l].edge,f=c.l===a?c.r:c.l,r<o.i&&r<f.i&&lr(a,o,f)<0&&e.push([t[r],t[o.i],t[f.i]])}),e},e.x=function(t){return arguments.length?(o=kt(r=t),e):r},e.y=function(t){return arguments.length?(a=kt(i=t),e):i},e.clipExtent=function(t){return arguments.length?(s=null==t?ol:t,e):s===ol?null:s},e.size=function(t){return arguments.length?e.clipExtent(t&&[[0,0],t]):s===ol?null:s&&s[1]},e)};var ol=[[-1e6,-1e6],[1e6,1e6]];na.geom.delaunay=function(t){return na.geom.voronoi().triangles(t)},na.geom.quadtree=function(t,e,n,r,i){function o(t){function o(t,e,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(t.leaf){var l=t.x,c=t.y;if(null!=l)if(pa(l-n)+pa(c-r)<.01)u(t,e,n,r,i,o,a,s);else{var f=t.point;t.x=t.y=t.point=null,u(t,f,l,c,i,o,a,s),u(t,e,n,r,i,o,a,s)}else t.x=n,t.y=r,t.point=e}else u(t,e,n,r,i,o,a,s)}function u(t,e,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),f=n>=u,h=r>=c,d=h<<1|f;t.leaf=!1,t=t.nodes[d]||(t.nodes[d]=fr()),f?i=u:s=u,h?a=c:l=c,o(t,e,n,r,i,a,s,l)}var c,f,h,d,p,g,v,m,y,b=kt(s),x=kt(l);if(null!=e)g=e,v=n,m=r,y=i;else if(m=y=-(g=v=1/0),f=[],h=[],p=t.length,a)for(d=0;p>d;++d)c=t[d],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),f.push(c.x),h.push(c.y);else for(d=0;p>d;++d){var _=+b(c=t[d],d),w=+x(c,d);g>_&&(g=_),v>w&&(v=w),_>m&&(m=_),w>y&&(y=w),f.push(_),h.push(w)}var S=m-g,T=y-v;S>T?y=v+S:m=g+T;var C=fr();if(C.add=function(t){o(C,t,+b(t,++d),+x(t,d),g,v,m,y)},C.visit=function(t){hr(t,C,g,v,m,y)},C.find=function(t){return dr(C,t[0],t[1],g,v,m,y)},d=-1,null==e){for(;++d<p;)o(C,t[d],f[d],h[d],g,v,m,y);--d}else t.forEach(C.add);return f=h=t=c=null,C}var a,s=Dn,l=En;return(a=arguments.length)?(s=ur,l=cr,3===a&&(i=n,r=e,n=e=0),o(t)):(o.x=function(t){return arguments.length?(s=t,o):s},o.y=function(t){return arguments.length?(l=t,o):l},o.extent=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),o):null==e?null:[[e,n],[r,i]]},o.size=function(t){return arguments.length?(null==t?e=n=r=i=null:(e=n=0,r=+t[0],i=+t[1]),o):null==e?null:[r-e,i-n]},o)},na.interpolateRgb=pr,na.interpolateObject=gr,na.interpolateNumber=vr,na.interpolateString=mr;var al=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=new RegExp(al.source,"g");na.interpolate=yr,na.interpolators=[function(t,e){var n=typeof e;return("string"===n?Ka.has(e)||/^(#|rgb\(|hsl\()/.test(e)?pr:mr:e instanceof at?pr:Array.isArray(e)?br:"object"===n&&isNaN(e)?gr:vr)(t,e)}],na.interpolateArray=br;var ll=function(){return y},ul=na.map({linear:ll,poly:kr,quad:function(){return Sr},cubic:function(){return Tr},sin:function(){return Ar},exp:function(){return Dr},circle:function(){return Er},elastic:Mr,back:jr,bounce:function(){return Nr}}),cl=na.map({"in":y,out:_r,"in-out":wr,"out-in":function(t){return wr(_r(t))}});na.ease=function(t){var e=t.indexOf("-"),n=e>=0?t.slice(0,e):t,r=e>=0?t.slice(e+1):"in";return n=ul.get(n)||ll,r=cl.get(r)||y,xr(r(n.apply(null,ra.call(arguments,1))))},na.interpolateHcl=Lr,na.interpolateHsl=Rr,na.interpolateLab=Ir,na.interpolateRound=Or,na.transform=function(t){var e=oa.createElementNS(na.ns.prefix.svg,"g");return(na.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new Fr(n?n.matrix:fl)})(t)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fl={a:1,b:0,c:0,d:1,e:0,f:0};na.interpolateTransform=Hr,na.layout={},na.layout.bundle=function(){return function(t){for(var e=[],n=-1,r=t.length;++n<r;)e.push(Wr(t[n]));return e}},na.layout.chord=function(){function t(){var t,u,f,h,d,p={},g=[],v=na.range(o),m=[];for(n=[],r=[],t=0,h=-1;++h<o;){for(u=0,d=-1;++d<o;)u+=i[h][d];g.push(u),m.push(na.range(o)),t+=u}for(a&&v.sort(function(t,e){return a(g[t],g[e])}),s&&m.forEach(function(t,e){t.sort(function(t,n){return s(i[e][t],i[e][n])})}),t=(La-c*o)/t,u=0,h=-1;++h<o;){for(f=u,d=-1;++d<o;){var y=v[h],b=m[y][d],x=i[y][b],_=u,w=u+=x*t;p[y+"-"+b]={index:y,subindex:b,startAngle:_,endAngle:w,value:x}}r[y]={index:y,startAngle:f,endAngle:u,value:(u-f)/t},u+=c}for(h=-1;++h<o;)for(d=h-1;++d<o;){var S=p[h+"-"+d],T=p[d+"-"+h];(S.value||T.value)&&n.push(S.value<T.value?{source:T,target:S}:{source:S,target:T})}l&&e()}function e(){n.sort(function(t,e){return l((t.source.value+t.target.value)/2,(e.source.value+e.target.value)/2)})}var n,r,i,o,a,s,l,u={},c=0;return u.matrix=function(t){return arguments.length?(o=(i=t)&&i.length,n=r=null,u):i},u.padding=function(t){return arguments.length?(c=t,n=r=null,u):c},u.sortGroups=function(t){return arguments.length?(a=t,n=r=null,u):a},u.sortSubgroups=function(t){return arguments.length?(s=t,n=null,u):s},u.sortChords=function(t){return arguments.length?(l=t,n&&e(),u):l},u.chords=function(){return n||t(),n},u.groups=function(){return r||t(),r},u},na.layout.force=function(){function t(t){return function(e,n,r,i){if(e.point!==t){var o=e.cx-t.x,a=e.cy-t.y,s=i-n,l=o*o+a*a;if(l>s*s/v){if(p>l){var u=e.charge/l;t.px-=o*u,t.py-=a*u}return!0}if(e.point&&l&&p>l){var u=e.pointCharge/l;t.px-=o*u,t.py-=a*u}}return!e.charge}}function e(t){t.px=na.event.x,t.py=na.event.y,s.resume()}var n,r,i,o,a,s={},l=na.dispatch("start","tick","end"),u=[1,1],c=.9,f=hl,h=dl,d=-30,p=pl,g=.1,v=.64,m=[],b=[];return s.tick=function(){if((r*=.99)<.005)return l.end({type:"end",alpha:r=0}),!0;var e,n,s,f,h,p,v,y,x,_=m.length,w=b.length;for(n=0;w>n;++n)s=b[n],f=s.source,h=s.target,y=h.x-f.x,x=h.y-f.y,(p=y*y+x*x)&&(p=r*o[n]*((p=Math.sqrt(p))-i[n])/p,y*=p,x*=p,h.x-=y*(v=f.weight/(h.weight+f.weight)),h.y-=x*v,f.x+=y*(v=1-v),f.y+=x*v);if((v=r*g)&&(y=u[0]/2,x=u[1]/2,n=-1,v))for(;++n<_;)s=m[n],s.x+=(y-s.x)*v,s.y+=(x-s.y)*v;if(d)for(Zr(e=na.geom.quadtree(m),r,a),n=-1;++n<_;)(s=m[n]).fixed||e.visit(t(s));for(n=-1;++n<_;)s=m[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);l.tick({type:"tick",alpha:r})},s.nodes=function(t){return arguments.length?(m=t,s):m},s.links=function(t){return arguments.length?(b=t,s):b},s.size=function(t){return arguments.length?(u=t,s):u},s.linkDistance=function(t){return arguments.length?(f="function"==typeof t?t:+t,s):f},s.distance=s.linkDistance,s.linkStrength=function(t){return arguments.length?(h="function"==typeof t?t:+t,s):h},s.friction=function(t){return arguments.length?(c=+t,s):c},s.charge=function(t){return arguments.length?(d="function"==typeof t?t:+t,s):d},s.chargeDistance=function(t){return arguments.length?(p=t*t,s):Math.sqrt(p)},s.gravity=function(t){return arguments.length?(g=+t,s):g},s.theta=function(t){return arguments.length?(v=t*t,s):Math.sqrt(v)},s.alpha=function(t){return arguments.length?(t=+t,r?r=t>0?t:0:t>0&&(l.start({type:"start",alpha:r=t}),na.timer(s.tick)),s):r},s.start=function(){function t(t,r){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;c>s;++s){var i=b[s];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var o,a=n[e],s=-1,u=a.length;++s<u;)if(!isNaN(o=a[s][t]))return o;return Math.random()*r}var e,n,r,l=m.length,c=b.length,p=u[0],g=u[1];for(e=0;l>e;++e)(r=m[e]).index=e,r.weight=0;for(e=0;c>e;++e)r=b[e],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(e=0;l>e;++e)r=m[e],isNaN(r.x)&&(r.x=t("x",p)),isNaN(r.y)&&(r.y=t("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof f)for(e=0;c>e;++e)i[e]=+f.call(this,b[e],e);else for(e=0;c>e;++e)i[e]=f;if(o=[],"function"==typeof h)for(e=0;c>e;++e)o[e]=+h.call(this,b[e],e);else for(e=0;c>e;++e)o[e]=h;if(a=[],"function"==typeof d)for(e=0;l>e;++e)a[e]=+d.call(this,m[e],e);else for(e=0;l>e;++e)a[e]=d;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=na.behavior.drag().origin(y).on("dragstart.force",Gr).on("drag.force",e).on("dragend.force",Yr)),arguments.length?void this.on("mouseover.force",Xr).on("mouseout.force",Jr).call(n):n},na.rebind(s,l,"on")};var hl=20,dl=1,pl=1/0;na.layout.hierarchy=function(){function t(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(t,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=u}else r&&(o.value=+r.call(t,o,o.depth)||0),delete o.children;return ti(i,function(t){var n,i;e&&(n=t.children)&&n.sort(e),r&&(i=t.parent)&&(i.value+=t.value)}),s}var e=ri,n=ei,r=ni;return t.sort=function(n){return arguments.length?(e=n,t):e},t.children=function(e){return arguments.length?(n=e,t):n},t.value=function(e){return arguments.length?(r=e,t):r},t.revalue=function(e){return r&&(Qr(e,function(t){t.children&&(t.value=0)}),ti(e,function(e){var n;e.children||(e.value=+r.call(t,e,e.depth)||0),(n=e.parent)&&(n.value+=e.value)})),e},t},na.layout.partition=function(){function t(e,n,r,i){var o=e.children;if(e.x=n,e.y=e.depth*i,e.dx=r,e.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=e.value?r/e.value:0;++u<a;)t(s=o[u],n,l=s.value*r,i),n+=l}}function e(t){var n=t.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,e(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return t(a[0],0,i[0],i[1]/e(a[0])),a}var r=na.layout.hierarchy(),i=[1,1];return n.size=function(t){return arguments.length?(i=t,n):i},Kr(n,r)},na.layout.pie=function(){function t(a){var s,l=a.length,u=a.map(function(n,r){return+e.call(t,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof i?i.apply(this,arguments):i)-c,h=Math.min(Math.abs(f)/l,+("function"==typeof o?o.apply(this,arguments):o)),d=h*(0>f?-1:1),p=(f-l*d)/na.sum(u),g=na.range(l),v=[];return null!=n&&g.sort(n===gl?function(t,e){return u[e]-u[t]}:function(t,e){return n(a[t],a[e])}),g.forEach(function(t){v[t]={data:a[t],value:s=u[t],startAngle:c,endAngle:c+=s*p+d,padAngle:h}}),v}var e=Number,n=gl,r=0,i=La,o=0;return t.value=function(n){return arguments.length?(e=n,t):e},t.sort=function(e){return arguments.length?(n=e,t):n},t.startAngle=function(e){return arguments.length?(r=e,t):r},t.endAngle=function(e){return arguments.length?(i=e,t):i},t.padAngle=function(e){return arguments.length?(o=e,t):o},t};var gl={};na.layout.stack=function(){function t(s,l){if(!(h=s.length))return s;var u=s.map(function(n,r){return e.call(t,n,r)}),c=u.map(function(e){return e.map(function(e,n){return[o.call(t,e,n),a.call(t,e,n)]})}),f=n.call(t,c,l);u=na.permute(u,f),c=na.permute(c,f);var h,d,p,g,v=r.call(t,c,l),m=u[0].length;for(p=0;m>p;++p)for(i.call(t,u[0][p],g=v[p],c[0][p][1]),d=1;h>d;++d)i.call(t,u[d][p],g+=c[d-1][p][1],c[d][p][1]);return s}var e=y,n=li,r=ui,i=si,o=oi,a=ai;return t.values=function(n){return arguments.length?(e=n,t):e},t.order=function(e){return arguments.length?(n="function"==typeof e?e:vl.get(e)||li,t):n},t.offset=function(e){return arguments.length?(r="function"==typeof e?e:ml.get(e)||ui,t):r},t.x=function(e){return arguments.length?(o=e,t):o},t.y=function(e){return arguments.length?(a=e,t):a},t.out=function(e){return arguments.length?(i=e,t):i},t};var vl=na.map({"inside-out":function(t){var e,n,r=t.length,i=t.map(ci),o=t.map(fi),a=na.range(r).sort(function(t,e){return i[t]-i[e]}),s=0,l=0,u=[],c=[];for(e=0;r>e;++e)n=a[e],l>s?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(t){return na.range(t.length).reverse()},"default":li}),ml=na.map({silhouette:function(t){var e,n,r,i=t.length,o=t[0].length,a=[],s=0,l=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];r>s&&(s=r),a.push(r)}for(n=0;o>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(t){var e,n,r,i,o,a,s,l,u,c=t.length,f=t[0],h=f.length,d=[];for(d[0]=l=u=0,n=1;h>n;++n){for(e=0,i=0;c>e;++e)i+=t[e][n][1];for(e=0,o=0,s=f[n][0]-f[n-1][0];c>e;++e){for(r=0,a=(t[e][n][1]-t[e][n-1][1])/(2*s);e>r;++r)a+=(t[r][n][1]-t[r][n-1][1])/s;o+=a*t[e][n][1]}d[n]=l-=i?o/i*s:0,u>l&&(u=l)}for(n=0;h>n;++n)d[n]-=u;return d},expand:function(t){var e,n,r,i=t.length,o=t[0].length,a=1/i,s=[];for(n=0;o>n;++n){for(e=0,r=0;i>e;e++)r+=t[e][n][1];if(r)for(e=0;i>e;e++)t[e][n][1]/=r;else for(e=0;i>e;e++)t[e][n][1]=a}for(n=0;o>n;++n)s[n]=0;return s},zero:ui});na.layout.histogram=function(){function t(t,o){for(var a,s,l=[],u=t.map(n,this),c=r.call(this,u,o),f=i.call(this,c,u,o),o=-1,h=u.length,d=f.length-1,p=e?1:1/h;++o<d;)a=l[o]=[],a.dx=f[o+1]-(a.x=f[o]),a.y=0;if(d>0)for(o=-1;++o<h;)s=u[o],s>=c[0]&&s<=c[1]&&(a=l[na.bisect(f,s,1,d)-1],a.y+=p,a.push(t[o]));return l}var e=!0,n=Number,r=gi,i=di;return t.value=function(e){return arguments.length?(n=e,t):n},t.range=function(e){return arguments.length?(r=kt(e),t):r},t.bins=function(e){return arguments.length?(i="number"==typeof e?function(t){return pi(t,e)}:kt(e),t):i},t.frequency=function(n){return arguments.length?(e=!!n,t):e},t},na.layout.pack=function(){function t(t,o){var a=n.call(this,t,o),s=a[0],l=i[0],u=i[1],c=null==e?Math.sqrt:"function"==typeof e?e:function(){return e};if(s.x=s.y=0,ti(s,function(t){t.r=+c(t.value)}),ti(s,xi),r){var f=r*(e?1:Math.max(2*s.r/l,2*s.r/u))/2;ti(s,function(t){t.r+=f}),ti(s,xi),ti(s,function(t){t.r-=f})}return Si(s,l/2,u/2,e?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var e,n=na.layout.hierarchy().sort(vi),r=0,i=[1,1];return t.size=function(e){return arguments.length?(i=e,t):i},t.radius=function(n){return arguments.length?(e=null==n||"function"==typeof n?n:+n,t):e},t.padding=function(e){return arguments.length?(r=+e,t):r},Kr(t,n)},na.layout.tree=function(){function t(t,i){var c=a.call(this,t,i),f=c[0],h=e(f);if(ti(h,n),h.parent.m=-h.z,Qr(h,r),u)Qr(f,o);else{var d=f,p=f,g=f;Qr(f,function(t){t.x<d.x&&(d=t),t.x>p.x&&(p=t),t.depth>g.depth&&(g=t)});var v=s(d,p)/2-d.x,m=l[0]/(p.x+s(p,d)/2+v),y=l[1]/(g.depth||1);Qr(f,function(t){t.x=(t.x+v)*m,t.y=t.depth*y})}return c}function e(t){for(var e,n={A:null,children:[t]},r=[n];null!=(e=r.pop());)for(var i,o=e.children,a=0,s=o.length;s>a;++a)r.push((o[a]=i={_:o[a],parent:e,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(t){var e=t.children,n=t.parent.children,r=t.i?n[t.i-1]:null;if(e.length){Ei(t);var o=(e[0].z+e[e.length-1].z)/2;r?(t.z=r.z+s(t._,r._),t.m=t.z-o):t.z=o}else r&&(t.z=r.z+s(t._,r._));t.parent.A=i(t,r,t.parent.A||n[0])}function r(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function i(t,e,n){if(e){for(var r,i=t,o=t,a=e,l=i.parent.children[0],u=i.m,c=o.m,f=a.m,h=l.m;a=Ai(a),i=ki(i),a&&i;)l=ki(l),o=Ai(o),o.a=t,r=a.z+f-i.z-u+s(a._,i._),r>0&&(Di(Mi(a,t,n),t,r),u+=r,c+=r),f+=a.m,u+=i.m,h+=l.m,c+=o.m;a&&!Ai(o)&&(o.t=a,o.m+=f-c),i&&!ki(l)&&(l.t=i,l.m+=u-h,n=t)}return n}function o(t){t.x*=l[0],t.y=t.depth*l[1]}var a=na.layout.hierarchy().sort(null).value(null),s=Ci,l=[1,1],u=null;return t.separation=function(e){return arguments.length?(s=e,t):s},t.size=function(e){return arguments.length?(u=null==(l=e)?o:null,t):u?null:l},t.nodeSize=function(e){return arguments.length?(u=null==(l=e)?null:o,t):u?l:null},Kr(t,a)},na.layout.cluster=function(){function t(t,o){var a,s=e.call(this,t,o),l=s[0],u=0;ti(l,function(t){var e=t.children;e&&e.length?(t.x=Ni(e),t.y=ji(e)):(t.x=a?u+=n(t,a):0,t.y=0,a=t)});var c=Li(l),f=Ri(l),h=c.x-n(c,f)/2,d=f.x+n(f,c)/2;return ti(l,i?function(t){t.x=(t.x-l.x)*r[0],t.y=(l.y-t.y)*r[1]}:function(t){t.x=(t.x-h)/(d-h)*r[0],t.y=(1-(l.y?t.y/l.y:1))*r[1]}),s}var e=na.layout.hierarchy().sort(null).value(null),n=Ci,r=[1,1],i=!1;return t.separation=function(e){return arguments.length?(n=e,t):n},t.size=function(e){return arguments.length?(i=null==(r=e),t):i?null:r},t.nodeSize=function(e){return arguments.length?(i=null!=(r=e),t):i?r:null},Kr(t,e)},na.layout.treemap=function(){function t(t,e){for(var n,r,i=-1,o=t.length;++i<o;)r=(n=t[i]).value*(0>e?0:e),n.area=isNaN(r)||0>=r?0:r}function e(n){var o=n.children;if(o&&o.length){var a,s,l,u=f(n),c=[],h=o.slice(),p=1/0,g="slice"===d?u.dx:"dice"===d?u.dy:"slice-dice"===d?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(t(h,u.dx*u.dy/n.value),c.area=0;(l=h.length)>0;)c.push(a=h[l-1]),c.area+=a.area,"squarify"!==d||(s=r(c,g))<=p?(h.pop(),p=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),o.forEach(e)}}function n(e){var r=e.children;if(r&&r.length){var o,a=f(e),s=r.slice(),l=[];for(t(s,a.dx*a.dy/e.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(t,e){for(var n,r=t.area,i=0,o=1/0,a=-1,s=t.length;++a<s;)(n=t[a].area)&&(o>n&&(o=n),n>i&&(i=n));return r*=r,e*=e,r?Math.max(e*i*p/r,r/(e*o*p)):1/0}function i(t,e,n,r){var i,o=-1,a=t.length,s=n.x,u=n.y,c=e?l(t.area/e):0;if(e==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)i=t[o],i.x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)i=t[o],i.x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=0,o.y=0,o.dx=u[0],o.dy=u[1],a&&s.revalue(o),t([o],o.dx*o.dy/o.value),(a?n:e)(o),h&&(a=i),i}var a,s=na.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=Ii,h=!1,d="squarify",p=.5*(1+Math.sqrt(5));return o.size=function(t){return arguments.length?(u=t,o):u},o.padding=function(t){function e(e){var n=t.call(o,e,e.depth);return null==n?Ii(e):Oi(e,"number"==typeof n?[n,n,n,n]:n)}function n(e){return Oi(e,t)}if(!arguments.length)return c;var r;return f=null==(c=t)?Ii:"function"==(r=typeof t)?e:"number"===r?(t=[t,t,t,t],n):n,o},o.round=function(t){return arguments.length?(l=t?Math.round:Number,o):l!=Number},o.sticky=function(t){return arguments.length?(h=t,a=null,o):h},o.ratio=function(t){return arguments.length?(p=t,o):p},o.mode=function(t){return arguments.length?(d=t+"",o):d},Kr(o,s)},na.random={normal:function(t,e){var n=arguments.length;return 2>n&&(e=1),1>n&&(t=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return t+e*n*Math.sqrt(-2*Math.log(i)/i);
}},logNormal:function(){var t=na.random.normal.apply(na,arguments);return function(){return Math.exp(t())}},bates:function(t){var e=na.random.irwinHall(t);return function(){return e()/t}},irwinHall:function(t){return function(){for(var e=0,n=0;t>n;n++)e+=Math.random();return e}}},na.scale={};var yl={floor:y,ceil:y};na.scale.linear=function(){return $i([0,1],[0,1],yr,!1)};var bl={s:1,g:1,p:1,r:1,e:1};na.scale.log=function(){return Zi(na.scale.linear().domain([0,1]),10,!0,[1,10])};var xl=na.format(".0e"),_l={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};na.scale.pow=function(){return Ki(na.scale.linear(),1,[0,1])},na.scale.sqrt=function(){return na.scale.pow().exponent(.5)},na.scale.ordinal=function(){return to([],{t:"range",a:[[]]})},na.scale.category10=function(){return na.scale.ordinal().range(wl)},na.scale.category20=function(){return na.scale.ordinal().range(Sl)},na.scale.category20b=function(){return na.scale.ordinal().range(Tl)},na.scale.category20c=function(){return na.scale.ordinal().range(Cl)};var wl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(bt),Sl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(bt),Tl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(bt),Cl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(bt);na.scale.quantile=function(){return eo([],[])},na.scale.quantize=function(){return no(0,1,[0,1])},na.scale.threshold=function(){return ro([.5],[0,1])},na.scale.identity=function(){return io([0,1])},na.svg={},na.svg.arc=function(){function t(){var t=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Ia,f=s.apply(this,arguments)-Ia,h=Math.abs(f-c),d=c>f?0:1;if(t>u&&(p=u,u=t,t=p),h>=Ra)return e(u,d)+(t?e(t,1-d):"")+"Z";var p,g,v,m,y,b,x,_,w,S,T,C,k=0,A=0,D=[];if((m=(+l.apply(this,arguments)||0)/2)&&(v=o===kl?Math.sqrt(t*t+u*u):+o.apply(this,arguments),d||(A*=-1),u&&(A=et(v/u*Math.sin(m))),t&&(k=et(v/t*Math.sin(m)))),u){y=u*Math.cos(c+A),b=u*Math.sin(c+A),x=u*Math.cos(f-A),_=u*Math.sin(f-A);var E=Math.abs(f-c-2*A)<=Na?0:1;if(A&&fo(y,b,x,_)===d^E){var M=(c+f)/2;y=u*Math.cos(M),b=u*Math.sin(M),x=_=null}}else y=b=0;if(t){w=t*Math.cos(f-k),S=t*Math.sin(f-k),T=t*Math.cos(c+k),C=t*Math.sin(c+k);var j=Math.abs(c-f+2*k)<=Na?0:1;if(k&&fo(w,S,T,C)===1-d^j){var N=(c+f)/2;w=t*Math.cos(N),S=t*Math.sin(N),T=C=null}}else w=S=0;if((p=Math.min(Math.abs(u-t)/2,+i.apply(this,arguments)))>.001){g=u>t^d?0:1;var L=null==T?[w,S]:null==x?[y,b]:Ln([y,b],[T,C],[x,_],[w,S]),R=y-L[0],I=b-L[1],O=x-L[0],F=_-L[1],z=1/Math.sin(Math.acos((R*O+I*F)/(Math.sqrt(R*R+I*I)*Math.sqrt(O*O+F*F)))/2),P=Math.sqrt(L[0]*L[0]+L[1]*L[1]);if(null!=x){var q=Math.min(p,(u-P)/(z+1)),H=ho(null==T?[w,S]:[T,C],[y,b],u,q,d),B=ho([x,_],[w,S],u,q,d);p===q?D.push("M",H[0],"A",q,",",q," 0 0,",g," ",H[1],"A",u,",",u," 0 ",1-d^fo(H[1][0],H[1][1],B[1][0],B[1][1]),",",d," ",B[1],"A",q,",",q," 0 0,",g," ",B[0]):D.push("M",H[0],"A",q,",",q," 0 1,",g," ",B[0])}else D.push("M",y,",",b);if(null!=T){var $=Math.min(p,(t-P)/(z-1)),W=ho([y,b],[T,C],t,-$,d),U=ho([w,S],null==x?[y,b]:[x,_],t,-$,d);p===$?D.push("L",U[0],"A",$,",",$," 0 0,",g," ",U[1],"A",t,",",t," 0 ",d^fo(U[1][0],U[1][1],W[1][0],W[1][1]),",",1-d," ",W[1],"A",$,",",$," 0 0,",g," ",W[0]):D.push("L",U[0],"A",$,",",$," 0 0,",g," ",W[0])}else D.push("L",w,",",S)}else D.push("M",y,",",b),null!=x&&D.push("A",u,",",u," 0 ",E,",",d," ",x,",",_),D.push("L",w,",",S),null!=T&&D.push("A",t,",",t," 0 ",j,",",1-d," ",T,",",C);return D.push("Z"),D.join("")}function e(t,e){return"M0,"+t+"A"+t+","+t+" 0 1,"+e+" 0,"+-t+"A"+t+","+t+" 0 1,"+e+" 0,"+t}var n=ao,r=so,i=oo,o=kl,a=lo,s=uo,l=co;return t.innerRadius=function(e){return arguments.length?(n=kt(e),t):n},t.outerRadius=function(e){return arguments.length?(r=kt(e),t):r},t.cornerRadius=function(e){return arguments.length?(i=kt(e),t):i},t.padRadius=function(e){return arguments.length?(o=e==kl?kl:kt(e),t):o},t.startAngle=function(e){return arguments.length?(a=kt(e),t):a},t.endAngle=function(e){return arguments.length?(s=kt(e),t):s},t.padAngle=function(e){return arguments.length?(l=kt(e),t):l},t.centroid=function(){var t=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,e=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Ia;return[Math.cos(e)*t,Math.sin(e)*t]},t};var kl="auto";na.svg.line=function(){return po(y)};var Al=na.map({linear:go,"linear-closed":vo,step:mo,"step-before":yo,"step-after":bo,basis:Co,"basis-open":ko,"basis-closed":Ao,bundle:Do,cardinal:wo,"cardinal-open":xo,"cardinal-closed":_o,monotone:Ro});Al.forEach(function(t,e){e.key=t,e.closed=/-closed$/.test(t)});var Dl=[0,2/3,1/3,0],El=[0,1/3,2/3,0],Ml=[0,1/6,2/3,1/6];na.svg.line.radial=function(){var t=po(Io);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},yo.reverse=bo,bo.reverse=yo,na.svg.area=function(){return Oo(y)},na.svg.area.radial=function(){var t=Oo(Io);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},na.svg.chord=function(){function t(t,s){var l=e(this,o,t,s),u=e(this,a,t,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function e(t,e,n,r){var i=e.call(t,n,r),o=s.call(t,i,r),a=l.call(t,i,r)-Ia,c=u.call(t,i,r)-Ia;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(t,e){return t.a0==e.a0&&t.a1==e.a1}function r(t,e,n){return"A"+t+","+t+" 0 "+ +(n>Na)+",1 "+e}function i(t,e,n,r){return"Q 0,0 "+r}var o=yn,a=bn,s=Fo,l=lo,u=uo;return t.radius=function(e){return arguments.length?(s=kt(e),t):s},t.source=function(e){return arguments.length?(o=kt(e),t):o},t.target=function(e){return arguments.length?(a=kt(e),t):a},t.startAngle=function(e){return arguments.length?(l=kt(e),t):l},t.endAngle=function(e){return arguments.length?(u=kt(e),t):u},t},na.svg.diagonal=function(){function t(t,i){var o=e.call(this,t,i),a=n.call(this,t,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var e=yn,n=bn,r=zo;return t.source=function(n){return arguments.length?(e=kt(n),t):e},t.target=function(e){return arguments.length?(n=kt(e),t):n},t.projection=function(e){return arguments.length?(r=e,t):r},t},na.svg.diagonal.radial=function(){var t=na.svg.diagonal(),e=zo,n=t.projection;return t.projection=function(t){return arguments.length?n(Po(e=t)):e},t},na.svg.symbol=function(){function t(t,r){return(jl.get(e.call(this,t,r))||Bo)(n.call(this,t,r))}var e=Ho,n=qo;return t.type=function(n){return arguments.length?(e=kt(n),t):e},t.size=function(e){return arguments.length?(n=kt(e),t):n},t};var jl=na.map({circle:Bo,cross:function(t){var e=Math.sqrt(t/5)/2;return"M"+-3*e+","+-e+"H"+-e+"V"+-3*e+"H"+e+"V"+-e+"H"+3*e+"V"+e+"H"+e+"V"+3*e+"H"+-e+"V"+e+"H"+-3*e+"Z"},diamond:function(t){var e=Math.sqrt(t/(2*Ll)),n=e*Ll;return"M0,"+-e+"L"+n+",0 0,"+e+" "+-n+",0Z"},square:function(t){var e=Math.sqrt(t)/2;return"M"+-e+","+-e+"L"+e+","+-e+" "+e+","+e+" "+-e+","+e+"Z"},"triangle-down":function(t){var e=Math.sqrt(t/Nl),n=e*Nl/2;return"M0,"+n+"L"+e+","+-n+" "+-e+","+-n+"Z"},"triangle-up":function(t){var e=Math.sqrt(t/Nl),n=e*Nl/2;return"M0,"+-n+"L"+e+","+n+" "+-e+","+n+"Z"}});na.svg.symbolTypes=jl.keys();var Nl=Math.sqrt(3),Ll=Math.tan(30*Oa);Sa.transition=function(t){for(var e,n,r=Rl||++zl,i=Go(t),o=[],a=Il||{time:Date.now(),ease:Cr,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&Yo(n,c,i,r,a),e.push(n)}return Wo(o,i,r)},Sa.interrupt=function(t){return this.each(null==t?Ol:$o(Go(t)))};var Rl,Il,Ol=$o(Go()),Fl=[],zl=0;Fl.call=Sa.call,Fl.empty=Sa.empty,Fl.node=Sa.node,Fl.size=Sa.size,na.transition=function(t,e){return t&&t.transition?Rl?t.transition(e):t:na.selection().transition(t)},na.transition.prototype=Fl,Fl.select=function(t){var e,n,r,i=this.id,o=this.namespace,a=[];t=D(t);for(var s=-1,l=this.length;++s<l;){a.push(e=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=t.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Yo(n,c,o,i,r[o][i]),e.push(n)):e.push(null)}return Wo(a,o,i)},Fl.selectAll=function(t){var e,n,r,i,o,a=this.id,s=this.namespace,l=[];t=E(t);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],h=-1,d=f.length;++h<d;)if(r=f[h]){o=r[s][a],n=t.call(r,r.__data__,h,u),l.push(e=[]);for(var p=-1,g=n.length;++p<g;)(i=n[p])&&Yo(i,p,s,a,o),e.push(i)}return Wo(l,s,a)},Fl.filter=function(t){var e,n,r,i=[];"function"!=typeof t&&(t=H(t));for(var o=0,a=this.length;a>o;o++){i.push(e=[]);for(var n=this[o],s=0,l=n.length;l>s;s++)(r=n[s])&&t.call(r,r.__data__,s,o)&&e.push(r)}return Wo(i,this.namespace,this.id)},Fl.tween=function(t,e){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(t):$(this,null==e?function(e){e[r][n].tween.remove(t)}:function(i){i[r][n].tween.set(t,e)})},Fl.attr=function(t,e){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(t){return null==t?n:(t+="",function(){var e,n=this.getAttribute(s);return n!==t&&(e=a(n,t),function(t){this.setAttribute(s,e(t))})})}function o(t){return null==t?r:(t+="",function(){var e,n=this.getAttributeNS(s.space,s.local);return n!==t&&(e=a(n,t),function(t){this.setAttributeNS(s.space,s.local,e(t))})})}if(arguments.length<2){for(e in t)this.attr(e,t[e]);return this}var a="transform"==t?Hr:yr,s=na.ns.qualify(t);return Uo(this,"attr."+t,e,s.local?o:i)},Fl.attrTween=function(t,e){function n(t,n){var r=e.call(this,t,n,this.getAttribute(i));return r&&function(t){this.setAttribute(i,r(t))}}function r(t,n){var r=e.call(this,t,n,this.getAttributeNS(i.space,i.local));return r&&function(t){this.setAttributeNS(i.space,i.local,r(t))}}var i=na.ns.qualify(t);return this.tween("attr."+t,i.local?r:n)},Fl.style=function(t,n,r){function i(){this.style.removeProperty(t)}function o(n){return null==n?i:(n+="",function(){var i,o=e(this).getComputedStyle(this,null).getPropertyValue(t);return o!==n&&(i=yr(o,n),function(e){this.style.setProperty(t,i(e),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof t){2>a&&(n="");for(r in t)this.style(r,t[r],n);return this}r=""}return Uo(this,"style."+t,n,o)},Fl.styleTween=function(t,n,r){function i(i,o){var a=n.call(this,i,o,e(this).getComputedStyle(this,null).getPropertyValue(t));return a&&function(e){this.style.setProperty(t,a(e),r)}}return arguments.length<3&&(r=""),this.tween("style."+t,i)},Fl.text=function(t){return Uo(this,"text",t,Vo)},Fl.remove=function(){var t=this.namespace;return this.each("end.transition",function(){var e;this[t].count<2&&(e=this.parentNode)&&e.removeChild(this)})},Fl.ease=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].ease:("function"!=typeof t&&(t=na.ease.apply(na,arguments)),$(this,function(r){r[n][e].ease=t}))},Fl.delay=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].delay:$(this,"function"==typeof t?function(r,i,o){r[n][e].delay=+t.call(r,r.__data__,i,o)}:(t=+t,function(r){r[n][e].delay=t}))},Fl.duration=function(t){var e=this.id,n=this.namespace;return arguments.length<1?this.node()[n][e].duration:$(this,"function"==typeof t?function(r,i,o){r[n][e].duration=Math.max(1,t.call(r,r.__data__,i,o))}:(t=Math.max(1,t),function(r){r[n][e].duration=t}))},Fl.each=function(t,e){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Il,o=Rl;try{Rl=n,$(this,function(e,i,o){Il=e[r][n],t.call(e,e.__data__,i,o)})}finally{Il=i,Rl=o}}else $(this,function(i){var o=i[r][n];(o.event||(o.event=na.dispatch("start","end","interrupt"))).on(t,e)});return this},Fl.transition=function(){for(var t,e,n,r,i=this.id,o=++zl,a=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(t=[]);for(var e=this[l],c=0,f=e.length;f>c;c++)(n=e[c])&&(r=n[a][i],Yo(n,c,a,o,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),t.push(n)}return Wo(s,a,o)},na.svg.axis=function(){function t(t){t.each(function(){var t,u=na.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),h=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,d=null==e?f.tickFormat?f.tickFormat.apply(f,s):y:e,p=u.selectAll(".tick").data(h,f),g=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ma),v=na.transition(p.exit()).style("opacity",Ma).remove(),m=na.transition(p.order()).style("opacity",1),b=Math.max(i,0)+a,x=zi(f),_=u.selectAll(".domain").data([0]),w=(_.enter().append("path").attr("class","domain"),na.transition(_));g.append("line"),g.append("text");var S,T,C,k,A=g.select("line"),D=m.select("line"),E=p.select("text").text(d),M=g.select("text"),j=m.select("text"),N="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(t=Xo,S="x",C="y",T="x2",k="y2",E.attr("dy",0>N?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+x[0]+","+N*o+"V0H"+x[1]+"V"+N*o)):(t=Jo,S="y",C="x",T="y2",k="x2",E.attr("dy",".32em").style("text-anchor",0>N?"end":"start"),w.attr("d","M"+N*o+","+x[0]+"H0V"+x[1]+"H"+N*o)),A.attr(k,N*i),M.attr(C,N*b),D.attr(T,0).attr(k,N*i),j.attr(S,0).attr(C,N*b),f.rangeBand){var L=f,R=L.rangeBand()/2;c=f=function(t){return L(t)+R}}else c.rangeBand?c=f:v.call(t,f,c);g.call(t,c,f),m.call(t,f,f)})}var e,n=na.scale.linear(),r=Pl,i=6,o=6,a=3,s=[10],l=null;return t.scale=function(e){return arguments.length?(n=e,t):n},t.orient=function(e){return arguments.length?(r=e in ql?e+"":Pl,t):r},t.ticks=function(){return arguments.length?(s=arguments,t):s},t.tickValues=function(e){return arguments.length?(l=e,t):l},t.tickFormat=function(n){return arguments.length?(e=n,t):e},t.tickSize=function(e){var n=arguments.length;return n?(i=+e,o=+arguments[n-1],t):i},t.innerTickSize=function(e){return arguments.length?(i=+e,t):i},t.outerTickSize=function(e){return arguments.length?(o=+e,t):o},t.tickPadding=function(e){return arguments.length?(a=+e,t):a},t.tickSubdivide=function(){return arguments.length&&t},t};var Pl="bottom",ql={top:1,right:1,bottom:1,left:1};na.svg.brush=function(){function t(e){e.each(function(){var e=na.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=e.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),e.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=e.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return Hl[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",t.empty()?"none":null);var l,f=na.transition(e),h=na.transition(a);u&&(l=zi(u),h.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=zi(c),h.attr("y",l[0]).attr("height",l[1]-l[0]),i(f)),n(f)})}function n(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+f[+/e$/.test(t)]+","+h[+/^s/.test(t)]+")"})}function r(t){t.select(".extent").attr("x",f[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function i(t){t.select(".extent").attr("y",h[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function o(){function o(){32==na.event.keyCode&&(E||(b=null,j[0]-=f[1],j[1]-=h[1],E=2),T())}function g(){32==na.event.keyCode&&2==E&&(j[0]+=f[1],j[1]+=h[1],E=0,T())}function v(){var t=na.mouse(_),e=!1;x&&(t[0]+=x[0],t[1]+=x[1]),E||(na.event.altKey?(b||(b=[(f[0]+f[1])/2,(h[0]+h[1])/2]),j[0]=f[+(t[0]<b[0])],j[1]=h[+(t[1]<b[1])]):b=null),A&&m(t,u,0)&&(r(C),e=!0),D&&m(t,c,1)&&(i(C),e=!0),e&&(n(C),S({type:"brush",mode:E?"move":"resize"}))}function m(t,e,n){var r,i,o=zi(e),l=o[0],u=o[1],c=j[n],g=n?h:f,v=g[1]-g[0];return E&&(l-=c,u-=v+c),r=(n?p:d)?Math.max(l,Math.min(u,t[n])):t[n],E?i=(r+=c)+v:(b&&(c=Math.max(l,Math.min(u,2*b[n]-r))),r>c?(i=r,r=c):i=c),g[0]!=r||g[1]!=i?(n?s=null:a=null,g[0]=r,g[1]=i,!0):void 0}function y(){v(),C.style("pointer-events","all").selectAll(".resize").style("display",t.empty()?"none":null),na.select("body").style("cursor",null),N.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),M(),S({type:"brushend"})}var b,x,_=this,w=na.select(na.event.target),S=l.of(_,arguments),C=na.select(_),k=w.datum(),A=!/^(n|s)$/.test(k)&&u,D=!/^(e|w)$/.test(k)&&c,E=w.classed("extent"),M=X(_),j=na.mouse(_),N=na.select(e(_)).on("keydown.brush",o).on("keyup.brush",g);if(na.event.changedTouches?N.on("touchmove.brush",v).on("touchend.brush",y):N.on("mousemove.brush",v).on("mouseup.brush",y),C.interrupt().selectAll("*").interrupt(),E)j[0]=f[0]-j[0],j[1]=h[0]-j[1];else if(k){var L=+/w$/.test(k),R=+/^n/.test(k);x=[f[1-L]-j[0],h[1-R]-j[1]],j[0]=f[L],j[1]=h[R]}else na.event.altKey&&(b=j.slice());C.style("pointer-events","none").selectAll(".resize").style("display",null),na.select("body").style("cursor",w.style("cursor")),S({type:"brushstart"}),v()}var a,s,l=k(t,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],h=[0,0],d=!0,p=!0,g=Bl[0];return t.event=function(t){t.each(function(){var t=l.of(this,arguments),e={x:f,y:h,i:a,j:s},n=this.__chart__||e;this.__chart__=e,Rl?na.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,f=n.x,h=n.y,t({type:"brushstart"})}).tween("brush:brush",function(){var n=br(f,e.x),r=br(h,e.y);return a=s=null,function(i){f=e.x=n(i),h=e.y=r(i),t({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=e.i,s=e.j,t({type:"brush",mode:"resize"}),t({type:"brushend"})}):(t({type:"brushstart"}),t({type:"brush",mode:"resize"}),t({type:"brushend"}))})},t.x=function(e){return arguments.length?(u=e,g=Bl[!u<<1|!c],t):u},t.y=function(e){return arguments.length?(c=e,g=Bl[!u<<1|!c],t):c},t.clamp=function(e){return arguments.length?(u&&c?(d=!!e[0],p=!!e[1]):u?d=!!e:c&&(p=!!e),t):u&&c?[d,p]:u?d:c?p:null},t.extent=function(e){var n,r,i,o,l;return arguments.length?(u&&(n=e[0],r=e[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),n>r&&(l=n,n=r,r=l),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(i=e[0],o=e[1],u&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),i>o&&(l=i,i=o,o=l),(i!=h[0]||o!=h[1])&&(h=[i,o])),t):(u&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],u.invert&&(n=u.invert(n),r=u.invert(r)),n>r&&(l=n,n=r,r=l))),c&&(s?(i=s[0],o=s[1]):(i=h[0],o=h[1],c.invert&&(i=c.invert(i),o=c.invert(o)),i>o&&(l=i,i=o,o=l))),u&&c?[[n,i],[r,o]]:u?[n,r]:c&&[i,o])},t.clear=function(){return t.empty()||(f=[0,0],h=[0,0],a=s=null),t},t.empty=function(){return!!u&&f[0]==f[1]||!!c&&h[0]==h[1]},na.rebind(t,l,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Bl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],$l=ls.format=ps.timeFormat,Wl=$l.utc,Ul=Wl("%Y-%m-%dT%H:%M:%S.%LZ");$l.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Zo:Ul,Zo.parse=function(t){var e=new Date(t);return isNaN(e)?null:e},Zo.toString=Ul.toString,ls.second=Pt(function(t){return new us(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(t.getTime()+1e3*Math.floor(e))},function(t){return t.getSeconds()}),ls.seconds=ls.second.range,ls.seconds.utc=ls.second.utc.range,ls.minute=Pt(function(t){return new us(6e4*Math.floor(t/6e4))},function(t,e){t.setTime(t.getTime()+6e4*Math.floor(e))},function(t){return t.getMinutes()}),ls.minutes=ls.minute.range,ls.minutes.utc=ls.minute.utc.range,ls.hour=Pt(function(t){var e=t.getTimezoneOffset()/60;return new us(36e5*(Math.floor(t/36e5-e)+e))},function(t,e){t.setTime(t.getTime()+36e5*Math.floor(e))},function(t){return t.getHours()}),ls.hours=ls.hour.range,ls.hours.utc=ls.hour.utc.range,ls.month=Pt(function(t){return t=ls.day(t),t.setDate(1),t},function(t,e){t.setMonth(t.getMonth()+e)},function(t){return t.getMonth()}),ls.months=ls.month.range,ls.months.utc=ls.month.utc.range;var Vl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Gl=[[ls.second,1],[ls.second,5],[ls.second,15],[ls.second,30],[ls.minute,1],[ls.minute,5],[ls.minute,15],[ls.minute,30],[ls.hour,1],[ls.hour,3],[ls.hour,6],[ls.hour,12],[ls.day,1],[ls.day,2],[ls.week,1],[ls.month,1],[ls.month,3],[ls.year,1]],Yl=$l.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",De]]),Xl={range:function(t,e,n){return na.range(Math.ceil(t/n)*n,+e,n).map(Qo)},floor:y,ceil:y};Gl.year=ls.year,ls.scale=function(){return Ko(na.scale.linear(),Gl,Yl)};var Jl=Gl.map(function(t){return[t[0].utc,t[1]]}),Zl=Wl.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",De]]);Jl.year=ls.year.utc,ls.scale.utc=function(){return Ko(na.scale.linear(),Jl,Zl)},na.text=At(function(t){return t.responseText}),na.json=function(t,e){return Dt(t,"application/json",ta,e)},na.html=function(t,e){return Dt(t,"text/html",ea,e)},na.xml=At(function(t){return t.responseXML}),"function"==typeof define&&define.amd?define(na):"object"==typeof module&&module.exports&&(module.exports=na),this.d3=na}(),!function(t,e){"function"==typeof define&&define.amd?define(["d3"],e):"object"==typeof module&&module.exports?module.exports=function(t){return t.tip=e(t),t.tip}:t.d3.tip=e(t.d3)}(this,function(t){return function(){function e(t){_=p(t),w=_.createSVGPoint(),document.body.appendChild(x)}function n(){return"n"}function r(){return[0,0]}function i(){return" "}function o(){var t=v();return{top:t.n.y-x.offsetHeight,left:t.n.x-x.offsetWidth/2}}function a(){var t=v();return{top:t.s.y,left:t.s.x-x.offsetWidth/2}}function s(){var t=v();return{top:t.e.y-x.offsetHeight/2,left:t.e.x}}function l(){var t=v();return{top:t.w.y-x.offsetHeight/2,left:t.w.x-x.offsetWidth}}function u(){var t=v();return{top:t.nw.y-x.offsetHeight,left:t.nw.x-x.offsetWidth}}function c(){var t=v();return{top:t.ne.y-x.offsetHeight,left:t.ne.x}}function f(){var t=v();return{top:t.sw.y,left:t.sw.x-x.offsetWidth}}function h(){var t=v();return{top:t.se.y,left:t.e.x}}function d(){var e=t.select(document.createElement("div"));return e.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),e.node()}function p(t){return t=t.node(),"svg"===t.tagName.toLowerCase()?t:t.ownerSVGElement}function g(){return null===x&&(x=d(),document.body.appendChild(x)),t.select(x)}function v(){for(var e=S||t.event.target;"undefined"==typeof e.getScreenCTM&&"undefined"===e.parentNode;)e=e.parentNode;var n={},r=e.getScreenCTM(),i=e.getBBox(),o=i.width,a=i.height,s=i.x,l=i.y;return w.x=s,w.y=l,n.nw=w.matrixTransform(r),w.x+=o,n.ne=w.matrixTransform(r),w.y+=a,n.se=w.matrixTransform(r),w.x-=o,n.sw=w.matrixTransform(r),w.y-=a/2,n.w=w.matrixTransform(r),w.x+=o,n.e=w.matrixTransform(r),w.x-=o/2,w.y-=a/2,n.n=w.matrixTransform(r),w.y+=a,n.s=w.matrixTransform(r),n}var m=n,y=r,b=i,x=d(),_=null,w=null,S=null;e.show=function(){var t=Array.prototype.slice.call(arguments);t[t.length-1]instanceof SVGElement&&(S=t.pop());var n,r=b.apply(this,t),i=y.apply(this,t),o=m.apply(this,t),a=g(),s=C.length,l=document.documentElement.scrollTop||document.body.scrollTop,u=document.documentElement.scrollLeft||document.body.scrollLeft;for(a.html(r).style({opacity:1,"pointer-events":"all"});s--;)a.classed(C[s],!1);return n=T.get(o).apply(this),a.classed(o,!0).style({top:n.top+i[0]+l+"px",left:n.left+i[1]+u+"px"}),e},e.hide=function(){var t=g();return t.style({opacity:0,"pointer-events":"none"}),e},e.attr=function(n,r){if(arguments.length<2&&"string"==typeof n)return g().attr(n);var i=Array.prototype.slice.call(arguments);return t.selection.prototype.attr.apply(g(),i),e},e.style=function(n,r){if(arguments.length<2&&"string"==typeof n)return g().style(n);var i=Array.prototype.slice.call(arguments);return t.selection.prototype.style.apply(g(),i),e},e.direction=function(n){return arguments.length?(m=null==n?n:t.functor(n),e):m},e.offset=function(n){return arguments.length?(y=null==n?n:t.functor(n),e):y},e.html=function(n){return arguments.length?(b=null==n?n:t.functor(n),e):b},e.destroy=function(){return x&&(g().remove(),x=null),e};var T=t.map({n:o,s:a,e:s,w:l,nw:u,ne:c,sw:f,se:h}),C=T.keys();return e}}),!function(t){function e(t){return t}function n(t,e){for(var n=0,r=e.length,i=Array(r);r>n;++n)i[n]=t[e[n]];return i}function r(t){function e(e,n,r,i){for(;i>r;){var o=r+i>>>1;t(e[o])<n?r=o+1:i=o}return r}function n(e,n,r,i){for(;i>r;){var o=r+i>>>1;n<t(e[o])?i=o:r=o+1}return r}return n.right=n,n.left=e,n}function i(t){function e(t,e,n){for(var i=n-e,o=(i>>>1)+1;--o>0;)r(t,o,i,e);return t}function n(t,e,n){for(var i,o=n-e;--o>0;)i=t[e],t[e]=t[e+o],t[e+o]=i,r(t,1,o,e);return t}function r(e,n,r,i){for(var o,a=e[--i+n],s=t(a);(o=n<<1)<=r&&(r>o&&t(e[i+o])>t(e[i+o+1])&&o++,!(s<=t(e[i+o])));)e[i+n]=e[i+o],n=o;e[i+n]=a}return e.sort=n,e}function o(t){function e(e,r,i,o){var a,s,l,u,c=Array(o=Math.min(i-r,o));for(s=0;o>s;++s)c[s]=e[r++];if(n(c,0,o),i>r){a=t(c[0]);do(l=t(u=e[r])>a)&&(c[0]=u,a=t(n(c,0,o)[0]));while(++r<i)}return c}var n=i(t);return e}function a(t){function e(e,n,r){for(var i=n+1;r>i;++i){for(var o=i,a=e[i],s=t(a);o>n&&t(e[o-1])>s;--o)e[o]=e[o-1];e[o]=a}return e}return e}function s(t){function e(t,e,i){return(E>i-e?r:n)(t,e,i)}function n(n,r,i){var o,a=0|(i-r)/6,s=r+a,l=i-1-a,u=r+i-1>>1,c=u-a,f=u+a,h=n[s],d=t(h),p=n[c],g=t(p),v=n[u],m=t(v),y=n[f],b=t(y),x=n[l],_=t(x);d>g&&(o=h,h=p,p=o,o=d,d=g,g=o),b>_&&(o=y,y=x,x=o,o=b,b=_,_=o),d>m&&(o=h,h=v,v=o,o=d,d=m,m=o),g>m&&(o=p,p=v,v=o,o=g,g=m,m=o),d>b&&(o=h,h=y,y=o,o=d,d=b,b=o),m>b&&(o=v,v=y,y=o,o=m,m=b,b=o),g>_&&(o=p,p=x,x=o,o=g,g=_,_=o),g>m&&(o=p,p=v,v=o,o=g,g=m,m=o),b>_&&(o=y,y=x,x=o,o=b,b=_,_=o);var w=p,S=g,T=y,C=b;n[s]=h,n[c]=n[r],n[u]=v,n[f]=n[i-1],n[l]=x;var k=r+1,A=i-2,D=C>=S&&S>=C;if(D)for(var E=k;A>=E;++E){var M=n[E],j=t(M);if(S>j)E!==k&&(n[E]=n[k],n[k]=M),++k;else if(j>S)for(;;){var N=t(n[A]);if(!(N>S)){if(S>N){n[E]=n[k],n[k++]=n[A],n[A--]=M;break}n[E]=n[A],n[A--]=M;break}A--}}else for(var E=k;A>=E;E++){var M=n[E],j=t(M);if(S>j)E!==k&&(n[E]=n[k],n[k]=M),++k;else if(j>C)for(;;){var N=t(n[A]);if(!(N>C)){S>N?(n[E]=n[k],n[k++]=n[A],n[A--]=M):(n[E]=n[A],n[A--]=M);break}if(A--,E>A)break}}if(n[r]=n[k-1],n[k-1]=w,n[i-1]=n[A+1],n[A+1]=T,e(n,r,k-1),e(n,A+2,i),D)return n;if(s>k&&A>l){for(var L,N;(L=t(n[k]))<=S&&L>=S;)++k;for(;(N=t(n[A]))<=C&&N>=C;)--A;for(var E=k;A>=E;E++){var M=n[E],j=t(M);if(S>=j&&j>=S)E!==k&&(n[E]=n[k],n[k]=M),k++;else if(C>=j&&j>=C)for(;;){var N=t(n[A]);if(!(C>=N&&N>=C)){S>N?(n[E]=n[k],n[k++]=n[A],n[A--]=M):(n[E]=n[A],n[A--]=M);break}if(A--,E>A)break}}}return e(n,k,A+1)}var r=a(t);return e}function l(t){for(var e=Array(t),n=-1;++n<t;)e[n]=0;return e}function u(t,e){for(var n=t.length;e>n;)t[n++]=0;return t}function c(t,e){if(e>32)throw Error("invalid array width!");return t}function f(t,e){return function(n){var r=n.length;return[t.left(n,e,0,r),t.right(n,e,0,r)]}}function h(t,e){var n=e[0],r=e[1];return function(e){var i=e.length;return[t.left(e,n,0,i),t.left(e,r,0,i)]}}function d(t){return[0,t.length]}function p(){return null}function g(){return 0}function v(t){return t+1}function m(t){return t-1}function y(t){return function(e,n){return e+ +t(n)}}function b(t){return function(e,n){return e-t(n)}}function x(){function t(t){var e=C,n=t.length;return n&&(x=x.concat(t),D=L(D,C+=n),j.forEach(function(r){r(t,e,n)})),c}function r(){for(var t=_(C,C),e=[],n=0,r=0;C>n;++n)D[n]?t[n]=r++:e.push(n);E.forEach(function(t){t(0,[],e)}),N.forEach(function(e){e(t)});for(var i,n=0,r=0;C>n;++n)(i=D[n])&&(n!==r&&(D[r]=i,x[r]=x[n]),++r);for(x.length=r;C>r;)D[--C]=0}function a(t){function r(e,r,i){V=e.map(t),G=K(w(i),0,i),V=n(V,G);var o,a=Q(V),s=a[0],l=a[1];if(Y)for(o=0;i>o;++o)Y(V[o],o)||(D[G[o]+r]|=J);else{for(o=0;s>o;++o)D[G[o]+r]|=J;for(o=l;i>o;++o)D[G[o]+r]|=J}if(!r)return W=V,U=G,nt=s,void(rt=l);var u=W,c=U,f=0,h=0;for(W=Array(C),U=_(C,C),o=0;r>f&&i>h;++o)u[f]<V[h]?(W[o]=u[f],U[o]=c[f++]):(W[o]=V[h],U[o]=G[h++]+r);for(;r>f;++f,++o)W[o]=u[f],U[o]=c[f];for(;i>h;++h,++o)W[o]=V[h],U[o]=G[h]+r;a=Q(W),nt=a[0],rt=a[1]}function a(t,e,n){tt.forEach(function(t){t(V,G,e,n)}),V=G=null}function l(t){for(var e,n=0,r=0;C>n;++n)D[e=U[n]]&&(n!==r&&(W[r]=W[n]),U[r]=t[e],++r);for(W.length=r;C>r;)U[r++]=0;var i=Q(W);nt=i[0],rt=i[1]}function u(t){var e=t[0],n=t[1];if(Y)return Y=null,z(function(t,r){return r>=e&&n>r}),nt=e,rt=n,X;var r,i,o,a=[],s=[];if(nt>e)for(r=e,i=Math.min(nt,n);i>r;++r)D[o=U[r]]^=J,a.push(o);else if(e>nt)for(r=nt,i=Math.min(e,rt);i>r;++r)D[o=U[r]]^=J,s.push(o);if(n>rt)for(r=Math.max(e,rt),i=n;i>r;++r)D[o=U[r]]^=J,a.push(o);else if(rt>n)for(r=Math.max(nt,n),i=rt;i>r;++r)D[o=U[r]]^=J,s.push(o);return nt=e,rt=n,E.forEach(function(t){t(J,a,s)}),X}function c(t){return null==t?O():Array.isArray(t)?I(t):"function"==typeof t?F(t):M(t)}function M(t){return u((Q=f(T,t))(W))}function I(t){return u((Q=h(T,t))(W))}function O(){return u((Q=d)(W))}function F(t){return Q=d,z(Y=t),nt=0,rt=C,X}function z(t){var e,n,r,i=[],o=[];for(e=0;C>e;++e)!(D[n=U[e]]&J)^!!(r=t(W[e],e))&&(r?(D[n]&=Z,i.push(n)):(D[n]|=J,o.push(n)));E.forEach(function(t){t(J,i,o)})}function P(t){for(var e,n=[],r=rt;--r>=nt&&t>0;)D[e=U[r]]||(n.push(x[e]),--t);return n}function q(t){for(var e,n=[],r=nt;rt>r&&t>0;)D[e=U[r]]||(n.push(x[e]),--t),r++;return n}function H(t){function n(e,n,r,i){function o(){++V===$&&(y=R(y,B<<=1),O=R(O,B),$=S(B))}var c,f,h,d,g,v,m=I,y=_(V,$),b=P,w=H,T=V,k=0,A=0;for(X&&(b=w=p),I=Array(V),V=0,O=T>1?L(O,C):_(C,$),T&&(h=(f=m[0]).key);i>A&&!((d=t(e[A]))>=d);)++A;for(;i>A;){for(f&&d>=h?(g=f,v=h,y[k]=V,(f=m[++k])&&(h=f.key)):(g={key:d,value:w()},v=d),I[V]=g;!(d>v||(O[c=n[A]+r]=V,D[c]&Z||(g.value=b(g.value,x[c])),++A>=i));)d=t(e[A]);o()}for(;T>k;)I[y[k]=V]=m[k++],o();if(V>k)for(k=0;r>k;++k)O[k]=y[O[k]];c=E.indexOf(G),V>1?(G=a,Y=l):(!V&&K&&(V=1,I=[{key:null,value:w()}]),1===V?(G=s,Y=u):(G=p,Y=p),O=null),E[c]=G}function r(){if(V>1){for(var t=V,e=I,n=_(t,t),r=0,i=0;C>r;++r)D[r]&&(n[O[i]=O[r]]=1,++i);for(I=[],V=0,r=0;t>r;++r)n[r]&&(n[r]=V++,I.push(e[r]));if(V>1)for(var r=0;i>r;++r)O[r]=n[O[r]];else O=null;E[E.indexOf(G)]=V>1?(Y=l,G=a):1===V?(Y=u,G=s):Y=G=p}else if(1===V){if(K)return;for(var r=0;C>r;++r)if(D[r])return;I=[],V=0,E[E.indexOf(G)]=G=Y=p}}function a(t,e,n){if(t!==J&&!X){var r,i,o,a;for(r=0,o=e.length;o>r;++r)D[i=e[r]]&Z||(a=I[O[i]],a.value=P(a.value,x[i]));for(r=0,o=n.length;o>r;++r)(D[i=n[r]]&Z)===t&&(a=I[O[i]],a.value=q(a.value,x[i]))}}function s(t,e,n){if(t!==J&&!X){var r,i,o,a=I[0];for(r=0,o=e.length;o>r;++r)D[i=e[r]]&Z||(a.value=P(a.value,x[i]));for(r=0,o=n.length;o>r;++r)(D[i=n[r]]&Z)===t&&(a.value=q(a.value,x[i]))}}function l(){var t,e;for(t=0;V>t;++t)I[t].value=H();for(t=0;C>t;++t)D[t]&Z||(e=I[O[t]],e.value=P(e.value,x[t]))}function u(){var t,e=I[0];for(e.value=H(),t=0;C>t;++t)D[t]&Z||(e.value=P(e.value,x[t]))}function c(){return X&&(Y(),X=!1),I}function f(t){var e=F(c(),0,I.length,t);return z.sort(e,0,e.length)}function h(t,e,n){return P=t,q=e,H=n,X=!0,j}function d(){return h(v,m,g)}function w(t){return h(y(t),b(t),g);
}function T(t){function e(e){return t(e.value)}return F=o(e),z=i(e),j}function k(){return T(e)}function A(){return V}function M(){var t=E.indexOf(G);return t>=0&&E.splice(t,1),t=tt.indexOf(n),t>=0&&tt.splice(t,1),t=N.indexOf(r),t>=0&&N.splice(t,1),j}var j={top:f,all:c,reduce:h,reduceCount:d,reduceSum:w,order:T,orderNatural:k,size:A,dispose:M,remove:M};et.push(j);var I,O,F,z,P,q,H,B=8,$=S(B),V=0,G=p,Y=p,X=!0,K=t===p;return arguments.length<1&&(t=e),E.push(G),tt.push(n),N.push(r),n(W,U,0,C),d().orderNatural()}function B(){var t=H(p),e=t.all;return delete t.all,delete t.top,delete t.order,delete t.orderNatural,delete t.size,t.value=function(){return e()[0].value},t}function $(){et.forEach(function(t){t.dispose()});var t=j.indexOf(r);return t>=0&&j.splice(t,1),t=j.indexOf(a),t>=0&&j.splice(t,1),t=N.indexOf(l),t>=0&&N.splice(t,1),k&=Z,O()}var W,U,V,G,Y,X={filter:c,filterExact:M,filterRange:I,filterFunction:F,filterAll:O,top:P,bottom:q,group:H,groupAll:B,dispose:$,remove:$},J=~k&-~k,Z=~J,K=s(function(t){return V[t]}),Q=d,tt=[],et=[],nt=0,rt=0;return j.unshift(r),j.push(a),N.push(l),k|=J,(A>=32?!J:k&-(1<<A))&&(D=R(D,A<<=1)),r(x,0,C),a(x,0,C),X}function l(){function t(t,e){var n;if(!d)for(n=e;C>n;++n)D[n]||(l=u(l,x[n]))}function e(t,e,n){var r,i,o;if(!d){for(r=0,o=e.length;o>r;++r)D[i=e[r]]||(l=u(l,x[i]));for(r=0,o=n.length;o>r;++r)D[i=n[r]]===t&&(l=c(l,x[i]))}}function n(){var t;for(l=f(),t=0;C>t;++t)D[t]||(l=u(l,x[t]))}function r(t,e,n){return u=t,c=e,f=n,d=!0,h}function i(){return r(v,m,g)}function o(t){return r(y(t),b(t),g)}function a(){return d&&(n(),d=!1),l}function s(){var n=E.indexOf(e);return n>=0&&E.splice(n),n=j.indexOf(t),n>=0&&j.splice(n),h}var l,u,c,f,h={reduce:r,reduceCount:i,reduceSum:o,value:a,dispose:s,remove:s},d=!0;return E.push(e),j.push(t),t(x,0,C),i()}function u(){return C}var c={add:t,remove:r,dimension:a,groupAll:l,size:u},x=[],C=0,k=0,A=8,D=M(0),E=[],j=[],N=[];return arguments.length?t(arguments[0]):c}function _(t,e){return(257>e?M:65537>e?j:N)(t)}function w(t){for(var e=_(t,t),n=-1;++n<t;)e[n]=n;return e}function S(t){return 8===t?256:16===t?65536:4294967296}x.version="1.3.12",x.permute=n;var T=x.bisect=r(e);T.by=r;var C=x.heap=i(e);C.by=i;var k=x.heapselect=o(e);k.by=o;var A=x.insertionsort=a(e);A.by=a;var D=x.quicksort=s(e);D.by=s;var E=32,M=l,j=l,N=l,L=u,R=c;"undefined"!=typeof Uint8Array&&(M=function(t){return new Uint8Array(t)},j=function(t){return new Uint16Array(t)},N=function(t){return new Uint32Array(t)},L=function(t,e){if(t.length>=e)return t;var n=new t.constructor(e);return n.set(t),n},R=function(t,e){var n;switch(e){case 16:n=j(t.length);break;case 32:n=N(t.length);break;default:throw Error("invalid array width!")}return n.set(t),n}),t.crossfilter=x}("undefined"!=typeof exports&&exports||this),!function(){function t(t,e){"use strict";var n={version:"2.0.0-beta.27",constants:{CHART_CLASS:"dc-chart",DEBUG_GROUP_CLASS:"debug",STACK_CLASS:"stack",DESELECTED_CLASS:"deselected",SELECTED_CLASS:"selected",NODE_INDEX_NAME:"__index__",GROUP_INDEX_NAME:"__group_index__",DEFAULT_CHART_GROUP:"__default_chart_group__",EVENT_DELAY:40,NEGLIGIBLE_NUMBER:1e-10},_renderlet:null};n.chartRegistry=function(){function t(t){return t||(t=n.constants.DEFAULT_CHART_GROUP),e[t]||(e[t]=[]),t}var e={};return{has:function(t){for(var n in e)if(e[n].indexOf(t)>=0)return!0;return!1},register:function(n,r){r=t(r),e[r].push(n)},deregister:function(n,r){r=t(r);for(var i=0;i<e[r].length;i++)if(e[r][i].anchorName()===n.anchorName()){e[r].splice(i,1);break}},clear:function(t){t?delete e[t]:e={}},list:function(n){return n=t(n),e[n]}}}(),n.registerChart=function(t,e){n.chartRegistry.register(t,e)},n.deregisterChart=function(t,e){n.chartRegistry.deregister(t,e)},n.hasChart=function(t){return n.chartRegistry.has(t)},n.deregisterAllCharts=function(t){n.chartRegistry.clear(t)},n.filterAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].filterAll()},n.refocusAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].focus&&e[r].focus()},n.renderAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].render();null!==n._renderlet&&n._renderlet(t)},n.redrawAll=function(t){for(var e=n.chartRegistry.list(t),r=0;r<e.length;++r)e[r].redraw();null!==n._renderlet&&n._renderlet(t)},n.disableTransitions=!1,n.transition=function(t,e,r,i){if(0>=e||void 0===e||n.disableTransitions)return t;var o=t.transition(i).duration(e);return"function"==typeof r&&r(o),o},n.optionalTransition=function(t,e,r,i){return t?function(t){return n.transition(t,e,r,i)}:function(t){return t}},n.afterTransition=function(t,e){if(t.empty()||!t.duration)e.call(t);else{var n=0;t.each(function(){++n}).each("end",function(){--n||e.call(t)})}},n.units={},n.units.integers=function(t,e){return Math.abs(e-t)},n.units.ordinal=function(t,e,n){return n},n.units.fp={},n.units.fp.precision=function(t){var e=function(t,r){var i=Math.abs((r-t)/e.resolution);return n.utils.isNegligible(i-Math.floor(i))?Math.floor(i):Math.ceil(i)};return e.resolution=t,e},n.round={},n.round.floor=function(t){return Math.floor(t)},n.round.ceil=function(t){return Math.ceil(t)},n.round.round=function(t){return Math.round(t)},n.override=function(t,e,n){var r=t[e];t["_"+e]=r,t[e]=n},n.renderlet=function(t){return arguments.length?(n._renderlet=t,n):n._renderlet},n.instanceOfChart=function(t){return t instanceof Object&&t.__dcFlag__&&!0},n.errors={},n.errors.Exception=function(t){var e=t||"Unexpected internal error";this.message=e,this.toString=function(){return e},this.stack=(new Error).stack},n.errors.Exception.prototype=Object.create(Error.prototype),n.errors.Exception.prototype.constructor=n.errors.Exception,n.errors.InvalidStateException=function(){n.errors.Exception.apply(this,arguments)},n.errors.InvalidStateException.prototype=Object.create(n.errors.Exception.prototype),n.errors.InvalidStateException.prototype.constructor=n.errors.InvalidStateException,n.errors.BadArgumentException=function(){n.errors.Exception.apply(this,arguments)},n.errors.BadArgumentException.prototype=Object.create(n.errors.Exception.prototype),n.errors.BadArgumentException.prototype.constructor=n.errors.BadArgumentException,n.dateFormat=t.time.format("%m/%d/%Y"),n.printers={},n.printers.filters=function(t){for(var e="",r=0;r<t.length;++r)r>0&&(e+=", "),e+=n.printers.filter(t[r]);return e},n.printers.filter=function(t){var e="";return"undefined"!=typeof t&&null!==t&&(t instanceof Array?t.length>=2?e="["+n.utils.printSingleValue(t[0])+" -> "+n.utils.printSingleValue(t[1])+"]":t.length>=1&&(e=n.utils.printSingleValue(t[0])):e=n.utils.printSingleValue(t)),e},n.pluck=function(t,e){return e?function(n,r){return e.call(n,n[t],r)}:function(e){return e[t]}},n.utils={},n.utils.printSingleValue=function(t){var e=""+t;return t instanceof Date?e=n.dateFormat(t):"string"==typeof t?e=t:n.utils.isFloat(t)?e=n.utils.printSingleValue.fformat(t):n.utils.isInteger(t)&&(e=Math.round(t)),e},n.utils.printSingleValue.fformat=t.format(".2f"),n.utils.add=function(t,e){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date){"string"==typeof e&&(e=+e);var n=new Date;return n.setTime(t.getTime()),n.setDate(t.getDate()+e),n}if("string"==typeof e){var r=+e/100;return t>0?t*(1+r):t*(1-r)}return t+e},n.utils.subtract=function(t,e){if("string"==typeof e&&(e=e.replace("%","")),t instanceof Date){"string"==typeof e&&(e=+e);var n=new Date;return n.setTime(t.getTime()),n.setDate(t.getDate()-e),n}if("string"==typeof e){var r=+e/100;return 0>t?t*(1+r):t*(1-r)}return t-e},n.utils.isNumber=function(t){return t===+t},n.utils.isFloat=function(t){return t===+t&&t!==(0|t)},n.utils.isInteger=function(t){return t===+t&&t===(0|t)},n.utils.isNegligible=function(t){return!n.utils.isNumber(t)||t<n.constants.NEGLIGIBLE_NUMBER&&t>-n.constants.NEGLIGIBLE_NUMBER},n.utils.clamp=function(t,e,n){return e>t?e:t>n?n:t};var r=0;return n.utils.uniqueId=function(){return++r},n.utils.nameToId=function(t){return t.toLowerCase().replace(/[\s]/g,"_").replace(/[\.']/g,"")},n.utils.appendOrSelect=function(t,e,n){n=n||e;var r=t.select(e);return r.empty()&&(r=t.append(n)),r},n.utils.safeNumber=function(t){return n.utils.isNumber(+t)?+t:0},n.logger={},n.logger.enableDebugLog=!1,n.logger.warn=function(t){return console&&(console.warn?console.warn(t):console.log&&console.log(t)),n.logger},n.logger.debug=function(t){return n.logger.enableDebugLog&&console&&(console.debug?console.debug(t):console.log&&console.log(t)),n.logger},n.logger.deprecate=function(t,e){function r(){return i||(n.logger.warn(e),i=!0),t.apply(this,arguments)}var i=!1;return r},n.events={current:null},n.events.trigger=function(t,e){return e?(n.events.current=t,void setTimeout(function(){t===n.events.current&&t()},e)):void t()},n.filters={},n.filters.RangedFilter=function(t,e){var n=new Array(t,e);return n.isFiltered=function(t){return t>=this[0]&&t<this[1]},n.filterType="RangedFilter",n},n.filters.TwoDimensionalFilter=function(t){if(null===t)return null;var e=t;return e.isFiltered=function(t){return t.length&&t.length===e.length&&t[0]===e[0]&&t[1]===e[1]},e.filterType="TwoDimensionalFilter",e},n.filters.RangedTwoDimensionalFilter=function(t){if(null===t)return null;var e,n=t;return e=n[0]instanceof Array?[[Math.min(t[0][0],t[1][0]),Math.min(t[0][1],t[1][1])],[Math.max(t[0][0],t[1][0]),Math.max(t[0][1],t[1][1])]]:[[t[0],-(1/0)],[t[1],1/0]],n.isFiltered=function(t){var n,r;if(t instanceof Array){if(2!==t.length)return!1;n=t[0],r=t[1]}else n=t,r=e[0][1];return n>=e[0][0]&&n<e[1][0]&&r>=e[0][1]&&r<e[1][1]},n.filterType="RangedTwoDimensionalFilter",n},n.baseMixin=function(r){function i(){h&&h.attr("width",r.width()).attr("height",r.height())}function o(){return h=r.root().append("svg"),i(),h}function a(t){if(!r[t]||!r[t]())throw new n.errors.InvalidStateException("Mandatory attribute chart."+t+" is missing on chart[#"+r.anchorName()+"]")}function s(){if(r.dimension()&&r.dimension().filter){var t=P(r.dimension(),z);z=t?t:z}}r.__dcFlag__=n.utils.uniqueId();var l,u,c,f,h,d,p,g,v,m,y,b=200,x=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().width;return e&&e>b?e:b},_=x,w=200,S=function(t){var e=t&&t.getBoundingClientRect&&t.getBoundingClientRect().height;return e&&e>w?e:w},T=S,C=n.pluck("key"),k=n.pluck("value"),A=n.pluck("key"),D=n.pluck("key"),E=!1,M=function(t){return r.keyAccessor()(t)+": "+r.valueAccessor()(t)},j=!0,N=!1,L=750,R=n.printers.filters,I=["dimension","group"],O=n.constants.DEFAULT_CHART_GROUP,F=t.dispatch("preRender","postRender","preRedraw","postRedraw","filtered","zoomed","renderlet","pretransition"),z=[],P=function(t,e){return 0===e.length?t.filter(null):1!==e.length||e[0].isFiltered?1===e.length&&"RangedFilter"===e[0].filterType?t.filterRange(e[0]):t.filterFunction(function(t){for(var n=0;n<e.length;n++){var r=e[n];if(r.isFiltered&&r.isFiltered(t))return!0;if(t>=r&&r>=t)return!0}return!1}):t.filterExact(e[0]),e},q=function(t){return t.all()};r.height=function(e){return arguments.length?(T=t.functor(e||S),g=void 0,r):(n.utils.isNumber(g)||(g=T(f.node())),g)},r.width=function(e){return arguments.length?(_=t.functor(e||x),p=void 0,r):(n.utils.isNumber(p)||(p=_(f.node())),p)},r.minWidth=function(t){return arguments.length?(b=t,r):b},r.minHeight=function(t){return arguments.length?(w=t,r):w},r.dimension=function(t){return arguments.length?(l=t,r.expireCache(),r):l},r.data=function(e){return arguments.length?(q=t.functor(e),r.expireCache(),r):q.call(r,u)},r.group=function(t,e){return arguments.length?(u=t,r._groupName=e,r.expireCache(),r):u},r.ordering=function(t){return arguments.length?(D=t,v=e.quicksort.by(D),r.expireCache(),r):D},r._computeOrderedGroups=function(t){var n=t.slice(0);return n.length<=1?n:(v||(v=e.quicksort.by(D)),v(n,0,n.length))},r.filterAll=function(){return r.filter(null)},r.select=function(t){return f.select(t)},r.selectAll=function(t){return f?f.selectAll(t):null},r.anchor=function(e,i){if(!arguments.length)return c;if(n.instanceOfChart(e))c=e.anchor(),f=e.root(),d=!0;else{if(!e)throw new n.errors.BadArgumentException("parent must be defined");c=e.select&&e.classed?e.node():e,f=t.select(c),f.classed(n.constants.CHART_CLASS,!0),n.registerChart(r,i),d=!1}return O=i,r},r.anchorName=function(){var t=r.anchor();return t&&t.id?t.id:t&&t.replace?t.replace("#",""):"dc-chart"+r.chartID()},r.root=function(t){return arguments.length?(f=t,r):f},r.svg=function(t){return arguments.length?(h=t,r):h},r.resetSvg=function(){return r.select("svg").remove(),o()},r.filterPrinter=function(t){return arguments.length?(R=t,r):R},r.controlsUseVisibility=function(t){return arguments.length?(N=t,r):N},r.turnOnControls=function(){if(f){var t=r.controlsUseVisibility()?"visibility":"display";r.selectAll(".reset").style(t,null),r.selectAll(".filter").text(R(r.filters())).style(t,null)}return r},r.turnOffControls=function(){if(f){var t=r.controlsUseVisibility()?"visibility":"display",e=r.controlsUseVisibility()?"hidden":"none";r.selectAll(".reset").style(t,e),r.selectAll(".filter").style(t,e).text(r.filter())}return r},r.transitionDuration=function(t){return arguments.length?(L=t,r):L},r._mandatoryAttributes=function(t){return arguments.length?(I=t,r):I},r.render=function(){g=p=void 0,F.preRender(r),I&&I.forEach(a);var t=r._doRender();return m&&m.render(),r._activateRenderlets("postRender"),t},r._activateRenderlets=function(t){F.pretransition(r),r.transitionDuration()>0&&h?h.transition().duration(r.transitionDuration()).each("end",function(){F.renderlet(r),t&&F[t](r)}):(F.renderlet(r),t&&F[t](r))},r.redraw=function(){i(),F.preRedraw(r);var t=r._doRedraw();return m&&m.render(),r._activateRenderlets("postRedraw"),t},r.commitHandler=function(t){return arguments.length?(y=t,r):y},r.redrawGroup=function(){return y?y(!1,function(t,e){t?console.log(t):n.redrawAll(r.chartGroup())}):n.redrawAll(r.chartGroup()),r},r.renderGroup=function(){return y?y(!1,function(t,e){t?console.log(t):n.renderAll(r.chartGroup())}):n.renderAll(r.chartGroup()),r},r._invokeFilteredListener=function(t){void 0!==t&&F.filtered(r,t)},r._invokeZoomedListener=function(){F.zoomed(r)};var H=function(t,e){return null===e||"undefined"==typeof e?t.length>0:t.some(function(t){return t>=e&&e>=t})};r.hasFilterHandler=function(t){return arguments.length?(H=t,r):H},r.hasFilter=function(t){return H(z,t)};var B=function(t,e){for(var n=0;n<t.length;n++)if(t[n]<=e&&t[n]>=e){t.splice(n,1);break}return t};r.removeFilterHandler=function(t){return arguments.length?(B=t,r):B};var $=function(t,e){return t.push(e),t};r.addFilterHandler=function(t){return arguments.length?($=t,r):$};var W=function(t){return[]};return r.resetFilterHandler=function(t){return arguments.length?(W=t,r):W},r.replaceFilter=function(t){z=[],r.filter(t)},r.filter=function(t){return arguments.length?(t instanceof Array&&t[0]instanceof Array&&!t.isFiltered?t[0].forEach(function(t){r.hasFilter(t)?B(z,t):$(z,t)}):null===t?z=W(z):r.hasFilter(t)?B(z,t):$(z,t),s(),r._invokeFilteredListener(t),null!==f&&r.hasFilter()?r.turnOnControls():r.turnOffControls(),r):z.length>0?z[0]:null},r.filters=function(){return z},r.highlightSelected=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!0),t.select(e).classed(n.constants.DESELECTED_CLASS,!1)},r.fadeDeselected=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!1),t.select(e).classed(n.constants.DESELECTED_CLASS,!0)},r.resetHighlight=function(e){t.select(e).classed(n.constants.SELECTED_CLASS,!1),t.select(e).classed(n.constants.DESELECTED_CLASS,!1)},r.onClick=function(t){var e=r.keyAccessor()(t);n.events.trigger(function(){r.filter(e),r.redrawGroup()})},r.filterHandler=function(t){return arguments.length?(P=t,r):P},r._doRender=function(){return r},r._doRedraw=function(){return r},r.legendables=function(){return[]},r.legendHighlight=function(){},r.legendReset=function(){},r.legendToggle=function(){},r.isLegendableHidden=function(){return!1},r.keyAccessor=function(t){return arguments.length?(C=t,r):C},r.valueAccessor=function(t){return arguments.length?(k=t,r):k},r.label=function(t,e){return arguments.length?(A=t,(void 0===e||e)&&(E=!0),r):A},r.renderLabel=function(t){return arguments.length?(E=t,r):E},r.title=function(t){return arguments.length?(M=t,r):M},r.renderTitle=function(t){return arguments.length?(j=t,r):j},r.renderlet=n.logger.deprecate(function(t){return r.on("renderlet."+n.utils.uniqueId(),t),r},'chart.renderlet has been deprecated.  Please use chart.on("renderlet.<renderletKey>", renderletFunction)'),r.chartGroup=function(t){return arguments.length?(d||n.deregisterChart(r,O),O=t,d||n.registerChart(r,O),r):O},r.expireCache=function(){return r},r.legend=function(t){return arguments.length?(m=t,m.parent(r),r):m},r.chartID=function(){return r.__dcFlag__},r.options=function(t){var e=["anchor","group","xAxisLabel","yAxisLabel","stack","title","point","getColor","overlayGeoJson"];for(var i in t)"function"==typeof r[i]?t[i]instanceof Array&&-1!==e.indexOf(i)?r[i].apply(r,t[i]):r[i].call(r,t[i]):n.logger.debug("Not a valid option setter name: "+i);return r},r.on=function(t,e){return F.on(t,e),r},r},n.marginMixin=function(t){var e={top:10,right:50,bottom:30,left:30};return t.margins=function(n){return arguments.length?(e=n,t):e},t.effectiveWidth=function(){return t.width()-t.margins().left-t.margins().right},t.effectiveHeight=function(){return t.height()-t.margins().top-t.margins().bottom},t},n.colorMixin=function(e){var n=t.scale.category20c(),r=!0,i=function(t){return e.keyAccessor()(t)};return e.colors=function(r){return arguments.length?(n=r instanceof Array?t.scale.quantize().range(r):t.functor(r),e):n},e.ordinalColors=function(n){return e.colors(t.scale.ordinal().range(n))},e.linearColors=function(n){return e.colors(t.scale.linear().range(n).interpolate(t.interpolateHcl))},e.colorAccessor=function(t){return arguments.length?(i=t,r=!1,e):i},e.defaultColorAccessor=function(){return r},e.colorDomain=function(t){return arguments.length?(n.domain(t),e):n.domain()},e.calculateColorDomain=function(){var r=[t.min(e.data(),e.colorAccessor()),t.max(e.data(),e.colorAccessor())];return n.domain(r),e},e.getColor=function(t,e){return n(i.call(this,t,e))},e.colorCalculator=function(t){return arguments.length?(e.getColor=t,e):e.getColor},e},n.coordinateGridMixin=function(e){function r(){G=!0,J&&(e.x().domain(h(e.x().domain(),C)),N&&e.x().domain(h(e.x().domain(),N.x().domain())));var t=e.x().domain(),r=n.filters.RangedFilter(t[0],t[1]);e.replaceFilter(r),e.rescale(),e.redraw(),N&&!d(e.filter(),N.filter())&&n.events.trigger(function(){N.replaceFilter(r),N.redraw()}),e._invokeZoomedListener(),n.events.trigger(function(){e.redrawGroup()},n.constants.EVENT_DELAY),G=!d(t,C)}function i(t,e){return!t||!e||t.length!==e.length||t.some(function(t,n){return t&&e[n]?t.toString()!==e[n].toString():t===e[n]})}function o(t,n){e.isOrdinal()?(e.elasticX()||0===T.domain().length)&&T.domain(e._ordinalXDomain()):e.elasticX()&&T.domain([e.xAxisMin(),e.xAxisMax()]);var r=T.domain();(n||i(A,r))&&e.rescale(),A=r,e.isOrdinal()?T.rangeBands([0,e.xAxisLength()],rt,e._useOuterPadding()?nt:0):T.range([0,e.xAxisLength()]),R=R.scale(e.x()),a(t)}function a(t){var r=t.selectAll("g."+m);if(V){r.empty()&&(r=t.insert("g",":first-child").attr("class",g+" "+m).attr("transform","translate("+e.margins().left+","+e.margins().top+")"));var i=R.tickValues()?R.tickValues():"function"==typeof T.ticks?T.ticks(R.ticks()[0]):T.domain(),o=r.selectAll("line").data(i),a=o.enter().append("line").attr("x1",function(t){return T(t)}).attr("y1",e._xAxisY()-e.margins().top).attr("x2",function(t){return T(t)}).attr("y2",0).attr("opacity",0);n.transition(a,e.transitionDuration()).attr("opacity",1),n.transition(o,e.transitionDuration()).attr("x1",function(t){return T(t)}).attr("y1",e._xAxisY()-e.margins().top).attr("x2",function(t){return T(t)}).attr("y2",0),o.exit().remove()}else r.selectAll("line").remove()}function s(){return e._xAxisY()-e.margins().top}function l(){return e.anchorName().replace(/[ .#=\[\]]/g,"-")+"-clip"}function u(){var t=n.utils.appendOrSelect(_,"defs"),r=l(),i=n.utils.appendOrSelect(t,"#"+r,"clipPath").attr("id",r),o=2*et;n.utils.appendOrSelect(i,"rect").attr("width",e.xAxisLength()+o).attr("height",e.yAxisHeight()+o).attr("transform","translate(-"+et+", -"+et+")")}function c(t){e.isOrdinal()&&(W=!1),o(e.g(),t),e._prepareYAxis(e.g()),e.plotData(),(e.elasticX()||Y||t)&&e.renderXAxis(e.g()),(e.elasticY()||Y||t)&&e.renderYAxis(e.g()),t?e.renderBrush(e.g(),!1):e.redrawBrush(e.g(),Y),e.fadeDeselectedArea(),Y=!1}function f(){tt?e._enableMouseZoom():Q&&e._disableMouseZoom()}function h(e,n){var r=[];return r[0]=t.max([e[0],n[0]]),r[1]=t.min([e[1],n[1]]),r}function d(t,e){return!t&&!e||!(!t||!e)&&(0===t.length&&0===e.length||t[0].valueOf()===e[0].valueOf()&&t[1].valueOf()===e[1].valueOf())}function p(t){return t instanceof Array&&t.length>1}var g="grid-line",v="horizontal",m="vertical",y="y-axis-label",b="x-axis-label",x=12;e=n.colorMixin(n.marginMixin(n.baseMixin(e))),e.colors(t.scale.category10()),e._mandatoryAttributes().push("x");var _,w,S,T,C,k,A,D,E,M,j,N,L,R=t.svg.axis().orient("bottom"),I=n.units.integers,O=0,F=!1,z=0,P=t.svg.axis().orient("left"),q=0,H=!1,B=0,$=t.svg.brush(),W=!0,U=!1,V=!1,G=!1,Y=!1,X=[1,1/0],J=!0,Z=t.behavior.zoom().on("zoom",r),K=t.behavior.zoom().on("zoom",null),Q=!1,tt=!1,et=0,nt=.5,rt=0,it=!1;return e.rescale=function(){return j=void 0,Y=!0,e},e.resizing=function(){return Y},e.rangeChart=function(t){return arguments.length?(N=t,N.focusChart(e),e):N},e.zoomScale=function(t){return arguments.length?(X=t,e):X},e.zoomOutRestrict=function(t){return arguments.length?(X[0]=t?1:0,J=t,e):J},e._generateG=function(t){return _=void 0===t?e.svg():t,w=_.append("g"),S=w.append("g").attr("class","chart-body").attr("transform","translate("+e.margins().left+", "+e.margins().top+")").attr("clip-path","url(#"+l()+")"),w},e.g=function(t){return arguments.length?(w=t,e):w},e.mouseZoomable=function(t){return arguments.length?(tt=t,e):tt},e.chartBodyG=function(t){return arguments.length?(S=t,e):S},e.x=function(t){return arguments.length?(T=t,C=T.domain(),e.rescale(),e):T},e.xOriginalDomain=function(){return C},e.xUnits=function(t){return arguments.length?(I=t,e):I},e.xAxis=function(t){return arguments.length?(R=t,e):R},e.elasticX=function(t){return arguments.length?(F=t,e):F},e.xAxisPadding=function(t){return arguments.length?(O=t,e):O},e.xUnitCount=function(){if(void 0===j){var t=e.xUnits()(e.x().domain()[0],e.x().domain()[1],e.x().domain());j=t instanceof Array?t.length:t}return j},e.useRightYAxis=function(t){return arguments.length?(it=t,e):it},e.isOrdinal=function(){return e.xUnits()===n.units.ordinal},e._useOuterPadding=function(){return!0},e._ordinalXDomain=function(){var t=e._computeOrderedGroups(e.data());return t.map(e.keyAccessor())},e.renderXAxis=function(t){var r=t.selectAll("g.x");r.empty()&&(r=t.append("g").attr("class","axis x").attr("transform","translate("+e.margins().left+","+e._xAxisY()+")"));var i=t.selectAll("text."+b);i.empty()&&e.xAxisLabel()&&(i=t.append("text").attr("class",b).attr("transform","translate("+(e.margins().left+e.xAxisLength()/2)+","+(e.height()-z)+")").attr("text-anchor","middle")),e.xAxisLabel()&&i.text()!==e.xAxisLabel()&&i.text(e.xAxisLabel()),n.transition(r,e.transitionDuration()).attr("transform","translate("+e.margins().left+","+e._xAxisY()+")").call(R),n.transition(i,e.transitionDuration()).attr("transform","translate("+(e.margins().left+e.xAxisLength()/2)+","+(e.height()-z)+")")},e._xAxisY=function(){return e.height()-e.margins().bottom},e.xAxisLength=function(){return e.effectiveWidth()},e.xAxisLabel=function(t,n){return arguments.length?(k=t,e.margins().bottom-=z,z=void 0===n?x:n,e.margins().bottom+=z,e):k},e._prepareYAxis=function(n){if(void 0===D||e.elasticY()){void 0===D&&(D=t.scale.linear());var r=e.yAxisMin()||0,i=e.yAxisMax()||0;D.domain([r,i]).rangeRound([e.yAxisHeight(),0])}D.range([e.yAxisHeight(),0]),P=P.scale(D),it&&P.orient("right"),e._renderHorizontalGridLinesForAxis(n,D,P)},e.renderYAxisLabel=function(t,r,i,o){o=o||B;var a=e.g().selectAll("text."+y+"."+t+"-label"),s=e.margins().top+e.yAxisHeight()/2;a.empty()&&r&&(a=e.g().append("text").attr("transform","translate("+o+","+s+"),rotate("+i+")").attr("class",y+" "+t+"-label").attr("text-anchor","middle").text(r)),r&&a.text()!==r&&a.text(r),n.transition(a,e.transitionDuration()).attr("transform","translate("+o+","+s+"),rotate("+i+")")},e.renderYAxisAt=function(t,r,i){var o=e.g().selectAll("g."+t);o.empty()&&(o=e.g().append("g").attr("class","axis "+t).attr("transform","translate("+i+","+e.margins().top+")")),n.transition(o,e.transitionDuration()).attr("transform","translate("+i+","+e.margins().top+")").call(r)},e.renderYAxis=function(){var t=it?e.width()-e.margins().right:e._yAxisX();e.renderYAxisAt("y",P,t);var n=it?e.width()-B:B,r=it?90:-90;e.renderYAxisLabel("y",e.yAxisLabel(),r,n)},e._renderHorizontalGridLinesForAxis=function(t,r,i){var o=t.selectAll("g."+v);if(U){var a=i.tickValues()?i.tickValues():r.ticks(i.ticks()[0]);o.empty()&&(o=t.insert("g",":first-child").attr("class",g+" "+v).attr("transform","translate("+e.margins().left+","+e.margins().top+")"));var s=o.selectAll("line").data(a),l=s.enter().append("line").attr("x1",1).attr("y1",function(t){return r(t)}).attr("x2",e.xAxisLength()).attr("y2",function(t){return r(t)}).attr("opacity",0);n.transition(l,e.transitionDuration()).attr("opacity",1),n.transition(s,e.transitionDuration()).attr("x1",1).attr("y1",function(t){return r(t)}).attr("x2",e.xAxisLength()).attr("y2",function(t){return r(t)}),s.exit().remove()}else o.selectAll("line").remove()},e._yAxisX=function(){return e.useRightYAxis()?e.width()-e.margins().right:e.margins().left},e.yAxisLabel=function(t,n){return arguments.length?(E=t,e.margins().left-=B,B=void 0===n?x:n,e.margins().left+=B,e):E},e.y=function(t){return arguments.length?(D=t,e.rescale(),e):D},e.yAxis=function(t){return arguments.length?(P=t,e):P},e.elasticY=function(t){return arguments.length?(H=t,e):H},e.renderHorizontalGridLines=function(t){return arguments.length?(U=t,e):U},e.renderVerticalGridLines=function(t){return arguments.length?(V=t,e):V},e.xAxisMin=function(){var r=t.min(e.data(),function(t){return e.keyAccessor()(t)});return n.utils.subtract(r,O)},e.xAxisMax=function(){var r=t.max(e.data(),function(t){return e.keyAccessor()(t)});return n.utils.add(r,O)},e.yAxisMin=function(){var r=t.min(e.data(),function(t){return e.valueAccessor()(t)});return n.utils.subtract(r,q)},e.yAxisMax=function(){var r=t.max(e.data(),function(t){return e.valueAccessor()(t)});return n.utils.add(r,q)},e.yAxisPadding=function(t){return arguments.length?(q=t,e):q},e.yAxisHeight=function(){return e.effectiveHeight()},e.round=function(t){return arguments.length?(M=t,e):M},e._rangeBandPadding=function(t){return arguments.length?(rt=t,e):rt},e._outerRangeBandPadding=function(t){return arguments.length?(nt=t,e):nt},n.override(e,"filter",function(t){return arguments.length?(e._filter(t),t?e.brush().extent(t):e.brush().clear(),e):e._filter()}),e.brush=function(t){return arguments.length?($=t,e):$},e.renderBrush=function(t){if(W){$.on("brush",e._brushing),$.on("brushstart",e._disableMouseZoom),$.on("brushend",f);var n=t.append("g").attr("class","brush").attr("transform","translate("+e.margins().left+","+e.margins().top+")").call($.x(e.x()));e.setBrushY(n,!1),e.setHandlePaths(n),e.hasFilter()&&e.redrawBrush(t,!1)}},e.setHandlePaths=function(t){t.selectAll(".resize").append("path").attr("d",e.resizeHandlePath)},e.setBrushY=function(t){t.selectAll(".brush rect").attr("height",s()),t.selectAll(".resize path").attr("d",e.resizeHandlePath)},e.extendBrush=function(){var t=$.extent();return e.round()&&(t[0]=t.map(e.round())[0],t[1]=t.map(e.round())[1],w.select(".brush").call($.extent(t))),t},e.brushIsEmpty=function(t){return $.empty()||!t||t[1]<=t[0]},e._brushing=function(){var t=e.extendBrush();if(e.redrawBrush(w,!1),e.brushIsEmpty(t))n.events.trigger(function(){e.filter(null),e.redrawGroup()},n.constants.EVENT_DELAY);else{var r=n.filters.RangedFilter(t[0],t[1]);n.events.trigger(function(){e.replaceFilter(r),e.redrawGroup()},n.constants.EVENT_DELAY)}},e.redrawBrush=function(t,r){if(W){e.filter()&&e.brush().empty()&&e.brush().extent(e.filter());var i=n.optionalTransition(r,e.transitionDuration())(t.select("g.brush"));e.setBrushY(i),i.call(e.brush().x(e.x()).extent(e.brush().extent()))}e.fadeDeselectedArea()},e.fadeDeselectedArea=function(){},e.resizeHandlePath=function(t){var e=+("e"===t),n=e?1:-1,r=s()/3;return"M"+.5*n+","+r+"A6,6 0 0 "+e+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+e+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)},e.clipPadding=function(t){return arguments.length?(et=t,e):et},e._preprocessData=function(){},e._doRender=function(){return e.resetSvg(),e._preprocessData(),e._generateG(),u(),c(!0),f(),e},e._doRedraw=function(){return e._preprocessData(),c(!1),u(),e},e._enableMouseZoom=function(){Q=!0,Z.x(e.x()).scaleExtent(X).size([e.width(),e.height()]).duration(e.transitionDuration()),e.root().call(Z)},e._disableMouseZoom=function(){e.root().call(K)},e.focus=function(t){p(t)?e.x().domain(t):e.x().domain(C),Z.x(e.x()),r()},e.refocused=function(){return G},e.focusChart=function(t){return arguments.length?(L=t,e.on("filtered",function(t){t.filter()?d(t.filter(),L.filter())||n.events.trigger(function(){L.focus(t.filter())}):n.events.trigger(function(){L.x().domain(L.xOriginalDomain())})}),e):L},e.brushOn=function(t){return arguments.length?(W=t,e):W},e},n.stackMixin=function(e){function r(t,n){var r=t.accessor||e.valueAccessor();return t.name=String(t.name||n),t.values=t.group.all().map(function(n,i){return{x:e.keyAccessor()(n,i),y:t.hidden?null:r(n,i),data:n,layer:t.name,hidden:t.hidden}}),t.values=t.values.filter(i()),t.values}function i(){if(!e.x())return t.functor(!0);var n=e.x().domain();return e.isOrdinal()?function(){return!0}:e.elasticX()?function(){return!0}:function(t){return t.x>=n[0]&&t.x<=n[n.length-1]}}function o(t){var e=u.map(n.pluck("name")).indexOf(t);return u[e]}function a(){var t=e.data().map(function(t){return t.values});return Array.prototype.concat.apply([],t)}function s(t){return!t.hidden}var l=t.layout.stack().values(r),u=[],c={},f=!1;return e.stack=function(t,n,r){if(!arguments.length)return u;arguments.length<=2&&(r=n);var i={group:t};return"string"==typeof n&&(i.name=n),"function"==typeof r&&(i.accessor=r),u.push(i),e},n.override(e,"group",function(t,n,r){return arguments.length?(u=[],c={},e.stack(t,n),r&&e.valueAccessor(r),e._group(t,n)):e._group()}),e.hidableStacks=function(t){return arguments.length?(f=t,e):f},e.hideStack=function(t){var n=o(t);return n&&(n.hidden=!0),e},e.showStack=function(t){var n=o(t);return n&&(n.hidden=!1),e},e.getValueAccessorByIndex=function(t){return u[t].accessor||e.valueAccessor()},e.yAxisMin=function(){var r=t.min(a(),function(t){return t.y+t.y0<t.y0?t.y+t.y0:t.y0});return n.utils.subtract(r,e.yAxisPadding())},e.yAxisMax=function(){var r=t.max(a(),function(t){return t.y+t.y0});return n.utils.add(r,e.yAxisPadding())},e.xAxisMin=function(){var r=t.min(a(),n.pluck("x"));return n.utils.subtract(r,e.xAxisPadding())},e.xAxisMax=function(){var r=t.max(a(),n.pluck("x"));return n.utils.add(r,e.xAxisPadding())},n.override(e,"title",function(t,n){return t?"function"==typeof t?e._title(t):t===e._groupName&&"function"==typeof n?e._title(n):"function"!=typeof n?c[t]||e._title():(c[t]=n,e):e._title()}),e.stackLayout=function(t){return arguments.length?(l=t,e):l},e.data(function(){var t=u.filter(s);return t.length?e.stackLayout()(t):[]}),e._ordinalXDomain=function(){var t=a().map(n.pluck("data")),r=e._computeOrderedGroups(t);return r.map(e.keyAccessor())},e.colorAccessor(function(t){var e=this.layer||this.name||t.name||t.layer;return e}),e.legendables=function(){return u.map(function(t,n){return{chart:e,name:t.name,hidden:t.hidden||!1,color:e.getColor.call(t,t.values,n)}})},e.isLegendableHidden=function(t){var e=o(t.name);return!!e&&e.hidden},e.legendToggle=function(t){
f&&(e.isLegendableHidden(t)?e.showStack(t.name):e.hideStack(t.name),e.renderGroup())},e},n.capMixin=function(e){var r=1/0,i="Others",o=function(n){var r=t.sum(n,e.valueAccessor()),o=e.group().all(),a=t.sum(o,e.valueAccessor()),s=n.map(e.keyAccessor()),l=o.map(e.keyAccessor()),u=t.set(s),c=l.filter(function(t){return!u.has(t)});return a>r?n.concat([{others:c,key:i,value:a-r}]):n};return e.cappedKeyAccessor=function(t,n){return t.others?t.key:e.keyAccessor()(t,n)},e.cappedValueAccessor=function(t,n){return t.others?t.value:e.valueAccessor()(t,n)},e.data(function(t){if(r===1/0)return e._computeOrderedGroups(t.all());var n=t.top(r);return n=e._computeOrderedGroups(n),o?o(n):n}),e.cap=function(t){return arguments.length?(r=t,e):r},e.othersLabel=function(t){return arguments.length?(i=t,e):i},e.othersGrouper=function(t){return arguments.length?(o=t,e):o},n.override(e,"onClick",function(t){t.others&&e.filter([t.others]),e._onClick(t)}),e},n.bubbleMixin=function(e){var r=.3,i=10;e.BUBBLE_NODE_CLASS="node",e.BUBBLE_CLASS="bubble",e.MIN_RADIUS=10,e=n.colorMixin(e),e.renderLabel(!0),e.data(function(t){return t.top(1/0)});var o=t.scale.linear().domain([0,100]),a=function(t){return t.r};e.r=function(t){return arguments.length?(o=t,e):o},e.radiusValueAccessor=function(t){return arguments.length?(a=t,e):a},e.rMin=function(){var n=t.min(e.data(),function(t){return e.radiusValueAccessor()(t)});return n},e.rMax=function(){var n=t.max(e.data(),function(t){return e.radiusValueAccessor()(t)});return n},e.bubbleR=function(t){var n=e.radiusValueAccessor()(t),r=e.r()(n);return(isNaN(r)||0>=n)&&(r=0),r};var s=function(t){return e.label()(t)},l=function(t){return e.bubbleR(t)>i},u=function(t){return l(t)?1:0},c=function(t){return l(t)?"all":"none"};e._doRenderLabel=function(t){if(e.renderLabel()){var r=t.select("text");r.empty()&&(r=t.append("text").attr("text-anchor","middle").attr("dy",".3em").on("click",e.onClick)),r.attr("opacity",0).attr("pointer-events",c).text(s),n.transition(r,e.transitionDuration()).attr("opacity",u)}},e.doUpdateLabels=function(t){if(e.renderLabel()){var r=t.selectAll("text").attr("pointer-events",c).text(s);n.transition(r,e.transitionDuration()).attr("opacity",u)}};var f=function(t){return e.title()(t)};return e._doRenderTitles=function(t){if(e.renderTitle()){var n=t.select("title");n.empty()&&t.append("title").text(f)}},e.doUpdateTitles=function(t){e.renderTitle()&&t.selectAll("title").text(f)},e.minRadius=function(t){return arguments.length?(e.MIN_RADIUS=t,e):e.MIN_RADIUS},e.minRadiusWithLabel=function(t){return arguments.length?(i=t,e):i},e.maxBubbleRelativeSize=function(t){return arguments.length?(r=t,e):r},e.fadeDeselectedArea=function(){e.hasFilter()?e.selectAll("g."+e.BUBBLE_NODE_CLASS).each(function(t){e.isSelectedNode(t)?e.highlightSelected(this):e.fadeDeselected(this)}):e.selectAll("g."+e.BUBBLE_NODE_CLASS).each(function(){e.resetHighlight(this)})},e.isSelectedNode=function(t){return e.hasFilter(t.key)},e.onClick=function(t){var r=t.key;n.events.trigger(function(){e.filter(r),e.redrawGroup()})},e},n.pieChart=function(e,r){function i(){M=j?j:t.min([W.width(),W.height()])/2;var e,r=y(),i=x();if(t.sum(W.data(),W.valueAccessor())?(e=i(W.data()),N.classed(z,!1)):(e=i([{key:P,value:1,others:[P]}]),N.classed(z,!0)),N){var a=N.selectAll("g."+F).data(e);o(a,r,e),h(e,r),v(a),m(),n.transition(N,W.transitionDuration()).attr("transform","translate("+W.cx()+","+W.cy()+")")}}function o(t,e,n){var r=a(t);s(r,e),l(r),c(n,e)}function a(t){var e=t.enter().append("g").attr("class",function(t,e){return F+" _"+e});return e}function s(t,e){var r=t.append("path").attr("fill",C).on("click",k).attr("d",function(t,n){return A(t,n,e)});n.transition(r,W.transitionDuration(),function(t){t.attrTween("d",S)})}function l(t){W.renderTitle()&&t.append("title").text(function(t){return W.title()(t.data)})}function u(t,e){W._applyLabelText(t),n.transition(t,W.transitionDuration()).attr("transform",function(t){return D(t,e)}).attr("text-anchor","middle")}function c(t,e){if(W.renderLabel()){var n=N.selectAll("text."+F).data(t);n.exit().remove();var r=n.enter().append("text").attr("class",function(t,e){var n=F+" _"+e;return I&&(n+=" external"),n}).on("click",k);u(r,e),I&&$&&f(t,e)}}function f(e,r){var i=N.selectAll("polyline."+F).data(e);i.enter().append("polyline").attr("class",function(t,e){return"pie-path _"+e+" "+F}),i.exit().remove(),n.transition(i,W.transitionDuration()).attrTween("points",function(e){this._current=this._current||e;var n=t.interpolate(this._current,e);return this._current=n(0),function(e){var i=t.svg.arc().outerRadius(M-H+I).innerRadius(M-H),o=n(e);return[r.centroid(o),i.centroid(o)]}}).style("visibility",function(t){return t.endAngle-t.startAngle<1e-4?"hidden":"visible"})}function h(t,e){d(t,e),p(t,e),g(t)}function d(t,e){var r=N.selectAll("g."+F).data(t).select("path").attr("d",function(t,n){return A(t,n,e)});n.transition(r,W.transitionDuration(),function(t){t.attrTween("d",S)}).attr("fill",C)}function p(t,e){if(W.renderLabel()){var n=N.selectAll("text."+F).data(t);u(n,e),I&&$&&f(t,e)}}function g(t){W.renderTitle()&&N.selectAll("g."+F).data(t).select("title").text(function(t){return W.title()(t.data)})}function v(t){t.exit().remove()}function m(){W.hasFilter()?W.selectAll("g."+F).each(function(t){b(t)?W.highlightSelected(this):W.fadeDeselected(this)}):W.selectAll("g."+F).each(function(){W.resetHighlight(this)})}function y(){return t.svg.arc().outerRadius(M-H).innerRadius(q)}function b(t){return W.hasFilter(W.cappedKeyAccessor(t.data))}function x(){return t.layout.pie().sort(null).value(W.cappedValueAccessor)}function _(t){var e=t.endAngle-t.startAngle;return isNaN(e)||B>e}function w(t){return 0===W.cappedValueAccessor(t)}function S(e){e.innerRadius=q;var n=this._current;T(n)&&(n={startAngle:0,endAngle:0});var r=t.interpolate(n,e);return this._current=r(0),function(t){return A(r(t),0,y())}}function T(t){return!t||isNaN(t.startAngle)||isNaN(t.endAngle)}function C(t,e){return W.getColor(t.data,e)}function k(t,e){N.attr("class")!==z&&W.onClick(t.data,e)}function A(t,e,n){var r=n(t,e);return r.indexOf("NaN")>=0&&(r="M0,0"),r}function D(e,n){var r;return r=I?t.svg.arc().outerRadius(M-H+I).innerRadius(M-H+I).centroid(e):n.centroid(e),isNaN(r[0])||isNaN(r[1])?"translate(0,0)":"translate("+r+")"}function E(e,n){W.selectAll("g.pie-slice").each(function(r){e.name===r.data.key&&t.select(this).classed("highlight",n)})}var M,j,N,L,R,I,O=.5,F="pie-slice",z="empty-chart",P="empty",q=0,H=0,B=O,$=!1,W=n.capMixin(n.colorMixin(n.baseMixin({})));return W.colorAccessor(W.cappedKeyAccessor),W.title(function(t){return W.cappedKeyAccessor(t)+": "+W.cappedValueAccessor(t)}),W.slicesCap=W.cap,W.label(W.cappedKeyAccessor),W.renderLabel(!0),W.transitionDuration(350),W._doRender=function(){return W.resetSvg(),N=W.svg().append("g").attr("transform","translate("+W.cx()+","+W.cy()+")"),i(),W},W._applyLabelText=function(t){t.text(function(t){var e=t.data;return!w(e)&&!_(t)||b(t)?W.label()(t.data):""})},W.externalRadiusPadding=function(t){return arguments.length?(H=t,W):H},W.innerRadius=function(t){return arguments.length?(q=t,W):q},W.radius=function(t){return arguments.length?(j=t,W):j},W.cx=function(t){return arguments.length?(L=t,W):L||W.width()/2},W.cy=function(t){return arguments.length?(R=t,W):R||W.height()/2},W._doRedraw=function(){return i(),W},W.minAngleForLabel=function(t){return arguments.length?(B=t,W):B},W.emptyTitle=function(t){return 0===arguments.length?P:(P=t,W)},W.externalLabels=function(t){return 0===arguments.length?I:(I=t?t:void 0,W)},W.drawPaths=function(t){return 0===arguments.length?$:($=t,W)},W.legendables=function(){return W.data().map(function(t,e){var n={name:t.key,data:t.value,others:t.others,chart:W};return n.color=W.getColor(t,e),n})},W.legendHighlight=function(t){E(t,!0)},W.legendReset=function(t){E(t,!1)},W.legendToggle=function(t){W.onClick({key:t.name,others:t.others})},W.anchor(e,r)},n.barChart=function(e,r){function i(t){return n.utils.safeNumber(Math.abs(d.y()(t.y+t.y0)-d.y()(t.y0)))}function o(t,e,r){var o=t.selectAll("text.barLabel").data(r.values,n.pluck("x"));o.enter().append("text").attr("class","barLabel").attr("text-anchor","middle"),d.isOrdinal()&&(o.on("click",d.onClick),o.attr("cursor","pointer")),n.transition(o,d.transitionDuration()).attr("x",function(t){var e=d.x()(t.x);return g||(e+=u/2),n.utils.safeNumber(e)}).attr("y",function(t){var e=d.y()(t.y+t.y0);return t.y<0&&(e-=i(t)),n.utils.safeNumber(e-h)}).text(function(t){return d.label()(t)}),n.transition(o.exit(),d.transitionDuration()).attr("height",0).remove()}function a(t,e,r){var o=t.selectAll("rect.bar").data(r.values,n.pluck("x")),a=o.enter().append("rect").attr("class","bar").attr("fill",n.pluck("data",d.getColor)).attr("y",d.yAxisHeight()).attr("height",0);d.renderTitle()&&a.append("title").text(n.pluck("data",d.title(r.name))),d.isOrdinal()&&o.on("click",d.onClick),n.transition(o,d.transitionDuration()).attr("x",function(t){var e=d.x()(t.x);return g&&(e-=u/2),d.isOrdinal()&&void 0!==p&&(e+=p/2),n.utils.safeNumber(e)}).attr("y",function(t){var e=d.y()(t.y+t.y0);return t.y<0&&(e-=i(t)),n.utils.safeNumber(e)}).attr("width",u).attr("height",function(t){return i(t)}).attr("fill",n.pluck("data",d.getColor)).select("title").text(n.pluck("data",d.title(r.name))),n.transition(o.exit(),d.transitionDuration()).attr("height",0).remove()}function s(){if(void 0===u){var t=d.xUnitCount();u=d.isOrdinal()&&void 0===p?Math.floor(d.x().rangeBand()):p?Math.floor((d.xAxisLength()-(t-1)*p)/t):Math.floor(d.xAxisLength()/(1+d.barPadding())/t),(u===1/0||isNaN(u)||c>u)&&(u=c)}}function l(e,n){return function(){var r=t.select(this),i=r.attr("fill")===e;return n?!i:i}}var u,c=1,f=2,h=3,d=n.stackMixin(n.coordinateGridMixin({})),p=f,g=!1,v=!1;return n.override(d,"rescale",function(){return d._rescale(),u=void 0,d}),n.override(d,"render",function(){return d.round()&&g&&!v&&n.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),d._render()}),d.label(function(t){return n.utils.printSingleValue(t.y0+t.y)},!1),d.plotData=function(){var e=d.chartBodyG().selectAll("g.stack").data(d.data());s(),e.enter().append("g").attr("class",function(t,e){return"stack _"+e});var n=e.size()-1;e.each(function(e,r){var i=t.select(this);a(i,r,e),d.renderLabel()&&n===r&&o(i,r,e)})},d.fadeDeselectedArea=function(){var t=d.chartBodyG().selectAll("rect.bar"),e=d.brush().extent();if(d.isOrdinal())d.hasFilter()?(t.classed(n.constants.SELECTED_CLASS,function(t){return d.hasFilter(t.x)}),t.classed(n.constants.DESELECTED_CLASS,function(t){return!d.hasFilter(t.x)})):(t.classed(n.constants.SELECTED_CLASS,!1),t.classed(n.constants.DESELECTED_CLASS,!1));else if(d.brushIsEmpty(e))t.classed(n.constants.DESELECTED_CLASS,!1);else{var r=e[0],i=e[1];t.classed(n.constants.DESELECTED_CLASS,function(t){return t.x<r||t.x>=i})}},d.centerBar=function(t){return arguments.length?(g=t,d):g},n.override(d,"onClick",function(t){d._onClick(t.data)}),d.barPadding=function(t){return arguments.length?(d._rangeBandPadding(t),p=void 0,d):d._rangeBandPadding()},d._useOuterPadding=function(){return void 0===p},d.outerPadding=d._outerRangeBandPadding,d.gap=function(t){return arguments.length?(p=t,d):p},d.extendBrush=function(){var t=d.brush().extent();return!d.round()||g&&!v||(t[0]=t.map(d.round())[0],t[1]=t.map(d.round())[1],d.chartBodyG().select(".brush").call(d.brush().extent(t))),t},d.alwaysUseRounding=function(t){return arguments.length?(v=t,d):v},d.legendHighlight=function(t){d.isLegendableHidden(t)||d.g().selectAll("rect.bar").classed("highlight",l(t.color)).classed("fadeout",l(t.color,!0))},d.legendReset=function(){d.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},n.override(d,"xAxisMax",function(){var t=this._xAxisMax();if("resolution"in d.xUnits()){var e=d.xUnits().resolution;t+=e}return t}),d.anchor(e,r)},n.lineChart=function(e,r){function i(t,e){return C.getColor.call(t,t.values,e)}function o(e,r){var o=t.svg.line().x(function(t){return C.x()(t.x)}).y(function(t){return C.y()(t.y+t.y0)}).interpolate(j).tension(N);m&&o.defined(m);var a=e.append("path").attr("class","line").attr("stroke",i);y&&a.attr("stroke-dasharray",y),n.transition(r.select("path.line"),C.transitionDuration()).attr("stroke",i).attr("d",function(t){return s(o(t.values))})}function a(e,r){if(k){var o=t.svg.area().x(function(t){return C.x()(t.x)}).y(function(t){return C.y()(t.y+t.y0)}).y0(function(t){return C.y()(t.y0)}).interpolate(j).tension(N);m&&o.defined(m),e.append("path").attr("class","area").attr("fill",i).attr("d",function(t){return s(o(t.values))}),n.transition(r.select("path.area"),C.transitionDuration()).attr("fill",i).attr("d",function(t){return s(o(t.values))})}}function s(t){return!t||t.indexOf("NaN")>=0?"M0,0":t}function l(e,r){if(!C.brushOn()&&C.xyTipsOn()){var i=x+"-list",o=e.select("g."+i);o.empty()&&(o=e.append("g").attr("class",i)),r.each(function(e,r){var i=e.values;m&&(i=i.filter(m));var a=o.select("g."+x+"._"+r);a.empty()&&(a=o.append("g").attr("class",x+" _"+r)),u(a);var s=a.selectAll("circle."+_).data(i,n.pluck("x"));s.enter().append("circle").attr("class",_).attr("r",h()).style("fill-opacity",E).style("stroke-opacity",M).on("mousemove",function(){var e=t.select(this);c(e),f(e,a)}).on("mouseout",function(){var e=t.select(this);d(e),p(a)}),s.attr("cx",function(t){return n.utils.safeNumber(C.x()(t.x))}).attr("cy",function(t){return n.utils.safeNumber(C.y()(t.y+t.y0))}).attr("fill",C.getColor).call(g,e),s.exit().remove()})}}function u(t){var e=t.select("path."+w).empty()?t.append("path").attr("class",w):t.select("path."+w);e.style("display","none").attr("stroke-dasharray","5,5");var n=t.select("path."+S).empty()?t.append("path").attr("class",S):t.select("path."+S);n.style("display","none").attr("stroke-dasharray","5,5")}function c(t){return t.style("fill-opacity",.8),t.style("stroke-opacity",.8),t.attr("r",A),t}function f(t,e){var n=t.attr("cx"),r=t.attr("cy"),i=C._yAxisX()-C.margins().left,o="M"+i+" "+r+"L"+n+" "+r,a="M"+n+" "+C.yAxisHeight()+"L"+n+" "+r;e.select("path."+w).style("display","").attr("d",o),e.select("path."+S).style("display","").attr("d",a)}function h(){return D||A}function d(t){t.style("fill-opacity",E).style("stroke-opacity",M).attr("r",h())}function p(t){t.select("path."+w).style("display","none"),t.select("path."+S).style("display","none")}function g(t,e){C.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(n.pluck("data",C.title(e.name))))}function v(e,n,r){return function(){var i=t.select(this),o=i.attr("stroke")===e&&i.attr("stroke-dasharray")===(n instanceof Array?n.join(","):null)||i.attr("fill")===e;return r?!o:o}}var m,y,b=5,x="dc-tooltip",_="dot",w="yRef",S="xRef",T=1e-6,C=n.stackMixin(n.coordinateGridMixin({})),k=!1,A=b,D=null,E=T,M=T,j="linear",N=.7,L=!0;return C.transitionDuration(500),C._rangeBandPadding(1),C.plotData=function(){var t=C.chartBodyG(),e=t.selectAll("g.stack-list");e.empty()&&(e=t.append("g").attr("class","stack-list"));var n=e.selectAll("g.stack").data(C.data()),r=n.enter().append("g").attr("class",function(t,e){return"stack _"+e});o(r,n),a(r,n),l(t,n)},C.interpolate=function(t){return arguments.length?(j=t,C):j},C.tension=function(t){return arguments.length?(N=t,C):N},C.defined=function(t){return arguments.length?(m=t,C):m},C.dashStyle=function(t){return arguments.length?(y=t,C):y},C.renderArea=function(t){return arguments.length?(k=t,C):k},C.xyTipsOn=function(t){return arguments.length?(L=t,C):L},C.dotRadius=function(t){return arguments.length?(A=t,C):A},C.renderDataPoints=function(t){return arguments.length?(t?(E=t.fillOpacity||.8,M=t.strokeOpacity||.8,D=t.radius||2):(E=T,M=T,D=null),C):{fillOpacity:E,strokeOpacity:M,radius:D}},C.legendHighlight=function(t){C.isLegendableHidden(t)||C.g().selectAll("path.line, path.area").classed("highlight",v(t.color,t.dashstyle)).classed("fadeout",v(t.color,t.dashstyle,!0))},C.legendReset=function(){C.g().selectAll("path.line, path.area").classed("highlight",!1).classed("fadeout",!1)},n.override(C,"legendables",function(){var t=C._legendables();return y?t.map(function(t){return t.dashstyle=y,t}):t}),C.anchor(e,r)},n.dataCount=function(e,r){var i=t.format(",d"),o=n.baseMixin({}),a={some:"",all:""};return o.html=function(t){return arguments.length?(t.all&&(a.all=t.all),t.some&&(a.some=t.some),o):a},o.formatNumber=function(t){return arguments.length?(i=t,o):i},o._doRender=function(){var t=o.dimension().size(),e=o.group().value(),n=i(t),r=i(e);return t===e&&""!==a.all?o.root().html(a.all.replace("%total-count",n).replace("%filter-count",r)):""!==a.some?o.root().html(a.some.replace("%total-count",n).replace("%filter-count",r)):(o.selectAll(".total-count").text(n),o.selectAll(".filter-count").text(r)),o},o._doRedraw=function(){return o._doRender()},o.anchor(e,r)},n.dataTable=function(e,r){function i(){var t=!0;if(g.forEach(function(e){t&="function"==typeof e}),!t){var e=d.selectAll("thead").data([0]);e.enter().append("thead"),e.exit().remove();var n=e.selectAll("tr").data([0]);n.enter().append("tr"),n.exit().remove();var r=n.selectAll("th").data(g);r.enter().append("th"),r.exit().remove(),r.attr("class",h).html(function(t){return d._doColumnHeaderFormat(t)})}var i=d.root().selectAll("tbody").data(o(),function(t){return d.keyAccessor()(t)}),a=i.enter().append("tbody");return b===!0&&a.append("tr").attr("class",f).append("td").attr("class",l).attr("colspan",g.length).html(function(t){return d.keyAccessor()(t)}),i.exit().remove(),a}function o(){var e;return e=m===t.ascending?d.dimension().bottom(p):d.dimension().top(p),t.nest().key(d.group()).sortKeys(m).entries(e.sort(function(t,e){return m(v(t),v(e))}).slice(y,s))}function a(t){var e=t.order().selectAll("tr."+u).data(function(t){return t.values}),n=e.enter().append("tr").attr("class",u);return g.forEach(function(t,e){n.append("td").attr("class",c+" _"+e).html(function(e){return d._doColumnValueFormat(t,e)})}),e.exit().remove(),e}var s,l="dc-table-label",u="dc-table-row",c="dc-table-column",f="dc-table-group",h="dc-table-head",d=n.baseMixin({}),p=25,g=[],v=function(t){return t},m=t.ascending,y=0,b=!0;return d._doRender=function(){return d.selectAll("tbody").remove(),a(i()),d},d._doColumnValueFormat=function(t,e){return"function"==typeof t?t(e):"string"==typeof t?e[t]:t.format(e)},d._doColumnHeaderFormat=function(t){return"function"==typeof t?d._doColumnHeaderFnToString(t):"string"==typeof t?d._doColumnHeaderCapitalize(t):String(t.label)},d._doColumnHeaderCapitalize=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},d._doColumnHeaderFnToString=function(t){var e=String(t),n=e.indexOf("return ");if(n>=0){var r=e.lastIndexOf(";");if(r>=0){e=e.substring(n+7,r);var i=e.indexOf("numberFormat");i>=0&&(e=e.replace("numberFormat",""))}}return e},d._doRedraw=function(){return d._doRender()},d.size=function(t){return arguments.length?(p=t,d):p},d.beginSlice=function(t){return arguments.length?(y=t,d):y},d.endSlice=function(t){return arguments.length?(s=t,d):s},d.columns=function(t){return arguments.length?(g=t,d):g},d.sortBy=function(t){return arguments.length?(v=t,d):v},d.order=function(t){return arguments.length?(m=t,d):m},d.showGroups=function(t){return arguments.length?(b=t,d):b},d.anchor(e,r)},n.dataGrid=function(e,r){function i(){var t=h.root().selectAll("div."+f).data(o(),function(t){return h.keyAccessor()(t)}),e=t.enter().append("div").attr("class",f);return y&&e.html(function(t){return y(t)}),t.exit().remove(),e}function o(){var e=h.dimension().top(d);return t.nest().key(h.group()).sortKeys(v).entries(e.sort(function(t,e){return v(g(t),g(e))}).slice(m,s))}function a(t){var e=t.order().selectAll("div."+u).data(function(t){return t.values});return e.enter().append("div").attr("class",u).html(function(t){return p(t)}),e.exit().remove(),e}var s,l="dc-grid-label",u="dc-grid-item",c="dc-grid-group",f="dc-grid-top",h=n.baseMixin({}),d=999,p=function(t){return"you need to provide an html() handling param:  "+JSON.stringify(t)},g=function(t){return t},v=t.ascending,m=0,y=function(t){return"<div class='"+c+"'><h1 class='"+l+"'>"+h.keyAccessor()(t)+"</h1></div>"};return h._doRender=function(){return h.selectAll("div."+f).remove(),a(i()),h},h._doRedraw=function(){return h._doRender()},h.beginSlice=function(t){return arguments.length?(m=t,h):m},h.endSlice=function(t){return arguments.length?(s=t,h):s},h.size=function(t){return arguments.length?(d=t,h):d},h.html=function(t){return arguments.length?(p=t,h):p},h.htmlGroup=function(t){return arguments.length?(y=t,h):y},h.sortBy=function(t){return arguments.length?(g=t,h):g},h.order=function(t){return arguments.length?(v=t,h):v},h.anchor(e,r)},n.bubbleChart=function(e,r){function i(t){var e=t.enter().append("g");e.attr("class",u.BUBBLE_NODE_CLASS).attr("transform",h).append("circle").attr("class",function(t,e){return u.BUBBLE_CLASS+" _"+e}).on("click",u.onClick).attr("fill",u.getColor).attr("r",0),n.transition(t,u.transitionDuration()).selectAll("circle."+u.BUBBLE_CLASS).attr("r",function(t){return u.bubbleR(t)}).attr("opacity",function(t){return u.bubbleR(t)>0?1:0}),u._doRenderLabel(e),u._doRenderTitles(e)}function o(t){n.transition(t,u.transitionDuration()).attr("transform",h).selectAll("circle."+u.BUBBLE_CLASS).attr("fill",u.getColor).attr("r",function(t){return u.bubbleR(t)}).attr("opacity",function(t){return u.bubbleR(t)>0?1:0}),u.doUpdateLabels(t),u.doUpdateTitles(t)}function a(t){t.exit().remove()}function s(t){var e=u.x()(u.keyAccessor()(t));return isNaN(e)&&(e=0),e}function l(t){var e=u.y()(u.valueAccessor()(t));return isNaN(e)&&(e=0),e}var u=n.bubbleMixin(n.coordinateGridMixin({})),c=!1,f=!1;u.transitionDuration(750);var h=function(t){return"translate("+s(t)+","+l(t)+")"};return u.elasticRadius=function(t){return arguments.length?(c=t,u):c},u.sortBubbleSize=function(t){return arguments.length?(f=t,u):f},u.plotData=function(){c&&u.r().domain([u.rMin(),u.rMax()]),u.r().range([u.MIN_RADIUS,u.xAxisLength()*u.maxBubbleRelativeSize()]);var e=u.data();if(f){var n=u.radiusValueAccessor();e.sort(function(e,r){return t.descending(n(e),n(r))})}var r=u.chartBodyG().selectAll("g."+u.BUBBLE_NODE_CLASS).data(e,function(t){return t.key});f&&r.order(),i(r),o(r),a(r),u.fadeDeselectedArea()},u.renderBrush=function(){},u.redrawBrush=function(){u.fadeDeselectedArea()},u.anchor(e,r)},n.compositeChart=function(e,r){function i(t,e){var n,r,i,o;if(t&&(n=f(),r=p()),e&&(i=h(),o=g()),_.alignYAxes()&&t&&e&&(0>n||0>i)){var a,s;0>n&&(a=r/n),0>i&&(s=o/i),0>n&&0>i?s>a?o=i*a:r=n*s:0>n?i=o/a:n=r/(o/i)}return{lyAxisMin:n,lyAxisMax:r,ryAxisMin:i,ryAxisMax:o}}function o(e){var n=void 0===_.rightY()||_.elasticY(),r=n||_.resizing();void 0===_.rightY()&&_.rightY(t.scale.linear()),n&&_.rightY().domain([e.ryAxisMin,e.ryAxisMax]),r&&_.rightY().rangeRound([_.yAxisHeight(),0]),_.rightY().range([_.yAxisHeight(),0]),_.rightYAxis(_.rightYAxis().scale(_.rightY())),_.rightYAxis().orient("right")}function a(e){var n=void 0===_.y()||_.elasticY(),r=n||_.resizing();void 0===_.y()&&_.y(t.scale.linear()),n&&_.y().domain([e.lyAxisMin,e.lyAxisMax]),r&&_.y().rangeRound([_.yAxisHeight(),0]),_.y().range([_.yAxisHeight(),0]),_.yAxis(_.yAxis().scale(_.y())),_.yAxis().orient("left")}function s(t,e){t._generateG(_.g()),t.g().attr("class",b+" _"+e)}function l(){return w.filter(function(t){return!t.useRightYAxis()})}function u(){return w.filter(function(t){return t.useRightYAxis()})}function c(t){return t.map(function(t){return t.yAxisMin()})}function f(){return t.min(c(l()))}function h(){return t.min(c(u()))}function d(t){return t.map(function(t){return t.yAxisMax()})}function p(){return n.utils.add(t.max(d(l())),_.yAxisPadding())}function g(){return n.utils.add(t.max(d(u())),_.yAxisPadding())}function v(){return w.map(function(t){return t.xAxisMin()})}function m(){return w.map(function(t){return t.xAxisMax()})}var y,b="sub",x=12,_=n.coordinateGridMixin({}),w=[],S={},T=!1,C=!0,k=!1,A=t.svg.axis(),D=0,E=x,M=!1;return _._mandatoryAttributes([]),_.transitionDuration(500),n.override(_,"_generateG",function(){for(var t=this.__generateG(),e=0;e<w.length;++e){var n=w[e];s(n,e),n.dimension()||n.dimension(_.dimension()),n.group()||n.group(_.group()),n.chartGroup(_.chartGroup()),n.svg(_.svg()),n.xUnits(_.xUnits()),n.transitionDuration(_.transitionDuration()),n.brushOn(_.brushOn()),n.renderTitle(_.renderTitle()),n.elasticX(_.elasticX())}return t}),_._brushing=function(){for(var t=_.extendBrush(),e=_.brushIsEmpty(t),n=0;n<w.length;++n)w[n].filter(null),e||w[n].filter(t)},_._prepareYAxis=function(){var t=0!==l().length,e=0!==u().length,n=i(t,e);t&&a(n),e&&o(n),l().length>0&&!M?_._renderHorizontalGridLinesForAxis(_.g(),_.y(),_.yAxis()):u().length>0&&_._renderHorizontalGridLinesForAxis(_.g(),y,A)},_.renderYAxis=function(){0!==l().length&&(_.renderYAxisAt("y",_.yAxis(),_.margins().left),_.renderYAxisLabel("y",_.yAxisLabel(),-90)),0!==u().length&&(_.renderYAxisAt("yr",_.rightYAxis(),_.width()-_.margins().right),_.renderYAxisLabel("yr",_.rightYAxisLabel(),90,_.width()-E))},_.plotData=function(){for(var t=0;t<w.length;++t){var e=w[t];e.g()||s(e,t),T&&e.colors(_.colors()),e.x(_.x()),e.xAxis(_.xAxis()),e.useRightYAxis()?(e.y(_.rightY()),e.yAxis(_.rightYAxis())):(e.y(_.y()),e.yAxis(_.yAxis())),e.plotData(),e._activateRenderlets()}},_.useRightAxisGridLines=function(t){return arguments?(M=t,_):M},_.childOptions=function(t){return arguments.length?(S=t,w.forEach(function(t){t.options(S)}),_):S},_.fadeDeselectedArea=function(){for(var t=0;t<w.length;++t){var e=w[t];e.brush(_.brush()),e.fadeDeselectedArea()}},_.rightYAxisLabel=function(t,e){return arguments.length?(D=t,_.margins().right-=E,E=void 0===e?x:e,_.margins().right+=E,_):D},_.compose=function(t){return w=t,w.forEach(function(t){t.height(_.height()),t.width(_.width()),t.margins(_.margins()),C&&t.title(_.title()),t.options(S)}),_},_.children=function(){return w},_.shareColors=function(t){return arguments.length?(T=t,_):T},_.shareTitle=function(t){return arguments.length?(C=t,_):C},_.rightY=function(t){return arguments.length?(y=t,_.rescale(),_):y},_.alignYAxes=function(t){return arguments.length?(k=t,_.rescale(),_):k},delete _.yAxisMin,delete _.yAxisMax,n.override(_,"xAxisMin",function(){return n.utils.subtract(t.min(v()),_.xAxisPadding())}),n.override(_,"xAxisMax",function(){return n.utils.add(t.max(m()),_.xAxisPadding())}),_.legendables=function(){return w.reduce(function(t,e){return T&&e.colors(_.colors()),t.push.apply(t,e.legendables()),t},[])},_.legendHighlight=function(t){for(var e=0;e<w.length;++e){var n=w[e];n.legendHighlight(t)}},_.legendReset=function(t){for(var e=0;e<w.length;++e){var n=w[e];n.legendReset(t)}},_.legendToggle=function(){console.log("composite should not be getting legendToggle itself")},_.rightYAxis=function(t){return arguments.length?(A=t,_):A},_.anchor(e,r)},n.seriesChart=function(e,r){function i(e,n){return t.ascending(l.keyAccessor()(e),l.keyAccessor()(n))}function o(t){u[t].g()&&u[t].g().remove(),delete u[t]}function a(){Object.keys(u).map(o),u={}}var s,l=n.compositeChart(e,r),u={},c=n.lineChart,f=t.ascending,h=i;return l._mandatoryAttributes().push("seriesAccessor","chart"),l.shareColors(!0),l._preprocessData=function(){var e,n=[],i=t.nest().key(s);f&&i.sortKeys(f),h&&i.sortValues(h);var a=i.entries(l.data()),d=a.map(function(i,o){var a=u[i.key]||c.call(l,l,r,i.key,o);return u[i.key]||(e=!0),u[i.key]=a,n.push(i.key),a.dimension(l.dimension()).group({all:t.functor(i.values)},i.key).keyAccessor(l.keyAccessor()).valueAccessor(l.valueAccessor()).brushOn(l.brushOn())});Object.keys(u).filter(function(t){return-1===n.indexOf(t)}).forEach(function(t){o(t),e=!0}),l._compose(d),e&&l.legend()&&l.legend().render()},l.chart=function(t){return arguments.length?(c=t,a(),l):c},l.seriesAccessor=function(t){return arguments.length?(s=t,a(),l):s},l.seriesSort=function(t){return arguments.length?(f=t,a(),l):f},l.valueSort=function(t){return arguments.length?(h=t,a(),l):h},l._compose=l.compose,delete l.compose,l},n.geoChoroplethChart=function(e,r){function i(t){var e=o();if(a(t)){var n=s(t);d(n,t,e),p(n,t,e)}}function o(){for(var t={},e=g.data(),n=0;n<e.length;++n)t[g.keyAccessor()(e[n])]=g.valueAccessor()(e[n]);return t}function a(t){return h(t).keyAccessor}function s(t){var e=g.svg().selectAll(l(t)).classed("selected",function(e){return u(t,e)}).classed("deselected",function(e){return c(t,e)}).attr("class",function(e){var r=h(t).name,i=n.utils.nameToId(h(t).keyAccessor(e)),o=r+" "+i;return u(t,e)&&(o+=" selected"),c(t,e)&&(o+=" deselected"),o});return e}function l(t){return"g.layer"+t+" g."+h(t).name}function u(t,e){return g.hasFilter()&&g.hasFilter(f(t,e))}function c(t,e){return g.hasFilter()&&!g.hasFilter(f(t,e))}function f(t,e){return h(t).keyAccessor(e)}function h(t){return y[t]}function d(e,r,i){var o=e.select("path").attr("fill",function(){var e=t.select(this).attr("fill");return e?e:"none"}).on("click",function(t){return g.onClick(t,r)});n.transition(o,g.transitionDuration()).attr("fill",function(t,e){return g.getColor(i[h(r).keyAccessor(t)],e)})}function p(t,e,n){g.renderTitle()&&t.selectAll("title").text(function(t){var r=f(e,t),i=n[r];return g.title()({key:r,value:i})})}var g=n.colorMixin(n.baseMixin({}));g.colorAccessor(function(t){return t||0});var v,m=t.geo.path(),y=[];return g._doRender=function(){g.resetSvg();for(var t=0;t<y.length;++t){var e=g.svg().append("g").attr("class","layer"+t),n=e.selectAll("g."+h(t).name).data(h(t).data).enter().append("g").attr("class",h(t).name);n.append("path").attr("fill","white").attr("d",m),n.append("title"),i(t)}v=!1},g.onClick=function(t,e){var r=h(e).keyAccessor(t);n.events.trigger(function(){g.filter(r),g.redrawGroup()})},g._doRedraw=function(){for(var t=0;t<y.length;++t)i(t),v&&g.svg().selectAll("g."+h(t).name+" path").attr("d",m);v=!1},g.overlayGeoJson=function(t,e,n){for(var r=0;r<y.length;++r)if(y[r].name===e)return y[r].data=t,y[r].keyAccessor=n,g;return y.push({name:e,data:t,keyAccessor:n}),g},g.projection=function(t){return m.projection(t),v=!0,g},g.geoJsons=function(){return y},g.geoPath=function(){return m},g.removeGeoJson=function(t){for(var e=[],n=0;n<y.length;++n){var r=y[n];r.name!==t&&e.push(r)}return y=e,g},g.anchor(e,r)},n.bubbleOverlay=function(e,r){function i(){return u=d.select("g."+c),u.empty()&&(u=d.svg().append("g").attr("class",c)),u}function o(){var t=a();p.forEach(function(e){var r=s(e,t),i=r.select("circle."+h);i.empty()&&(i=r.append("circle").attr("class",h).attr("r",0).attr("fill",d.getColor).on("click",d.onClick)),n.transition(i,d.transitionDuration()).attr("r",function(t){return d.bubbleR(t)}),d._doRenderLabel(r),d._doRenderTitles(r)})}function a(){var t={};return d.data().forEach(function(e){t[d.keyAccessor()(e)]=e}),t}function s(t,e){var r=f+" "+n.utils.nameToId(t.name),i=u.select("g."+n.utils.nameToId(t.name));return i.empty()&&(i=u.append("g").attr("class",r).attr("transform","translate("+t.x+","+t.y+")")),i.datum(e[t.name]),i}function l(){var t=a();p.forEach(function(e){var r=s(e,t),i=r.select("circle."+h);n.transition(i,d.transitionDuration()).attr("r",function(t){return d.bubbleR(t)}).attr("fill",d.getColor),d.doUpdateLabels(r),d.doUpdateTitles(r)})}var u,c="bubble-overlay",f="node",h="bubble",d=n.bubbleMixin(n.baseMixin({})),p=[];return d.transitionDuration(750),d.radiusValueAccessor(function(t){return t.value}),d.point=function(t,e,n){return p.push({name:t,x:e,y:n}),d},d._doRender=function(){return u=i(),d.r().range([d.MIN_RADIUS,d.width()*d.maxBubbleRelativeSize()]),o(),d.fadeDeselectedArea(),d},d._doRedraw=function(){return l(),d.fadeDeselectedArea(),d},d.debug=function(e){if(e){var r=d.select("g."+n.constants.DEBUG_GROUP_CLASS);r.empty()&&(r=d.svg().append("g").attr("class",n.constants.DEBUG_GROUP_CLASS));var i=r.append("text").attr("x",10).attr("y",20);r.append("rect").attr("width",d.width()).attr("height",d.height()).on("mousemove",function(){var e=t.mouse(r.node()),n=e[0]+", "+e[1];i.text(n)})}else d.selectAll(".debug").remove();return d},d.anchor(e,r),
d},n.rowChart=function(e,r){function i(){if(!b||x){var e=t.extent(_,N.cappedValueAccessor);e[0]>0&&(e[0]=0),b=t.scale.linear().domain(e).range([0,N.effectiveWidth()])}L.scale(b)}function o(){var t=y.select("g.axis");i(),t.empty()&&(t=y.append("g").attr("class","axis")),t.attr("transform","translate(0, "+N.effectiveHeight()+")"),n.transition(t,N.transitionDuration()).call(L)}function a(){y.selectAll("g.tick").select("line.grid-line").remove(),y.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-N.effectiveHeight()})}function s(){_=N.data(),o(),a();var t=y.selectAll("g."+E).data(_);l(t),u(t),f(t)}function l(t){var e=t.enter().append("g").attr("class",function(t,e){return E+" _"+e});e.append("rect").attr("width",0),d(e),p(t)}function u(t){t.exit().remove()}function c(){var t=b(0);return t===-(1/0)||t!==t?b(1):t}function f(t){var e,r=_.length;e=D?D:(N.effectiveHeight()-(r+1)*A)/r,T||(S=e/2);var i=t.attr("transform",function(t,n){return"translate(0,"+((n+1)*A+n*e)+")"}).select("rect").attr("height",e).attr("fill",N.getColor).on("click",g).classed("deselected",function(t){return!!N.hasFilter()&&!m(t)}).classed("selected",function(t){return!!N.hasFilter()&&m(t)});n.transition(i,N.transitionDuration()).attr("width",function(t){return Math.abs(c()-b(N.valueAccessor()(t)))}).attr("transform",v),h(t),p(t)}function h(t){N.renderTitle()&&(t.selectAll("title").remove(),t.append("title").text(N.title()))}function d(t){N.renderLabel()&&t.append("text").on("click",g),N.renderTitleLabel()&&t.append("text").attr("class",M).on("click",g)}function p(t){if(N.renderLabel()){var e=t.select("text").attr("x",w).attr("y",S).attr("dy",C).on("click",g).attr("class",function(t,e){return E+" _"+e}).text(function(t){return N.label()(t)});n.transition(e,N.transitionDuration()).attr("transform",v)}if(N.renderTitleLabel()){var r=t.select("."+M).attr("x",N.effectiveWidth()-k).attr("y",S).attr("text-anchor","end").on("click",g).attr("class",function(t,e){return M+" _"+e}).text(function(t){return N.title()(t)});n.transition(r,N.transitionDuration()).attr("transform",v)}}function g(t){N.onClick(t)}function v(t){var e=b(N.cappedValueAccessor(t)),n=c(),r=e>n?n:e;return"translate("+r+",0)"}function m(t){return N.hasFilter(N.cappedKeyAccessor(t))}var y,b,x,_,w=10,S=15,T=!1,C="0.35em",k=2,A=5,D=!1,E="row",M="titlerow",j=!1,N=n.capMixin(n.marginMixin(n.colorMixin(n.baseMixin({})))),L=t.svg.axis().orient("bottom");return N.rowsCap=N.cap,N._doRender=function(){return N.resetSvg(),y=N.svg().append("g").attr("transform","translate("+N.margins().left+","+N.margins().top+")"),s(),N},N.title(function(t){return N.cappedKeyAccessor(t)+": "+N.cappedValueAccessor(t)}),N.label(N.cappedKeyAccessor),N.x=function(t){return arguments.length?(b=t,N):b},N.renderTitleLabel=function(t){return arguments.length?(j=t,N):j},N._doRedraw=function(){return s(),N},N.xAxis=function(){return L},N.fixedBarHeight=function(t){return arguments.length?(D=t,N):D},N.gap=function(t){return arguments.length?(A=t,N):A},N.elasticX=function(t){return arguments.length?(x=t,N):x},N.labelOffsetX=function(t){return arguments.length?(w=t,N):w},N.labelOffsetY=function(t){return arguments.length?(S=t,T=!0,N):S},N.titleLabelOffsetX=function(t){return arguments.length?(k=t,N):k},N.anchor(e,r)},n.legend=function(){function t(){return u+l}var e,r,i=2,o={},a=0,s=0,l=12,u=5,c=!1,f=560,h=70,d=!1,p=n.pluck("name");return o.parent=function(t){return arguments.length?(e=t,o):e},o.render=function(){e.svg().select("g.dc-legend").remove(),r=e.svg().append("g").attr("class","dc-legend").attr("transform","translate("+a+","+s+")");var o=e.legendables(),g=r.selectAll("g.dc-legend-item").data(o).enter().append("g").attr("class","dc-legend-item").on("mouseover",function(t){e.legendHighlight(t)}).on("mouseout",function(t){e.legendReset(t)}).on("click",function(t){t.chart.legendToggle(t)});r.selectAll("g.dc-legend-item").classed("fadeout",function(t){return t.chart.isLegendableHidden(t)}),o.some(n.pluck("dashstyle"))?g.append("line").attr("x1",0).attr("y1",l/2).attr("x2",l).attr("y2",l/2).attr("stroke-width",2).attr("stroke-dasharray",n.pluck("dashstyle")).attr("stroke",n.pluck("color")):g.append("rect").attr("width",l).attr("height",l).attr("fill",function(t){return t?t.color:"blue"}),g.append("text").text(p).attr("x",l+i).attr("y",function(){return l/2+(this.clientHeight?this.clientHeight:13)/2-2});var v=0,m=0;g.attr("transform",function(e,n){if(c){var r="translate("+v+","+m*t()+")",i=d===!0?this.getBBox().width+u:h;return v+i>=f?(++m,v=0):v+=i,r}return"translate(0,"+n*t()+")"})},o.x=function(t){return arguments.length?(a=t,o):a},o.y=function(t){return arguments.length?(s=t,o):s},o.gap=function(t){return arguments.length?(u=t,o):u},o.itemHeight=function(t){return arguments.length?(l=t,o):l},o.horizontal=function(t){return arguments.length?(c=t,o):c},o.legendWidth=function(t){return arguments.length?(f=t,o):f},o.itemWidth=function(t){return arguments.length?(h=t,o):h},o.autoItemWidth=function(t){return arguments.length?(d=t,o):d},o.legendText=function(t){return arguments.length?(p=t,o):p},o},n.scatterPlot=function(e,r){function i(e,r){var i=o.selectAll(".chart-body path.symbol").filter(function(){return e(t.select(this))}),s=a.size();a.size(Math.pow(r,2)),n.transition(i,o.transitionDuration()).attr("d",a),a.size(s)}var o=n.coordinateGridMixin({}),a=t.svg.symbol(),s=function(t){return t.value},l=o.keyAccessor();o.keyAccessor(function(t){return l(t)[0]}),o.valueAccessor(function(t){return l(t)[1]}),o.colorAccessor(function(){return o._groupName});var u=function(t){return"translate("+o.x()(o.keyAccessor()(t))+","+o.y()(o.valueAccessor()(t))+")"},c=7,f=5,h=3,d=null,p=1,g=0,v=[];return a.size(function(t,e){return s(t)?v[e]?Math.pow(f,2):Math.pow(h,2):g}),n.override(o,"_filter",function(t){return arguments.length?o.__filter(n.filters.RangedTwoDimensionalFilter(t)):o.__filter()}),o.plotData=function(){var t=o.chartBodyG().selectAll("path.symbol").data(o.data());t.enter().append("path").attr("class","symbol").attr("opacity",0).attr("fill",o.getColor).attr("transform",u),t.each(function(t,e){v[e]=!o.filter()||o.filter().isFiltered(t.key)}),n.transition(t,o.transitionDuration()).attr("opacity",function(t,e){return s(t)?v[e]?1:o.excludedOpacity():0}).attr("fill",function(t,e){return o.excludedColor()&&!v[e]?o.excludedColor():o.getColor(t)}).attr("transform",u).attr("d",a),n.transition(t.exit(),o.transitionDuration()).attr("opacity",0).remove()},o.existenceAccessor=function(t){return arguments.length?(s=t,this):s},o.symbol=function(t){return arguments.length?(a.type(t),o):a.type()},o.symbolSize=function(t){return arguments.length?(f=t,o):f},o.highlightedSize=function(t){return arguments.length?(c=t,o):c},o.excludedSize=function(t){return arguments.length?(h=t,o):h},o.excludedColor=function(t){return arguments.length?(d=t,o):d},o.excludedOpacity=function(t){return arguments.length?(p=t,o):p},o.hiddenSize=o.emptySize=function(t){return arguments.length?(g=t,o):g},o.legendables=function(){return[{chart:o,name:o._groupName,color:o.getColor()}]},o.legendHighlight=function(e){i(function(t){return t.attr("fill")===e.color},c),o.selectAll(".chart-body path.symbol").filter(function(){return t.select(this).attr("fill")!==e.color}).classed("fadeout",!0)},o.legendReset=function(e){i(function(t){return t.attr("fill")===e.color},f),o.selectAll(".chart-body path.symbol").filter(function(){return t.select(this).attr("fill")!==e.color}).classed("fadeout",!1)},o.setHandlePaths=function(){},o.extendBrush=function(){var t=o.brush().extent();return o.round()&&(t[0]=t[0].map(o.round()),t[1]=t[1].map(o.round()),o.g().select(".brush").call(o.brush().extent(t))),t},o.brushIsEmpty=function(t){return o.brush().empty()||!t||t[0][0]>=t[1][0]||t[0][1]>=t[1][1]},o._brushing=function(){var t=o.extendBrush();if(o.redrawBrush(o.g()),o.brushIsEmpty(t))n.events.trigger(function(){o.filter(null),o.redrawGroup()});else{var e=n.filters.RangedTwoDimensionalFilter(t);n.events.trigger(function(){o.filter(null),o.filter(e),o.redrawGroup()},n.constants.EVENT_DELAY)}},o.setBrushY=function(t){t.call(o.brush().y(o.y()))},o.anchor(e,r)},n.numberDisplay=function(e,r){var i="number-display",o=t.format(".2s"),a=n.baseMixin({}),s={one:"",some:"",none:""};return a._mandatoryAttributes(["group"]),a.html=function(t){return arguments.length?(t.none?s.none=t.none:t.one?s.none=t.one:t.some&&(s.none=t.some),t.one?s.one=t.one:t.some&&(s.one=t.some),t.some?s.some=t.some:t.one&&(s.some=t.one),a):s},a.value=function(){return a.data()},a.data(function(t){var e=t.value?t.value():t.top(1)[0];return a.valueAccessor()(e)}),a.transitionDuration(250),a._doRender=function(){var e=a.value(),n=a.selectAll("."+i);n.empty()&&(n=n.data([0]).enter().append("span").attr("class",i)),n.transition().duration(a.transitionDuration()).ease("quad-out-in").tween("text",function(){var n=t.interpolateNumber(this.lastValue||0,e);return this.lastValue=e,function(t){var r=null,i=a.formatNumber()(n(t));0===e&&""!==s.none?r=s.none:1===e&&""!==s.one?r=s.one:""!==s.some&&(r=s.some),this.innerHTML=r?r.replace("%number",i):i}})},a._doRedraw=function(){return a._doRender()},a.formatNumber=function(t){return arguments.length?(o=t,a):o},a.anchor(e,r)},n.heatMap=function(e,r){function i(t,e){var r=h.selectAll(".box-group").filter(function(n){return n.key[t]===e}),i=r.filter(function(t){return!h.hasFilter(t.key)});n.events.trigger(function(){i.empty()?r.each(function(t){h.filter(t.key)}):i.each(function(t){h.filter(t.key)}),h.redrawGroup()})}function o(t,e,n){return!e||n[e-1]!==t}var a,s,l,u=6.75,c=u,f=u,h=n.colorMixin(n.marginMixin(n.baseMixin({})));h._mandatoryAttributes(["group"]),h.title(h.colorAccessor());var d=function(t){return t},p=function(t){return t};h.colsLabel=function(t){return arguments.length?(d=t,h):d},h.rowsLabel=function(t){return arguments.length?(p=t,h):p};var g=function(t){i(0,t)},v=function(t){i(1,t)},m=function(t){var e=t.key;n.events.trigger(function(){h.filter(e),h.redrawGroup()})};return n.override(h,"filter",function(t){return arguments.length?h._filter(n.filters.TwoDimensionalFilter(t)):h._filter()}),h.rows=function(e){if(arguments.length)return l=e,h;if(l)return l;var n=h.data().map(h.valueAccessor());return n.sort(t.ascending),t.scale.ordinal().domain(n.filter(o))},h.cols=function(e){if(arguments.length)return s=e,h;if(s)return s;var n=h.data().map(h.keyAccessor());return n.sort(t.ascending),t.scale.ordinal().domain(n.filter(o))},h._doRender=function(){return h.resetSvg(),a=h.svg().append("g").attr("class","heatmap").attr("transform","translate("+h.margins().left+","+h.margins().top+")"),h._doRedraw()},h._doRedraw=function(){var t=h.rows(),e=h.cols(),r=t.domain().length,i=e.domain().length,o=Math.floor(h.effectiveWidth()/i),s=Math.floor(h.effectiveHeight()/r);e.rangeRoundBands([0,h.effectiveWidth()]),t.rangeRoundBands([h.effectiveHeight(),0]);var l=a.selectAll("g.box-group").data(h.data(),function(t,e){return h.keyAccessor()(t,e)+"\0"+h.valueAccessor()(t,e)}),u=l.enter().append("g").attr("class","box-group");u.append("rect").attr("class","heat-box").attr("fill","white").on("click",h.boxOnClick()),h.renderTitle()&&(u.append("title"),l.selectAll("title").text(h.title())),n.transition(l.selectAll("rect"),h.transitionDuration()).attr("x",function(t,n){return e(h.keyAccessor()(t,n))}).attr("y",function(e,n){return t(h.valueAccessor()(e,n))}).attr("rx",c).attr("ry",f).attr("fill",h.getColor).attr("width",o).attr("height",s),l.exit().remove();var d=a.selectAll("g.cols");d.empty()&&(d=a.append("g").attr("class","cols axis"));var p=d.selectAll("text").data(e.domain());p.enter().append("text").attr("x",function(t){return e(t)+o/2}).style("text-anchor","middle").attr("y",h.effectiveHeight()).attr("dy",12).on("click",h.xAxisOnClick()).text(h.colsLabel()),n.transition(p,h.transitionDuration()).text(h.colsLabel()).attr("x",function(t){return e(t)+o/2}).attr("y",h.effectiveHeight()),p.exit().remove();var g=a.selectAll("g.rows");g.empty()&&(g=a.append("g").attr("class","rows axis"));var v=g.selectAll("text").data(t.domain());return v.enter().append("text").attr("dy",6).style("text-anchor","end").attr("x",0).attr("dx",-2).on("click",h.yAxisOnClick()).text(h.rowsLabel()),n.transition(v,h.transitionDuration()).text(h.rowsLabel()).attr("y",function(e){return t(e)+s/2}),v.exit().remove(),h.hasFilter()?h.selectAll("g.box-group").each(function(t){h.isSelectedNode(t)?h.highlightSelected(this):h.fadeDeselected(this)}):h.selectAll("g.box-group").each(function(){h.resetHighlight(this)}),h},h.boxOnClick=function(t){return arguments.length?(m=t,h):m},h.xAxisOnClick=function(t){return arguments.length?(g=t,h):g},h.yAxisOnClick=function(t){return arguments.length?(v=t,h):v},h.xBorderRadius=function(t){return arguments.length?(c=t,h):c},h.yBorderRadius=function(t){return arguments.length?(f=t,h):f},h.isSelectedNode=function(t){return h.hasFilter(t.key)},h.anchor(e,r)},function(){function e(t){return[0,t.length-1]}function n(e){return[t.quantile(e,.25),t.quantile(e,.5),t.quantile(e,.75)]}t.box=function(){function r(e){e.each(function(e,n){e=e.map(l).sort(t.ascending);var r=t.select(this),h=e.length,d=e[0],p=e[h-1],g=e.quartiles=c(e),v=u&&u.call(this,e,n),m=v&&v.map(function(t){return e[t]}),y=v?t.range(0,v[0]).concat(t.range(v[1]+1,h)):t.range(h),b=t.scale.linear().domain(s&&s.call(this,e,n)||[d,p]).range([o,0]),x=this.__chart__||t.scale.linear().domain([0,1/0]).range(b.range());this.__chart__=b;var _=r.selectAll("line.center").data(m?[m]:[]);_.enter().insert("line","rect").attr("class","center").attr("x1",i/2).attr("y1",function(t){return x(t[0])}).attr("x2",i/2).attr("y2",function(t){return x(t[1])}).style("opacity",1e-6).transition().duration(a).style("opacity",1).attr("y1",function(t){return b(t[0])}).attr("y2",function(t){return b(t[1])}),_.transition().duration(a).style("opacity",1).attr("y1",function(t){return b(t[0])}).attr("y2",function(t){return b(t[1])}),_.exit().transition().duration(a).style("opacity",1e-6).attr("y1",function(t){return b(t[0])}).attr("y2",function(t){return b(t[1])}).remove();var w=r.selectAll("rect.box").data([g]);w.enter().append("rect").attr("class","box").attr("x",0).attr("y",function(t){return x(t[2])}).attr("width",i).attr("height",function(t){return x(t[0])-x(t[2])}).transition().duration(a).attr("y",function(t){return b(t[2])}).attr("height",function(t){return b(t[0])-b(t[2])}),w.transition().duration(a).attr("y",function(t){return b(t[2])}).attr("height",function(t){return b(t[0])-b(t[2])});var S=r.selectAll("line.median").data([g[1]]);S.enter().append("line").attr("class","median").attr("x1",0).attr("y1",x).attr("x2",i).attr("y2",x).transition().duration(a).attr("y1",b).attr("y2",b),S.transition().duration(a).attr("y1",b).attr("y2",b);var T=r.selectAll("line.whisker").data(m||[]);T.enter().insert("line","circle, text").attr("class","whisker").attr("x1",0).attr("y1",x).attr("x2",i).attr("y2",x).style("opacity",1e-6).transition().duration(a).attr("y1",b).attr("y2",b).style("opacity",1),T.transition().duration(a).attr("y1",b).attr("y2",b).style("opacity",1),T.exit().transition().duration(a).attr("y1",b).attr("y2",b).style("opacity",1e-6).remove();var C=r.selectAll("circle.outlier").data(y,Number);C.enter().insert("circle","text").attr("class","outlier").attr("r",5).attr("cx",i/2).attr("cy",function(t){return x(e[t])}).style("opacity",1e-6).transition().duration(a).attr("cy",function(t){return b(e[t])}).style("opacity",1),C.transition().duration(a).attr("cy",function(t){return b(e[t])}).style("opacity",1),C.exit().transition().duration(a).attr("cy",function(t){return b(e[t])}).style("opacity",1e-6).remove();var k=f||b.tickFormat(8),A=r.selectAll("text.box").data(g);A.enter().append("text").attr("class","box").attr("dy",".3em").attr("dx",function(t,e){return 1&e?6:-6}).attr("x",function(t,e){return 1&e?i:0}).attr("y",x).attr("text-anchor",function(t,e){return 1&e?"start":"end"}).text(k).transition().duration(a).attr("y",b),A.transition().duration(a).text(k).attr("y",b);var D=r.selectAll("text.whisker").data(m||[]);D.enter().append("text").attr("class","whisker").attr("dy",".3em").attr("dx",6).attr("x",i).attr("y",x).text(k).style("opacity",1e-6).transition().duration(a).attr("y",b).style("opacity",1),D.transition().duration(a).text(k).attr("y",b).style("opacity",1),D.exit().transition().duration(a).attr("y",b).style("opacity",1e-6).remove()}),t.timer.flush()}var i=1,o=1,a=0,s=null,l=Number,u=e,c=n,f=null;return r.width=function(t){return arguments.length?(i=t,r):i},r.height=function(t){return arguments.length?(o=t,r):o},r.tickFormat=function(t){return arguments.length?(f=t,r):f},r.duration=function(t){return arguments.length?(a=t,r):a},r.domain=function(e){return arguments.length?(s=null===e?e:t.functor(e),r):s},r.value=function(t){return arguments.length?(l=t,r):l},r.whiskers=function(t){return arguments.length?(u=t,r):u},r.quartiles=function(t){return arguments.length?(c=t,r):c},r}}(),n.boxPlot=function(e,r){function i(t){return function(e){var n=e.quartiles[0],r=e.quartiles[2],i=(r-n)*t,o=-1,a=e.length;do++o;while(e[o]<n-i);do--a;while(e[a]>r+i);return[o,a]}}function o(t){var e=t.enter().append("g");e.attr("class","box").attr("transform",g).call(h).on("click",function(t){l.filter(t.key),l.redrawGroup()})}function a(e){n.transition(e,l.transitionDuration()).attr("transform",g).call(h).each(function(){t.select(this).select("rect.box").attr("fill",l.getColor)})}function s(t){t.exit().remove().call(h)}var l=n.coordinateGridMixin({}),u=1.5,c=i,f=c(u),h=t.box(),d=null,p=function(t,e){return l.isOrdinal()?l.x().rangeBand():t/(1+l.boxPadding())/e};l.yAxisPadding(12),l.x(t.scale.ordinal()),l.xUnits(n.units.ordinal),l.data(function(t){return t.all().map(function(t){return t.map=function(e){return e.call(t,t)},t}).filter(function(t){var e=l.valueAccessor()(t);return 0!==e.length})}),l.boxPadding=l._rangeBandPadding,l.boxPadding(.8),l.outerPadding=l._outerRangeBandPadding,l.outerPadding(.5),l.boxWidth=function(e){return arguments.length?(p=t.functor(e),l):p};var g=function(t,e){var n=l.x()(l.keyAccessor()(t,e));return"translate("+n+", 0)"};return l._preprocessData=function(){l.elasticX()&&l.x().domain([])},l.plotData=function(){var t=p(l.effectiveWidth(),l.xUnitCount());h.whiskers(f).width(t).height(l.effectiveHeight()).value(l.valueAccessor()).domain(l.y().domain()).duration(l.transitionDuration()).tickFormat(d);var e=l.chartBodyG().selectAll("g.box").data(l.data(),function(t){return t.key});o(e),a(e),s(e),l.fadeDeselectedArea()},l.fadeDeselectedArea=function(){l.hasFilter()?l.g().selectAll("g.box").each(function(t){l.isSelectedNode(t)?l.highlightSelected(this):l.fadeDeselected(this)}):l.g().selectAll("g.box").each(function(){l.resetHighlight(this)})},l.isSelectedNode=function(t){return l.hasFilter(t.key)},l.yAxisMin=function(){var e=t.min(l.data(),function(e){return t.min(l.valueAccessor()(e))});return n.utils.subtract(e,l.yAxisPadding())},l.yAxisMax=function(){var e=t.max(l.data(),function(e){return t.max(l.valueAccessor()(e))});return n.utils.add(e,l.yAxisPadding())},l.tickFormat=function(t){return arguments.length?(d=t,l):d},l.anchor(e,r)},n.abstractBubbleChart=n.bubbleMixin,n.baseChart=n.baseMixin,n.capped=n.capMixin,n.colorChart=n.colorMixin,n.coordinateGridChart=n.coordinateGridMixin,n.marginable=n.marginMixin,n.stackableChart=n.stackMixin,n.d3=t,n.crossfilter=e,n}if("function"==typeof define&&define.amd)define(["d3","crossfilter"],t);else if("object"==typeof module&&module.exports){var e=require("d3"),n=require("crossfilter");"function"!=typeof n&&(n=n.crossfilter),module.exports=t(e,n)}else this.dc=t(d3,crossfilter)}(),function(t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e,n){return e||(e=window),n||(n="undefined"!=typeof window?require("jquery"):require("jquery")(e)),t(n,e,e.document)}:t(jQuery,window,document)}(function(t,e,n,r){function i(e){var n,r,o={};t.each(e,function(t){(n=t.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(n[1]+" ")&&(r=t.replace(n[0],n[2].toLowerCase()),o[r]=t,"o"===n[1]&&i(e[t]))}),e._hungarianMap=o}function o(e,n,a){e._hungarianMap||i(e);var s;t.each(n,function(i){s=e._hungarianMap[i],s===r||!a&&n[s]!==r||("o"===s.charAt(0)?(n[s]||(n[s]={}),t.extend(!0,n[s],n[i]),o(e[s],n[s],a)):n[s]=n[i])})}function a(t){var e=Wt.defaults.oLanguage,n=t.sZeroRecords;!t.sEmptyTable&&n&&"No data available in table"===e.sEmptyTable&&Lt(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&n&&"Loading..."===e.sLoadingRecords&&Lt(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands),(t=t.sDecimal)&&Bt(t)}function s(t){if(he(t,"ordering","bSort"),he(t,"orderMulti","bSortMulti"),he(t,"orderClasses","bSortClasses"),he(t,"orderCellsTop","bSortCellsTop"),he(t,"order","aaSorting"),he(t,"orderFixed","aaSortingFixed"),he(t,"paging","bPaginate"),he(t,"pagingType","sPaginationType"),he(t,"pageLength","iDisplayLength"),he(t,"searching","bFilter"),"boolean"==typeof t.sScrollX&&(t.sScrollX=t.sScrollX?"100%":""),"boolean"==typeof t.scrollX&&(t.scrollX=t.scrollX?"100%":""),t=t.aoSearchCols)for(var e=0,n=t.length;e<n;e++)t[e]&&o(Wt.models.oSearch,t[e])}function l(e){he(e,"orderable","bSortable"),he(e,"orderData","aDataSort"),he(e,"orderSequence","asSorting"),he(e,"orderDataType","sortDataType");var n=e.aDataSort;n&&!t.isArray(n)&&(e.aDataSort=[n])}function u(e){if(!Wt.__browser){var n={};Wt.__browser=n;var r=t("<div/>").css({position:"fixed",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(t("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(t("<div/>").css({width:"100%",height:10}))).appendTo("body"),i=r.children(),o=i.children();n.barWidth=i[0].offsetWidth-i[0].clientWidth,n.bScrollOversize=100===o[0].offsetWidth&&100!==i[0].clientWidth,n.bScrollbarLeft=1!==Math.round(o.offset().left),n.bBounding=!!r[0].getBoundingClientRect().width,r.remove()}t.extend(e.oBrowser,Wt.__browser),e.oScroll.iBarWidth=Wt.__browser.barWidth}function c(t,e,n,i,o,a){var s,l=!1;for(n!==r&&(s=n,l=!0);i!==o;)t.hasOwnProperty(i)&&(s=l?e(s,t[i],i,t):t[i],l=!0,i+=a);return s}function f(e,r){var i=Wt.defaults.column,o=e.aoColumns.length,i=t.extend({},Wt.models.oColumn,i,{nTh:r?r:n.createElement("th"),sTitle:i.sTitle?i.sTitle:r?r.innerHTML:"",aDataSort:i.aDataSort?i.aDataSort:[o],mData:i.mData?i.mData:o,idx:o});e.aoColumns.push(i),i=e.aoPreSearchCols,i[o]=t.extend({},Wt.models.oSearch,i[o]),h(e,o,t(r).data())}function h(e,n,i){var n=e.aoColumns[n],a=e.oClasses,s=t(n.nTh);if(!n.sWidthOrig){n.sWidthOrig=s.attr("width")||null;var u=(s.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);u&&(n.sWidthOrig=u[1])}i!==r&&null!==i&&(l(i),o(Wt.defaults.column,i),i.mDataProp!==r&&!i.mData&&(i.mData=i.mDataProp),i.sType&&(n._sManualType=i.sType),i.className&&!i.sClass&&(i.sClass=i.className),t.extend(n,i),Lt(n,i,"sWidth","sWidthOrig"),i.iDataSort!==r&&(n.aDataSort=[i.iDataSort]),Lt(n,i,"aDataSort"));var c=n.mData,f=C(c),h=n.mRender?C(n.mRender):null,i=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};n._bAttrSrc=t.isPlainObject(c)&&(i(c.sort)||i(c.type)||i(c.filter)),n._setter=null,n.fnGetData=function(t,e,n){var i=f(t,e,r,n);return h&&e?h(i,e,t,n):i},n.fnSetData=function(t,e,n){return k(c)(t,e,n)},"number"!=typeof c&&(e._rowReadObject=!0),e.oFeatures.bSort||(n.bSortable=!1,s.addClass(a.sSortableNone)),e=-1!==t.inArray("asc",n.asSorting),i=-1!==t.inArray("desc",n.asSorting),n.bSortable&&(e||i)?e&&!i?(n.sSortingClass=a.sSortableAsc,n.sSortingClassJUI=a.sSortJUIAscAllowed):!e&&i?(n.sSortingClass=a.sSortableDesc,n.sSortingClassJUI=a.sSortJUIDescAllowed):(n.sSortingClass=a.sSortable,n.sSortingClassJUI=a.sSortJUI):(n.sSortingClass=a.sSortableNone,n.sSortingClassJUI="")}function d(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;vt(t);for(var n=0,r=e.length;n<r;n++)e[n].nTh.style.width=e[n].sWidth}e=t.oScroll,(""!==e.sY||""!==e.sX)&&pt(t),Ft(t,null,"column-sizing",[t])}function p(t,e){var n=m(t,"bVisible");return"number"==typeof n[e]?n[e]:null}function g(e,n){var r=m(e,"bVisible"),r=t.inArray(n,r);return-1!==r?r:null}function v(e){return t(se(e.aoColumns,"nTh")).filter(":visible").length}function m(e,n){var r=[];return t.map(e.aoColumns,function(t,e){t[n]&&r.push(e)}),r}function y(t){var e,n,i,o,a,s,l,u,c,f=t.aoColumns,h=t.aoData,d=Wt.ext.type.detect;for(e=0,n=f.length;e<n;e++)if(l=f[e],c=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(i=0,o=d.length;i<o;i++){for(a=0,s=h.length;a<s&&(c[a]===r&&(c[a]=w(t,a,e,"type")),u=d[i](c[a],t),u||i===d.length-1)&&"html"!==u;a++);if(u){l.sType=u;break}}l.sType||(l.sType="string")}}function b(e,n,i,o){var a,s,l,u,c,h,d=e.aoColumns;if(n)for(a=n.length-1;0<=a;a--){h=n[a];var p=h.targets!==r?h.targets:h.aTargets;for(t.isArray(p)||(p=[p]),s=0,l=p.length;s<l;s++)if("number"==typeof p[s]&&0<=p[s]){for(;d.length<=p[s];)f(e);o(p[s],h)}else if("number"==typeof p[s]&&0>p[s])o(d.length+p[s],h);else if("string"==typeof p[s])for(u=0,c=d.length;u<c;u++)("_all"==p[s]||t(d[u].nTh).hasClass(p[s]))&&o(u,h)}if(i)for(a=0,e=i.length;a<e;a++)o(a,i[a])}function x(e,n,i,o){var a=e.aoData.length,s=t.extend(!0,{},Wt.models.oRow,{src:i?"dom":"data",idx:a});s._aData=n,e.aoData.push(s);for(var l=e.aoColumns,u=0,c=l.length;u<c;u++)l[u].sType=null;return e.aiDisplayMaster.push(a),n=e.rowIdFn(n),n!==r&&(e.aIds[n]=s),(i||!e.oFeatures.bDeferRender)&&N(e,a,i,o),a}function _(e,n){var r;return n instanceof t||(n=t(n)),n.map(function(t,n){return r=j(e,n),x(e,r.data,n,r.cells)})}function w(t,e,n,i){var o=t.iDraw,a=t.aoColumns[n],s=t.aoData[e]._aData,l=a.sDefaultContent,u=a.fnGetData(s,i,{settings:t,row:e,col:n});if(u===r)return t.iDrawError!=o&&null===l&&(Nt(t,0,"Requested unknown parameter "+("function"==typeof a.mData?"{function}":"'"+a.mData+"'")+" for row "+e+", column "+n,4),t.iDrawError=o),l;if(u!==s&&null!==u||null===l||i===r){if("function"==typeof u)return u.call(s)}else u=l;return null===u&&"display"==i?"":u}function S(t,e,n,r){t.aoColumns[n].fnSetData(t.aoData[e]._aData,r,{settings:t,row:e,col:n})}function T(e){return t.map(e.match(/(\\.|[^\.])+/g)||[""],function(t){return t.replace(/\\./g,".")})}function C(e){if(t.isPlainObject(e)){var n={};return t.each(e,function(t,e){e&&(n[t]=C(e))}),function(t,e,i,o){var a=n[e]||n._;return a!==r?a(t,e,i,o):t}}if(null===e)return function(t){return t};if("function"==typeof e)return function(t,n,r,i){return e(t,n,r,i)};if("string"==typeof e&&(-1!==e.indexOf(".")||-1!==e.indexOf("[")||-1!==e.indexOf("("))){var i=function(e,n,o){var a,s;if(""!==o){s=T(o);for(var l=0,u=s.length;l<u;l++){if(o=s[l].match(de),a=s[l].match(pe),o){if(s[l]=s[l].replace(de,""),""!==s[l]&&(e=e[s[l]]),a=[],s.splice(0,l+1),s=s.join("."),t.isArray(e))for(l=0,u=e.length;l<u;l++)a.push(i(e[l],n,s));e=o[0].substring(1,o[0].length-1),e=""===e?a:a.join(e);break}if(a)s[l]=s[l].replace(pe,""),e=e[s[l]]();else{if(null===e||e[s[l]]===r)return r;e=e[s[l]]}}}return e};return function(t,n){return i(t,n,e)}}return function(t){return t[e]}}function k(e){if(t.isPlainObject(e))return k(e._);if(null===e)return function(){};if("function"==typeof e)return function(t,n,r){e(t,"set",n,r)};if("string"==typeof e&&(-1!==e.indexOf(".")||-1!==e.indexOf("[")||-1!==e.indexOf("("))){var n=function(e,i,o){var a,o=T(o);a=o[o.length-1];for(var s,l,u=0,c=o.length-1;u<c;u++){if(s=o[u].match(de),l=o[u].match(pe),s){if(o[u]=o[u].replace(de,""),e[o[u]]=[],a=o.slice(),a.splice(0,u+1),s=a.join("."),t.isArray(i))for(l=0,c=i.length;l<c;l++)a={},n(a,i[l],s),e[o[u]].push(a);else e[o[u]]=i;return}l&&(o[u]=o[u].replace(pe,""),e=e[o[u]](i)),null!==e[o[u]]&&e[o[u]]!==r||(e[o[u]]={}),e=e[o[u]]}a.match(pe)?e[a.replace(pe,"")](i):e[a.replace(de,"")]=i};return function(t,r){return n(t,r,e)}}return function(t,n){t[e]=n}}function A(t){return se(t.aoData,"_aData")}function D(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0,t.aIds={}}function E(t,e,n){for(var i=-1,o=0,a=t.length;o<a;o++)t[o]==e?i=o:t[o]>e&&t[o]--;-1!=i&&n===r&&t.splice(i,1)}function M(t,e,n,i){var o,a=t.aoData[e],s=function(n,r){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=w(t,e,r,"display")};if("dom"!==n&&(n&&"auto"!==n||"dom"!==a.src)){var l=a.anCells;if(l)if(i!==r)s(l[i],i);else for(n=0,o=l.length;n<o;n++)s(l[n],n)}else a._aData=j(t,a,i,i===r?r:a._aData).data;if(a._aSortData=null,a._aFilterData=null,s=t.aoColumns,i!==r)s[i].sType=null;else{for(n=0,o=s.length;n<o;n++)s[n].sType=null;L(t,a)}}function j(e,n,i,o){var a,s,l,u=[],c=n.firstChild,f=0,h=e.aoColumns,d=e._rowReadObject,o=o!==r?o:d?{}:[],p=function(t,e){if("string"==typeof t){var n=t.indexOf("@");-1!==n&&(n=t.substring(n+1),k(t)(o,e.getAttribute(n)))}},g=function(e){i!==r&&i!==f||(s=h[f],l=t.trim(e.innerHTML),s&&s._bAttrSrc?(k(s.mData._)(o,l),p(s.mData.sort,e),p(s.mData.type,e),p(s.mData.filter,e)):d?(s._setter||(s._setter=k(s.mData)),s._setter(o,l)):o[f]=l),f++};if(c)for(;c;)a=c.nodeName.toUpperCase(),"TD"!=a&&"TH"!=a||(g(c),u.push(c)),c=c.nextSibling;else for(u=n.anCells,c=0,a=u.length;c<a;c++)g(u[c]);return(n=n.firstChild?n:n.nTr)&&(n=n.getAttribute("id"))&&k(e.rowId)(o,n),{data:o,cells:u}}function N(e,r,i,o){var a,s,l,u,c,f=e.aoData[r],h=f._aData,d=[];if(null===f.nTr){for(a=i||n.createElement("tr"),f.nTr=a,f.anCells=d,a._DT_RowIndex=r,L(e,f),u=0,c=e.aoColumns.length;u<c;u++)l=e.aoColumns[u],s=i?o[u]:n.createElement(l.sCellType),s._DT_CellIndex={row:r,column:u},d.push(s),i&&!l.mRender&&l.mData===u||t.isPlainObject(l.mData)&&l.mData._===u+".display"||(s.innerHTML=w(e,r,u,"display")),l.sClass&&(s.className+=" "+l.sClass),l.bVisible&&!i?a.appendChild(s):!l.bVisible&&i&&s.parentNode.removeChild(s),l.fnCreatedCell&&l.fnCreatedCell.call(e.oInstance,s,w(e,r,u),h,r,u);Ft(e,"aoRowCreatedCallback",null,[a,h,r])}f.nTr.setAttribute("role","row")}function L(e,n){var r=n.nTr,i=n._aData;if(r){var o=e.rowIdFn(i);o&&(r.id=o),i.DT_RowClass&&(o=i.DT_RowClass.split(" "),n.__rowc=n.__rowc?fe(n.__rowc.concat(o)):o,t(r).removeClass(n.__rowc.join(" ")).addClass(i.DT_RowClass)),i.DT_RowAttr&&t(r).attr(i.DT_RowAttr),i.DT_RowData&&t(r).data(i.DT_RowData)}}function R(e){var n,r,i,o,a,s=e.nTHead,l=e.nTFoot,u=0===t("th, td",s).length,c=e.oClasses,f=e.aoColumns;for(u&&(o=t("<tr/>").appendTo(s)),n=0,r=f.length;n<r;n++)a=f[n],i=t(a.nTh).addClass(a.sClass),u&&i.appendTo(o),e.oFeatures.bSort&&(i.addClass(a.sSortingClass),!1!==a.bSortable&&(i.attr("tabindex",e.iTabIndex).attr("aria-controls",e.sTableId),kt(e,a.nTh,n))),a.sTitle!=i[0].innerHTML&&i.html(a.sTitle),Pt(e,"header")(e,i,a,c);if(u&&P(e.aoHeader,s),t(s).find(">tr").attr("role","row"),t(s).find(">tr>th, >tr>td").addClass(c.sHeaderTH),t(l).find(">tr>th, >tr>td").addClass(c.sFooterTH),null!==l)for(e=e.aoFooter[0],n=0,r=e.length;n<r;n++)a=f[n],a.nTf=e[n].cell,a.sClass&&t(a.nTf).addClass(a.sClass)}function I(e,n,i){var o,a,s,l,u=[],c=[],f=e.aoColumns.length;if(n){for(i===r&&(i=!1),o=0,a=n.length;o<a;o++){for(u[o]=n[o].slice(),u[o].nTr=n[o].nTr,s=f-1;0<=s;s--)!e.aoColumns[s].bVisible&&!i&&u[o].splice(s,1);c.push([])}for(o=0,a=u.length;o<a;o++){if(e=u[o].nTr)for(;s=e.firstChild;)e.removeChild(s);for(s=0,n=u[o].length;s<n;s++)if(l=f=1,c[o][s]===r){for(e.appendChild(u[o][s].cell),c[o][s]=1;u[o+f]!==r&&u[o][s].cell==u[o+f][s].cell;)c[o+f][s]=1,f++;for(;u[o][s+l]!==r&&u[o][s].cell==u[o][s+l].cell;){for(i=0;i<f;i++)c[o+i][s+l]=1;l++}t(u[o][s].cell).attr("rowspan",f).attr("colspan",l)}}}}function O(e){var n=Ft(e,"aoPreDrawCallback","preDraw",[e]);if(-1!==t.inArray(!1,n))ht(e,!1);else{var n=[],i=0,o=e.asStripeClasses,a=o.length,s=e.oLanguage,l=e.iInitDisplayStart,u="ssp"==qt(e),c=e.aiDisplay;e.bDrawing=!0,l!==r&&-1!==l&&(e._iDisplayStart=u?l:l>=e.fnRecordsDisplay()?0:l,e.iInitDisplayStart=-1);var l=e._iDisplayStart,f=e.fnDisplayEnd();if(e.bDeferLoading)e.bDeferLoading=!1,e.iDraw++,ht(e,!1);else if(u){if(!e.bDestroying&&!B(e))return}else e.iDraw++;if(0!==c.length)for(s=u?e.aoData.length:f,
u=u?0:l;u<s;u++){var h=c[u],d=e.aoData[h];if(null===d.nTr&&N(e,h),h=d.nTr,0!==a){var p=o[i%a];d._sRowStripe!=p&&(t(h).removeClass(d._sRowStripe).addClass(p),d._sRowStripe=p)}Ft(e,"aoRowCallback",null,[h,d._aData,i,u]),n.push(h),i++}else i=s.sZeroRecords,1==e.iDraw&&"ajax"==qt(e)?i=s.sLoadingRecords:s.sEmptyTable&&0===e.fnRecordsTotal()&&(i=s.sEmptyTable),n[0]=t("<tr/>",{"class":a?o[0]:""}).append(t("<td />",{valign:"top",colSpan:v(e),"class":e.oClasses.sRowEmpty}).html(i))[0];Ft(e,"aoHeaderCallback","header",[t(e.nTHead).children("tr")[0],A(e),l,f,c]),Ft(e,"aoFooterCallback","footer",[t(e.nTFoot).children("tr")[0],A(e),l,f,c]),o=t(e.nTBody),o.children().detach(),o.append(t(n)),Ft(e,"aoDrawCallback","draw",[e]),e.bSorted=!1,e.bFiltered=!1,e.bDrawing=!1}}function F(t,e){var n=t.oFeatures,r=n.bFilter;n.bSort&&St(t),r?G(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,O(t),t._drawHold=!1}function z(e){var n=e.oClasses,r=t(e.nTable),r=t("<div/>").insertBefore(r),i=e.oFeatures,o=t("<div/>",{id:e.sTableId+"_wrapper","class":n.sWrapper+(e.nTFoot?"":" "+n.sNoFooter)});e.nHolding=r[0],e.nTableWrapper=o[0],e.nTableReinsertBefore=e.nTable.nextSibling;for(var a,s,l,u,c,f,h=e.sDom.split(""),d=0;d<h.length;d++){if(a=null,s=h[d],"<"==s){if(l=t("<div/>")[0],u=h[d+1],"'"==u||'"'==u){for(c="",f=2;h[d+f]!=u;)c+=h[d+f],f++;"H"==c?c=n.sJUIHeader:"F"==c&&(c=n.sJUIFooter),-1!=c.indexOf(".")?(u=c.split("."),l.id=u[0].substr(1,u[0].length-1),l.className=u[1]):"#"==c.charAt(0)?l.id=c.substr(1,c.length-1):l.className=c,d+=f}o.append(l),o=t(l)}else if(">"==s)o=o.parent();else if("l"==s&&i.bPaginate&&i.bLengthChange)a=lt(e);else if("f"==s&&i.bFilter)a=V(e);else if("r"==s&&i.bProcessing)a=ft(e);else if("t"==s)a=dt(e);else if("i"==s&&i.bInfo)a=nt(e);else if("p"==s&&i.bPaginate)a=ut(e);else if(0!==Wt.ext.feature.length)for(l=Wt.ext.feature,f=0,u=l.length;f<u;f++)if(s==l[f].cFeature){a=l[f].fnInit(e);break}a&&(l=e.aanFeatures,l[s]||(l[s]=[]),l[s].push(a),o.append(a))}r.replaceWith(o),e.nHolding=null}function P(e,n){var r,i,o,a,s,l,u,c,f,h,d=t(n).children("tr");for(e.splice(0,e.length),o=0,l=d.length;o<l;o++)e.push([]);for(o=0,l=d.length;o<l;o++)for(r=d[o],i=r.firstChild;i;){if("TD"==i.nodeName.toUpperCase()||"TH"==i.nodeName.toUpperCase()){for(c=1*i.getAttribute("colspan"),f=1*i.getAttribute("rowspan"),c=c&&0!==c&&1!==c?c:1,f=f&&0!==f&&1!==f?f:1,a=0,s=e[o];s[a];)a++;for(u=a,h=1===c,s=0;s<c;s++)for(a=0;a<f;a++)e[o+a][u+s]={cell:i,unique:h},e[o+a].nTr=r}i=i.nextSibling}}function q(t,e,n){var r=[];n||(n=t.aoHeader,e&&(n=[],P(n,e)));for(var e=0,i=n.length;e<i;e++)for(var o=0,a=n[e].length;o<a;o++)!n[e][o].unique||r[o]&&t.bSortCellsTop||(r[o]=n[e][o].cell);return r}function H(e,n,r){if(Ft(e,"aoServerParams","serverParams",[n]),n&&t.isArray(n)){var i={},o=/(.*?)\[\]$/;t.each(n,function(t,e){var n=e.name.match(o);n?(n=n[0],i[n]||(i[n]=[]),i[n].push(e.value)):i[e.name]=e.value}),n=i}var a,s=e.ajax,l=e.oInstance,u=function(t){Ft(e,null,"xhr",[e,t,e.jqXHR]),r(t)};if(t.isPlainObject(s)&&s.data){a=s.data;var c=t.isFunction(a)?a(n,e):a,n=t.isFunction(a)&&c?c:t.extend(!0,n,c);delete s.data}c={data:n,success:function(t){var n=t.error||t.sError;n&&Nt(e,0,n),e.json=t,u(t)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(n,r){var i=Ft(e,null,"xhr",[e,null,e.jqXHR]);-1===t.inArray(!0,i)&&("parsererror"==r?Nt(e,0,"Invalid JSON response",1):4===n.readyState&&Nt(e,0,"Ajax error",7)),ht(e,!1)}},e.oAjaxData=n,Ft(e,null,"preXhr",[e,n]),e.fnServerData?e.fnServerData.call(l,e.sAjaxSource,t.map(n,function(t,e){return{name:e,value:t}}),u,e):e.sAjaxSource||"string"==typeof s?e.jqXHR=t.ajax(t.extend(c,{url:s||e.sAjaxSource})):t.isFunction(s)?e.jqXHR=s.call(l,n,u,e):(e.jqXHR=t.ajax(t.extend(c,s)),s.data=a)}function B(t){return!t.bAjaxDataGet||(t.iDraw++,ht(t,!0),H(t,$(t),function(e){W(t,e)}),!1)}function $(e){var n,r,i,o,a=e.aoColumns,s=a.length,l=e.oFeatures,u=e.oPreviousSearch,c=e.aoPreSearchCols,f=[],h=wt(e);n=e._iDisplayStart,r=!1!==l.bPaginate?e._iDisplayLength:-1;var d=function(t,e){f.push({name:t,value:e})};d("sEcho",e.iDraw),d("iColumns",s),d("sColumns",se(a,"sName").join(",")),d("iDisplayStart",n),d("iDisplayLength",r);var p={draw:e.iDraw,columns:[],order:[],start:n,length:r,search:{value:u.sSearch,regex:u.bRegex}};for(n=0;n<s;n++)i=a[n],o=c[n],r="function"==typeof i.mData?"function":i.mData,p.columns.push({data:r,name:i.sName,searchable:i.bSearchable,orderable:i.bSortable,search:{value:o.sSearch,regex:o.bRegex}}),d("mDataProp_"+n,r),l.bFilter&&(d("sSearch_"+n,o.sSearch),d("bRegex_"+n,o.bRegex),d("bSearchable_"+n,i.bSearchable)),l.bSort&&d("bSortable_"+n,i.bSortable);return l.bFilter&&(d("sSearch",u.sSearch),d("bRegex",u.bRegex)),l.bSort&&(t.each(h,function(t,e){p.order.push({column:e.col,dir:e.dir}),d("iSortCol_"+t,e.col),d("sSortDir_"+t,e.dir)}),d("iSortingCols",h.length)),a=Wt.ext.legacy.ajax,null===a?e.sAjaxSource?f:p:a?f:p}function W(t,e){var n=U(t,e),i=e.sEcho!==r?e.sEcho:e.draw,o=e.iTotalRecords!==r?e.iTotalRecords:e.recordsTotal,a=e.iTotalDisplayRecords!==r?e.iTotalDisplayRecords:e.recordsFiltered;if(i){if(1*i<t.iDraw)return;t.iDraw=1*i}for(D(t),t._iRecordsTotal=parseInt(o,10),t._iRecordsDisplay=parseInt(a,10),i=0,o=n.length;i<o;i++)x(t,n[i]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,O(t),t._bInitComplete||at(t,e),t.bAjaxDataGet=!0,ht(t,!1)}function U(e,n){var i=t.isPlainObject(e.ajax)&&e.ajax.dataSrc!==r?e.ajax.dataSrc:e.sAjaxDataProp;return"data"===i?n.aaData||n[i]:""!==i?C(i)(n):n}function V(e){var r=e.oClasses,i=e.sTableId,o=e.oLanguage,a=e.oPreviousSearch,s=e.aanFeatures,l='<input type="search" class="'+r.sFilterInput+'"/>',u=o.sSearch,u=u.match(/_INPUT_/)?u.replace("_INPUT_",l):u+l,r=t("<div/>",{id:s.f?null:i+"_filter","class":r.sFilter}).append(t("<label/>").append(u)),s=function(){var t=this.value?this.value:"";t!=a.sSearch&&(G(e,{sSearch:t,bRegex:a.bRegex,bSmart:a.bSmart,bCaseInsensitive:a.bCaseInsensitive}),e._iDisplayStart=0,O(e))},l=null!==e.searchDelay?e.searchDelay:"ssp"===qt(e)?400:0,c=t("input",r).val(a.sSearch).attr("placeholder",o.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",l?mt(s,l):s).bind("keypress.DT",function(t){if(13==t.keyCode)return!1}).attr("aria-controls",i);return t(e.nTable).on("search.dt.DT",function(t,r){if(e===r)try{c[0]!==n.activeElement&&c.val(a.sSearch)}catch(i){}}),r[0]}function G(t,e,n){var i=t.oPreviousSearch,o=t.aoPreSearchCols,a=function(t){i.sSearch=t.sSearch,i.bRegex=t.bRegex,i.bSmart=t.bSmart,i.bCaseInsensitive=t.bCaseInsensitive};if(y(t),"ssp"!=qt(t)){for(J(t,e.sSearch,n,e.bEscapeRegex!==r?!e.bEscapeRegex:e.bRegex,e.bSmart,e.bCaseInsensitive),a(e),e=0;e<o.length;e++)X(t,o[e].sSearch,e,o[e].bEscapeRegex!==r?!o[e].bEscapeRegex:o[e].bRegex,o[e].bSmart,o[e].bCaseInsensitive);Y(t)}else a(e);t.bFiltered=!0,Ft(t,null,"search",[t])}function Y(e){for(var n,r,i=Wt.ext.search,o=e.aiDisplay,a=0,s=i.length;a<s;a++){for(var l=[],u=0,c=o.length;u<c;u++)r=o[u],n=e.aoData[r],i[a](e,n._aFilterData,r,n._aData,u)&&l.push(r);o.length=0,t.merge(o,l)}}function X(t,e,n,r,i,o){if(""!==e)for(var a=t.aiDisplay,r=Z(e,r,i,o),i=a.length-1;0<=i;i--)e=t.aoData[a[i]]._aFilterData[n],r.test(e)||a.splice(i,1)}function J(t,e,n,r,i,o){var a,r=Z(e,r,i,o),i=t.oPreviousSearch.sSearch,o=t.aiDisplayMaster;if(0!==Wt.ext.search.length&&(n=!0),a=Q(t),0>=e.length)t.aiDisplay=o.slice();else for((a||n||i.length>e.length||0!==e.indexOf(i)||t.bSorted)&&(t.aiDisplay=o.slice()),e=t.aiDisplay,n=e.length-1;0<=n;n--)r.test(t.aoData[e[n]]._sFilterRow)||e.splice(n,1)}function Z(e,n,r,i){return e=n?e:K(e),r&&(e="^(?=.*?"+t.map(e.match(/"[^"]+"|[^ ]+/g)||[""],function(t){if('"'===t.charAt(0))var e=t.match(/^"(.*)"$/),t=e?e[1]:t;return t.replace('"',"")}).join(")(?=.*?")+").*$"),RegExp(e,i?"i":"")}function K(t){return t.replace(te,"\\$1")}function Q(t){var e,n,r,i,o,a,s,l,u=t.aoColumns,c=Wt.ext.type.search;for(e=!1,n=0,i=t.aoData.length;n<i;n++)if(l=t.aoData[n],!l._aFilterData){for(a=[],r=0,o=u.length;r<o;r++)e=u[r],e.bSearchable?(s=w(t,n,r,"filter"),c[e.sType]&&(s=c[e.sType](s)),null===s&&(s=""),"string"!=typeof s&&s.toString&&(s=s.toString())):s="",s.indexOf&&-1!==s.indexOf("&")&&(ge.innerHTML=s,s=ve?ge.textContent:ge.innerText),s.replace&&(s=s.replace(/[\r\n]/g,"")),a.push(s);l._aFilterData=a,l._sFilterRow=a.join("  "),e=!0}return e}function tt(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function et(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function nt(e){var n=e.sTableId,r=e.aanFeatures.i,i=t("<div/>",{"class":e.oClasses.sInfo,id:r?null:n+"_info"});return r||(e.aoDrawCallback.push({fn:rt,sName:"information"}),i.attr("role","status").attr("aria-live","polite"),t(e.nTable).attr("aria-describedby",n+"_info")),i[0]}function rt(e){var n=e.aanFeatures.i;if(0!==n.length){var r=e.oLanguage,i=e._iDisplayStart+1,o=e.fnDisplayEnd(),a=e.fnRecordsTotal(),s=e.fnRecordsDisplay(),l=s?r.sInfo:r.sInfoEmpty;s!==a&&(l+=" "+r.sInfoFiltered),l+=r.sInfoPostFix,l=it(e,l),r=r.fnInfoCallback,null!==r&&(l=r.call(e.oInstance,e,i,o,a,s,l)),t(n).html(l)}}function it(t,e){var n=t.fnFormatNumber,r=t._iDisplayStart+1,i=t._iDisplayLength,o=t.fnRecordsDisplay(),a=-1===i;return e.replace(/_START_/g,n.call(t,r)).replace(/_END_/g,n.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,n.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(t,o)).replace(/_PAGE_/g,n.call(t,a?1:Math.ceil(r/i))).replace(/_PAGES_/g,n.call(t,a?1:Math.ceil(o/i)))}function ot(t){var e,n,r,i=t.iInitDisplayStart,o=t.aoColumns;n=t.oFeatures;var a=t.bDeferLoading;if(t.bInitialised){for(z(t),R(t),I(t,t.aoHeader),I(t,t.aoFooter),ht(t,!0),n.bAutoWidth&&vt(t),e=0,n=o.length;e<n;e++)r=o[e],r.sWidth&&(r.nTh.style.width=_t(r.sWidth));Ft(t,null,"preInit",[t]),F(t),o=qt(t),("ssp"!=o||a)&&("ajax"==o?H(t,[],function(n){var r=U(t,n);for(e=0;e<r.length;e++)x(t,r[e]);t.iInitDisplayStart=i,F(t),ht(t,!1),at(t,n)},t):(ht(t,!1),at(t)))}else setTimeout(function(){ot(t)},200)}function at(t,e){t._bInitComplete=!0,(e||t.oInit.aaData)&&d(t),Ft(t,null,"plugin-init",[t,e]),Ft(t,"aoInitComplete","init",[t,e])}function st(t,e){var n=parseInt(e,10);t._iDisplayLength=n,zt(t),Ft(t,null,"length",[t,n])}function lt(e){for(var n=e.oClasses,r=e.sTableId,i=e.aLengthMenu,o=t.isArray(i[0]),a=o?i[0]:i,i=o?i[1]:i,o=t("<select/>",{name:r+"_length","aria-controls":r,"class":n.sLengthSelect}),s=0,l=a.length;s<l;s++)o[0][s]=new Option(i[s],a[s]);var u=t("<div><label/></div>").addClass(n.sLength);return e.aanFeatures.l||(u[0].id=r+"_length"),u.children().append(e.oLanguage.sLengthMenu.replace("_MENU_",o[0].outerHTML)),t("select",u).val(e._iDisplayLength).bind("change.DT",function(){st(e,t(this).val()),O(e)}),t(e.nTable).bind("length.dt.DT",function(n,r,i){e===r&&t("select",u).val(i)}),u[0]}function ut(e){var n=e.sPaginationType,r=Wt.ext.pager[n],i="function"==typeof r,o=function(t){O(t)},n=t("<div/>").addClass(e.oClasses.sPaging+n)[0],a=e.aanFeatures;return i||r.fnInit(e,n,o),a.p||(n.id=e.sTableId+"_paginate",e.aoDrawCallback.push({fn:function(t){if(i){var e,n=t._iDisplayStart,s=t._iDisplayLength,l=t.fnRecordsDisplay(),u=-1===s,n=u?0:Math.ceil(n/s),s=u?1:Math.ceil(l/s),l=r(n,s),u=0;for(e=a.p.length;u<e;u++)Pt(t,"pageButton")(t,a.p[u],u,l,n,s)}else r.fnUpdate(t,o)},sName:"pagination"})),n}function ct(t,e,n){var r=t._iDisplayStart,i=t._iDisplayLength,o=t.fnRecordsDisplay();return 0===o||-1===i?r=0:"number"==typeof e?(r=e*i,r>o&&(r=0)):"first"==e?r=0:"previous"==e?(r=0<=i?r-i:0,0>r&&(r=0)):"next"==e?r+i<o&&(r+=i):"last"==e?r=Math.floor((o-1)/i)*i:Nt(t,0,"Unknown paging action: "+e,5),e=t._iDisplayStart!==r,t._iDisplayStart=r,e&&(Ft(t,null,"page",[t]),n&&O(t)),e}function ft(e){return t("<div/>",{id:e.aanFeatures.r?null:e.sTableId+"_processing","class":e.oClasses.sProcessing}).html(e.oLanguage.sProcessing).insertBefore(e.nTable)[0]}function ht(e,n){e.oFeatures.bProcessing&&t(e.aanFeatures.r).css("display",n?"block":"none"),Ft(e,null,"processing",[e,n])}function dt(e){var n=t(e.nTable);n.attr("role","grid");var r=e.oScroll;if(""===r.sX&&""===r.sY)return e.nTable;var i=r.sX,o=r.sY,a=e.oClasses,s=n.children("caption"),l=s.length?s[0]._captionSide:null,u=t(n[0].cloneNode(!1)),c=t(n[0].cloneNode(!1)),f=n.children("tfoot");f.length||(f=null),u=t("<div/>",{"class":a.sScrollWrapper}).append(t("<div/>",{"class":a.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?i?_t(i):null:"100%"}).append(t("<div/>",{"class":a.sScrollHeadInner}).css({"box-sizing":"content-box",width:r.sXInner||"100%"}).append(u.removeAttr("id").css("margin-left",0).append("top"===l?s:null).append(n.children("thead"))))).append(t("<div/>",{"class":a.sScrollBody}).css({position:"relative",overflow:"auto",width:i?_t(i):null}).append(n)),f&&u.append(t("<div/>",{"class":a.sScrollFoot}).css({overflow:"hidden",border:0,width:i?i?_t(i):null:"100%"}).append(t("<div/>",{"class":a.sScrollFootInner}).append(c.removeAttr("id").css("margin-left",0).append("bottom"===l?s:null).append(n.children("tfoot")))));var n=u.children(),h=n[0],a=n[1],d=f?n[2]:null;return i&&t(a).on("scroll.DT",function(){var t=this.scrollLeft;h.scrollLeft=t,f&&(d.scrollLeft=t)}),t(a).css(o&&r.bCollapse?"max-height":"height",o),e.nScrollHead=h,e.nScrollBody=a,e.nScrollFoot=d,e.aoDrawCallback.push({fn:pt,sName:"scrolling"}),u[0]}function pt(e){var n,i,o,a,s,l=e.oScroll,u=l.sX,c=l.sXInner,f=l.sY,l=l.iBarWidth,h=t(e.nScrollHead),g=h[0].style,v=h.children("div"),m=v[0].style,y=v.children("table"),v=e.nScrollBody,b=t(v),x=v.style,_=t(e.nScrollFoot).children("div"),w=_.children("table"),S=t(e.nTHead),T=t(e.nTable),C=T[0],k=C.style,A=e.nTFoot?t(e.nTFoot):null,D=e.oBrowser,E=D.bScrollOversize,M=se(e.aoColumns,"nTh"),j=[],N=[],L=[],R=[],I=function(t){t=t.style,t.paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};i=v.scrollHeight>v.clientHeight,e.scrollBarVis!==i&&e.scrollBarVis!==r?(e.scrollBarVis=i,d(e)):(e.scrollBarVis=i,T.children("thead, tfoot").remove(),A&&(o=A.clone().prependTo(T),n=A.find("tr"),o=o.find("tr")),a=S.clone().prependTo(T),S=S.find("tr"),i=a.find("tr"),a.find("th, td").removeAttr("tabindex"),u||(x.width="100%",h[0].style.width="100%"),t.each(q(e,a),function(t,n){s=p(e,t),n.style.width=e.aoColumns[s].sWidth}),A&&gt(function(t){t.style.width=""},o),h=T.outerWidth(),""===u?(k.width="100%",E&&(T.find("tbody").height()>v.offsetHeight||"scroll"==b.css("overflow-y"))&&(k.width=_t(T.outerWidth()-l)),h=T.outerWidth()):""!==c&&(k.width=_t(c),h=T.outerWidth()),gt(I,i),gt(function(e){L.push(e.innerHTML),j.push(_t(t(e).css("width")))},i),gt(function(e,n){t.inArray(e,M)!==-1&&(e.style.width=j[n])},S),t(i).height(0),A&&(gt(I,o),gt(function(e){R.push(e.innerHTML),N.push(_t(t(e).css("width")))},o),gt(function(t,e){t.style.width=N[e]},n),t(o).height(0)),gt(function(t,e){t.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+L[e]+"</div>",t.style.width=j[e]},i),A&&gt(function(t,e){t.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+R[e]+"</div>",t.style.width=N[e]},o),T.outerWidth()<h?(n=v.scrollHeight>v.offsetHeight||"scroll"==b.css("overflow-y")?h+l:h,E&&(v.scrollHeight>v.offsetHeight||"scroll"==b.css("overflow-y"))&&(k.width=_t(n-l)),(""===u||""!==c)&&Nt(e,1,"Possible column misalignment",6)):n="100%",x.width=_t(n),g.width=_t(n),A&&(e.nScrollFoot.style.width=_t(n)),!f&&E&&(x.height=_t(C.offsetHeight+l)),u=T.outerWidth(),y[0].style.width=_t(u),m.width=_t(u),c=T.height()>v.clientHeight||"scroll"==b.css("overflow-y"),f="padding"+(D.bScrollbarLeft?"Left":"Right"),m[f]=c?l+"px":"0px",A&&(w[0].style.width=_t(u),_[0].style.width=_t(u),_[0].style[f]=c?l+"px":"0px"),T.children("colgroup").insertBefore(T.children("thead")),b.scroll(),!e.bSorted&&!e.bFiltered||e._drawHold||(v.scrollTop=0))}function gt(t,e,n){for(var r,i,o=0,a=0,s=e.length;a<s;){for(r=e[a].firstChild,i=n?n[a].firstChild:null;r;)1===r.nodeType&&(n?t(r,i,o):t(r,o),o++),r=r.nextSibling,i=n?i.nextSibling:null;a++}}function vt(n){var r,i,o=n.nTable,a=n.aoColumns,s=n.oScroll,l=s.sY,u=s.sX,c=s.sXInner,f=a.length,h=m(n,"bVisible"),g=t("th",n.nTHead),y=o.getAttribute("width"),b=o.parentNode,x=!1,_=n.oBrowser,s=_.bScrollOversize;for((r=o.style.width)&&-1!==r.indexOf("%")&&(y=r),r=0;r<h.length;r++)i=a[h[r]],null!==i.sWidth&&(i.sWidth=yt(i.sWidthOrig,b),x=!0);if(s||!x&&!u&&!l&&f==v(n)&&f==g.length)for(r=0;r<f;r++)h=p(n,r),null!==h&&(a[h].sWidth=_t(g.eq(r).width()));else{f=t(o).clone().css("visibility","hidden").removeAttr("id"),f.find("tbody tr").remove();var w=t("<tr/>").appendTo(f.find("tbody"));for(f.find("thead, tfoot").remove(),f.append(t(n.nTHead).clone()).append(t(n.nTFoot).clone()),f.find("tfoot th, tfoot td").css("width",""),g=q(n,f.find("thead")[0]),r=0;r<h.length;r++)i=a[h[r]],g[r].style.width=null!==i.sWidthOrig&&""!==i.sWidthOrig?_t(i.sWidthOrig):"",i.sWidthOrig&&u&&t(g[r]).append(t("<div/>").css({width:i.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(n.aoData.length)for(r=0;r<h.length;r++)x=h[r],i=a[x],t(bt(n,x)).clone(!1).append(i.sContentPadding).appendTo(w);for(t("[name]",f).removeAttr("name"),i=t("<div/>").css(u||l?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(f).appendTo(b),u&&c?f.width(c):u?(f.css("width","auto"),f.removeAttr("width"),f.width()<b.clientWidth&&y&&f.width(b.clientWidth)):l?f.width(b.clientWidth):y&&f.width(y),r=l=0;r<h.length;r++)b=t(g[r]),c=b.outerWidth()-b.width(),b=_.bBounding?Math.ceil(g[r].getBoundingClientRect().width):b.outerWidth(),l+=b,a[h[r]].sWidth=_t(b-c);o.style.width=_t(l),i.remove()}y&&(o.style.width=_t(y)),!y&&!u||n._reszEvt||(o=function(){t(e).bind("resize.DT-"+n.sInstance,mt(function(){d(n)}))},s?setTimeout(o,1e3):o(),n._reszEvt=!0)}function mt(t,e){var n,i,o=e!==r?e:200;return function(){var e=this,a=+new Date,s=arguments;n&&a<n+o?(clearTimeout(i),i=setTimeout(function(){n=r,t.apply(e,s)},o)):(n=a,t.apply(e,s))}}function yt(e,r){if(!e)return 0;var i=t("<div/>").css("width",_t(e)).appendTo(r||n.body),o=i[0].offsetWidth;return i.remove(),o}function bt(e,n){var r=xt(e,n);if(0>r)return null;var i=e.aoData[r];return i.nTr?i.anCells[n]:t("<td/>").html(w(e,r,n,"display"))[0]}function xt(t,e){for(var n,r=-1,i=-1,o=0,a=t.aoData.length;o<a;o++)n=w(t,o,e,"display")+"",n=n.replace(me,""),n=n.replace(/&nbsp;/g," "),n.length>r&&(r=n.length,i=o);return i}function _t(t){return null===t?"0px":"number"==typeof t?0>t?"0px":t+"px":t.match(/\d$/)?t+"px":t}function wt(e){var n,i,o,a,s,l,u=[],c=e.aoColumns;n=e.aaSortingFixed,i=t.isPlainObject(n);var f=[];for(o=function(e){e.length&&!t.isArray(e[0])?f.push(e):t.merge(f,e)},t.isArray(n)&&o(n),i&&n.pre&&o(n.pre),o(e.aaSorting),i&&n.post&&o(n.post),e=0;e<f.length;e++)for(l=f[e][0],o=c[l].aDataSort,n=0,i=o.length;n<i;n++)a=o[n],s=c[a].sType||"string",f[e]._idx===r&&(f[e]._idx=t.inArray(f[e][1],c[a].asSorting)),u.push({src:l,col:a,dir:f[e][1],index:f[e]._idx,type:s,formatter:Wt.ext.type.order[s+"-pre"]});return u}function St(t){var e,n,r,i,o=[],a=Wt.ext.type.order,s=t.aoData,l=0,u=t.aiDisplayMaster;for(y(t),i=wt(t),e=0,n=i.length;e<n;e++)r=i[e],r.formatter&&l++,Dt(t,r.col);if("ssp"!=qt(t)&&0!==i.length){for(e=0,n=u.length;e<n;e++)o[u[e]]=e;l===i.length?u.sort(function(t,e){var n,r,a,l,u=i.length,c=s[t]._aSortData,f=s[e]._aSortData;for(a=0;a<u;a++)if(l=i[a],n=c[l.col],r=f[l.col],n=n<r?-1:n>r?1:0,0!==n)return"asc"===l.dir?n:-n;return n=o[t],r=o[e],n<r?-1:n>r?1:0}):u.sort(function(t,e){var n,r,l,u,c=i.length,f=s[t]._aSortData,h=s[e]._aSortData;for(l=0;l<c;l++)if(u=i[l],n=f[u.col],r=h[u.col],u=a[u.type+"-"+u.dir]||a["string-"+u.dir],n=u(n,r),0!==n)return n;return n=o[t],r=o[e],n<r?-1:n>r?1:0})}t.bSorted=!0}function Tt(t){for(var e,n,r=t.aoColumns,i=wt(t),t=t.oLanguage.oAria,o=0,a=r.length;o<a;o++){n=r[o];var s=n.asSorting;e=n.sTitle.replace(/<.*?>/g,"");var l=n.nTh;l.removeAttribute("aria-sort"),n.bSortable&&(0<i.length&&i[0].col==o?(l.setAttribute("aria-sort","asc"==i[0].dir?"ascending":"descending"),n=s[i[0].index+1]||s[0]):n=s[0],e+="asc"===n?t.sSortAscending:t.sSortDescending),l.setAttribute("aria-label",e)}}function Ct(e,n,i,o){var a=e.aaSorting,s=e.aoColumns[n].asSorting,l=function(e,n){var i=e._idx;return i===r&&(i=t.inArray(e[1],s)),i+1<s.length?i+1:n?null:0};"number"==typeof a[0]&&(a=e.aaSorting=[a]),i&&e.oFeatures.bSortMulti?(i=t.inArray(n,se(a,"0")),-1!==i?(n=l(a[i],!0),null===n&&1===a.length&&(n=0),null===n?a.splice(i,1):(a[i][1]=s[n],a[i]._idx=n)):(a.push([n,s[0],0]),a[a.length-1]._idx=0)):a.length&&a[0][0]==n?(n=l(a[0]),a.length=1,a[0][1]=s[n],a[0]._idx=n):(a.length=0,a.push([n,s[0]]),a[0]._idx=0),F(e),"function"==typeof o&&o(e)}function kt(t,e,n,r){var i=t.aoColumns[n];It(e,{},function(e){!1!==i.bSortable&&(t.oFeatures.bProcessing?(ht(t,!0),setTimeout(function(){Ct(t,n,e.shiftKey,r),"ssp"!==qt(t)&&ht(t,!1)},0)):Ct(t,n,e.shiftKey,r))})}function At(e){var n,r,i=e.aLastSort,o=e.oClasses.sSortColumn,a=wt(e),s=e.oFeatures;if(s.bSort&&s.bSortClasses){for(s=0,n=i.length;s<n;s++)r=i[s].src,t(se(e.aoData,"anCells",r)).removeClass(o+(2>s?s+1:3));for(s=0,n=a.length;s<n;s++)r=a[s].src,t(se(e.aoData,"anCells",r)).addClass(o+(2>s?s+1:3))}e.aLastSort=a}function Dt(t,e){var n,r=t.aoColumns[e],i=Wt.ext.order[r.sSortDataType];i&&(n=i.call(t.oInstance,t,e,g(t,e)));for(var o,a=Wt.ext.type.order[r.sType+"-pre"],s=0,l=t.aoData.length;s<l;s++)r=t.aoData[s],r._aSortData||(r._aSortData=[]),(!r._aSortData[e]||i)&&(o=i?n[s]:w(t,s,e,"sort"),r._aSortData[e]=a?a(o):o)}function Et(e){if(e.oFeatures.bStateSave&&!e.bDestroying){var n={time:+new Date,start:e._iDisplayStart,length:e._iDisplayLength,order:t.extend(!0,[],e.aaSorting),search:tt(e.oPreviousSearch),columns:t.map(e.aoColumns,function(t,n){return{visible:t.bVisible,search:tt(e.aoPreSearchCols[n])}})};Ft(e,"aoStateSaveParams","stateSaveParams",[e,n]),e.oSavedState=n,e.fnStateSaveCallback.call(e.oInstance,e,n)}}function Mt(e){var n,i,o=e.aoColumns;if(e.oFeatures.bStateSave){var a=e.fnStateLoadCallback.call(e.oInstance,e);if(a&&a.time&&(n=Ft(e,"aoStateLoadParams","stateLoadParams",[e,a]),-1===t.inArray(!1,n)&&(n=e.iStateDuration,!(0<n&&a.time<+new Date-1e3*n)&&o.length===a.columns.length))){for(e.oLoadedState=t.extend(!0,{},a),a.start!==r&&(e._iDisplayStart=a.start,e.iInitDisplayStart=a.start),a.length!==r&&(e._iDisplayLength=a.length),a.order!==r&&(e.aaSorting=[],t.each(a.order,function(t,n){e.aaSorting.push(n[0]>=o.length?[0,n[1]]:n)})),a.search!==r&&t.extend(e.oPreviousSearch,et(a.search)),n=0,i=a.columns.length;n<i;n++){var s=a.columns[n];s.visible!==r&&(o[n].bVisible=s.visible),s.search!==r&&t.extend(e.aoPreSearchCols[n],et(s.search))}Ft(e,"aoStateLoaded","stateLoaded",[e,a])}}}function jt(e){var n=Wt.settings,e=t.inArray(e,se(n,"nTable"));return-1!==e?n[e]:null}function Nt(t,n,r,i){if(r="DataTables warning: "+(t?"table id="+t.sTableId+" - ":"")+r,i&&(r+=". For more information about this error, please see http://datatables.net/tn/"+i),n)e.console&&console.log&&console.log(r);else if(n=Wt.ext,n=n.sErrMode||n.errMode,t&&Ft(t,null,"error",[t,i,r]),"alert"==n)alert(r);else{if("throw"==n)throw Error(r);"function"==typeof n&&n(t,i,r)}}function Lt(e,n,i,o){t.isArray(i)?t.each(i,function(r,i){t.isArray(i)?Lt(e,n,i[0],i[1]):Lt(e,n,i)}):(o===r&&(o=i),n[i]!==r&&(e[o]=n[i]))}function Rt(e,n,r){var i,o;for(o in n)n.hasOwnProperty(o)&&(i=n[o],t.isPlainObject(i)?(t.isPlainObject(e[o])||(e[o]={}),t.extend(!0,e[o],i)):e[o]=r&&"data"!==o&&"aaData"!==o&&t.isArray(i)?i.slice():i);return e}function It(e,n,r){t(e).bind("click.DT",n,function(t){e.blur(),r(t)}).bind("keypress.DT",n,function(t){13===t.which&&(t.preventDefault(),r(t))}).bind("selectstart.DT",function(){return!1})}function Ot(t,e,n,r){n&&t[e].push({fn:n,sName:r})}function Ft(e,n,r,i){var o=[];return n&&(o=t.map(e[n].slice().reverse(),function(t){return t.fn.apply(e.oInstance,i)})),null!==r&&(n=t.Event(r+".dt"),t(e.nTable).trigger(n,i),o.push(n.result)),o}function zt(t){var e=t._iDisplayStart,n=t.fnDisplayEnd(),r=t._iDisplayLength;e>=n&&(e=n-r),e-=e%r,(-1===r||0>e)&&(e=0),t._iDisplayStart=e}function Pt(e,n){var r=e.renderer,i=Wt.ext.renderer[n];return t.isPlainObject(r)&&r[n]?i[r[n]]||i._:"string"==typeof r?i[r]||i._:i._}function qt(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}function Ht(t,e){var n=[],n=Re.numbers_length,r=Math.floor(n/2);return e<=n?n=ue(0,e):t<=r?(n=ue(0,n-2),n.push("ellipsis"),n.push(e-1)):(t>=e-1-r?n=ue(e-(n-2),e):(n=ue(t-r+2,t+r-1),n.push("ellipsis"),n.push(e-1)),n.splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}function Bt(e){t.each({num:function(t){return Ie(t,e)},"num-fmt":function(t){return Ie(t,e,ee)},"html-num":function(t){return Ie(t,e,Zt)},"html-num-fmt":function(t){return Ie(t,e,Zt,ee)}},function(t,n){Ut.type.order[t+e+"-pre"]=n,t.match(/^html\-/)&&(Ut.type.search[t+e]=Ut.type.search.html)})}function $t(t){return function(){var e=[jt(this[Wt.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Wt.ext.internal[t].apply(this,e)}}var Wt,Ut,Vt,Gt,Yt,Xt={},Jt=/[\r\n]/g,Zt=/<.*?>/g,Kt=/^[\w\+\-]/,Qt=/[\w\+\-]$/,te=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),ee=/[',$%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi,ne=function(t){return!t||!0===t||"-"===t},re=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},ie=function(t,e){return Xt[e]||(Xt[e]=RegExp(K(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(Xt[e],"."):t},oe=function(t,e,n){var r="string"==typeof t;return!!ne(t)||(e&&r&&(t=ie(t,e)),n&&r&&(t=t.replace(ee,"")),!isNaN(parseFloat(t))&&isFinite(t))},ae=function(t,e,n){return!!ne(t)||(ne(t)||"string"==typeof t?!!oe(t.replace(Zt,""),e,n)||null:null)},se=function(t,e,n){var i=[],o=0,a=t.length;if(n!==r)for(;o<a;o++)t[o]&&t[o][e]&&i.push(t[o][e][n]);else for(;o<a;o++)t[o]&&i.push(t[o][e]);return i},le=function(t,e,n,i){var o=[],a=0,s=e.length;if(i!==r)for(;a<s;a++)t[e[a]][n]&&o.push(t[e[a]][n][i]);else for(;a<s;a++)o.push(t[e[a]][n]);return o},ue=function(t,e){var n,i=[];e===r?(e=0,n=t):(n=e,e=t);for(var o=e;o<n;o++)i.push(o);return i},ce=function(t){for(var e=[],n=0,r=t.length;n<r;n++)t[n]&&e.push(t[n]);return e},fe=function(t){var e,n,r,i=[],o=t.length,a=0;n=0;t:for(;n<o;n++){for(e=t[n],r=0;r<a;r++)if(i[r]===e)continue t;i.push(e),a++}return i},he=function(t,e,n){t[e]!==r&&(t[n]=t[e])},de=/\[.*?\]$/,pe=/\(\)$/,ge=t("<div>")[0],ve=ge.textContent!==r,me=/<.*?>/g;Wt=function(e){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new Vt(t?jt(this[Ut.iApiIndex]):this)},this.fnAddData=function(e,n){var i=this.api(!0),o=t.isArray(e)&&(t.isArray(e[0])||t.isPlainObject(e[0]))?i.rows.add(e):i.row.add(e);return(n===r||n)&&i.draw(),o.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],i=n.oScroll;t===r||t?e.draw(!1):(""!==i.sX||""!==i.sY)&&pt(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===r||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var i=this.api(!0),t=i.rows(t),o=t.settings()[0],a=o.aoData[t[0][0]];return t.remove(),e&&e.call(this,o,a),(n===r||n)&&i.draw(),a},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(t)},this.fnFilter=function(t,e,n,i,o,a){o=this.api(!0),null===e||e===r?o.search(t,n,i,a):o.column(e).search(t,n,i,a),o.draw()},this.fnGetData=function(t,e){var n=this.api(!0);if(t!==r){var i=t.nodeName?t.nodeName.toLowerCase():"";return e!==r||"td"==i||"th"==i?n.cell(t,e).data():n.row(t).data()||null}return n.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==r?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),n=t.nodeName.toUpperCase();return"TR"==n?e.row(t).index():"TD"==n||"TH"==n?(t=e.cell(t).index(),[t.row,t.columnVisible,t.column]):null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,n){return this.api(!0).row(t).child(e,n).show().child()[0]},this.fnPageChange=function(t,e){var n=this.api(!0).page(t);(e===r||e)&&n.draw(!1)},this.fnSetColumnVis=function(t,e,n){t=this.api(!0).column(t).visible(e),(n===r||n)&&t.columns.adjust().draw()},this.fnSettings=function(){return jt(this[Ut.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,n){this.api(!0).order.listener(t,e,n)},this.fnUpdate=function(t,e,n,i,o){var a=this.api(!0);return n===r||null===n?a.row(e).data(t):a.cell(e,n).data(t),(o===r||o)&&a.columns.adjust(),(i===r||i)&&a.draw(),0},this.fnVersionCheck=Ut.fnVersionCheck;var n=this,i=e===r,c=this.length;i&&(e={}),this.oApi=this.internal=Ut.internal;for(var d in Wt.ext.internal)d&&(this[d]=$t(d));return this.each(function(){var d,p={},p=1<c?Rt(p,e,!0):e,g=0,v=this.getAttribute("id"),m=!1,y=Wt.defaults,w=t(this);if("table"!=this.nodeName.toLowerCase())Nt(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{s(y),l(y.column),o(y,y,!0),o(y.column,y.column,!0),o(y,t.extend(p,w.data()));var S=Wt.settings,g=0;for(d=S.length;g<d;g++){var T=S[g];if(T.nTable==this||T.nTHead.parentNode==this||T.nTFoot&&T.nTFoot.parentNode==this){if(g=p.bRetrieve!==r?p.bRetrieve:y.bRetrieve,i||g)return T.oInstance;if(p.bDestroy!==r?p.bDestroy:y.bDestroy){T.oInstance.fnDestroy();break}return void Nt(T,0,"Cannot reinitialise DataTable",3)}if(T.sTableId==this.id){S.splice(g,1);break}}null!==v&&""!==v||(this.id=v="DataTables_Table_"+Wt.ext._unique++);var k=t.extend(!0,{},Wt.models.oSettings,{sDestroyWidth:w[0].style.width,sInstance:v,sTableId:v});k.nTable=this,k.oApi=n.internal,k.oInit=p,S.push(k),k.oInstance=1===n.length?n:w.dataTable(),s(p),p.oLanguage&&a(p.oLanguage),p.aLengthMenu&&!p.iDisplayLength&&(p.iDisplayLength=t.isArray(p.aLengthMenu[0])?p.aLengthMenu[0][0]:p.aLengthMenu[0]),p=Rt(t.extend(!0,{},y),p),Lt(k.oFeatures,p,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),Lt(k,p,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Lt(k.oScroll,p,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Lt(k.oLanguage,p,"fnInfoCallback"),Ot(k,"aoDrawCallback",p.fnDrawCallback,"user"),Ot(k,"aoServerParams",p.fnServerParams,"user"),Ot(k,"aoStateSaveParams",p.fnStateSaveParams,"user"),Ot(k,"aoStateLoadParams",p.fnStateLoadParams,"user"),Ot(k,"aoStateLoaded",p.fnStateLoaded,"user"),Ot(k,"aoRowCallback",p.fnRowCallback,"user"),Ot(k,"aoRowCreatedCallback",p.fnCreatedRow,"user"),Ot(k,"aoHeaderCallback",p.fnHeaderCallback,"user"),Ot(k,"aoFooterCallback",p.fnFooterCallback,"user"),Ot(k,"aoInitComplete",p.fnInitComplete,"user"),Ot(k,"aoPreDrawCallback",p.fnPreDrawCallback,"user"),k.rowIdFn=C(p.rowId),u(k),v=k.oClasses,p.bJQueryUI?(t.extend(v,Wt.ext.oJUIClasses,p.oClasses),p.sDom===y.sDom&&"lfrtip"===y.sDom&&(k.sDom='<"H"lfr>t<"F"ip>'),k.renderer?t.isPlainObject(k.renderer)&&!k.renderer.header&&(k.renderer.header="jqueryui"):k.renderer="jqueryui"):t.extend(v,Wt.ext.classes,p.oClasses),w.addClass(v.sTable),k.iInitDisplayStart===r&&(k.iInitDisplayStart=p.iDisplayStart,k._iDisplayStart=p.iDisplayStart),null!==p.iDeferLoading&&(k.bDeferLoading=!0,g=t.isArray(p.iDeferLoading),k._iRecordsDisplay=g?p.iDeferLoading[0]:p.iDeferLoading,k._iRecordsTotal=g?p.iDeferLoading[1]:p.iDeferLoading);var A=k.oLanguage;t.extend(!0,A,p.oLanguage),""!==A.sUrl&&(t.ajax({dataType:"json",url:A.sUrl,success:function(e){a(e),o(y.oLanguage,e),t.extend(!0,A,e),
ot(k)},error:function(){ot(k)}}),m=!0),null===p.asStripeClasses&&(k.asStripeClasses=[v.sStripeOdd,v.sStripeEven]);var g=k.asStripeClasses,D=w.children("tbody").find("tr").eq(0);if(-1!==t.inArray(!0,t.map(g,function(t){return D.hasClass(t)}))&&(t("tbody tr",this).removeClass(g.join(" ")),k.asDestroyStripes=g.slice()),S=[],g=this.getElementsByTagName("thead"),0!==g.length&&(P(k.aoHeader,g[0]),S=q(k)),null===p.aoColumns)for(T=[],g=0,d=S.length;g<d;g++)T.push(null);else T=p.aoColumns;for(g=0,d=T.length;g<d;g++)f(k,S?S[g]:null);if(b(k,p.aoColumnDefs,T,function(t,e){h(k,t,e)}),D.length){var E=function(t,e){return null!==t.getAttribute("data-"+e)?e:null};t(D[0]).children("th, td").each(function(t,e){var n=k.aoColumns[t];if(n.mData===t){var i=E(e,"sort")||E(e,"order"),o=E(e,"filter")||E(e,"search");null===i&&null===o||(n.mData={_:t+".display",sort:null!==i?t+".@data-"+i:r,type:null!==i?t+".@data-"+i:r,filter:null!==o?t+".@data-"+o:r},h(k,t))}})}var M=k.oFeatures;if(p.bStateSave&&(M.bStateSave=!0,Mt(k,p),Ot(k,"aoDrawCallback",Et,"state_save")),p.aaSorting===r)for(S=k.aaSorting,g=0,d=S.length;g<d;g++)S[g][1]=k.aoColumns[g].asSorting[0];if(At(k),M.bSort&&Ot(k,"aoDrawCallback",function(){if(k.bSorted){var e=wt(k),n={};t.each(e,function(t,e){n[e.src]=e.dir}),Ft(k,null,"order",[k,e,n]),Tt(k)}}),Ot(k,"aoDrawCallback",function(){(k.bSorted||"ssp"===qt(k)||M.bDeferRender)&&At(k)},"sc"),g=w.children("caption").each(function(){this._captionSide=w.css("caption-side")}),d=w.children("thead"),0===d.length&&(d=t("<thead/>").appendTo(this)),k.nTHead=d[0],d=w.children("tbody"),0===d.length&&(d=t("<tbody/>").appendTo(this)),k.nTBody=d[0],d=w.children("tfoot"),0===d.length&&0<g.length&&(""!==k.oScroll.sX||""!==k.oScroll.sY)&&(d=t("<tfoot/>").appendTo(this)),0===d.length||0===d.children().length?w.addClass(v.sNoFooter):0<d.length&&(k.nTFoot=d[0],P(k.aoFooter,k.nTFoot)),p.aaData)for(g=0;g<p.aaData.length;g++)x(k,p.aaData[g]);else(k.bDeferLoading||"dom"==qt(k))&&_(k,t(k.nTBody).children("tr"));k.aiDisplay=k.aiDisplayMaster.slice(),k.bInitialised=!0,!1===m&&ot(k)}}),n=null,this};var ye=[],be=Array.prototype,xe=function(e){var n,r,i=Wt.settings,o=t.map(i,function(t){return t.nTable});return e?e.nTable&&e.oApi?[e]:e.nodeName&&"table"===e.nodeName.toLowerCase()?(n=t.inArray(e,o),-1!==n?[i[n]]:null):e&&"function"==typeof e.settings?e.settings().toArray():("string"==typeof e?r=t(e):e instanceof t&&(r=e),r?r.map(function(){return n=t.inArray(this,o),-1!==n?i[n]:null}).toArray():void 0):[]};Vt=function(e,n){if(!(this instanceof Vt))return new Vt(e,n);var r=[],i=function(t){(t=xe(t))&&(r=r.concat(t))};if(t.isArray(e))for(var o=0,a=e.length;o<a;o++)i(e[o]);else i(e);this.context=fe(r),n&&t.merge(this,n),this.selector={rows:null,cols:null,opts:null},Vt.extend(this,this,ye)},Wt.Api=Vt,t.extend(Vt.prototype,{any:function(){return 0!==this.count()},concat:be.concat,context:[],count:function(){return this.flatten().length},each:function(t){for(var e=0,n=this.length;e<n;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new Vt(e[t],this[t]):null},filter:function(t){var e=[];if(be.filter)e=be.filter.call(this,t,this);else for(var n=0,r=this.length;n<r;n++)t.call(this,this[n],n,this)&&e.push(this[n]);return new Vt(this.context,e)},flatten:function(){var t=[];return new Vt(this.context,t.concat.apply(t,this.toArray()))},join:be.join,indexOf:be.indexOf||function(t,e){for(var n=e||0,r=this.length;n<r;n++)if(this[n]===t)return n;return-1},iterator:function(t,e,n,i){var o,a,s,l,u,c,f,h=[],d=this.context,p=this.selector;for("string"==typeof t&&(i=n,n=e,e=t,t=!1),a=0,s=d.length;a<s;a++){var g=new Vt(d[a]);if("table"===e)o=n.call(g,d[a],a),o!==r&&h.push(o);else if("columns"===e||"rows"===e)o=n.call(g,d[a],this[a],a),o!==r&&h.push(o);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(f=this[a],"column-rows"===e&&(c=Ce(d[a],p.opts)),l=0,u=f.length;l<u;l++)o=f[l],o="cell"===e?n.call(g,d[a],o.row,o.column,a,l):n.call(g,d[a],o,a,l,c),o!==r&&h.push(o)}return h.length||i?(t=new Vt(d,t?h.concat.apply([],h):h),e=t.selector,e.rows=p.rows,e.cols=p.cols,e.opts=p.opts,t):this},lastIndexOf:be.lastIndexOf||function(t,e){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(be.map)e=be.map.call(this,t,this);else for(var n=0,r=this.length;n<r;n++)e.push(t.call(this,this[n],n));return new Vt(this.context,e)},pluck:function(t){return this.map(function(e){return e[t]})},pop:be.pop,push:be.push,reduce:be.reduce||function(t,e){return c(this,t,e,0,this.length,1)},reduceRight:be.reduceRight||function(t,e){return c(this,t,e,this.length-1,-1,-1)},reverse:be.reverse,selector:null,shift:be.shift,sort:be.sort,splice:be.splice,toArray:function(){return be.slice.call(this)},to$:function(){return t(this)},toJQuery:function(){return t(this)},unique:function(){return new Vt(this.context,fe(this))},unshift:be.unshift}),Vt.extend=function(e,n,r){if(r.length&&n&&(n instanceof Vt||n.__dt_wrapper)){var i,o,a,s=function(t,e,n){return function(){var r=e.apply(t,arguments);return Vt.extend(r,r,n.methodExt),r}};for(i=0,o=r.length;i<o;i++)a=r[i],n[a.name]="function"==typeof a.val?s(e,a.val,a):t.isPlainObject(a.val)?{}:a.val,n[a.name].__dt_wrapper=!0,Vt.extend(e,n[a.name],a.propExt)}},Vt.register=Gt=function(e,n){if(t.isArray(e))for(var r=0,i=e.length;r<i;r++)Vt.register(e[r],n);else for(var o,a,s=e.split("."),l=ye,r=0,i=s.length;r<i;r++){o=(a=-1!==s[r].indexOf("()"))?s[r].replace("()",""):s[r];var u;t:{u=0;for(var c=l.length;u<c;u++)if(l[u].name===o){u=l[u];break t}u=null}u||(u={name:o,val:{},methodExt:[],propExt:[]},l.push(u)),r===i-1?u.val=n:l=a?u.methodExt:u.propExt}},Vt.registerPlural=Yt=function(e,n,i){Vt.register(e,i),Vt.register(n,function(){var e=i.apply(this,arguments);return e===this?this:e instanceof Vt?e.length?t.isArray(e[0])?new Vt(e.context,e[0]):e[0]:r:e})},Gt("tables()",function(e){var n;if(e){n=Vt;var r=this.context;if("number"==typeof e)e=[r[e]];else var i=t.map(r,function(t){return t.nTable}),e=t(i).filter(e).map(function(){var e=t.inArray(this,i);return r[e]}).toArray();n=new n(e)}else n=this;return n}),Gt("table()",function(t){var t=this.tables(t),e=t.context;return e.length?new Vt(e[0]):t}),Yt("tables().nodes()","table().node()",function(){return this.iterator("table",function(t){return t.nTable},1)}),Yt("tables().body()","table().body()",function(){return this.iterator("table",function(t){return t.nTBody},1)}),Yt("tables().header()","table().header()",function(){return this.iterator("table",function(t){return t.nTHead},1)}),Yt("tables().footer()","table().footer()",function(){return this.iterator("table",function(t){return t.nTFoot},1)}),Yt("tables().containers()","table().container()",function(){return this.iterator("table",function(t){return t.nTableWrapper},1)}),Gt("draw()",function(t){return this.iterator("table",function(e){"page"===t?O(e):("string"==typeof t&&(t="full-hold"!==t),F(e,!1===t))})}),Gt("page()",function(t){return t===r?this.page.info().page:this.iterator("table",function(e){ct(e,t)})}),Gt("page.info()",function(){if(0===this.context.length)return r;var t=this.context[0],e=t._iDisplayStart,n=t.oFeatures.bPaginate?t._iDisplayLength:-1,i=t.fnRecordsDisplay(),o=-1===n;return{page:o?0:Math.floor(e/n),pages:o?1:Math.ceil(i/n),start:e,end:t.fnDisplayEnd(),length:n,recordsTotal:t.fnRecordsTotal(),recordsDisplay:i,serverSide:"ssp"===qt(t)}}),Gt("page.len()",function(t){return t===r?0!==this.context.length?this.context[0]._iDisplayLength:r:this.iterator("table",function(e){st(e,t)})});var _e=function(t,e,n){if(n){var r=new Vt(t);r.one("draw",function(){n(r.ajax.json())})}if("ssp"==qt(t))F(t,e);else{ht(t,!0);var i=t.jqXHR;i&&4!==i.readyState&&i.abort(),H(t,[],function(n){D(t);for(var n=U(t,n),r=0,i=n.length;r<i;r++)x(t,n[r]);F(t,e),ht(t,!1)})}};Gt("ajax.json()",function(){var t=this.context;if(0<t.length)return t[0].json}),Gt("ajax.params()",function(){var t=this.context;if(0<t.length)return t[0].oAjaxData}),Gt("ajax.reload()",function(t,e){return this.iterator("table",function(n){_e(n,!1===e,t)})}),Gt("ajax.url()",function(e){var n=this.context;return e===r?0===n.length?r:(n=n[0],n.ajax?t.isPlainObject(n.ajax)?n.ajax.url:n.ajax:n.sAjaxSource):this.iterator("table",function(n){t.isPlainObject(n.ajax)?n.ajax.url=e:n.ajax=e})}),Gt("ajax.url().load()",function(t,e){return this.iterator("table",function(n){_e(n,!1===e,t)})});var we=function(e,n,i,o,a){var s,l,u,c,f,h,d=[];for(u=typeof n,n&&"string"!==u&&"function"!==u&&n.length!==r||(n=[n]),u=0,c=n.length;u<c;u++)for(l=n[u]&&n[u].split?n[u].split(","):[n[u]],f=0,h=l.length;f<h;f++)(s=i("string"==typeof l[f]?t.trim(l[f]):l[f]))&&s.length&&(d=d.concat(s));if(e=Ut.selector[e],e.length)for(u=0,c=e.length;u<c;u++)d=e[u](o,a,d);return fe(d)},Se=function(e){return e||(e={}),e.filter&&e.search===r&&(e.search=e.filter),t.extend({search:"none",order:"current",page:"all"},e)},Te=function(t){for(var e=0,n=t.length;e<n;e++)if(0<t[e].length)return t[0]=t[e],t[0].length=1,t.length=1,t.context=[t.context[e]],t;return t.length=0,t},Ce=function(e,n){var r,i,o,a=[],s=e.aiDisplay;r=e.aiDisplayMaster;var l=n.search;if(i=n.order,o=n.page,"ssp"==qt(e))return"removed"===l?[]:ue(0,r.length);if("current"==o)for(r=e._iDisplayStart,i=e.fnDisplayEnd();r<i;r++)a.push(s[r]);else if("current"==i||"applied"==i)a="none"==l?r.slice():"applied"==l?s.slice():t.map(r,function(e){return-1===t.inArray(e,s)?e:null});else if("index"==i||"original"==i)for(r=0,i=e.aoData.length;r<i;r++)"none"==l?a.push(r):(o=t.inArray(r,s),(-1===o&&"removed"==l||0<=o&&"applied"==l)&&a.push(r));return a};Gt("rows()",function(e,n){e===r?e="":t.isPlainObject(e)&&(n=e,e="");var n=Se(n),i=this.iterator("table",function(i){var o=n;return we("row",e,function(e){var n=re(e);if(null!==n&&!o)return[n];var a=Ce(i,o);return null!==n&&t.inArray(n,a)!==-1?[n]:e?"function"==typeof e?t.map(a,function(t){var n=i.aoData[t];return e(t,n._aData,n.nTr)?t:null}):(n=ce(le(i.aoData,a,"nTr")),e.nodeName?e._DT_RowIndex!==r?[e._DT_RowIndex]:e._DT_CellIndex?[e._DT_CellIndex.row]:(n=t(e).closest("*[data-dt-row]"),n.length?[n.data("dt-row")]:[]):"string"==typeof e&&"#"===e.charAt(0)&&(a=i.aIds[e.replace(/^#/,"")],a!==r)?[a.idx]:t(n).filter(e).map(function(){return this._DT_RowIndex}).toArray()):a},i,o)},1);return i.selector.rows=e,i.selector.opts=n,i}),Gt("rows().nodes()",function(){return this.iterator("row",function(t,e){return t.aoData[e].nTr||r},1)}),Gt("rows().data()",function(){return this.iterator(!0,"rows",function(t,e){return le(t.aoData,e,"_aData")},1)}),Yt("rows().cache()","row().cache()",function(t){return this.iterator("row",function(e,n){var r=e.aoData[n];return"search"===t?r._aFilterData:r._aSortData},1)}),Yt("rows().invalidate()","row().invalidate()",function(t){return this.iterator("row",function(e,n){M(e,n,t)})}),Yt("rows().indexes()","row().index()",function(){return this.iterator("row",function(t,e){return e},1)}),Yt("rows().ids()","row().id()",function(t){for(var e=[],n=this.context,r=0,i=n.length;r<i;r++)for(var o=0,a=this[r].length;o<a;o++){var s=n[r].rowIdFn(n[r].aoData[this[r][o]]._aData);e.push((!0===t?"#":"")+s)}return new Vt(n,e)}),Yt("rows().remove()","row().remove()",function(){var t=this;return this.iterator("row",function(e,n,i){var o,a,s,l,u,c=e.aoData,f=c[n];for(c.splice(n,1),o=0,a=c.length;o<a;o++)if(s=c[o],u=s.anCells,null!==s.nTr&&(s.nTr._DT_RowIndex=o),null!==u)for(s=0,l=u.length;s<l;s++)u[s]._DT_CellIndex.row=o;E(e.aiDisplayMaster,n),E(e.aiDisplay,n),E(t[i],n,!1),zt(e),n=e.rowIdFn(f._aData),n!==r&&delete e.aIds[n]}),this.iterator("table",function(t){for(var e=0,n=t.aoData.length;e<n;e++)t.aoData[e].idx=e}),this}),Gt("rows.add()",function(e){var n=this.iterator("table",function(t){var n,r,i,o=[];for(r=0,i=e.length;r<i;r++)n=e[r],n.nodeName&&"TR"===n.nodeName.toUpperCase()?o.push(_(t,n)[0]):o.push(x(t,n));return o},1),r=this.rows(-1);return r.pop(),t.merge(r,n),r}),Gt("row()",function(t,e){return Te(this.rows(t,e))}),Gt("row().data()",function(t){var e=this.context;return t===r?e.length&&this.length?e[0].aoData[this[0]]._aData:r:(e[0].aoData[this[0]]._aData=t,M(e[0],this[0],"data"),this)}),Gt("row().node()",function(){var t=this.context;return t.length&&this.length?t[0].aoData[this[0]].nTr||null:null}),Gt("row.add()",function(e){e instanceof t&&e.length&&(e=e[0]);var n=this.iterator("table",function(t){return e.nodeName&&"TR"===e.nodeName.toUpperCase()?_(t,e)[0]:x(t,e)});return this.row(n[0])});var ke=function(t,e){var n=t.context;n.length&&(n=n[0].aoData[e!==r?e:t[0]])&&n._details&&(n._details.remove(),n._detailsShow=r,n._details=r)},Ae=function(t,e){var n=t.context;if(n.length&&t.length){var r=n[0].aoData[t[0]];if(r._details){(r._detailsShow=e)?r._details.insertAfter(r.nTr):r._details.detach();var i=n[0],o=new Vt(i),a=i.aoData;o.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<se(a,"_details").length&&(o.on("draw.dt.DT_details",function(t,e){i===e&&o.rows({page:"current"}).eq(0).each(function(t){t=a[t],t._detailsShow&&t._details.insertAfter(t.nTr)})}),o.on("column-visibility.dt.DT_details",function(t,e){if(i===e)for(var n,r=v(e),o=0,s=a.length;o<s;o++)n=a[o],n._details&&n._details.children("td[colspan]").attr("colspan",r)}),o.on("destroy.dt.DT_details",function(t,e){if(i===e)for(var n=0,r=a.length;n<r;n++)a[n]._details&&ke(o,n)}))}}};Gt("row().child()",function(e,n){var i=this.context;if(e===r)return i.length&&this.length?i[0].aoData[this[0]]._details:r;if(!0===e)this.child.show();else if(!1===e)ke(this);else if(i.length&&this.length){var o=i[0],i=i[0].aoData[this[0]],a=[],s=function(e,n){if(t.isArray(e)||e instanceof t)for(var r=0,i=e.length;r<i;r++)s(e[r],n);else e.nodeName&&"tr"===e.nodeName.toLowerCase()?a.push(e):(r=t("<tr><td/></tr>").addClass(n),t("td",r).addClass(n).html(e)[0].colSpan=v(o),a.push(r[0]))};s(e,n),i._details&&i._details.remove(),i._details=t(a),i._detailsShow&&i._details.insertAfter(i.nTr)}return this}),Gt(["row().child.show()","row().child().show()"],function(){return Ae(this,!0),this}),Gt(["row().child.hide()","row().child().hide()"],function(){return Ae(this,!1),this}),Gt(["row().child.remove()","row().child().remove()"],function(){return ke(this),this}),Gt("row().child.isShown()",function(){var t=this.context;return!(!t.length||!this.length)&&(t[0].aoData[this[0]]._detailsShow||!1)});var De=/^(.+):(name|visIdx|visible)$/,Ee=function(t,e,n,r,i){for(var n=[],r=0,o=i.length;r<o;r++)n.push(w(t,i[r],e));return n};Gt("columns()",function(e,n){e===r?e="":t.isPlainObject(e)&&(n=e,e="");var n=Se(n),i=this.iterator("table",function(r){var i=e,o=n,a=r.aoColumns,s=se(a,"sName"),l=se(a,"nTh");return we("column",i,function(e){var n=re(e);if(""===e)return ue(a.length);if(null!==n)return[n>=0?n:a.length+n];if("function"==typeof e){var i=Ce(r,o);return t.map(a,function(t,n){return e(n,Ee(r,n,0,0,i),l[n])?n:null})}var u="string"==typeof e?e.match(De):"";if(u)switch(u[2]){case"visIdx":case"visible":if(n=parseInt(u[1],10),n<0){var c=t.map(a,function(t,e){return t.bVisible?e:null});return[c[c.length+n]]}return[p(r,n)];case"name":return t.map(s,function(t,e){return t===u[1]?e:null});default:return[]}return e.nodeName&&e._DT_CellIndex?[e._DT_CellIndex.column]:(n=t(l).filter(e).map(function(){return t.inArray(this,l)}).toArray(),n.length||!e.nodeName?n:(n=t(e).closest("*[data-dt-column]"),n.length?[n.data("dt-column")]:[]))},r,o)},1);return i.selector.cols=e,i.selector.opts=n,i}),Yt("columns().header()","column().header()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTh},1)}),Yt("columns().footer()","column().footer()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTf},1)}),Yt("columns().data()","column().data()",function(){return this.iterator("column-rows",Ee,1)}),Yt("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].mData},1)}),Yt("columns().cache()","column().cache()",function(t){return this.iterator("column-rows",function(e,n,r,i,o){return le(e.aoData,o,"search"===t?"_aFilterData":"_aSortData",n)},1)}),Yt("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(t,e,n,r,i){return le(t.aoData,i,"anCells",e)},1)}),Yt("columns().visible()","column().visible()",function(e,n){return this.iterator("column",function(i,o){if(e===r)return i.aoColumns[o].bVisible;var a,s,l,u=i.aoColumns,c=u[o],f=i.aoData;if(e!==r&&c.bVisible!==e){if(e){var h=t.inArray(!0,se(u,"bVisible"),o+1);for(a=0,s=f.length;a<s;a++)l=f[a].nTr,u=f[a].anCells,l&&l.insertBefore(u[o],u[h]||null)}else t(se(i.aoData,"anCells",o)).detach();c.bVisible=e,I(i,i.aoHeader),I(i,i.aoFooter),(n===r||n)&&d(i),Ft(i,null,"column-visibility",[i,o,e,n]),Et(i)}})}),Yt("columns().indexes()","column().index()",function(t){return this.iterator("column",function(e,n){return"visible"===t?g(e,n):n},1)}),Gt("columns.adjust()",function(){return this.iterator("table",function(t){d(t)},1)}),Gt("column.index()",function(t,e){if(0!==this.context.length){var n=this.context[0];if("fromVisible"===t||"toData"===t)return p(n,e);if("fromData"===t||"toVisible"===t)return g(n,e)}}),Gt("column()",function(t,e){return Te(this.columns(t,e))}),Gt("cells()",function(e,n,i){if(t.isPlainObject(e)&&(e.row===r?(i=e,e=null):(i=n,n=null)),t.isPlainObject(n)&&(i=n,n=null),null===n||n===r)return this.iterator("table",function(n){var o,a,s,l,u,c,f,h=e,d=Se(i),p=n.aoData,g=Ce(n,d),v=ce(le(p,g,"anCells")),m=t([].concat.apply([],v)),y=n.aoColumns.length;return we("cell",h,function(e){var i="function"==typeof e;if(null===e||e===r||i){for(a=[],s=0,l=g.length;s<l;s++)for(o=g[s],u=0;u<y;u++)c={row:o,column:u},i?(f=p[o],e(c,w(n,o,u),f.anCells?f.anCells[u]:null)&&a.push(c)):a.push(c);return a}return t.isPlainObject(e)?[e]:(i=m.filter(e).map(function(t,e){return{row:e._DT_CellIndex.row,column:e._DT_CellIndex.column}}).toArray(),i.length||!e.nodeName?i:(f=t(e).closest("*[data-dt-row]"),f.length?[{row:f.data("dt-row"),column:f.data("dt-column")}]:[]))},n,d)});var o,a,s,l,u,c=this.columns(n,i),f=this.rows(e,i),h=this.iterator("table",function(t,e){for(o=[],a=0,s=f[e].length;a<s;a++)for(l=0,u=c[e].length;l<u;l++)o.push({row:f[e][a],column:c[e][l]});return o},1);return t.extend(h.selector,{cols:n,rows:e,opts:i}),h}),Yt("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(t,e,n){return(t=t.aoData[e])&&t.anCells?t.anCells[n]:r},1)}),Gt("cells().data()",function(){return this.iterator("cell",function(t,e,n){return w(t,e,n)},1)}),Yt("cells().cache()","cell().cache()",function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",function(e,n,r){return e.aoData[n][t][r]},1)}),Yt("cells().render()","cell().render()",function(t){return this.iterator("cell",function(e,n,r){return w(e,n,r,t)},1)}),Yt("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(t,e,n){return{row:e,column:n,columnVisible:g(t,n)}},1)}),Yt("cells().invalidate()","cell().invalidate()",function(t){return this.iterator("cell",function(e,n,r){M(e,n,t,r)})}),Gt("cell()",function(t,e,n){return Te(this.cells(t,e,n))}),Gt("cell().data()",function(t){var e=this.context,n=this[0];return t===r?e.length&&n.length?w(e[0],n[0].row,n[0].column):r:(S(e[0],n[0].row,n[0].column,t),M(e[0],n[0].row,"data",n[0].column),this)}),Gt("order()",function(e,n){var i=this.context;return e===r?0!==i.length?i[0].aaSorting:r:("number"==typeof e?e=[[e,n]]:t.isArray(e[0])||(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),Gt("order.listener()",function(t,e,n){return this.iterator("table",function(r){kt(r,t,e,n)})}),Gt("order.fixed()",function(e){if(!e){var n=this.context,n=n.length?n[0].aaSortingFixed:r;return t.isArray(n)?{pre:n}:n}return this.iterator("table",function(n){n.aaSortingFixed=t.extend(!0,{},e)})}),Gt(["columns().order()","column().order()"],function(e){var n=this;return this.iterator("table",function(r,i){var o=[];t.each(n[i],function(t,n){o.push([n,e])}),r.aaSorting=o})}),Gt("search()",function(e,n,i,o){var a=this.context;return e===r?0!==a.length?a[0].oPreviousSearch.sSearch:r:this.iterator("table",function(r){r.oFeatures.bFilter&&G(r,t.extend({},r.oPreviousSearch,{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===i||i,bCaseInsensitive:null===o||o}),1)})}),Yt("columns().search()","column().search()",function(e,n,i,o){return this.iterator("column",function(a,s){var l=a.aoPreSearchCols;return e===r?l[s].sSearch:void(a.oFeatures.bFilter&&(t.extend(l[s],{sSearch:e+"",bRegex:null!==n&&n,bSmart:null===i||i,bCaseInsensitive:null===o||o}),G(a,a.oPreviousSearch,1)))})}),Gt("state()",function(){return this.context.length?this.context[0].oSavedState:null}),Gt("state.clear()",function(){return this.iterator("table",function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})})}),Gt("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),Gt("state.save()",function(){return this.iterator("table",function(t){Et(t)})}),Wt.versionCheck=Wt.fnVersionCheck=function(t){for(var e,n,r=Wt.version.split("."),t=t.split("."),i=0,o=t.length;i<o;i++)if(e=parseInt(r[i],10)||0,n=parseInt(t[i],10)||0,e!==n)return e>n;return!0},Wt.isDataTable=Wt.fnIsDataTable=function(e){var n=t(e).get(0),r=!1;return t.each(Wt.settings,function(e,i){var o=i.nScrollHead?t("table",i.nScrollHead)[0]:null,a=i.nScrollFoot?t("table",i.nScrollFoot)[0]:null;i.nTable!==n&&o!==n&&a!==n||(r=!0)}),r},Wt.tables=Wt.fnTables=function(e){var n=!1;t.isPlainObject(e)&&(n=e.api,e=e.visible);var r=t.map(Wt.settings,function(n){if(!e||e&&t(n.nTable).is(":visible"))return n.nTable});return n?new Vt(r):r},Wt.util={throttle:mt,escapeRegex:K},Wt.camelToHungarian=o,Gt("$()",function(e,n){var r=this.rows(n).nodes(),r=t(r);return t([].concat(r.filter(e).toArray(),r.find(e).toArray()))}),t.each(["on","one","off"],function(e,n){Gt(n+"()",function(){var e=Array.prototype.slice.call(arguments);e[0].match(/\.dt\b/)||(e[0]+=".dt");var r=t(this.tables().nodes());return r[n].apply(r,e),this})}),Gt("clear()",function(){return this.iterator("table",function(t){D(t)})}),Gt("settings()",function(){return new Vt(this.context,this.context)}),Gt("init()",function(){var t=this.context;return t.length?t[0].oInit:null}),Gt("data()",function(){return this.iterator("table",function(t){return se(t.aoData,"_aData")}).flatten()}),Gt("destroy()",function(n){return n=n||!1,this.iterator("table",function(r){var i,o=r.nTableWrapper.parentNode,a=r.oClasses,s=r.nTable,l=r.nTBody,u=r.nTHead,c=r.nTFoot,f=t(s),l=t(l),h=t(r.nTableWrapper),d=t.map(r.aoData,function(t){return t.nTr});r.bDestroying=!0,Ft(r,"aoDestroyCallback","destroy",[r]),n||new Vt(r).columns().visible(!0),h.unbind(".DT").find(":not(tbody *)").unbind(".DT"),t(e).unbind(".DT-"+r.sInstance),s!=u.parentNode&&(f.children("thead").detach(),f.append(u)),c&&s!=c.parentNode&&(f.children("tfoot").detach(),f.append(c)),r.aaSorting=[],r.aaSortingFixed=[],At(r),t(d).removeClass(r.asStripeClasses.join(" ")),t("th, td",u).removeClass(a.sSortable+" "+a.sSortableAsc+" "+a.sSortableDesc+" "+a.sSortableNone),r.bJUI&&(t("th span."+a.sSortIcon+", td span."+a.sSortIcon,u).detach(),t("th, td",u).each(function(){var e=t("div."+a.sSortJUIWrapper,this);t(this).append(e.contents()),e.detach()})),l.children().detach(),l.append(d),u=n?"remove":"detach",f[u](),h[u](),!n&&o&&(o.insertBefore(s,r.nTableReinsertBefore),f.css("width",r.sDestroyWidth).removeClass(a.sTable),(i=r.asDestroyStripes.length)&&l.children().each(function(e){t(this).addClass(r.asDestroyStripes[e%i])})),o=t.inArray(r,Wt.settings),-1!==o&&Wt.settings.splice(o,1)})}),t.each(["column","row","cell"],function(t,e){Gt(e+"s().every()",function(t){var n=this.selector.opts,i=this;return this.iterator(e,function(o,a,s,l,u){t.call(i[e](a,"cell"===e?s:n,"cell"===e?n:r),a,s,l,u)})})}),Gt("i18n()",function(e,n,i){var o=this.context[0],e=C(e)(o.oLanguage);return e===r&&(e=n),i!==r&&t.isPlainObject(e)&&(e=e[i]!==r?e[i]:e._),e.replace("%d",i)}),Wt.version="1.10.11",Wt.settings=[],Wt.models={},Wt.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Wt.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},Wt.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Wt.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(n){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:t.extend({},Wt.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},i(Wt.defaults),Wt.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},i(Wt.defaults.column),Wt.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:r,oAjaxData:r,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==qt(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==qt(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,n=e+t,r=this.aiDisplay.length,i=this.oFeatures,o=i.bPaginate;return i.bServerSide?!1===o||-1===t?e+r:Math.min(e+t,this._iRecordsDisplay):!o||n>r||-1===t?r:n},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},Wt.ext=Ut={buttons:{},classes:{},builder:"-source-",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Wt.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Wt.version},t.extend(Ut,{afnFiltering:Ut.search,aTypes:Ut.type.detect,ofnSearch:Ut.type.search,oSort:Ut.type.order,afnSortData:Ut.order,aoFeatures:Ut.feature,oApi:Ut.internal,oStdClasses:Ut.classes,oPagination:Ut.pager}),t.extend(Wt.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Me="",Me="",je=Me+"ui-state-default",Ne=Me+"css_right ui-icon ui-icon-",Le=Me+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";t.extend(Wt.ext.oJUIClasses,Wt.ext.classes,{sPageButton:"fg-button ui-button "+je,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:je+" sorting_asc",sSortDesc:je+" sorting_desc",sSortable:je+" sorting",sSortableAsc:je+" sorting_asc_disabled",sSortableDesc:je+" sorting_desc_disabled",sSortableNone:je+" sorting_disabled",sSortJUIAsc:Ne+"triangle-1-n",sSortJUIDesc:Ne+"triangle-1-s",sSortJUI:Ne+"carat-2-n-s",sSortJUIAscAllowed:Ne+"carat-1-n",sSortJUIDescAllowed:Ne+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+je,sScrollFoot:"dataTables_scrollFoot "+je,sHeaderTH:je,sFooterTH:je,sJUIHeader:Le+" ui-corner-tl ui-corner-tr",sJUIFooter:Le+" ui-corner-bl ui-corner-br"});var Re=Wt.ext.pager;t.extend(Re,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(t,e){return[Ht(t,e)]},simple_numbers:function(t,e){return["previous",Ht(t,e),"next"]},full_numbers:function(t,e){return["first","previous",Ht(t,e),"next","last"];
},_numbers:Ht,numbers_length:7}),t.extend(!0,Wt.ext.renderer,{pageButton:{_:function(e,r,i,o,a,s){var l,u,c,f=e.oClasses,h=e.oLanguage.oPaginate,d=e.oLanguage.oAria.paginate||{},p=0,g=function(n,r){var o,c,v,m,y=function(t){ct(e,t.data.action,!0)};for(o=0,c=r.length;o<c;o++)if(m=r[o],t.isArray(m))v=t("<"+(m.DT_el||"div")+"/>").appendTo(n),g(v,m);else{switch(l=null,u="",m){case"ellipsis":n.append('<span class="ellipsis">&#x2026;</span>');break;case"first":l=h.sFirst,u=m+(a>0?"":" "+f.sPageButtonDisabled);break;case"previous":l=h.sPrevious,u=m+(a>0?"":" "+f.sPageButtonDisabled);break;case"next":l=h.sNext,u=m+(a<s-1?"":" "+f.sPageButtonDisabled);break;case"last":l=h.sLast,u=m+(a<s-1?"":" "+f.sPageButtonDisabled);break;default:l=m+1,u=a===m?f.sPageButtonActive:""}null!==l&&(v=t("<a>",{"class":f.sPageButton+" "+u,"aria-controls":e.sTableId,"aria-label":d[m],"data-dt-idx":p,tabindex:e.iTabIndex,id:0===i&&"string"==typeof m?e.sTableId+"_"+m:null}).html(l).appendTo(n),It(v,{action:m},y),p++)}};try{c=t(r).find(n.activeElement).data("dt-idx")}catch(v){}g(t(r).empty(),o),c&&t(r).find("[data-dt-idx="+c+"]").focus()}}}),t.extend(Wt.ext.type.detect,[function(t,e){var n=e.oLanguage.sDecimal;return oe(t,n)?"num"+n:null},function(t){if(t&&!(t instanceof Date)&&(!Kt.test(t)||!Qt.test(t)))return null;var e=Date.parse(t);return null!==e&&!isNaN(e)||ne(t)?"date":null},function(t,e){var n=e.oLanguage.sDecimal;return oe(t,n,!0)?"num-fmt"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ae(t,n)?"html-num"+n:null},function(t,e){var n=e.oLanguage.sDecimal;return ae(t,n,!0)?"html-num-fmt"+n:null},function(t){return ne(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),t.extend(Wt.ext.type.search,{html:function(t){return ne(t)?t:"string"==typeof t?t.replace(Jt," ").replace(Zt,""):""},string:function(t){return ne(t)?t:"string"==typeof t?t.replace(Jt," "):t}});var Ie=function(t,e,n,r){return 0===t||t&&"-"!==t?(e&&(t=ie(t,e)),t.replace&&(n&&(t=t.replace(n,"")),r&&(t=t.replace(r,""))),1*t):-(1/0)};t.extend(Ut.type.order,{"date-pre":function(t){return Date.parse(t)||0},"html-pre":function(t){return ne(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return ne(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return t<e?-1:t>e?1:0},"string-desc":function(t,e){return t<e?1:t>e?-1:0}}),Bt(""),t.extend(!0,Wt.ext.renderer,{header:{_:function(e,n,r,i){t(e.nTable).on("order.dt.DT",function(t,o,a,s){e===o&&(t=r.idx,n.removeClass(r.sSortingClass+" "+i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[t]?i.sSortAsc:"desc"==s[t]?i.sSortDesc:r.sSortingClass))})},jqueryui:function(e,n,r,i){t("<div/>").addClass(i.sSortJUIWrapper).append(n.contents()).append(t("<span/>").addClass(i.sSortIcon+" "+r.sSortingClassJUI)).appendTo(n),t(e.nTable).on("order.dt.DT",function(t,o,a,s){e===o&&(t=r.idx,n.removeClass(i.sSortAsc+" "+i.sSortDesc).addClass("asc"==s[t]?i.sSortAsc:"desc"==s[t]?i.sSortDesc:r.sSortingClass),n.find("span."+i.sSortIcon).removeClass(i.sSortJUIAsc+" "+i.sSortJUIDesc+" "+i.sSortJUI+" "+i.sSortJUIAscAllowed+" "+i.sSortJUIDescAllowed).addClass("asc"==s[t]?i.sSortJUIAsc:"desc"==s[t]?i.sSortJUIDesc:r.sSortingClassJUI))})}}});var Oe=function(t){return"string"==typeof t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):t};return Wt.render={number:function(t,e,n,r,i){return{display:function(o){if("number"!=typeof o&&"string"!=typeof o)return o;var a=0>o?"-":"",s=parseFloat(o);return isNaN(s)?Oe(o):(o=Math.abs(s),s=parseInt(o,10),o=n?e+(o-s).toFixed(n).substring(2):"",a+(r||"")+s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+o+(i||""))}}},text:function(){return{display:Oe}}},t.extend(Wt.ext.internal,{_fnExternApiFunc:$t,_fnBuildAjax:H,_fnAjaxUpdate:B,_fnAjaxParameters:$,_fnAjaxUpdateDraw:W,_fnAjaxDataSrc:U,_fnAddColumn:f,_fnColumnOptions:h,_fnAdjustColumnSizing:d,_fnVisibleToColumnIndex:p,_fnColumnIndexToVisible:g,_fnVisbleColumns:v,_fnGetColumns:m,_fnColumnTypes:y,_fnApplyColumnDefs:b,_fnHungarianMap:i,_fnCamelToHungarian:o,_fnLanguageCompat:a,_fnBrowserDetect:u,_fnAddData:x,_fnAddTr:_,_fnNodeToDataIndex:function(t,e){return e._DT_RowIndex!==r?e._DT_RowIndex:null},_fnNodeToColumnIndex:function(e,n,r){return t.inArray(r,e.aoData[n].anCells)},_fnGetCellData:w,_fnSetCellData:S,_fnSplitObjNotation:T,_fnGetObjectDataFn:C,_fnSetObjectDataFn:k,_fnGetDataMaster:A,_fnClearTable:D,_fnDeleteIndex:E,_fnInvalidate:M,_fnGetRowElements:j,_fnCreateTr:N,_fnBuildHead:R,_fnDrawHead:I,_fnDraw:O,_fnReDraw:F,_fnAddOptionsHtml:z,_fnDetectHeader:P,_fnGetUniqueThs:q,_fnFeatureHtmlFilter:V,_fnFilterComplete:G,_fnFilterCustom:Y,_fnFilterColumn:X,_fnFilter:J,_fnFilterCreateSearch:Z,_fnEscapeRegex:K,_fnFilterData:Q,_fnFeatureHtmlInfo:nt,_fnUpdateInfo:rt,_fnInfoMacros:it,_fnInitialise:ot,_fnInitComplete:at,_fnLengthChange:st,_fnFeatureHtmlLength:lt,_fnFeatureHtmlPaginate:ut,_fnPageChange:ct,_fnFeatureHtmlProcessing:ft,_fnProcessingDisplay:ht,_fnFeatureHtmlTable:dt,_fnScrollDraw:pt,_fnApplyToChildren:gt,_fnCalculateColumnWidths:vt,_fnThrottle:mt,_fnConvertToWidth:yt,_fnGetWidestNode:bt,_fnGetMaxLenString:xt,_fnStringToCss:_t,_fnSortFlatten:wt,_fnSort:St,_fnSortAria:Tt,_fnSortListener:Ct,_fnSortAttachListener:kt,_fnSortingClasses:At,_fnSortData:Dt,_fnSaveState:Et,_fnLoadState:Mt,_fnSettingsFromNode:jt,_fnLog:Nt,_fnMap:Lt,_fnBindAction:It,_fnCallbackReg:Ot,_fnCallbackFire:Ft,_fnLengthOverflow:zt,_fnRenderer:Pt,_fnDataSource:qt,_fnRowAttributes:L,_fnCalculateEnd:function(){}}),t.fn.dataTable=Wt,Wt.$=t,t.fn.dataTableSettings=Wt.settings,t.fn.dataTableExt=Wt.ext,t.fn.DataTable=function(e){return t(this).dataTable(e).api()},t.each(Wt,function(e,n){t.fn.DataTable[e]=n}),t.fn.dataTable});var TableTools;!function(t,e,n){var r=function(r,i){var o={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(t){return"string"==typeof t&&(t=e.getElementById(t)),t.addClass||(t.hide=function(){this.style.display="none"},t.show=function(){this.style.display=""},t.addClass=function(t){this.removeClass(t),this.className+=" "+t},t.removeClass=function(t){this.className=this.className.replace(RegExp("\\s*"+t+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},t.hasClass=function(t){return!!this.className.match(RegExp("\\s*"+t+"\\s*"))}),t},setMoviePath:function(t){this.moviePath=t},dispatch:function(t,e,n){(t=this.clients[t])&&t.receiveEvent(e,n)},register:function(t,e){this.clients[t]=e},getDOMObjectPosition:function(t){var e={left:0,top:0,width:t.width?t.width:t.offsetWidth,height:t.height?t.height:t.offsetHeight};for(""!==t.style.width&&(e.width=t.style.width.replace("px","")),""!==t.style.height&&(e.height=t.style.height.replace("px",""));t;)e.left+=t.offsetLeft,e.top+=t.offsetTop,t=t.offsetParent;return e},Client:function(t){this.handlers={},this.id=o.nextId++,this.movieId="ZeroClipboard_TableToolsMovie_"+this.id,o.register(this.id,this),t&&this.glue(t)}};o.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(t,n){this.domElement=o.$(t);var r=99;this.domElement.style.zIndex&&(r=parseInt(this.domElement.style.zIndex,10)+1);var i=o.getDOMObjectPosition(this.domElement);this.div=e.createElement("div");var a=this.div.style;a.position="absolute",a.left="0px",a.top="0px",a.width=i.width+"px",a.height=i.height+"px",a.zIndex=r,"undefined"!=typeof n&&""!==n&&(this.div.title=n),0!==i.width&&0!==i.height&&(this.sized=!0),this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(i.width,i.height).replace(/&/g,"&amp;"))},positionElement:function(){var t=o.getDOMObjectPosition(this.domElement),e=this.div.style;e.position="absolute",e.width=t.width+"px",e.height=t.height+"px",0!==t.width&&0!==t.height&&(this.sized=!0,e=this.div.childNodes[0],e.width=t.width,e.height=t.height)},getHTML:function(t,e){var n="",r="id="+this.id+"&width="+t+"&height="+e;if(navigator.userAgent.match(/MSIE/))var i=location.href.match(/^https/i)?"https://":"http://",n=n+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+i+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+t+'" height="'+e+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+o.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+r+'"/><param name="wmode" value="transparent"/></object>');else n+='<embed id="'+this.movieId+'" src="'+o.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+t+'" height="'+e+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+r+'" wmode="transparent" />';return n},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var t=e.getElementsByTagName("body")[0];try{t.removeChild(this.div)}catch(n){}this.div=this.domElement=null}},reposition:function(t){if(t&&((this.domElement=o.$(t))||this.hide()),this.domElement&&this.div){var t=o.getDOMObjectPosition(this.domElement),e=this.div.style;e.left=""+t.left+"px",e.top=""+t.top+"px"}},clearText:function(){this.clipText="",this.ready&&this.movie.clearText()},appendText:function(t){this.clipText+=t,this.ready&&this.movie.appendText(t)},setText:function(t){this.clipText=t,this.ready&&this.movie.setText(t)},setCharSet:function(t){this.charSet=t,this.ready&&this.movie.setCharSet(t)},setBomInc:function(t){this.incBom=t,this.ready&&this.movie.setBomInc(t)},setFileName:function(t){this.fileName=t,this.ready&&this.movie.setFileName(t)},setAction:function(t){this.action=t,this.ready&&this.movie.setAction(t)},addEventListener:function(t,e){t=t.toString().toLowerCase().replace(/^on/,""),this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},setHandCursor:function(t){this.handCursorEnabled=t,this.ready&&this.movie.setHandCursor(t)},setCSSEffects:function(t){this.cssEffects=!!t},receiveEvent:function(n,r){var i,n=n.toString().toLowerCase().replace(/^on/,"");switch(n){case"load":if(this.movie=e.getElementById(this.movieId),!this.movie)return i=this,void setTimeout(function(){i.receiveEvent("load",null)},1);if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/))return i=this,setTimeout(function(){i.receiveEvent("load",null)},100),void(this.ready=!0);this.ready=!0,this.movie.clearText(),this.movie.appendText(this.clipText),this.movie.setFileName(this.fileName),this.movie.setAction(this.action),this.movie.setCharSet(this.charSet),this.movie.setBomInc(this.incBom),this.movie.setHandCursor(this.handCursorEnabled);break;case"mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[n])for(var o=0,a=this.handlers[n].length;o<a;o++){var s=this.handlers[n][o];"function"==typeof s?s(this,r):"object"==typeof s&&2==s.length?s[0][s[1]](this,r):"string"==typeof s&&t[s](this,r)}}},t.ZeroClipboard_TableTools=o;var a=jQuery;return TableTools=function(t,e){return!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'"),this.s={that:this,dt:a.fn.dataTable.Api?new a.fn.dataTable.Api(t).settings()[0]:t.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}},this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,background:null}},this.classes=a.extend(!0,{},TableTools.classes),this.s.dt.bJUI&&a.extend(!0,this.classes,TableTools.classes_themeroller),this.fnSettings=function(){return this.s},"undefined"==typeof e&&(e={}),TableTools._aInstances.push(this),this._fnConstruct(e),this},TableTools.prototype={fnGetSelected:function(t){var e,n=[],r=this.s.dt.aoData,i=this.s.dt.aiDisplay;if(t)for(t=0,e=i.length;t<e;t++)r[i[t]]._DTTT_selected&&n.push(r[i[t]].nTr);else for(t=0,e=r.length;t<e;t++)r[t]._DTTT_selected&&n.push(r[t].nTr);return n},fnGetSelectedData:function(){var t,e,n=[],r=this.s.dt.aoData;for(t=0,e=r.length;t<e;t++)r[t]._DTTT_selected&&n.push(this.s.dt.oInstance.fnGetData(t));return n},fnGetSelectedIndexes:function(t){var e,n=[],r=this.s.dt.aoData,i=this.s.dt.aiDisplay;if(t)for(t=0,e=i.length;t<e;t++)r[i[t]]._DTTT_selected&&n.push(i[t]);else for(t=0,e=r.length;t<e;t++)r[t]._DTTT_selected&&n.push(t);return n},fnIsSelected:function(t){return t=this.s.dt.oInstance.fnGetPosition(t),!0===this.s.dt.aoData[t]._DTTT_selected},fnSelectAll:function(t){this._fnRowSelect(t?this.s.dt.aiDisplay:this.s.dt.aoData)},fnSelectNone:function(t){this._fnRowDeselect(this.fnGetSelectedIndexes(t))},fnSelect:function(t){"single"==this.s.select.type&&this.fnSelectNone(),this._fnRowSelect(t)},fnDeselect:function(t){this._fnRowDeselect(t)},fnGetTitle:function(t){var n="";return"undefined"!=typeof t.sTitle&&""!==t.sTitle?n=t.sTitle:(t=e.getElementsByTagName("title"),0<t.length&&(n=t[0].innerHTML)),4>"".toString().length?n.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):n.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(t){var e,n,r=this.s.dt.aoColumns,t=this._fnColumnTargets(t.mColumns),i=[],o=0,a=0;for(e=0,n=t.length;e<n;e++)t[e]&&(o=r[e].nTh.offsetWidth,a+=o,i.push(o));for(e=0,n=i.length;e<n;e++)i[e]/=a;return i.join("\t")},fnGetTableData:function(t){if(this.s.dt)return this._fnGetDataTablesData(t)},fnSetText:function(t,e){this._fnFlashSetText(t,e)},fnResizeButtons:function(){for(var t in o.clients)if(t){var e=o.clients[t];"undefined"!=typeof e.domElement&&e.domElement.parentNode&&e.positionElement()}},fnResizeRequired:function(){for(var t in o.clients)if(t){var e=o.clients[t];if("undefined"!=typeof e.domElement&&e.domElement.parentNode==this.dom.container&&!1===e.sized)return!0}return!1},fnPrint:function(t,e){e===n&&(e={}),t===n||t?this._fnPrintStart(e):this._fnPrintEnd()},fnInfo:function(t,e){var n=a("<div/>").addClass(this.classes.print.info).html(t).appendTo("body");setTimeout(function(){n.fadeOut("normal",function(){n.remove()})},e)},fnContainer:function(){return this.dom.container},_fnConstruct:function(t){var n=this;this._fnCustomiseSettings(t),this.dom.container=e.createElement(this.s.tags.container),this.dom.container.className=this.classes.container,"none"!=this.s.select.type&&this._fnRowSelectConfig(),this._fnButtonDefinations(this.s.buttonSet,this.dom.container),this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){a(n.s.dt.nTBody).off("click.DTTT_Select",n.s.custom.sRowSelector).off("mousedown.DTTT_Select","tr").off("mouseup.DTTT_Select","tr"),a(n.dom.container).empty();var t=a.inArray(n,TableTools._aInstances);-1!==t&&TableTools._aInstances.splice(t,1)}})},_fnCustomiseSettings:function(t){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=!0),this.dom.table=this.s.dt.nTable,this.s.custom=a.extend({},TableTools.DEFAULTS,t),this.s.swfPath=this.s.custom.sSwfPath,"undefined"!=typeof o&&(o.moviePath=this.s.swfPath),this.s.select.type=this.s.custom.sRowSelect,this.s.select.preRowSelect=this.s.custom.fnPreRowSelect,this.s.select.postSelected=this.s.custom.fnRowSelected,this.s.select.postDeselected=this.s.custom.fnRowDeselected,this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass),this.s.tags=this.s.custom.oTags,this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(t,e){for(var n,r=0,i=t.length;r<i;r++){if("string"==typeof t[r]){if("undefined"==typeof TableTools.BUTTONS[t[r]]){alert("TableTools: Warning - unknown button type: "+t[r]);continue}n=a.extend({},TableTools.BUTTONS[t[r]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[t[r].sExtends]){alert("TableTools: Warning - unknown button type: "+t[r].sExtends);continue}n=a.extend({},TableTools.BUTTONS[t[r].sExtends],!0),n=a.extend(n,t[r],!0)}(n=this._fnCreateButton(n,a(e).hasClass(this.classes.collection.container)))&&e.appendChild(n)}},_fnCreateButton:function(t,e){var n=this._fnButtonBase(t,e);if(t.sAction.match(/flash/)){if(!this._fnHasFlash())return!1;this._fnFlashConfig(n,t)}else"text"==t.sAction?this._fnTextConfig(n,t):"div"==t.sAction?this._fnTextConfig(n,t):"collection"==t.sAction&&(this._fnTextConfig(n,t),this._fnCollectionConfig(n,t));return-1!==this.s.dt.iTabIndex&&a(n).attr("tabindex",this.s.dt.iTabIndex).attr("aria-controls",this.s.dt.sTableId).on("keyup.DTTT",function(t){13===t.keyCode&&(t.stopPropagation(),a(this).trigger("click"))}).on("mousedown.DTTT",function(e){t.sAction.match(/flash/)||e.preventDefault()}),n},_fnButtonBase:function(t,n){var r,i,o;n?(r=t.sTag&&"default"!==t.sTag?t.sTag:this.s.tags.collection.button,i=t.sLinerTag&&"default"!==t.sLinerTag?t.sLiner:this.s.tags.collection.liner,o=this.classes.collection.buttons.normal):(r=t.sTag&&"default"!==t.sTag?t.sTag:this.s.tags.button,i=t.sLinerTag&&"default"!==t.sLinerTag?t.sLiner:this.s.tags.liner,o=this.classes.buttons.normal),r=e.createElement(r),i=e.createElement(i);var a=this._fnGetMasterSettings();return r.className=o+" "+t.sButtonClass,r.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+a.buttonCounter),r.appendChild(i),i.innerHTML=t.sButtonText,a.buttonCounter++,r},_fnGetMasterSettings:function(){if(this.s.master)return this.s;for(var t=TableTools._aInstances,e=0,n=t.length;e<n;e++)if(this.dom.table==t[e].s.dt.nTable)return t[e].s},_fnCollectionConfig:function(t,n){var r=e.createElement(this.s.tags.collection.container);r.style.display="none",r.className=this.classes.collection.container,n._collection=r,e.body.appendChild(r),this._fnButtonDefinations(n.aButtons,r)},_fnCollectionShow:function(n,r){var i=this,o=a(n).offset(),s=r._collection,l=o.left,o=o.top+a(n).outerHeight(),u=a(t).height(),c=a(e).height(),f=a(t).width(),h=a(e).width();s.style.position="absolute",s.style.left=l+"px",s.style.top=o+"px",s.style.display="block",a(s).css("opacity",0);var d=e.createElement("div");d.style.position="absolute",d.style.left="0px",d.style.top="0px",d.style.height=(u>c?u:c)+"px",d.style.width=(f>h?f:h)+"px",d.className=this.classes.collection.background,a(d).css("opacity",0),e.body.appendChild(d),e.body.appendChild(s),u=a(s).outerWidth(),f=a(s).outerHeight(),l+u>h&&(s.style.left=h-u+"px"),o+f>c&&(s.style.top=o-f-a(n).outerHeight()+"px"),this.dom.collection.collection=s,this.dom.collection.background=d,setTimeout(function(){a(s).animate({opacity:1},500),a(d).animate({opacity:.25},500)},10),this.fnResizeButtons(),a(d).click(function(){i._fnCollectionHide.call(i,null,null)})},_fnCollectionHide:function(t,e){!(null!==e&&"collection"==e.sExtends)&&null!==this.dom.collection.collection&&(a(this.dom.collection.collection).animate({opacity:0},500,function(){this.style.display="none"}),a(this.dom.collection.background).animate({opacity:0},500,function(){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var t=this,e=this.s.dt;a(e.nTable).addClass(this.classes.select.table),"os"===this.s.select.type&&(a(e.nTBody).on("mousedown.DTTT_Select","tr",function(t){t.shiftKey&&a(e.nTBody).css("-moz-user-select","none").one("selectstart.DTTT_Select","tr",function(){return!1})}),a(e.nTBody).on("mouseup.DTTT_Select","tr",function(){a(e.nTBody).css("-moz-user-select","")})),a(e.nTBody).on("click.DTTT_Select",this.s.custom.sRowSelector,function(n){var r="tr"===this.nodeName.toLowerCase()?this:a(this).parents("tr")[0],i=t.s.select,o=t.s.dt.oInstance.fnGetPosition(r);if(r.parentNode==e.nTBody&&null!==e.oInstance.fnGetData(r)){if("os"==i.type)if(n.ctrlKey||n.metaKey)t.fnIsSelected(r)?t._fnRowDeselect(r,n):t._fnRowSelect(r,n);else if(n.shiftKey){var s=t.s.dt.aiDisplay.slice(),l=a.inArray(i.lastRow,s),u=a.inArray(o,s);if(0===t.fnGetSelected().length||l===-1)s.splice(a.inArray(o,s)+1,s.length);else{if(l>u)var c=u,u=l,l=c;s.splice(u+1,s.length),s.splice(0,l)}t.fnIsSelected(r)?(s.splice(a.inArray(o,s),1),t._fnRowDeselect(s,n)):t._fnRowSelect(s,n)}else t.fnIsSelected(r)&&1===t.fnGetSelected().length?t._fnRowDeselect(r,n):(t.fnSelectNone(),t._fnRowSelect(r,n));else t.fnIsSelected(r)?t._fnRowDeselect(r,n):"single"==i.type?(t.fnSelectNone(),t._fnRowSelect(r,n)):"multi"==i.type&&t._fnRowSelect(r,n);i.lastRow=o}}),e.oApi._fnCallbackReg(e,"aoRowCreatedCallback",function(n,r,i){e.aoData[i]._DTTT_selected&&a(n).addClass(t.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(t,e){var n,r,i=this._fnSelectData(t),o=[];for(n=0,r=i.length;n<r;n++)i[n].nTr&&o.push(i[n].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,e,o,!0)){for(n=0,r=i.length;n<r;n++)i[n]._DTTT_selected=!0,i[n].nTr&&a(i[n].nTr).addClass(this.classes.select.row);null!==this.s.select.postSelected&&this.s.select.postSelected.call(this,o),TableTools._fnEventDispatch(this,"select",o,!0)}},_fnRowDeselect:function(t,e){var n,r,i=this._fnSelectData(t),o=[];for(n=0,r=i.length;n<r;n++)i[n].nTr&&o.push(i[n].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,e,o,!1)){for(n=0,r=i.length;n<r;n++)i[n]._DTTT_selected=!1,i[n].nTr&&a(i[n].nTr).removeClass(this.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,o),TableTools._fnEventDispatch(this,"select",o,!1)}},_fnSelectData:function(t){var e,n,r,i=[];if(t.nodeName)e=this.s.dt.oInstance.fnGetPosition(t),i.push(this.s.dt.aoData[e]);else if("undefined"!=typeof t.length)for(n=0,r=t.length;n<r;n++)t[n].nodeName?(e=this.s.dt.oInstance.fnGetPosition(t[n]),i.push(this.s.dt.aoData[e])):"number"==typeof t[n]?i.push(this.s.dt.aoData[t[n]]):i.push(t[n]);else"number"==typeof t?i.push(this.s.dt.aoData[t]):i.push(t);return i},_fnTextConfig:function(t,e){var n=this;null!==e.fnInit&&e.fnInit.call(this,t,e),""!==e.sToolTip&&(t.title=e.sToolTip),a(t).hover(function(){null!==e.fnMouseover&&e.fnMouseover.call(this,t,e,null)},function(){null!==e.fnMouseout&&e.fnMouseout.call(this,t,e,null)}),null!==e.fnSelect&&TableTools._fnEventListen(this,"select",function(r){e.fnSelect.call(n,t,e,r)}),a(t).click(function(r){null!==e.fnClick&&e.fnClick.call(n,t,e,null,r),null!==e.fnComplete&&e.fnComplete.call(n,t,e,null,null),n._fnCollectionHide(t,e)})},_fnHasFlash:function(){try{if(new ActiveXObject("ShockwaveFlash.ShockwaveFlash"))return!0}catch(t){if(navigator.mimeTypes&&navigator.mimeTypes["application/x-shockwave-flash"]!==n&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return!0}return!1},_fnFlashConfig:function(t,e){var n=this,r=new o.Client;null!==e.fnInit&&e.fnInit.call(this,t,e),r.setHandCursor(!0),"flash_save"==e.sAction?(r.setAction("save"),r.setCharSet("utf16le"==e.sCharSet?"UTF16LE":"UTF8"),r.setBomInc(e.bBomInc),r.setFileName(e.sFileName.replace("*",this.fnGetTitle(e)))):"flash_pdf"==e.sAction?(r.setAction("pdf"),r.setFileName(e.sFileName.replace("*",this.fnGetTitle(e)))):r.setAction("copy"),r.addEventListener("mouseOver",function(){null!==e.fnMouseover&&e.fnMouseover.call(n,t,e,r)}),r.addEventListener("mouseOut",function(){null!==e.fnMouseout&&e.fnMouseout.call(n,t,e,r)}),r.addEventListener("mouseDown",function(){null!==e.fnClick&&e.fnClick.call(n,t,e,r)}),r.addEventListener("complete",function(i,o){null!==e.fnComplete&&e.fnComplete.call(n,t,e,r,o),n._fnCollectionHide(t,e)}),null!==e.fnSelect&&TableTools._fnEventListen(this,"select",function(r){e.fnSelect.call(n,t,e,r)}),this._fnFlashGlue(r,t,e.sToolTip)},_fnFlashGlue:function(t,n,r){var i=this,o=n.getAttribute("id");e.getElementById(o)?t.glue(n,r):setTimeout(function(){i._fnFlashGlue(t,n,r)},100)},_fnFlashSetText:function(t,e){var n=this._fnChunkData(e,8192);t.clearText();for(var r=0,i=n.length;r<i;r++)t.appendText(n[r])},_fnColumnTargets:function(t){var e,n=[],r=this.s.dt,i=r.aoColumns;if(e=i.length,"function"==typeof t)for(t=t.call(this,r),r=0;r<e;r++)n.push(-1!==a.inArray(r,t));else if("object"==typeof t){for(r=0;r<e;r++)n.push(!1);for(r=0,e=t.length;r<e;r++)n[t[r]]=!0}else if("visible"==t)for(r=0;r<e;r++)n.push(!!i[r].bVisible);else if("hidden"==t)for(r=0;r<e;r++)n.push(!i[r].bVisible);else if("sortable"==t)for(r=0;r<e;r++)n.push(!!i[r].bSortable);else for(r=0;r<e;r++)n.push(!0);return n},_fnNewline:function(t){return"auto"==t.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":t.sNewLine},_fnGetDataTablesData:function(t){var e,n,r,o,s,l,u=[],c="",f=this.s.dt,h=RegExp(t.sFieldBoundary,"g"),d=this._fnColumnTargets(t.mColumns);if(r="undefined"!=typeof t.bSelectedOnly&&t.bSelectedOnly,t.bHeader){for(s=[],e=0,n=f.aoColumns.length;e<n;e++)d[e]&&(c=f.aoColumns[e].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),c=this._fnHtmlDecode(c),s.push(this._fnBoundData(c,t.sFieldBoundary,h)));u.push(s.join(t.sFieldSeperator))}r=!0;var p;for(o=this.fnGetSelectedIndexes(),p=(r="none"!==this.s.select.type&&r&&0!==o.length)?o:i.Api?new i.Api(f).rows(t.oSelectorOpts).indexes().flatten().toArray():f.oInstance.$("tr",t.oSelectorOpts).map(function(t,e){return f.oInstance.fnGetPosition(e)}).get(),r=0,o=p.length;r<o;r++){for(l=f.aoData[p[r]].nTr,s=[],e=0,n=f.aoColumns.length;e<n;e++)d[e]&&(c=f.oApi._fnGetCellData(f,p[r],e,"display"),t.fnCellRender?c=t.fnCellRender(c,e,l,p[r])+"":"string"==typeof c?(c=c.replace(/\n/g," "),c=c.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,"$1$2$3"),c=c.replace(/<.*?>/g,"")):c+="",c=c.replace(/^\s+/,"").replace(/\s+$/,""),c=this._fnHtmlDecode(c),s.push(this._fnBoundData(c,t.sFieldBoundary,h)));u.push(s.join(t.sFieldSeperator)),t.bOpenRows&&(e=a.grep(f.aoOpenRows,function(t){return t.nParent===l}),1===e.length&&(c=this._fnBoundData(a("td",e[0].nTr).html(),t.sFieldBoundary,h),u.push(c)))}if(t.bFooter&&null!==f.nTFoot){for(s=[],e=0,n=f.aoColumns.length;e<n;e++)d[e]&&null!==f.aoColumns[e].nTf&&(c=f.aoColumns[e].nTf.innerHTML.replace(/\n/g," ").replace(/<.*?>/g,""),c=this._fnHtmlDecode(c),s.push(this._fnBoundData(c,t.sFieldBoundary,h)));u.push(s.join(t.sFieldSeperator))}return u.join(this._fnNewline(t))},_fnBoundData:function(t,e,n){return""===e?t:e+t.replace(n,e+e)+e},_fnChunkData:function(t,e){for(var n=[],r=t.length,i=0;i<r;i+=e)i+e<r?n.push(t.substring(i,i+e)):n.push(t.substring(i,r));return n},_fnHtmlDecode:function(t){if(-1===t.indexOf("&"))return t;var n=e.createElement("div");return t.replace(/&([^\s]*?);/g,function(t,e){return"#"===t.substr(1,1)?String.fromCharCode(Number(e.substr(1))):(n.innerHTML=t,n.childNodes[0].nodeValue)})},_fnPrintStart:function(n){var r=this,i=this.s.dt;this._fnPrintHideNodes(i.nTable),this.s.print.saveStart=i._iDisplayStart,this.s.print.saveLength=i._iDisplayLength,n.bShowAll&&(i._iDisplayStart=0,i._iDisplayLength=-1,i.oApi._fnCalculateEnd&&i.oApi._fnCalculateEnd(i),i.oApi._fnDraw(i)),""===i.oScroll.sX&&""===i.oScroll.sY||(this._fnPrintScrollStart(i),a(this.s.dt.nTable).bind("draw.DTTT_Print",function(){r._fnPrintScrollStart(i)}));var o,s=i.aanFeatures;for(o in s)if("i"!=o&&"t"!=o&&1==o.length)for(var l=0,u=s[o].length;l<u;l++)this.dom.print.hidden.push({node:s[o][l],display:"block"}),s[o][l].style.display="none";a(e.body).addClass(this.classes.print.body),""!==n.sInfo&&this.fnInfo(n.sInfo,3e3),n.sMessage&&a("<div/>").addClass(this.classes.print.message).html(n.sMessage).prependTo("body"),this.s.print.saveScroll=a(t).scrollTop(),t.scrollTo(0,0),a(e).bind("keydown.DTTT",function(t){27==t.keyCode&&(t.preventDefault(),r._fnPrintEnd.call(r,t))})},_fnPrintEnd:function(){var n=this.s.dt,r=this.s.print;this._fnPrintShowNodes(),""===n.oScroll.sX&&""===n.oScroll.sY||(a(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd()),t.scrollTo(0,r.saveScroll),a("div."+this.classes.print.message).remove(),a(e.body).removeClass("DTTT_Print"),n._iDisplayStart=r.saveStart,n._iDisplayLength=r.saveLength,n.oApi._fnCalculateEnd&&n.oApi._fnCalculateEnd(n),n.oApi._fnDraw(n),a(e).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var t=this.s.dt;t.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var e,n=t.nTable.parentNode;e=t.nTable.getElementsByTagName("thead"),0<e.length&&t.nTable.removeChild(e[0]),null!==t.nTFoot&&(e=t.nTable.getElementsByTagName("tfoot"),0<e.length&&t.nTable.removeChild(e[0])),e=t.nTHead.cloneNode(!0),t.nTable.insertBefore(e,t.nTable.childNodes[0]),null!==t.nTFoot&&(e=t.nTFoot.cloneNode(!0),t.nTable.insertBefore(e,t.nTable.childNodes[1])),""!==t.oScroll.sX&&(t.nTable.style.width=a(t.nTable).outerWidth()+"px",n.style.width=a(t.nTable).outerWidth()+"px",n.style.overflow="visible"),""!==t.oScroll.sY&&(n.style.height=a(t.nTable).outerHeight()+"px",n.style.overflow="visible")},_fnPrintScrollEnd:function(){var t=this.s.dt,e=t.nTable.parentNode;""!==t.oScroll.sX&&(e.style.width=t.oApi._fnStringToCss(t.oScroll.sX),e.style.overflow="auto"),""!==t.oScroll.sY&&(e.style.height=t.oApi._fnStringToCss(t.oScroll.sY),e.style.overflow="auto")},_fnPrintShowNodes:function(){for(var t=this.dom.print.hidden,e=0,n=t.length;e<n;e++)t[e].node.style.display=t[e].display;t.splice(0,t.length)},_fnPrintHideNodes:function(t){for(var e=this.dom.print.hidden,n=t.parentNode,r=n.childNodes,i=0,o=r.length;i<o;i++)if(r[i]!=t&&1==r[i].nodeType){var s=a(r[i]).css("display");"none"!=s&&(e.push({node:r[i],display:s}),r[i].style.display="none")}"BODY"!=n.nodeName.toUpperCase()&&this._fnPrintHideNodes(n)}},TableTools._aInstances=[],TableTools._aListeners=[],TableTools.fnGetMasters=function(){for(var t=[],e=0,n=TableTools._aInstances.length;e<n;e++)TableTools._aInstances[e].s.master&&t.push(TableTools._aInstances[e]);return t},TableTools.fnGetInstance=function(t){"object"!=typeof t&&(t=e.getElementById(t));for(var n=0,r=TableTools._aInstances.length;n<r;n++)if(TableTools._aInstances[n].s.master&&TableTools._aInstances[n].dom.table==t)return TableTools._aInstances[n];return null},TableTools._fnEventListen=function(t,e,n){TableTools._aListeners.push({that:t,type:e,fn:n})},TableTools._fnEventDispatch=function(t,e,n,r){for(var i=TableTools._aListeners,o=0,a=i.length;o<a;o++)t.dom.table==i[o].that.dom.table&&i[o].type==e&&i[o].fn(n,r)},TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,oSelectorOpts:n,fnMouseover:null,fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null},TableTools.BUTTONS={csv:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(t,e,n){this.fnSetText(n,this.fnGetTableData(e))}}),xls:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(t,e,n){this.fnSetText(n,this.fnGetTableData(e))}}),copy:a.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(t,e,n){this.fnSetText(n,this.fnGetTableData(e))},fnComplete:function(t,e,n,r){t=r.split("\n").length,e.bHeader&&t--,null!==this.s.dt.nTFoot&&e.bFooter&&t--,
this.fnInfo("<h6>Table copied</h6><p>Copied "+t+" row"+(1==t?"":"s")+" to the clipboard.</p>",1500)}}),pdf:a.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(t,e,n){this.fnSetText(n,"title:"+this.fnGetTitle(e)+"\nmessage:"+e.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(e)+"\norientation:"+e.sPdfOrientation+"\nsize:"+e.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(e))}}),print:a.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.</p>",sMessage:null,bShowAll:!0,sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(t,e){this.fnPrint(!0,e)}}),text:a.extend({},TableTools.buttonBase),select:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(t){0!==this.fnGetSelected().length?a(t).removeClass(this.classes.buttons.disabled):a(t).addClass(this.classes.buttons.disabled)},fnInit:function(t){a(t).addClass(this.classes.buttons.disabled)}}),select_single:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(t){1==this.fnGetSelected().length?a(t).removeClass(this.classes.buttons.disabled):a(t).addClass(this.classes.buttons.disabled)},fnInit:function(t){a(t).addClass(this.classes.buttons.disabled)}}),select_all:a.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(){this.fnSelectAll()},fnSelect:function(t){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?a(t).addClass(this.classes.buttons.disabled):a(t).removeClass(this.classes.buttons.disabled)}}),select_none:a.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(){this.fnSelectNone()},fnSelect:function(t){0!==this.fnGetSelected().length?a(t).removeClass(this.classes.buttons.disabled):a(t).addClass(this.classes.buttons.disabled)},fnInit:function(t){a(t).addClass(this.classes.buttons.disabled)}}),ajax:a.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(t,e){var n=this.fnGetTableData(e);a.ajax({url:e.sAjaxUrl,data:[{name:"tableData",value:n}],success:e.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(){alert("Ajax complete")}}),div:a.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:a.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(t,e){this._fnCollectionShow(t,e)}})},TableTools.buttons=TableTools.BUTTONS,TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}},TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}},TableTools.DEFAULTS={sSwfPath:"../swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sRowSelector:"tr",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}},TableTools.defaults=TableTools.DEFAULTS,TableTools.prototype.CLASS="TableTools",TableTools.version="2.2.4",a.fn.dataTable.Api&&a.fn.dataTable.Api.register("tabletools()",function(){var t=null;return 0<this.context.length&&(t=TableTools.fnGetInstance(this.context[0].nTable)),t}),"function"==typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.0")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInit;return new TableTools(t.oInstance,e?e.tableTools||e.oTableTools||{}:{}).dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools requires DataTables 1.9.0 or newer - www.datatables.net/download"),a.fn.DataTable.TableTools=TableTools,"function"==typeof r.fn.dataTable&&"function"==typeof r.fn.dataTableExt.fnVersionCheck&&r.fn.dataTableExt.fnVersionCheck("1.9.0")?r.fn.dataTableExt.aoFeatures.push({fnInit:function(t){return t=new TableTools(t.oInstance,"undefined"!=typeof t.oInit.oTableTools?t.oInit.oTableTools:{}),TableTools._aInstances.push(t),t.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download"),r.fn.dataTable.TableTools=TableTools,r.fn.DataTable.TableTools=TableTools};"function"==typeof define&&define.amd?define(["jquery","datatables"],r):"object"==typeof exports?r(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.TableTools&&r(jQuery,jQuery.fn.dataTable)}(window,document),$.fn.dataTableExt.oPagination.iTweenTime=100,$.fn.dataTableExt.oPagination.scrolling={fnInit:function(t,e,n){var r=t.oLanguage.oPaginate,i=(t.oClasses,t.bJUI?'<a class="'+t.oClasses.sPagePrevDisabled+'" tabindex="'+t.iTabIndex+'" role="button"><span class="'+t.oClasses.sPageJUIPrev+'"></span></a><a class="'+t.oClasses.sPageNextDisabled+'" tabindex="'+t.iTabIndex+'" role="button"><span class="'+t.oClasses.sPageJUINext+'"></span></a>':'<a class="'+t.oClasses.sPagePrevDisabled+'" tabindex="'+t.iTabIndex+'" role="button">'+r.sPrevious+'</a><a class="'+t.oClasses.sPageNextDisabled+'" tabindex="'+t.iTabIndex+'" role="button">'+r.sNext+"</a>");$(e).append(i);var o=$("a",e),a=o[0],s=o[1];t.oApi._fnBindAction(a,{action:"previous"},function(){if("undefined"==typeof t.iPagingLoopStart||t.iPagingLoopStart==-1){t.iPagingLoopStart=t._iDisplayStart,t.iPagingEnd=t._iDisplayStart-t._iDisplayLength,t.iPagingEnd<0&&(t.iPagingEnd=0);var e=$.fn.dataTableExt.oPagination.iTweenTime,r=function(){t.iPagingLoopStart>t.iPagingEnd?(t.iPagingLoopStart--,t._iDisplayStart=t.iPagingLoopStart,n(t),setTimeout(function(){r()},e)):t.iPagingLoopStart=-1};r()}}),t.oApi._fnBindAction(s,{action:"next"},function(){if("undefined"==typeof t.iPagingLoopStart||t.iPagingLoopStart==-1){t.iPagingLoopStart=t._iDisplayStart,t._iDisplayStart+t._iDisplayLength<t.fnRecordsDisplay()&&(t.iPagingEnd=t._iDisplayStart+t._iDisplayLength);var e=$.fn.dataTableExt.oPagination.iTweenTime,r=function(){t.iPagingLoopStart<t.iPagingEnd?(t.iPagingLoopStart++,t._iDisplayStart=t.iPagingLoopStart,n(t),setTimeout(function(){r()},e)):t.iPagingLoopStart=-1};r()}})},fnUpdate:function(t,e){if(t.aanFeatures.p)for(var n=t.aanFeatures.p,r=0,i=n.length;r<i;r++)0!==n[r].childNodes.length&&(n[r].childNodes[0].className=0===t._iDisplayStart?t.oClasses.sPagePrevDisabled:t.oClasses.sPagePrevEnabled,n[r].childNodes[1].className=t.fnDisplayEnd()==t.fnRecordsDisplay()?t.oClasses.sPageNextDisabled:t.oClasses.sPageNextEnabled)}},function(t,e){var n=function(t,n){t.extend(!0,n.defaults,{dom:"<'row'<'col-sm-6'l><'col-sm-6'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-5'i><'col-sm-7'p>>",renderer:"bootstrap"}),t.extend(n.ext.classes,{sWrapper:"dataTables_wrapper form-inline dt-bootstrap",sFilterInput:"form-control input-sm",sLengthSelect:"form-control input-sm"}),n.ext.renderer.pageButton.bootstrap=function(r,i,o,a,s,l){var u,c,f,h=new n.Api(r),d=r.oClasses,p=r.oLanguage.oPaginate,g=0,v=function(e,n){var i,a,f,m,y=function(e){e.preventDefault(),t(e.currentTarget).hasClass("disabled")||h.page(e.data.action).draw("page")};for(i=0,a=n.length;i<a;i++)if(m=n[i],t.isArray(m))v(e,m);else{switch(c=u="",m){case"ellipsis":u="&hellip;",c="disabled";break;case"first":u=p.sFirst,c=m+(0<s?"":" disabled");break;case"previous":u=p.sPrevious,c=m+(0<s?"":" disabled");break;case"next":u=p.sNext,c=m+(s<l-1?"":" disabled");break;case"last":u=p.sLast,c=m+(s<l-1?"":" disabled");break;default:u=m+1,c=s===m?"active":""}u&&(f=t("<li>",{"class":d.sPageButton+" "+c,id:0===o&&"string"==typeof m?r.sTableId+"_"+m:null}).append(t("<a>",{href:"#","aria-controls":r.sTableId,"data-dt-idx":g,tabindex:r.iTabIndex}).html(u)).appendTo(e),r.oApi._fnBindAction(f,{action:m},y),g++)}};try{f=t(i).find(e.activeElement).data("dt-idx")}catch(m){}v(t(i).empty().html('<ul class="pagination"/>').children("ul"),a),f&&t(i).find("[data-dt-idx="+f+"]").focus()},n.TableTools&&(t.extend(!0,n.TableTools.classes,{container:"DTTT btn-group",buttons:{normal:"btn btn-default",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},print:{info:"DTTT_print_info"},select:{row:"active"}}),t.extend(!0,n.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};"function"==typeof define&&define.amd?define(["jquery","datatables"],n):"object"==typeof exports?n(require("jquery"),require("datatables")):jQuery&&n(jQuery,jQuery.fn.dataTable)}(window,document),function(t,e,n){var r=function(r,i){var o=0,a=function(t,e){if(!i.versionCheck||!i.versionCheck("1.10.8"))throw"Warning: AutoFill requires DataTables 1.10.8 or greater";this.c=r.extend(!0,{},i.defaults.autoFill,a.defaults,e),this.s={dt:new i.Api(t),namespace:".autoFill"+o++,scroll:{},scrollInterval:null},this.dom={handle:r('<div class="dt-autofill-handle"/>'),select:{top:r('<div class="dt-autofill-select top"/>'),right:r('<div class="dt-autofill-select right"/>'),bottom:r('<div class="dt-autofill-select bottom"/>'),left:r('<div class="dt-autofill-select left"/>')},background:r('<div class="dt-autofill-background"/>'),list:r('<div class="dt-autofill-list">'+this.s.dt.i18n("autoFill.info","")+"<ul/></div>"),dtScroll:null},this._constructor()};return a.prototype={_constructor:function(){var t=this,n=this.s.dt,i=r("div.dataTables_scrollBody",this.s.dt.table().container());i.length&&(this.dom.dtScroll=i,"static"===i.css("position")&&i.css("position","relative")),this._focusListener(),this.dom.handle.on("mousedown",function(e){return t._mousedown(e),!1}),n.on("destroy.autoFill",function(){n.off(".autoFill"),r(n.table().body()).off(t.s.namespace),r(e.body).off(t.s.namespace)})},_attach:function(t){var e=this.s.dt,n=e.cell(t).index();n&&-1!==e.columns(this.c.columns).indexes().indexOf(n.column)?(this.dom.attachedTo=t,this.dom.handle.appendTo(t)):this._detach()},_actionSelector:function(t){var e=this,n=this.s.dt,i=a.actions,o=[];if(r.each(i,function(e,r){r.available(n,t)&&o.push(e)}),1===o.length&&!1===this.c.alwaysAsk){var s=i[o[0]].execute(n,t);this._update(s,t)}else{var l=this.dom.list.children("ul").empty();o.push("cancel"),r.each(o,function(o,s){l.append(r("<li/>").append('<div class="dt-autofill-question">'+i[s].option(n,t)+"<div>").append(r('<div class="dt-autofill-button">').append(r('<button class="'+a.classes.btn+'">'+n.i18n("autoFill.button","&gt;")+"</button>").on("click",function(){var o=i[s].execute(n,t,r(this).closest("li"));e._update(o,t),e.dom.background.remove(),e.dom.list.remove()}))))}),this.dom.background.appendTo("body"),this.dom.list.appendTo("body"),this.dom.list.css("margin-top",-1*(this.dom.list.outerHeight()/2))}},_detach:function(){this.dom.attachedTo=null,this.dom.handle.detach()},_drawSelection:function(t){var e=this.s.dt,n=this.s.start,i=r(this.dom.start),o=r(t),a={row:o.parent().index(),column:o.index()};if(e.cell(o).any()&&-1!==e.columns(this.c.columns).indexes().indexOf(a.column)){this.s.end=a;var s,e=n.row<a.row?i:o;s=n.row<a.row?o:i,t=n.column<a.column?i:o,i=n.column<a.column?o:i,e=e.position().top,t=t.position().left,n=s.position().top+s.outerHeight()-e,i=i.position().left+i.outerWidth()-t,(o=this.dom.dtScroll)&&(e+=o.scrollTop(),t+=o.scrollLeft()),o=this.dom.select,o.top.css({top:e,left:t,width:i}),o.left.css({top:e,left:t,height:n}),o.bottom.css({top:e+n,left:t,width:i}),o.right.css({top:e,left:t+i,height:n})}},_editor:function(t){var e=this.s.dt,r=this.c.editor;if(r){for(var i={},o=[],a=0,s=t.length;a<s;a++)for(var l=0,u=t[a].length;l<u;l++){var c=t[a][l],f=e.settings()[0].aoColumns[c.index.column],f=f.editField!==n?f.editField:f.mData;if(!f)throw"Could not automatically determine field name. Please see https://datatables.net/tn/11";i[f]||(i[f]={});var h=e.row(c.index.row).id();i[f][h]=c.set,o.push(c.index)}r.bubble(o,!1).multiSet(i).submit()}},_emitEvent:function(t,e){this.s.dt.iterator("table",function(n){r(n.nTable).triggerHandler(t+".dt",e)})},_focusListener:function(){var t=this,n=this.s.dt,i=this.s.namespace,o=null!==this.c.focus?this.c.focus:n.settings()[0].keytable?"focus":"hover";"focus"===o?n.on("key-focus.autoFill",function(e,n,r){t._attach(r.node())}).on("key-blur.autoFill",function(){t._detach()}):"click"===o?(r(n.table().body()).on("click"+i,"td, th",function(){t._attach(this)}),r(e.body).on("click"+i,function(e){r(e.target).parents().filter(n.table().body()).length||t._detach()})):r(n.table().body()).on("mouseenter"+i,"td, th",function(){t._attach(this)}).on("mouseleave"+i,function(){t._detach()})},_mousedown:function(n){var i=this;this.dom.start=this.dom.attachedTo,this.s.start={row:r(this.dom.start).parent().index(),column:r(this.dom.start).index()},r(e.body).on("mousemove.autoFill",function(t){i._mousemove(t)}).on("mouseup.autoFill",function(t){i._mouseup(t)});var o=this.dom.select,a=r(this.s.dt.table().body()).offsetParent();o.top.appendTo(a),o.left.appendTo(a),o.right.appendTo(a),o.bottom.appendTo(a),this._drawSelection(this.dom.start,n),this.dom.handle.css("display","none"),n=this.dom.dtScroll,this.s.scroll={windowHeight:r(t).height(),windowWidth:r(t).width(),dtTop:n?n.offset().top:null,dtLeft:n?n.offset().left:null,dtHeight:n?n.outerHeight():null,dtWidth:n?n.outerWidth():null}},_mousemove:function(t){var e=t.target.nodeName.toLowerCase();"td"!==e&&"th"!==e||(this._drawSelection(t.target,t),this._shiftScroll(t))},_mouseup:function(){r(e.body).off(".autoFill");var t=this.s.dt,n=this.dom.select;n.top.remove(),n.left.remove(),n.right.remove(),n.bottom.remove(),this.dom.handle.css("display","block");var n=this.s.start,i=this.s.end;if(n.row!==i.row||n.column!==i.column){for(var o=this._range(n.row,i.row),n=this._range(n.column,i.column),i=[],a=0;a<o.length;a++)i.push(r.map(n,function(e){return e=t.cell(":eq("+o[a]+")",e+":visible",{page:"current"}),{cell:e,data:e.data(),index:e.index()}}));this._actionSelector(i)}},_range:function(t,e){var n,r=[];if(t<=e)for(n=t;n<=e;n++)r.push(n);else for(n=t;n>=e;n--)r.push(n);return r},_shiftScroll:function(t){var n,r,i,o,a=this,s=this.s.scroll,l=!1,u=t.pageY-e.body.scrollTop,c=t.pageX-e.body.scrollLeft;65>u?n=-5:u>s.windowHeight-65&&(n=5),65>c?r=-5:c>s.windowWidth-65&&(r=5),null!==s.dtTop&&t.pageY<s.dtTop+65?i=-5:null!==s.dtTop&&t.pageY>s.dtTop+s.dtHeight-65&&(i=5),null!==s.dtLeft&&t.pageX<s.dtLeft+65?o=-5:null!==s.dtLeft&&t.pageX>s.dtLeft+s.dtWidth-65&&(o=5),n||r||i||o?(s.windowVert=n,s.windowHoriz=r,s.dtVert=i,s.dtHoriz=o,l=!0):this.s.scrollInterval&&(clearInterval(this.s.scrollInterval),this.s.scrollInterval=null),!this.s.scrollInterval&&l&&(this.s.scrollInterval=setInterval(function(){if(s.windowVert&&(e.body.scrollTop=e.body.scrollTop+s.windowVert),s.windowHoriz&&(e.body.scrollLeft=e.body.scrollLeft+s.windowHoriz),s.dtVert||s.dtHoriz){var t=a.dom.dtScroll[0];s.dtVert&&(t.scrollTop=t.scrollTop+s.dtVert),s.dtHoriz&&(t.scrollLeft=t.scrollLeft+s.dtHoriz)}},20))},_update:function(t,e){if(!1!==t){var n,r=this.s.dt;if(this._emitEvent("preAutoFill",[r,e]),this._editor(e),null!==this.c.update?this.c.update:!this.c.editor){for(var i=0,o=e.length;i<o;i++)for(var a=0,s=e[i].length;a<s;a++)n=e[i][a],n.cell.data(n.set);r.draw(!1)}this._emitEvent("autoFill",[r,e])}}},a.actions={increment:{available:function(t,e){return r.isNumeric(e[0][0].data)},option:function(t){return t.i18n("autoFill.increment",'Increment / decrement each cell by: <input type="number" value="1">')},execute:function(t,e,n){for(var t=1*e[0][0].data,n=1*r("input",n).val(),i=0,o=e.length;i<o;i++)for(var a=0,s=e[i].length;a<s;a++)e[i][a].set=t,t+=n}},fill:{available:function(){return!0},option:function(t,e){return t.i18n("autoFill.fill","Fill all cells with <i>"+e[0][0].data+"</i>")},execute:function(t,e){for(var n=e[0][0].data,r=0,i=e.length;r<i;r++)for(var o=0,a=e[r].length;o<a;o++)e[r][o].set=n}},fillHorizontal:{available:function(t,e){return 1<e.length&&1<e[0].length},option:function(t){return t.i18n("autoFill.fillHorizontal","Fill cells horizontally")},execute:function(t,e){for(var n=0,r=e.length;n<r;n++)for(var i=0,o=e[n].length;i<o;i++)e[n][i].set=e[n][0].data}},fillVertical:{available:function(t,e){return 1<e.length&&1<e[0].length},option:function(t){return t.i18n("autoFill.fillVertical","Fill cells vertically")},execute:function(t,e){for(var n=0,r=e.length;n<r;n++)for(var i=0,o=e[n].length;i<o;i++)e[n][i].set=e[0][i].data}},cancel:{available:function(){return!1},option:function(t){return t.i18n("autoFill.cancel","Cancel")},execute:function(){return!1}}},a.version="2.0.0",a.defaults={alwaysAsk:!1,focus:null,columns:"",update:null,editor:null},a.classes={btn:"btn"},r(e).on("init.dt.autofill",function(t,e){if("dt"===t.namespace){var n=e.oInit.autoFill,o=i.defaults.autoFill;(n||o)&&(o=r.extend({},n,o),!1!==n&&new a(e,o))}}),i.AutoFill=a,i.AutoFill=a};"function"==typeof define&&define.amd?define(["jquery","datatables"],r):"object"==typeof exports?r(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.AutoFill&&r(jQuery,jQuery.fn.dataTable)}(window,document),require=function t(e,n,r){function i(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return i(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){function r(){}var i=e.exports={};i.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.MutationObserver,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};var r=[];if(e){var i=document.createElement("div"),o=new MutationObserver(function(){var t=r.slice();r.length=0,t.forEach(function(t){t()})});return o.observe(i,{attributes:!0}),function(t){r.length||i.setAttribute("yes","no"),r.push(t)}}return n?(window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}):function(t){setTimeout(t,0)}}(),i.title="browser",i.browser=!0,i.env={},i.argv=[],i.on=r,i.addListener=r,i.once=r,i.off=r,i.removeListener=r,i.removeAllListeners=r,i.emit=r,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],2:[function(t,e,n){var r,i,o,a=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};r=t("msa-colorschemes"),o=t("backbone-thin").Model,e.exports=i=o.extend({defaults:{scheme:"nucleotide",colorBackground:!0,showLowerCase:!0,opacity:.6},initialize:function(t,e,n){return this.colors=new r({seqs:e,conservation:function(){return n.scale(n.conservation())}}),n.on("reset",function(){return"dyn"===this.getSelectedScheme().type&&a.call(this.getSelectedScheme(),"reset")>=0?this.getSelectedScheme().reset():void 0},this)},addStaticScheme:function(t,e){return this.colors.addStaticScheme(t,e)},addDynScheme:function(t,e){return this.colors.addDynScheme(t,e)},getScheme:function(t){return this.colors.getScheme(t)},getSelectedScheme:function(){return this.colors.getScheme(this.get("scheme"))}})},{"backbone-thin":62,"msa-colorschemes":137}],3:[function(t,e,n){var r,i,o;i=t("backbone-thin").Model,o=t("underscore"),e.exports=r=i.extend({initialize:function(t,e){return null==this.get("hidden")&&this.set("hidden",[]),this.stats=e},calcHiddenColumns:function(t){var e,n,r,i,o;for(e=this.get("hidden"),o=t,r=0,i=e.length;i>r;r++)n=e[r],o>=n&&o++;return o-t}})},{"backbone-thin":62,underscore:150}],4:[function(t,e,n){var r,i;i=t("backbone-thin").Model,e.exports=r=i.extend({defaults:{registerMouseHover:!1,registerMouseClicks:!0,importProxy:"https://cors-anywhere.herokuapp.com/",eventBus:!0,alphabetSize:20,dropImport:!1,debug:!1,hasRef:!1,bootstrapMenu:!1,manualRendering:!1}})},{"backbone-thin":62}],5:[function(t,e,n){var r,i,o;r=t("../utils/loader"),i=t("backbone-thin").Model,e.exports=o=i.extend({initialize:function(t){return this.g=t},development:{"msa-tnt":"/node_modules/msa-tnt/build/bundle.js","biojs-io-newick":"/node_modules/biojs-io-newick/build/biojs-io-newick.min.js"},loadPackage:function(e,n){var i;try{return i=t(e),n(i)}catch(o){return r.loadScript(this._pkgURL(e),n)}},loadPackages:function(t,e){var n;return n=r.joinCb(function(){return e()},t.length),t.forEach(function(t){return function(e){return t.loadPackage(e,n)}}(this))},_pkgURL:function(t){var e;return e=this.g.config.get("debug")?this.development[t]:"http://wzrd.in/bundle/"+t+"@latest"}})},{"../utils/loader":35,"backbone-thin":62}],6:[function(t,e,n){var r,i,o,a,s,l;l=t("underscore"),i=t("backbone-thin").Model,s=i.extend({defaults:{type:"super"}}),a=s.extend({defaults:l.extend({},s.prototype.defaults,{type:"row",seqId:""}),inRow:function(t){return t===this.get("seqId")},inColumn:function(t){return!0},getLength:function(){return 1}}),r=s.extend({defaults:l.extend({},s.prototype.defaults,{type:"column",xStart:-1,xEnd:-1}),inRow:function(){return!0},inColumn:function(t){return xStart<=t&&t<=xEnd},getLength:function(){return xEnd-xStart}}),o=a.extend(l.extend({},l.pick(r,"inColumn"),l.pick(r,"getLength"),{defaults:l.extend({},r.prototype.defaults,a.prototype.defaults,{type:"pos"})})),e.exports.sel=s,e.exports.possel=o,e.exports.rowsel=a,e.exports.columnsel=r},{"backbone-thin":62,underscore:150}],7:[function(t,e,n){var r,i,o,a;a=t("./Selection"),o=t("underscore"),r=t("backbone-thin").Collection,e.exports=i=r.extend({model:a.sel,initialize:function(t,e){return null!=e?(this.g=e.g,this.listenTo(this.g,"residue:click",function(t){return this._handleE(t.evt,new a.possel({xStart:t.rowPos,xEnd:t.rowPos,seqId:t.seqId}))}),this.listenTo(this.g,"row:click",function(t){return this._handleE(t.evt,new a.rowsel({seqId:t.seqId}))}),this.listenTo(this.g,"column:click",function(t){return this._handleE(t.evt,new a.columnsel({xStart:t.rowPos,xEnd:t.rowPos+t.stepSize-1}))})):void 0},getSelForRow:function(t){return this.filter(function(e){return e.inRow(t)})},getSelForColumns:function(t){return this.filter(function(e){return e.inColumn(t)})},addJSON:function(t){return this.add(this._fromJSON(t))},_fromJSON:function(t){switch(t.type){case"column":return new a.columnsel(t);case"row":return new a.rowsel(t);case"pos":return new a.possel(t)}},resetJSON:function(t){return t=o.map(t,this._fromJSON),this.reset(t)},getBlocksForRow:function(t,e){var n,r,i,o,a,s,l,u;for(u=this.filter(function(e){return e.inRow(t)}),n=[],r=0,i=u.length;i>r;r++){if(l=u[r],"row"===l.attributes.type){n=function(){a=[];for(var t=0;e>=0?e>=t:t>=e;e>=0?t++:t--)a.push(t);return a}.apply(this);break}n=n.concat(function(){s=[];for(var t=o=l.attributes.xStart,e=l.attributes.xEnd;e>=o?e>=t:t>=e;e>=o?t++:t--)s.push(t);return s}.apply(this))}return n},getAllColumnBlocks:function(t){var e,n,r,i,a,s,l,u,c;for(a=t.maxLen,c=t.withPos,e=[],n=t.withPos?this.filter(function(t){return null!=t.get("xStart")}):this.filter(function(t){return"column"===t.get("type")}),r=0,i=n.length;i>r;r++)u=n[r],e=e.concat(function(){l=[];for(var t=s=u.attributes.xStart,e=u.attributes.xEnd;e>=s?e>=t:t>=e;e>=s?t++:t--)l.push(t);return l}.apply(this));return e=o.uniq(e)},invertRow:function(t){var e,n,r,i,s,l;for(l=this.where({type:"row"}),l=o.map(l,function(t){return t.attributes.seqId}),r=o.filter(t,function(t){return!(l.indexOf(t)>=0)}),s=[],n=0,i=r.length;i>n;n++)e=r[n],s.push(new a.rowsel({seqId:e}));return this.reset(s)},invertCol:function(t){var e,n,r,i,s,l,u,c;if(l=this.where({type:"column"}),l=o.reduce(l,function(t,e){var n,r;return t.concat(function(){r=[];for(var t=n=e.attributes.xStart,i=e.attributes.xEnd;i>=n?i>=t:t>=i;i>=n?t++:t--)r.push(t);return r}.apply(this))},[]),r=o.filter(t,function(t){return!(l.indexOf(t)>=0)}),0!==r.length){for(s=[],c=u=r[0],n=0,i=r.length;i>n;n++)e=r[n],u+1===e?u=e:(s.push(new a.columnsel({xStart:c,xEnd:u})),c=u=e);return c!==u&&s.push(new a.columnsel({xStart:c,xEnd:r[r.length-1]})),this.reset(s)}},_handleE:function(t,e){return t.ctrlKey||t.metaKey?this.add(e):this.reset([e])},_reduceColumns:function(){return this.each(function(t,e,n){var r,i,a,s,l,u,c,f,h,d,p;for(r=o.filter(n,function(t){return"column"===t.get("type")}),p=t.get("xStart"),d=t.get("xEnd"),l=o.filter(r,function(t){return t.get("xEnd")===p-1}),i=0,u=l.length;u>i;i++)s=l[i],s.set("xEnd",p);for(h=o.filter(r,function(t){return t.get("xStart")===d+1}),a=0,c=h.length;c>a;a++)f=h[a],f.set("xStart",d);return l.length>0||h.length>0?(console.log("removed el"),t.collection.remove(t)):void 0})}})},{"./Selection":6,"backbone-thin":62,underscore:150}],8:[function(t,e,n){var r,i;i=t("backbone-thin").Model,e.exports=r=i.extend({defaults:{searchText:""}})},{"backbone-thin":62}],9:[function(t,e,n){var r,i;r=t("backbone-thin").Model,e.exports=i=r.extend({defaults:{searchBox:-10,overviewBox:30,headerBox:-1,alignmentBody:0}})},{"backbone-thin":62}],10:[function(t,e,n){var r,i;r=t("backbone-thin").Model,e.exports=i=r.extend({defaults:{sequences:!0,markers:!0,metacell:!1,conserv:!1,overviewbox:!1,seqlogo:!1,gapHeader:!1,leftHeader:!0,labels:!0,labelName:!0,labelId:!0,labelPartition:!1,labelCheckbox:!1,metaGaps:!0,metaIdentity:!0,metaLinks:!0},constructor:function(t,e){return this.calcDefaults(e.model),r.apply(this,arguments)},initialize:function(){return this.listenTo(this,"change:metaLinks change:metaIdentity change:metaGaps",function(){return this.trigger("change:metacell")},this),this.listenTo(this,"change:labelName change:labelId change:labelPartition change:labelCheckbox",function(){return this.trigger("change:labels")},this),this.listenTo(this,"change:markers change:conserv change:seqlogo change:gapHeader",function(){return this.trigger("change:header")},this)},calcDefaults:function(t){var e,n;return t.length>0&&(n=t.at(0),e=n.get("ids"),void 0!==e&&0===Object.keys(e).length)?this.defaults.metaLinks=!1:void 0}})},{"backbone-thin":62}],11:[function(t,e,n){var r,i;r=t("backbone-thin").Model,e.exports=i=r.extend({constructor:function(t,e){return this.calcDefaults(e.model),r.apply(this,arguments),this.g=e.g,this.listenTo(this,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",function(){return this.trigger("change:labelWidth",this.getLabelWidth())},this),this.listenTo(this,"change:metaLinksWidth change:metaIdentWidth change:metaGapWidth",function(){return this.trigger("change:metaWidth",this.getMetaWidth())},this),this},defaults:{alignmentWidth:"auto",alignmentHeight:225,columnWidth:15,rowHeight:15,autoResize:!0,textVisible:!0,labelIdLength:50,labelNameLength:100,labelPartLength:15,labelCheckLength:15,labelFontsize:13,labelLineHeight:"13px",markerFontsize:"10px",stepSize:1,markerStepSize:2,markerHeight:20,residueFont:"13",canvasEventScale:1,boxRectHeight:2,boxRectWidth:2,overviewboxPaddingTop:10,menuFontsize:"14px",menuItemFontsize:"14px",menuItemLineHeight:"14px",menuMarginLeft:"3px",menuPadding:"3px 4px 3px 4px",metaGapWidth:35,metaIdentWidth:40,metaLinksWidth:25,_alignmentScrollLeft:0,_alignmentScrollTop:0},calcDefaults:function(t){var e;return e=t.getMaxLength(),200>e&&t.length<30?this.defaults.boxRectWidth=this.defaults.boxRectHeight=5:void 0},getAlignmentWidth:function(t){return this.get("autoResize")&&void 0!==t?this.get("columnWidth")*t:void 0===this.get("alignmentWidth")||"auto"===this.get("alignmentWidth")||0===this.get("alignmentWidth")?this._adjustWidth():this.get("alignmentWidth")},setLeftOffset:function(t){var e;return e=t,e=Math.max(0,e),e-=this.g.columns.calcHiddenColumns(e),this.set("_alignmentScrollLeft",e*this.get("columnWidth"))},setTopOffset:function(t){var e,n,r,i,o,a;for(a=Math.max(0,t-1),e=0,n=r=0,i=a;i>=r;n=r+=1)o=this.model.at(n),e+=o.attributes.height||1;return this.set("_alignmentScrollTop",e*this.get("rowHeight"))},getLeftBlockWidth:function(){var t;return t=0,this.g.vis.get("labels")&&(t+=this.getLabelWidth()),this.g.vis.get("metacell")&&(t+=this.getMetaWidth()),t},getMetaWidth:function(){var t;return t=0,this.g.vis.get("metaGaps")&&(t+=this.get("metaGapWidth")),this.g.vis.get("metaIdentity")&&(t+=this.get("metaIdentWidth")),this.g.vis.get("metaLinks")&&(t+=this.get("metaLinksWidth")),t},getLabelWidth:function(){var t;return t=0,this.g.vis.get("labelName")&&(t+=this.get("labelNameLength")),this.g.vis.get("labelId")&&(t+=this.get("labelIdLength")),this.g.vis.get("labelPartition")&&(t+=this.get("labelPartLength")),this.g.vis.get("labelCheckbox")&&(t+=this.get("labelCheckLength")),t},_adjustWidth:function(){var t,e,n,r;if(void 0!==this.el&&void 0!==this.model)return n=null!=this.el.parentNode&&0!==this.el.parentNode.offsetWidth?this.el.parentNode.offsetWidth:document.body.clientWidth-35,e=n-this.getLeftBlockWidth(),t=this.getAlignmentWidth(this.model.getMaxLength()-this.g.columns.get("hidden").length),r=Math.min(e,t),r=Math.floor(r/this.get("columnWidth"))*this.get("columnWidth"),this.attributes.alignmentWidth=r},autoResize:function(){return this.get("autoResize")?this._adjustWidth(this.el,this.model):void 0},autoHeight:function(t){var e;return e=this.getMaxAlignmentHeight(),void 0!==t&&t>0&&(e=Math.min(e,t)),this.set("alignmentHeight",e)},setEl:function(t,e){return this.el=t,this.model=e},_checkScrolling:function(t,e){var n,r;return n=t[0],r=t[1],this.set("_alignmentScrollLeft",n,e),this.set("_alignmentScrollTop",r,e)},getMaxAlignmentHeight:function(){var t;return t=0,this.model.each(function(e){return t+=e.attributes.height||1}),t*this.get("rowHeight")},getMaxAlignmentWidth:function(){return this.model.getMaxLength()*this.get("columnWidth")}})},{"backbone-thin":62}],12:[function(t,e,n){var r,i,o,a,s,l,u,c,f,h,d,p;p=t("backbone-childs"),u=t("./views/ImportMenu"),s=t("./views/FilterMenu"),h=t("./views/SelectionMenu"),d=t("./views/VisMenu"),r=t("./views/ColorMenu"),f=t("./views/OrderingMenu"),a=t("./views/ExtraMenu"),o=t("./views/ExportMenu"),l=t("./views/HelpMenu"),i=t("./views/DebugMenu"),e.exports=c=p.extend({initialize:function(t){this.msa=t.msa,this.addView("10_import",new u({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("15_ordering",new f({model:this.msa.seqs,g:this.msa.g})),this.addView("30_selection",new h({model:this.msa.seqs,g:this.msa.g})),this.addView("50_color",new r({model:this.msa.seqs,g:this.msa.g})),this.addView("70_extra",new a({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("80_export",new o({model:this.msa.seqs,g:this.msa.g,msa:this.msa}))},render:function(){return this.renderSubviews(),this.el.setAttribute("class","smenubar"),this.el.appendChild(document.createElement("p"))}})},{"./views/ColorMenu":15,"./views/DebugMenu":16,"./views/ExportMenu":17,"./views/ExtraMenu":18,"./views/FilterMenu":19,"./views/HelpMenu":20,"./views/ImportMenu":21,"./views/OrderingMenu":22,"./views/SelectionMenu":23,"./views/VisMenu":24,"backbone-childs":60}],13:[function(t,e,n){e.exports.defaultmenu=t("./defaultmenu"),e.exports.menubuilder=t("./menubuilder")},{"./defaultmenu":12,"./menubuilder":14}],14:[function(t,e,n){var r,i;i=t("menu-builder"),e.exports=r=i.extend({buildDOM:function(){return this.on("new:node",this.buildNode),
this.on("new:button",this.buildButton),this.on("new:menu",this.buildMenu),i.prototype.buildDOM.call(this)},buildNode:function(t){return null!=this.g?t.style.lineHeight=this.g.zoomer.get("menuItemLineHeight"):void 0},buildButton:function(t){return null!=this.g?(t.style.fontSize=this.g.zoomer.get("menuFontsize"),t.style.marginLeft=this.g.zoomer.get("menuMarginLeft"),t.style.padding=this.g.zoomer.get("menuPadding")):void 0},buildMenu:function(t){return null!=this.g?t.style.fontSize=this.g.zoomer.get("menuItemFontsize"):void 0}})},{"menu-builder":128}],15:[function(t,e,n){var r,i,o,a;i=t("../menubuilder"),o=t("underscore"),a=t("dom-helper"),e.exports=r=i.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.listenTo(this.g.colorscheme,"change",function(){return this.render()})},render:function(){var t,e,n,r,i,o;for(r=this.setName("Color scheme"),this.removeAllNodes(),t=this.getColorschemes(),e=0,n=t.length;n>e;e++)i=t[e],this.addScheme(r,i);return o="Background",o=this.g.colorscheme.get("colorBackground")?"Hide "+o:"Show "+o,this.addNode(o,function(t){return function(){return t.g.colorscheme.set("colorBackground",!t.g.colorscheme.get("colorBackground"))}}(this)),this.grey(r),a.removeAllChilds(this.el),this.el.appendChild(this.buildDOM()),this},addScheme:function(t,e){var n,r;return r={},n=this.g.colorscheme.get("scheme"),n===e.id&&(r.backgroundColor="#77ED80"),this.addNode(e.name,function(t){return function(){return t.g.colorscheme.set("scheme",e.id)}}(this),{style:r})},getColorschemes:function(){var t;return t=[],t.push({name:"Taylor",id:"taylor"}),t.push({name:"Buried",id:"buried"}),t.push({name:"Cinema",id:"cinema"}),t.push({name:"Clustal",id:"clustal"}),t.push({name:"Clustal2",id:"clustal2"}),t.push({name:"Helix",id:"helix"}),t.push({name:"Hydrophobicity",id:"hydro"}),t.push({name:"Lesk",id:"lesk"}),t.push({name:"MAE",id:"mae"}),t.push({name:"Nucleotide",id:"nucleotide"}),t.push({name:"Purine",id:"purine"}),t.push({name:"PID",id:"pid"}),t.push({name:"Strand",id:"strand"}),t.push({name:"Turn",id:"turn"}),t.push({name:"Zappo",id:"zappo"}),t.push({name:"No color",id:"foo"}),t},grey:function(t){return this.addNode("Shade",function(t){return function(){return t.g.colorscheme.set("showLowerCase",!1),t.model.each(function(t){var e,n;return n=t.get("seq"),e=[],o.each(n,function(t,n){return t===t.toLowerCase()?e.push(n):void 0}),t.set("grey",e)})}}(this)),this.addNode("Shade by threshold",function(t){return function(){var e,n,r,i,o,a,s;for(s=prompt("Enter threshold (in percent)",20),s/=100,o=t.model.getMaxLength(),e=t.g.stats.scale(t.g.stats.conservation()),n=[],r=i=0,a=o-1;a>=0?a>=i:i>=a;r=a>=0?++i:--i)e[r]<s&&n.push(r);return t.model.each(function(t){return t.set("grey",n)})}}(this)),this.addNode("Shade selection",function(t){return function(){var e;return e=t.model.getMaxLength(),t.model.each(function(n){var r;return r=t.g.selcol.getBlocksForRow(n.get("id"),e),n.set("grey",r)})}}(this)),this.addNode("Reset shade",function(t){return function(){return t.g.colorscheme.set("showLowerCase",!0),t.model.each(function(t){return t.set("grey",[])})}}(this))}})},{"../menubuilder":14,"dom-helper":125,underscore:150}],16:[function(t,e,n){var r,i;i=t("../menubuilder"),e.exports=r=i.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){return this.setName("Debug"),this.addNode("Get the code",function(t){return function(){return window.open("https://github.com/greenify/msa")}}(this)),this.addNode("Toggle mouseover events",function(t){return function(){return t.g.config.set("registerMouseHover",!t.g.config.get("registerMouseHover")),t.g.onAll(function(){return console.log(arguments)})}}(this)),this.addNode("Minimized width",function(t){return function(){return t.g.zoomer.set("alignmentWidth",600)}}(this)),this.addNode("Minimized height",function(t){return function(){return t.g.zoomer.set("alignmentHeight",120)}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":14}],17:[function(t,e,n){var r,i,o,a,s;a=t("../menubuilder"),o=t("biojs-io-fasta").writer,s=t("underscore"),i=t("../../utils/export"),e.exports=r=a.extend({initialize:function(t){return this.g=t.g,this.msa=t.msa,this.el.style.display="inline-block"},render:function(){return this.setName("Export"),this.addNode("Share view (URL)",function(t){return function(){return i.shareLink(t.msa,function(t){return window.open(t,"_blank")})}}(this)),this.addNode("View in Jalview",function(t){return function(){var e;return e=t.g.config.get("url"),null==e?alert("Sequence weren't imported via an URL"):e.indexOf("localhost")?i.publishWeb(t.msa,function(e){return i.openInJalview(e,t.g.colorscheme.get("scheme"))}):i.openInJalview(e,t.g.colorscheme.get("scheme"))}}(this)),this.addNode("Export alignment (FASTA)",function(t){return function(){return i.saveAsFile(t.msa,"all.fasta")}}(this)),this.addNode("Export alignment (URL)",function(t){return function(){return i.publishWeb(t.msa,function(t){return window.open(t,"_blank")})}}(this)),this.addNode("Export selected sequences (FASTA)",function(t){return function(){return i.saveSelection(t.msa,"selection.fasta")}}(this)),this.addNode("Export features (GFF)",function(t){return function(){return i.saveAnnots(t.msa,"features.gff3")}}(this)),this.addNode("Export MSA image (PNG)",function(t){return function(){return i.saveAsImg(t.msa,"biojs-msa.png")}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../../utils/export":32,"../menubuilder":14,"biojs-io-fasta":84,underscore:150}],18:[function(t,e,n){var r,i,o,a,s;o=t("../menubuilder"),a=t("../../model/Sequence"),i=t("../../utils/loader"),s=t("xhr"),e.exports=r=o.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.msa=t.msa},render:function(){var t,e;return this.setName("Extras"),e=this.g.stats,t=this.msa,this.addNode("Add consensus seq",function(t){return function(){var n,r;return n=e.consensus(),r=new a({seq:n,id:"0c",name:"Consenus"}),t.model.add(r),t.model.setRef(r),t.model.comparator=function(t){return!t.get("ref")},t.model.sort()}}(this)),this.addNode("Increase font size",function(t){return function(){var e,n,r;return e=t.g.zoomer.get("columnWidth"),n=e+5,t.g.zoomer.set("columnWidth",n),t.g.zoomer.set("rowHeight",n),r=.7*n,t.g.zoomer.set("residueFont",r),t.g.zoomer.set("labelFontSize",r)}}(this)),this.addNode("Decrease font size",function(t){return function(){var e,n,r;return e=t.g.zoomer.get("columnWidth"),n=e-2,t.g.zoomer.set("columnWidth",n),t.g.zoomer.set("rowHeight",n),r=.6*n,t.g.zoomer.set("residueFont",r),t.g.zoomer.set("labelFontSize",r),t.g.zoomer.get("columnWidth")<8?t.g.zoomer.set("textVisible",!1):void 0}}(this)),this.addNode("Jump to a column",function(t){return function(){var e;return e=prompt("Column","20"),0>e||e>t.model.getMaxLength()||isNaN(e)?void alert("invalid column"):t.g.zoomer.setLeftOffset(e)}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../../model/Sequence":28,"../../utils/loader":35,"../menubuilder":14,xhr:151}],19:[function(t,e,n){var r,i,o;i=t("../menubuilder"),o=t("underscore"),e.exports=r=i.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){return this.setName("Filter"),this.addNode("Hide columns by threshold",function(t){return function(e){var n,r,i,o,a,s,l;for(l=prompt("Enter threshold (in percent)",20),l/=100,a=t.model.getMaxLength(),r=[],n=t.g.stats.scale(t.g.stats.conservation()),i=o=0,s=a-1;s>=0?s>=o:o>=s;i=s>=0?++o:--o)n[i]<l&&r.push(i);return t.g.columns.set("hidden",r)}}(this)),this.addNode("Hide columns by selection",function(t){return function(){var e,n;return n=t.g.columns.get("hidden"),e=n.concat(t.g.selcol.getAllColumnBlocks({maxLen:t.model.getMaxLength(),withPos:!0})),t.g.selcol.reset([]),t.g.columns.set("hidden",e)}}(this)),this.addNode("Hide columns by gaps",function(t){return function(){var e,n,r,i,o,a,s,l,u;for(l=prompt("Enter threshold (in percent)",20),l/=100,a=t.model.getMaxLength(),r=[],i=o=0,s=a-1;s>=0?s>=o:o>=s;i=s>=0?++o:--o)n=0,u=0,t.model.each(function(t){return"-"===t.get("seq")[i]&&n++,u++}),e=n/u,e>l&&r.push(i);return t.g.columns.set("hidden",r)}}(this)),this.addNode("Hide seqs by identity",function(t){return function(){var e;return e=prompt("Enter threshold (in percent)",20),e/=100,t.model.each(function(t){return t.get("identity")<e?t.set("hidden",!0):void 0})}}(this)),this.addNode("Hide seqs by selection",function(t){return function(){var e,n;return e=t.g.selcol.where({type:"row"}),n=o.map(e,function(t){return t.get("seqId")}),t.g.selcol.reset([]),t.model.each(function(t){return n.indexOf(t.get("id"))>=0?t.set("hidden",!0):void 0})}}(this)),this.addNode("Hide seqs by gaps",function(t){return function(){var e;return e=prompt("Enter threshold (in percent)",40),t.model.each(function(t,n){var r,i;return i=t.get("seq"),r=o.reduce(i,function(t,e){return"-"===e&&t++,t},0),r>e?t.set("hidden",!0):void 0})}}(this)),this.addNode("Reset",function(t){return function(){return t.g.columns.set("hidden",[]),t.model.each(function(t){return t.get("hidden")?t.set("hidden",!1):void 0})}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":14,underscore:150}],20:[function(t,e,n){var r,i;i=t("../menubuilder"),e.exports=r=i.extend({initialize:function(t){return this.g=t.g},render:function(){return this.setName("Help"),this.addNode("About the project",function(t){return function(){return window.open("https://github.com/greenify/msa")}}(this)),this.addNode("Report issues",function(t){return function(){return window.open("https://github.com/greenify/msa/issues")}}(this)),this.addNode("User manual",function(t){return function(){return window.open("https://github.com/greenify/msa/wiki")}}(this)),this.el.style.display="inline-block",this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":14}],21:[function(t,e,n){var r,i,o;i=t("../menubuilder"),o=t("koala-js"),e.exports=r=i.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.msa=t.msa},render:function(){var t,e,n;return e=this.msa,n=o.mk("input"),n.type="file",n.style.display="none",n.multiple=!0,n.addEventListener("change",function(){var t;return t=n.files||[],e.u.file.importFiles(t)}),this.el.appendChild(n),t="(Fasta, Clustal, GFF, Jalview features, Newick)",this.setName("Import"),this.addNode("URL",function(e){return function(n){var r;return r=prompt("URL "+t,"http://rostlab.org/~goldberg/clustalw2-I20140818-215249-0556-53699878-pg.clustalw"),r.length>5?e.msa.u.file.importURL(r,function(){}):void 0}}(this)),this.addNode("From file "+t,function(t){return function(){return n.click()}}(this)),this.addNode("Drag & Drop",function(e){return function(){return alert("Yep. Just drag & drop your file "+t)}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":14,"koala-js":127}],22:[function(t,e,n){var r,i,o,a;r=t("../menubuilder"),a=t("dom-helper"),o=t("underscore"),e.exports=i=r.extend({initialize:function(t){return this.g=t.g,this.order="ID",this.el.style.display="inline-block"},setOrder:function(t){return this.order=t,this.render()},render:function(){var t,e,n,r,i;for(this.setName("Ordering"),this.removeAllNodes(),t=this.getComparators(),n=0,r=t.length;r>n;n++)i=t[n],this._addNode(i);return e=this.buildDOM(),a.removeAllChilds(this.el),this.el.appendChild(e),this},_addNode:function(t){var e,n;return n=t.text,e={},n===this.order&&(e.backgroundColor="#77ED80"),this.addNode(n,function(e){return function(){return null!=t.precode&&t.precode(),e.model.comparator=t.comparator,e.model.sort(),e.setOrder(t.text)}}(this),{style:e})},getComparators:function(){var t,e,n;return t=[],t.push({text:"ID ",comparator:"id"}),t.push({text:"ID ",comparator:function(t,e){return-(""+t.get("id")).localeCompare(""+e.get("id"),[],{numeric:!0})}}),t.push({text:"Label ",comparator:"name"}),t.push({text:"Label ",comparator:function(t,e){return-t.get("name").localeCompare(e.get("name"))}}),t.push({text:"Seq ",comparator:"seq"}),t.push({text:"Seq ",comparator:function(t,e){return-t.get("seq").localeCompare(e.get("seq"))}}),n=function(t){return function(){return t.ident=t.g.stats.identity()}}(this),e=function(t){return function(){return t.gaps={},t.model.each(function(e){var n;return n=e.attributes.seq,t.gaps[e.id]=o.reduce(n,function(t,e){return"-"===e&&t++,t},0)/n.length})}}(this),t.push({text:"Identity ",comparator:function(t){return function(e,n){var r;return r=t.ident[e.id]-t.ident[n.id],r>0?1:0>r?-1:0}}(this),precode:n}),t.push({text:"Identity ",comparator:function(t){return function(e,n){var r;return r=t.ident[e.id]-t.ident[n.id],r>0?-1:0>r?1:0}}(this),precode:n}),t.push({text:"Gaps ",comparator:function(t){return function(e,n){var r;return r=t.gaps[e.id]-t.gaps[n.id],r>0?1:0>r?-1:0}}(this),precode:e}),t.push({text:"Gaps ",comparator:function(t){return function(e,n){var r;return r=t.gaps[e.id]-t.gaps[n.id],0>r?1:r>0?-1:0}}(this),precode:e}),t.push({text:"Consensus to top",comparator:function(t){return!t.get("ref")}}),t}})},{"../menubuilder":14,"dom-helper":125,underscore:150}],23:[function(t,e,n){var r,i;r=t("../menubuilder"),e.exports=i=r.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){return this.setName("Selection"),this.addNode("Find Motif (supports RegEx)",function(t){return function(){var e;return e=prompt("your search","D"),t.g.user.set("searchText",e)}}(this)),this.addNode("Invert columns",function(t){return function(){var e;return t.g.selcol.invertCol(function(){e=[];for(var n=0,r=t.model.getMaxLength();r>=0?r>=n:n>=r;r>=0?n++:n--)e.push(n);return e}.apply(this))}}(this)),this.addNode("Invert rows",function(t){return function(){return t.g.selcol.invertRow(t.model.pluck("id"))}}(this)),this.addNode("Reset",function(t){return function(){return t.g.selcol.reset()}}(this)),this.el.appendChild(this.buildDOM()),this}})},{"../menubuilder":14}],24:[function(t,e,n){var r,i,o;r=t("../menubuilder"),o=t("dom-helper"),e.exports=i=r.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.listenTo(this.g.vis,"change",this.render)},render:function(){var t,e,n,r;for(this.removeAllNodes(),this.setName("Vis.elements"),r=this.getVisElements(),t=0,e=r.length;e>t;t++)n=r[t],this._addVisEl(n);return this.addNode("Reset",function(t){return function(){return t.g.vis.set("labels",!0),t.g.vis.set("sequences",!0),t.g.vis.set("metacell",!0),t.g.vis.set("conserv",!0),t.g.vis.set("labelId",!0),t.g.vis.set("labelName",!0),t.g.vis.set("labelCheckbox",!1),t.g.vis.set("seqlogo",!1),t.g.vis.set("gapHeader",!1),t.g.vis.set("leftHeader",!0),t.g.vis.set("metaGaps",!0),t.g.vis.set("metaIdentity",!0),t.g.vis.set("metaLinks",!0)}}(this)),o.removeAllChilds(this.el),this.el.appendChild(this.buildDOM()),this},_addVisEl:function(t){var e,n;return n={},this.g.vis.get(t.id)?(e="Hide ",n.color="red"):(e="Show ",n.color="green"),this.addNode(e+t.name,function(e){return function(){return e.g.vis.set(t.id,!e.g.vis.get(t.id))}}(this),{style:n})},getVisElements:function(){var t;return t=[],t.push({name:"Position markers",id:"markers"}),t.push({name:"Id/Name",id:"labels"}),t.push({name:"Meta info (gaps/identity)",id:"metacell"}),t.push({name:"Overviewpanel",id:"overviewbox"}),t.push({name:"Sequence logo",id:"seqlogo"}),t.push({name:"Gap weights",id:"gapHeader"}),t.push({name:"Conservation weights",id:"conserv"}),t.push({name:"Seq. name",id:"labelName"}),t.push({name:"Seq. id",id:"labelId"}),t.push({name:"Gaps %",id:"metaGaps"}),t.push({name:"Identity score",id:"metaIdentity"}),t.push({name:"Meta links",id:"metaLinks"}),t}})},{"../menubuilder":14,"dom-helper":125}],25:[function(t,e,n){var r,i;r=t("./Feature"),i=t("backbone-thin").Model,e.exports=r=i.extend({defaults:{xStart:-1,xEnd:-1,height:-1,text:"",fillColor:"red",fillOpacity:.5,type:"rectangle",borderSize:1,borderColor:"black",borderOpacity:.5,validate:!0,row:0},initialize:function(t){return null!=t.start&&this.set("xStart",t.start),null!=t.end&&this.set("xEnd",t.end),null!=t.attributes&&(null!=t.attributes.Name&&this.set("text",t.attributes.Name),null!=t.attributes.Color&&this.set("fillColor",t.attributes.Color)),this.attributes.xEnd<this.attributes.xStart&&console.warn("invalid feature range for",this.attributes),_.isNumber(this.attributes.xStart)&&_.isNumber(this.attributes.xEnd)?void 0:(console.warn("please provide numeric feature ranges",t),this.set("xStart",parseInt(this.attributes.xStart)),this.set("xEnd",parseInt(this.attributes.xEnd)))},validate:function(){return isNaN(this.attributes.xStart||isNaN(this.attributes.xEnd))?"features need integer start and end.":void 0},contains:function(t){return this.attributes.xStart<=t&&t<=this.attributes.xEnd}})},{"./Feature":25,"backbone-thin":62}],26:[function(t,e,n){var r,i,o,a;i=t("./Feature"),r=t("backbone-thin").Collection,a=t("underscore"),e.exports=o=r.extend({model:i,constructor:function(){return this.startOnCache=[],this.on("all",function(){return this.startOnCache=[]},this),r.apply(this,arguments)},startOn:function(t){return null==this.startOnCache[t]&&(this.startOnCache[t]=this.where({xStart:t})),this.startOnCache[t]},contains:function(t){return this.reduce(function(e,n){return n||e.contains(t)},!1)},getFeatureOnRow:function(t,e){return this.filter(function(n){return n.get("row")===t&&n.get("xStart")<=e&&e<=n.get("xEnd")})},assignRows:function(){var t,e,n;return t=this.max(function(t){return t.get("xEnd")}).attributes.xEnd,e=function(){var e,r,i;for(i=[],n=e=0,r=t;r>=0?r>=e:e>=r;n=r>=0?++e:--e)i.push(0);return i}(),this.each(function(t){var r,i,o,a;for(i=0,n=r=o=t.get("xStart"),a=t.get("xEnd");a>=r;n=r+=1)e[n]>i&&(i=e[n]),e[n]++;return t.set("row",i)}),a.max(e)},getCurrentHeight:function(){return this.max(function(t){return t.get("row")}).attributes.row+1},getMinRows:function(){var t,e,n;return t=this.max(function(t){return t.get("xEnd")}).attributes.xEnd,e=function(){var e,r,i;for(i=[],n=e=0,r=t;r>=0?r>=e:e>=r;n=r>=0?++e:--e)i.push(0);return i}(),this.each(function(t){var r,i,o,a;for(a=[],n=r=i=t.get("xStart"),o=t.get("xEnd");o>=r;n=r+=1)a.push(e[n]++);return a}),a.max(e)}})},{"./Feature":25,"backbone-thin":62,underscore:150}],27:[function(t,e,n){var r,i,o,a;a=t("./Sequence"),i=t("./FeatureCol"),r=t("backbone-thin").Collection,e.exports=o=r.extend({model:a,constructor:function(t,e){return r.apply(this,arguments),this.g=e,this.on("add reset remove",function(t){return function(){return t.lengthCache=null,t._bindSeqsWithFeatures()}}(this),this),this.on("reset",function(t){return function(){return t._autoSetRefSeq()}}(this)),this._autoSetRefSeq(),this.lengthCache=null,this.features={},this},getMaxLength:function(){return 0===this.models.length?0:(null===this.lengthCache&&(this.lengthCache=this.max(function(t){return t.get("seq").length}).get("seq").length),this.lengthCache)},prev:function(t,e){var n;return n=this.indexOf(t)-1,0>n&&e&&(n=this.length-1),this.at(n)},next:function(t,e){var n;return n=this.indexOf(t)+1,n===this.length&&e&&(n=0),this.at(n)},calcHiddenSeqs:function(t){var e,n,r,i;for(r=t,e=n=0,i=r;i>=0?i>=n:n>=i;e=i>=0?++n:--n)this.at(e).get("hidden")&&r++;return r-t},addFeatures:function(t){var e,n;return null!=t.config&&(n=t,t=t.seqs,null!=n.config.colors&&(e=n.config.colors,_.each(t,function(t){return _.each(t,function(t){return null!=e[t.feature]?t.fillColor=e[t.feature]:void 0})}))),_.isEmpty(this.features)?this.features=t:_.each(t,function(t){return function(e,n){return t.features.hasOwnProperty(n)?t.features[n]=_.union(t.features[n],e):t.features[n]=e}}(this)),this._bindSeqsWithFeatures()},_bindSeqWithFeatures:function(t){var e;return e=this.features[t.attributes.name],e?(t.set("features",new i(e)),t.attributes.features.assignRows(),t.set("height",t.attributes.features.getCurrentHeight()+1)):void 0},_bindSeqsWithFeatures:function(){return this.each(function(t){return function(e){return t._bindSeqWithFeatures(e)}}(this))},removeAllFeatures:function(){return delete this.features},_autoSetRefSeq:function(){return this.length>0?this.at(0).set("ref",!0):void 0},setRef:function(t){var e;return e=this.get(t),this.each(function(n){return t.cid?e.cid===n.cid?n.set("ref",!0):n.set("ref",!1):void 0}),this.g.config.set("hasRef",!0),this.trigger("change:reference",t)}})},{"./FeatureCol":26,"./Sequence":28,"backbone-thin":62}],28:[function(t,e,n){var r,i,o;i=t("backbone-thin").Model,r=t("./FeatureCol"),e.exports=o=i.extend({defaults:{name:"",id:"",seq:"",height:1,ref:!1},initialize:function(){return this.set("grey",[]),null==this.get("features")?this.set("features",new r):void 0}})},{"./FeatureCol":26,"backbone-thin":62}],29:[function(t,e,n){e.exports.seq=t("./Sequence"),e.exports.seqcol=t("./SeqCollection"),e.exports.feature=t("./Feature"),e.exports.featurecol=t("./FeatureCol")},{"./Feature":25,"./FeatureCol":26,"./SeqCollection":27,"./Sequence":28}],30:[function(t,e,n){var r,i,o,a,s,l,u,c,f,h,d,p,g,v,m,y,b,x;h=t("./model/SeqCollection"),i=t("./g/colorscheme"),o=t("./g/columns"),a=t("./g/config"),u=t("./g/package"),f=t("./g/selection/SelectionCol"),v=t("./g/user"),y=t("./g/visibility"),m=t("./g/visOrdering"),b=t("./g/zoomer"),x=t("backbone-childs"),s=t("biojs-events"),d=t("./views/Stage"),p=t("stat.seqs"),r=t("jbone"),l=t("./utils/file"),g=t("./utils/tree"),c=t("./utils/proxy"),e.exports=x.extend({initialize:function(t){var e,n;return null==t&&(t={}),null==t.colorscheme&&(t.colorscheme={}),null==t.columns&&(t.columns={}),null==t.conf&&(t.conf={}),null==t.vis&&(t.vis={}),null==t.zoomer&&((null!=(n=t.visorder)?n:t.zoomer={})||(t.visorder={})),this.g=s.mixin({}),this.seqs=this.g.seqs=new h(t.seqs,this.g),this.g.config=new a(t.conf),this.g["package"]=new u(this.g),this.g.selcol=new f([],{g:this.g}),this.g.user=new v,this.g.vis=new y(t.vis,{model:this.seqs}),this.g.visorder=new m(t.visorder),this.g.zoomer=new b(t.zoomer,{g:this.g,model:this.seqs}),"localhost"===window.location.hostname&&this.g.config.set("debug",!0),this._loadSeqs(t),this.u={},this.u.file=new l(this),this.u.proxy=new c({g:this.g}),this.u.tree=new g(this),this.g.config.get("eventBus")===!0&&this.startEventBus(),this.g.config.get("dropImport")&&(e={dragover:this.dragOver,drop:this.dropFile},this.delegateEvents(e)),t.importURL&&this.u.file.importURL(t.importURL,function(t){return function(){return t.render()}}(this)),t.bootstrapMenu&&this.g.config.set("bootstrapMenu",!0),this.draw(),this.m()},_loadSeqs:function(t){var e;return e=this.seqs.pluck("seq"),this.g.stats=new p(this.seqs,{useGaps:!0}),this.g.stats.alphabetSize=this.g.config.get("alphabetSize"),this.g.columns=new o(t.columns,this.g.stats),this.g.colorscheme=new i(t.colorscheme,e,this.g.stats),this.g.zoomer.setEl(this.el,this.seqs)},importURL:function(){return this.u.file.importURL.apply(this.u.file,arguments)},m:function(){var e;return e={},e.model=t("./model"),e.selection=t("./g/selection/Selection"),e.selcol=t("./g/selection/SelectionCol"),e.view=t("backbone-viewj"),e.boneView=t("backbone-childs"),this.m=e},draw:function(){var t,e,n;return this.removeViews(),this.addView("stage",new d({model:this.seqs,g:this.g})),this.el.setAttribute("class","biojs_msa_div"),this.g.config.get("bootstrapMenu")&&(e=document.createElement("div"),n=document.createElement("div"),this.el.parentNode?(this.el.parentNode.replaceChild(n,this.el),n.appendChild(e),n.appendChild(this.el)):(n.appendChild(e),n.appendChild(this.el)),t=new msa.menu.defaultmenu({el:e,msa:this}),t.render()),r(window).on("resize",function(t){return function(e){var n;return n=function(){return this.g.zoomer.autoResize()},setTimeout(n.bind(t),5)}}(this))},dragOver:function(t){return t.preventDefault(),t.target.className="hover",!1},dropFile:function(t){var e;return t.preventDefault(),e=t.target.files||t.dataTransfer.files,this.u.file.importFiles(e),!1},startEventBus:function(){var t,e,n,r,i;for(t=["config","columns","colorscheme","selcol","vis","visorder","zoomer"],i=[],e=0,r=t.length;r>e;e++)n=t[e],i.push(this._proxyToG(n));return i},_proxyToG:function(t){return this.listenTo(this.g[t],"all",function(e,n,r,i){return"change"!==e?null!=i?this.g.trigger(t+":"+e,r,n,i):this.g.trigger(t+":"+e,r,n):void 0})},render:function(){return void 0!==this.seqs&&0!==this.seqs.length||console.log("warning. empty seqs."),this.renderSubviews(),this.g.vis.set("loaded",!0),this}})},{"./g/colorscheme":2,"./g/columns":3,"./g/config":4,"./g/package":5,"./g/selection/Selection":6,"./g/selection/SelectionCol":7,"./g/user":8,"./g/visOrdering":9,"./g/visibility":10,"./g/zoomer":11,"./model":29,"./model/SeqCollection":27,"./utils/file":33,"./utils/proxy":36,"./utils/tree":39,"./views/Stage":43,"backbone-childs":60,"backbone-viewj":67,"biojs-events":71,jbone:126,"stat.seqs":149}],31:[function(t,e,n){var r;e.exports=r=function(){function t(){}return t.randomInt=function(t,e){var n,r;return null==e&&(n=[0,t],t=n[0],e=n[1]),t>e&&(r=[e,t],t=r[0],e=r[1]),Math.floor(Math.random()*(e-t+1)+t)},t.uniqueId=function(t){var e;for(null==t&&(t=8),e="";e.length<t;)e+=Math.random().toString(36).substr(2);return e.substr(0,t)},t.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t}()},{}],32:[function(t,e,n){var r,i,o,a,s,l,u;i=t("biojs-io-fasta"),o=t("biojs-io-gff"),u=t("xhr"),s=t("blueimp_canvastoblob"),l=t("browser-saveas"),a=t("underscore"),e.exports=r={openInJalview:function(t,e){var n,r;return"."===t.charAt(0)&&(t=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+t),t.indexOf("http")<0&&(n="http://"+window.location.hostname,t=n+t),t=encodeURIComponent(t),r="http://www.jalview.org/services/launchApp?open="+t,r+="&colour="+e,window.open(r,"_blank")},publishWeb:function(t,e){var n,r;return n=i.write(t.seqs.toJSON()),n=encodeURIComponent(n),r=t.u.proxy.corsURL("http://sprunge.biojs.net"),u({method:"POST",body:"sprunge="+n,uri:r,headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(t,n,r){var i;return i=r.trim(),e(i)})},shareLink:function(t,e){var n,i,o;return o=t.g.config.get("importURL"),i="http://msa.biojs.net/app/?seq=",n=function(t){var n;return n=i+t,e?e(n):void 0},o?n(o):r.publishWeb(t,n)},saveAsFile:function(t,e){var n,r;return r=i.write(t.seqs.toJSON()),n=new Blob([r],{type:"text/plain"}),l(n,e)},saveSelection:function(t,e){var n,r,o,s,u,c;if(u=t.g.selcol.pluck("seqId"),console.log(u),u.length>0)for(u=t.seqs.filter(function(t){return a.contains(u,t.get("id"))}),r=o=0,s=u.length-1;s>=o;r=o+=1)u[r]=u[r].toJSON();else u=t.seqs.toJSON(),console.warn("no selection found");return c=i.write(u),n=new Blob([c],{type:"text/plain"}),l(n,e)},saveAnnots:function(t,e){var n,r,i;return r=t.seqs.map(function(t){var e;return r=t.get("features"),0!==r.length?(e=t.get("name"),r.each(function(t){return t.set("seqname",e)}),r.toJSON()):void 0}),r=a.flatten(a.compact(r)),console.log(r),i=o.exportLines(r),n=new Blob([i],{type:"text/plain"}),l(n,e)},saveAsImg:function(t,e){var n,r;return n=t.getView("stage").getView("body").getView("seqblock").el,null!=n?(r=n.toDataURL("image/png"),l(s(r),e,"image/png")):void 0}}},{"biojs-io-fasta":84,"biojs-io-gff":94,blueimp_canvastoblob:123,"browser-saveas":124,underscore:150,xhr:151}],33:[function(t,e,n){var r,i,o,a,s,l,u;i=t("biojs-io-fasta"),r=t("biojs-io-clustal"),a=t("biojs-io-gff"),s=t("underscore"),u=t("xhr"),e.exports=o=function(t){return this.msa=t,this},l={guessFileType:function(t){var e;switch(t=t.split("."),e=t[t.length(-1)]){case"aln":case"clustal":return r;case"fasta":return i;default:return i}},guessFileFromText:function(t){var e,n;return null==t?(console.warn("invalid file format"),["","error"]):("CLUSTAL"===t.substring(0,7)?(e=r,n="seqs"):">"===t.substring(0,1)?(e=i,n="seqs"):"("===t.substring(0,1)?n="newick":(e=a,n="features"),[e,n])},parseText:function(t){var e,n,r,i,o;return r=this.guessFileFromText(t),n=r[0],o=r[1],"seqs"===o?(i=n.parse(t),[i,o]):"features"===o?(e=n.parseSeqs(t),[e,o]):[t,o]},importFiles:function(t){var e,n,r,i,o,a;for(a=[],n=r=0,o=t.length-1;o>=r;n=r+=1)e=t[n],i=new FileReader,i.onload=function(t){return function(e){return t.importFile(e.target.result)}}(this),a.push(i.readAsText(e));return a},importFile:function(t){var e,n,r,i;return r=this.parseText(t),n=r[0],i=r[1],"error"===i?"error":("seqs"===i?(this.msa.seqs.reset(n),this.msa.g.config.set("url","userimport"),this.msa.g.trigger("url:userImport")):"features"===i?this.msa.seqs.addFeatures(n):"newick"===i&&this.msa.u.tree.loadTree(function(e){return function(){return e.msa.u.tree.showTree(t)}}(this)),e=t.name)},importURL:function(t,e){return t=this.msa.u.proxy.corsURL(t),this.msa.g.config.set("url",t),u(t,function(n){return function(r,i,o){var a;return r?console.log(r):(a=n.importFile(o),"error"!==a?(n.msa.g.trigger("import:url",t),e?e():void 0):void 0)}}(this))}},s.extend(o.prototype,l)},{"biojs-io-clustal":74,"biojs-io-fasta":84,"biojs-io-gff":94,underscore:150,xhr:151}],34:[function(t,e,n){e.exports.bmath=t("./bmath"),e.exports.proxy=t("./proxy"),e.exports.seqgen=t("./seqgen"),e.exports.file=t("./file"),e.exports["export"]=t("./export")},{"./bmath":31,"./export":32,"./file":33,"./proxy":36,"./seqgen":37}],35:[function(t,e,n){var r,i,o=[].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1};r=t("koala-js"),e.exports=i={loadScript:function(t,e){var n,i;return n=r.mk("script"),n.type="text/javascript",n.src=t,n.async=!0,n.onload=n.onreadystatechange=function(){var t;return t||this.readyState&&"complete"!==this.readyState?void 0:(t=!0,e())},i=document.getElementsByTagName("script")[0],i.parentNode.appendChild(n)},joinCb:function(t,e,n){var r,i,a;return e=e||1,i=0,r=function(t,e){return null==t?a():function(){return o.call(t,"apply")>=0&&t.apply(e,arguments),a()}},a=function(){return i++,i===e?t.call(n):void 0},r}}},{"koala-js":127}],36:[function(t,e,n){var r,i,o;i=t("underscore"),e.exports=r=function(t){return this.g=t.g,this},o={corsURL:function(t){return document.URL.indexOf("localhost")>=0&&"/"===t[0]?t:"."===t.charAt(0)||"/"===t.charAt(0)?t:(t=t.replace("www.",""),t=t.replace("http://",""),t=this.g.config.get("importProxy")+t)}},i.extend(r.prototype,o)},{underscore:150}],37:[function(t,e,n){var r,i,o,a;i=t("biojs-model").seq,r=t("./bmath"),o=t("stat.seqs"),a=e.exports={_generateSequence:function(t){var e,n,r,i;for(i="",e=n=0,r=t-1;r>=n;e=n+=1)i+=a.getRandomChar();return i},getDummySequences:function(t,e){var n,o,s,l;for(l=[],null==t&&(t=r.getRandomInt(3,5)),null==e&&(e=r.getRandomInt(50,200)),n=o=1,s=t;s>=o;n=o+=1)l.push(new i(a._generateSequence(e),"seq"+n,"r"+n));return l},getRandomChar:function(t){var e;return e=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZ",e.charAt(Math.floor(Math.random()*e.length))},genConservedSequences:function(t,e,n){var s,l,u,c,f,h,d,p,g,v,m,y,b,x,_,w,S,T;for(S=[],null==t&&(t=r.getRandomInt(3,5)),null==e&&(e=r.getRandomInt(50,200)),n=n||"ACDEFGHIKLMNPQRSTVWY---",f=d=1,b=t;b>=d;f=d+=1)S[f-1]="";for(T=.2,u=1,f=p=0,x=e-1;x>=p;f=p+=1)for(f%3===0&&(u=r.getRandomInt(50,100)/100),m=[],h=g=0,_=t-1;_>=g;h=g+=1){for(c=0;100>c&&(s=a.getRandomChar(n),l=o(m),l.addSeq(s),c++,!(Math.abs(u-l.scale(l.conservation())[0])<T)););S[h]+=s,m.push(s)}for(y=[],f=v=1,w=t;w>=v;f=v+=1)y.push(new i(S[f-1],"seq"+f,"r"+f));return y}}},{"./bmath":31,"biojs-model":106,"stat.seqs":149}],38:[function(t,e,n){var r,i,o,a,s,l;l="http://www.w3.org/2000/svg",s=function(t,e){var n,r;for(n in e)r=e[n],t.setAttributeNS(null,n,r);return t},r=function(t){var e;return e=document.createElementNS(l,"svg"),e.setAttribute("width",t.width),e.setAttribute("height",t.height),e},a=function(t){var e;return e=document.createElementNS(l,"rect"),s(e,t)},i=function(t){var e;return e=document.createElementNS(l,"line"),s(e,t)},o=function(t){var e;return e=document.createElementNS(l,"polygon"),s(e,t)},e.exports.rect=a,e.exports.line=i,e.exports.polygon=o,e.exports.base=r},{}],39:[function(t,e,n){var r,i,o,a;i=t("underscore"),r=t("../model/SeqCollection"),e.exports=a=function(t){return this.msa=t,this},o={loadTree:function(t){return this.msa.g["package"].loadPackages(["msa-tnt","biojs-io-newick"],t);
},showTree:function(e){var n,r,o,a,s,l,u,c;return o=this.require("biojs-io-newick"),a="string"==typeof e?o.parse_newick(e):e,r=this.require("msa-tnt"),l=new r.selections,c=document.createElement("div"),this.msa.el.insertBefore(c,this.msa.el.childNodes[0]),console.log(this.msa.seqs.models),console.log(a),s=r.app({seqs:this.msa.seqs.toJSON(),tree:a}),console.log("nodes",s),u=new r.adapters.tree({model:s,el:c,sel:l}),n=new r.adapters.msa({model:s,sel:l,msa:this.msa}),i.each(s.models,function(e){return delete e.collection,Object.setPrototypeOf(e,t("backbone-thin").Model.prototype)}),this.msa.seqs.reset(s.models),console.log(this.msa.seqs)},require:function(e){return t(e)}},i.extend(a.prototype,o)},{"../model/SeqCollection":27,"backbone-thin":62,underscore:150}],40:[function(t,e,n){var r,i,o;o=t("backbone-childs"),i=t("./canvas/CanvasSeqBlock"),r=t("./labels/LabelBlock"),e.exports=o.extend({initialize:function(t){var e,n;return this.g=t.g,e=new r({model:this.model,g:this.g}),e.ordering=-1,this.addView("labelblock",e),this.g.vis.get("sequences")&&(n=new i({model:this.model,g:this.g}),n.ordering=0,this.addView("seqblock",n)),this.listenTo(this.g.zoomer,"change:alignmentHeight",this.adjustHeight),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.adjustWidth),this.listenTo(this.g.columns,"change:hidden",this.adjustHeight)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_albody",this.el.style.whiteSpace="nowrap",this.adjustHeight(),this.adjustWidth(),this},adjustHeight:function(){return"auto"===this.g.zoomer.get("alignmentHeight")?this.el.style.height=this.g.zoomer.get("rowHeight")*this.model.length+5:this.el.style.height=this.g.zoomer.get("alignmentHeight")},adjustWidth:function(){return this.el.style.width=this.getWidth()},getWidth:function(){var t;return t=0,t+=this.g.zoomer.getLeftBlockWidth(),this.g.vis.get("sequences")&&(t+=this.g.zoomer.get("alignmentWidth")),t}})},{"./canvas/CanvasSeqBlock":47,"./labels/LabelBlock":56,"backbone-childs":60}],41:[function(t,e,n){var r,i,o,a,s,l;l=t("backbone-viewj"),a=t("mouse-pos"),s=t("../g/selection/Selection"),o=t("jbone"),i=t("underscore"),e.exports=r=l.extend({className:"biojs_msa_overviewbox",tagName:"canvas",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:boxRectWidth change:boxRectHeight change:overviewboxPaddingTop",this.rerender),this.listenTo(this.g.selcol,"add reset change",this.rerender),this.listenTo(this.g.columns,"change:hidden",this.rerender),this.listenTo(this.g.colorscheme,"change:showLowerCase",this.rerender),this.listenTo(this.model,"change",i.debounce(this.rerender,5)),this.color=this.g.colorscheme.getSelectedScheme(),this.listenTo(this.g.colorscheme,"change:scheme",function(){return this.color=this.g.colorscheme.getSelectedScheme(),this.rerender()}),this.dragStart=[]},events:{click:"_onclick",mousedown:"_onmousedown"},rerender:function(){return this.g.config.get("manualRendering")?void 0:this.render()},render:function(){var t,e,n,r,i,o,a,s,l,u,c,f,h,d,p;for(this._createCanvas(),this.el.textContent="overview",this.el.style.marginTop=this.g.zoomer.get("overviewboxPaddingTop"),this.ctx.fillStyle="#999999",this.ctx.fillRect(0,0,this.el.width,this.el.height),l=this.g.zoomer.get("boxRectWidth"),s=this.g.zoomer.get("boxRectHeight"),n=this.g.columns.get("hidden"),h=this.g.colorscheme.get("showLowerCase"),p=-s,r=o=0,u=this.model.length-1;u>=o;r=o+=1)if(f=this.model.at(r).get("seq"),d=0,p+=s,this.model.at(r).get("hidden"))console.log(this.model.at(r).get("hidden")),this.ctx.fillStyle="grey",this.ctx.fillRect(0,p,f.length*l,s);else for(i=a=0,c=f.length-1;c>=a;i=a+=1)t=f[i],h&&(t=t.toUpperCase()),e=this.color.getColor(t,{pos:i}),n.indexOf(i)>=0&&(e="grey"),null!=e&&(this.ctx.fillStyle=e,this.ctx.fillRect(d,p,l,s)),d+=l;return this._drawSelection()},_drawSelection:function(){var t,e,n,r,i,o,a,s,l;if(!(this.dragStart.length>0)||this.prolongSelection){for(o=this.g.zoomer.get("boxRectWidth"),i=this.g.zoomer.get("boxRectHeight"),n=i*this.model.length,this.ctx.fillStyle="#666666",this.ctx.globalAlpha=.9,t=e=0,a=this.g.selcol.length-1;a>=e;t=e+=1)s=this.g.selcol.at(t),"column"===s.get("type")?this.ctx.fillRect(o*s.get("xStart"),0,o*(s.get("xEnd")-s.get("xStart")+1),n):"row"===s.get("type")?(l=this.model.filter(function(t){return t.get("id")===s.get("seqId")})[0],r=this.model.indexOf(l),this.ctx.fillRect(0,i*r,o*l.get("seq").length,i)):"pos"===s.get("type")&&(l=this.model.filter(function(t){return t.get("id")===s.get("seqId")})[0],r=this.model.indexOf(l),this.ctx.fillRect(o*s.get("xStart"),i*r,o*(s.get("xEnd")-s.get("xStart")+1),i));return this.ctx.globalAlpha=1}},_onclick:function(t){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:t})})},_onmousemove:function(t){var e;if(0!==this.dragStart.length)return this.render(),this.ctx.fillStyle="#666666",this.ctx.globalAlpha=.9,e=this._calcSelection(a.abs(t)),this.ctx.fillRect(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0]),t.preventDefault(),t.stopPropagation()},_onmousedown:function(t){return this.dragStart=a.abs(t),this.dragStartRel=a.rel(t),t.ctrlKey||t.metaKey?this.prolongSelection=!0:this.prolongSelection=!1,o(document.body).on("mousemove.overmove",function(t){return function(e){return t._onmousemove(e)}}(this)),o(document.body).on("mouseup.overup",function(t){return function(e){return t._onmouseup(e)}}(this)),this.dragStart},_calcSelection:function(t){var e,n,r,i,o;for(e=[t[0]-this.dragStart[0],t[1]-this.dragStart[1]],n=r=0;1>=r;n=r+=1)e[n]=this.dragStartRel[n]+e[n];for(o=[[this.dragStartRel[0],e[0]],[this.dragStartRel[1],e[1]]],n=i=0;1>=i;n=i+=1)o[n][1]<o[n][0]&&(o[n]=[o[n][1],o[n][0]]),o[n][0]=Math.max(o[n][0],0);return o},_endSelection:function(t){var e,n,r,i,a,l,u,c,f,h;if(o(document.body).off(".overmove"),o(document.body).off(".overup"),0!==this.dragStart.length){for(u=this._calcSelection(t),n=i=0;1>=i;n=++i)u[0][n]=Math.floor(u[0][n]/this.g.zoomer.get("boxRectWidth"));for(n=a=0;1>=a;n=++a)u[1][n]=Math.floor(u[1][n]/this.g.zoomer.get("boxRectHeight"));for(u[0][1]=Math.min(this.model.getMaxLength()-1,u[0][1]),u[1][1]=Math.min(this.model.length-1,u[1][1]),h=[],r=l=c=u[1][0],f=u[1][1];f>=l;r=l+=1)e={seqId:this.model.at(r).get("id"),xStart:u[0][0],xEnd:u[0][1]},h.push(new s.possel(e));return this.dragStart=[],this.prolongSelection?this.g.selcol.add(h):this.g.selcol.reset(h),this.g.zoomer.setLeftOffset(u[0][0]),this.g.zoomer.setTopOffset(u[1][0])}},_onmouseup:function(t){return this._endSelection(a.abs(t))},_onmouseout:function(t){return this._endSelection(a.abs(t))},_createCanvas:function(){var t,e;return e=this.g.zoomer.get("boxRectWidth"),t=this.g.zoomer.get("boxRectHeight"),this.el.height=this.model.length*t,this.el.width=this.model.getMaxLength()*e,this.ctx=this.el.getContext("2d"),this.el.style.overflow="scroll",this.el.style.cursor="crosshair"}})},{"../g/selection/Selection":6,"backbone-viewj":67,jbone:126,"mouse-pos":130,underscore:150}],42:[function(t,e,n){var r,i,o,a,s;i=t("backbone-childs"),r=t("underscore"),a=t("koala-js"),o=t("dom-helper"),s=t("../g/selection/Selection"),e.exports=i.extend({initialize:function(t){return this.g=t.g,this.listenTo(this.g.user,"change:searchText",function(t,e){return this.search(e),this.render()}),this.sel=[],this.selPos=0},events:{scroll:"_sendScrollEvent"},render:function(){var t;return this.renderSubviews(),this.el.className="biojs_msa_searchresult",t=this.g.user.get("searchText"),null!=t&&t.length>0&&(0===this.sel.length?this.el.textContent="no selection found":(this.resultBox=a.mk("div"),this.resultBox.className="biojs_msa_searchresult_ovbox",this.updateResult(),this.el.appendChild(this.resultBox),this.el.appendChild(this.buildBtns()))),this},updateResult:function(){var t,e;return e="search pattern: "+this.g.user.get("searchText"),e+=", selection: "+(this.selPos+1),t=this.sel[this.selPos],e+=" (",e+=t.get("xStart")+" - "+t.get("xEnd"),e+=", id: "+t.get("seqId"),e+=")",this.resultBox.textContent=e},buildBtns:function(){var t,e,n,r;return n=a.mk("button"),n.textContent="Prev",n.addEventListener("click",function(t){return function(){return t.moveSel(-1)}}(this)),e=a.mk("button"),e.textContent="Next",e.addEventListener("click",function(t){return function(){return t.moveSel(1)}}(this)),t=a.mk("button"),t.textContent="All",t.addEventListener("click",function(t){return function(){return t.g.selcol.reset(t.sel)}}(this)),r=a.mk("div"),r.appendChild(n),r.appendChild(e),r.appendChild(t),r.className="biojs_msa_searchresult_row",r},moveSel:function(t){var e;return e=this.selPos+t,0>e||e>=this.sel.length?-1:(this.focus(e),this.selPos=e,this.updateResult())},focus:function(t){var e,n;return n=this.sel[t],e=n.get("xStart"),this.g.zoomer.setLeftOffset(e),this.g.selcol.reset([n])},search:function(t){var e,n,r,i;return i=new RegExp(t,"gi"),n=[],e=r=100042,this.model.each(function(t){var r,o,a,l,u;for(u=t.get("seq"),l=[];a=i.exec(u);)o=a.index,r={xStart:o,xEnd:o+a[0].length-1,seqId:t.get("id")},n.push(new s.possel(r)),l.push(e=Math.min(o,e));return l}),this.g.selcol.reset(n),e===r&&(e=0),this.g.zoomer.setLeftOffset(e),this.sel=n}})},{"../g/selection/Selection":6,"backbone-childs":60,"dom-helper":125,"koala-js":127,underscore:150}],43:[function(t,e,n){var r,i,o,a,s,l;l=t("backbone-childs"),r=t("./AlignmentBody"),i=t("./header/HeaderBlock"),o=t("./OverviewBox"),a=t("./Search"),s=t("underscore"),e.exports=l.extend({initialize:function(t){return this.g=t.g,this.draw(),this.listenTo(this.g.stats,"reset",function(){return this.rerender()}),this.listenTo(this.model,"change:hidden",s.debounce(this.rerender,10)),this.listenTo(this.model,"sort",this.rerender),this.listenTo(this.model,"add",function(){return console.log("seq add")}),this.listenTo(this.g.vis,"change:sequences",this.rerender),this.listenTo(this.g.vis,"change:overviewbox",this.rerender),this.listenTo(this.g.visorder,"change",this.rerender)},draw:function(){var t,e,n,s;return this.removeViews(),this.g.vis.get("overviewbox")&&(n=new o({model:this.model,g:this.g}),n.ordering=this.g.visorder.get("overviewBox"),this.addView("overviewBox",n)),e=new i({model:this.model,g:this.g}),e.ordering=this.g.visorder.get("headerBox"),this.addView("headerBox",e),s=new a({model:this.model,g:this.g}),s.ordering=this.g.visorder.get("searchBox"),this.addView("searchbox",s),t=new r({model:this.model,g:this.g}),t.ordering=this.g.visorder.get("alignmentBody"),this.addView("body",t)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_stage",this},rerender:function(){return this.g.config.get("manualRendering")?void 0:(this.draw(),this.render())}})},{"./AlignmentBody":40,"./OverviewBox":41,"./Search":42,"./header/HeaderBlock":51,"backbone-childs":60,underscore:150}],44:[function(t,e,n){var r,i;i=t("biojs-events"),e.exports=r=function(){function t(t){this.g=t,this.cache={},this.cacheHeight=0,this.cacheWidth=0}return t.prototype.getFontTile=function(t,e,n){return e===this.cacheWidth&&n===this.cacheHeight||(this.cacheHeight=n,this.cacheWidth=e,this.cache={}),void 0===this.cache[t]&&this.createTile(t,e,n),this.cache[t]},t.prototype.createTile=function(t,e,n){var r;return r=this.cache[t]=document.createElement("canvas"),r.width=e,r.height=n,this.ctx=r.getContext("2d"),this.ctx.font=this.g.zoomer.get("residueFont")+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(t,e/2,n/2,e)},t}()},{"biojs-events":71}],45:[function(t,e,n){var r,i,o,a;i=t("underscore"),r=t("biojs-events"),o={setMaxScrollHeight:function(){return this.maxScrollHeight=this.g.zoomer.getMaxAlignmentHeight()-this.g.zoomer.get("alignmentHeight")},setMaxScrollWidth:function(){return this.maxScrollWidth=this.g.zoomer.getMaxAlignmentWidth()-this.g.zoomer.getAlignmentWidth()}},e.exports=a=function(t,e){return this.g=t,this.model=e,this.maxScrollWidth=0,this.maxScrollHeight=0,this.setMaxScrollHeight(),this.setMaxScrollWidth(),this.listenTo(this.g.zoomer,"change:rowHeight",this.setMaxScrollHeight),this.listenTo(this.g.zoomer,"change:columnWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentHeight",this.setMaxScrollHeight),this.listenTo(this.model,"add change reset",function(){return this.setMaxScrollHeight(),this.setMaxScrollWidth()},this),this},i.extend(a.prototype,o),r.mixin(a.prototype)},{"biojs-events":71,underscore:150}],46:[function(t,e,n){var r,i;i=t("underscore"),e.exports=r=function(t,e){return this.g=t,this.ctx=e,this},i.extend(r.prototype,{_getSelection:function(t){var e,n,r,o,a,s,l,u,c,f,h,d,p;if(a=t.get("seq").length,d=[],p=this.g.selcol.getSelForRow(t.get("id")),f=i.find(p,function(t){return"row"===t.get("type")}),null!=f)for(s=e=0,l=a-1;l>=e;s=e+=1)d.push(s);else if(p.length>0)for(n=0,r=p.length;r>n;n++)for(h=p[n],s=o=u=h.get("xStart"),c=h.get("xEnd");c>=o;s=o+=1)d.push(s);return d},_appendSelection:function(t){var e,n,r,i,o,a,s,l,u,c,f,h,d;if(d=t.model.get("seq"),h=this._getSelection(t.model),u=this._getPrevNextSelection(t.model),s=u[0],a=u[1],n=this.g.zoomer.get("columnWidth"),e=this.g.zoomer.get("rowHeight"),0!==h.length){for(r=0,f=[],l=i=0,c=d.length-1;c>=i;l=i+=1)t.hidden.indexOf(l)>=0?f.push(r++):(o=l-r,h.indexOf(l)>=0&&(0===o||h.indexOf(l-1)<0)?f.push(this._renderSelection({n:l,k:o,selection:h,mPrevSel:s,mNextSel:a,xZero:t.xZero,yZero:t.yZero,model:t.model})):f.push(void 0));return f}},_renderSelection:function(t){var e,n,r,i,o,a,s,l,u,c,f,h,d,p,g,v,m,y,b,x,_,w;for(_=t.xZero,w=t.yZero,h=t.n,l=t.k,v=t.selection,f=t.mPrevSel,c=t.mNextSel,m=0,a=s=d=h,p=t.model.get("seq").length-1;p>=s&&v.indexOf(a)>=0;a=s+=1)m++;for(i=this.g.zoomer.get("columnWidth"),r=this.g.zoomer.get("rowHeight"),y=i*m+1,o=this.g.columns.get("hidden"),this.ctx.beginPath(),n=this.ctx.lineWidth,this.ctx.lineWidth=3,e=this.ctx.strokeStyle,this.ctx.strokeStyle="#FF0000",_+=l*i,b=0,a=u=0,g=m-1;g>=0?g>=u:u>=g;a=g>=0?++u:--u)x=h+a,o.indexOf(x)>=0||(null!=f&&f.indexOf(x)>=0||(this.ctx.moveTo(_+b,w),this.ctx.lineTo(b+i+_,w)),null!=c&&c.indexOf(x)>=0||(this.ctx.moveTo(b+_,r+w),this.ctx.lineTo(b+i+_,r+w)),b+=i);return this.ctx.moveTo(_,w),this.ctx.lineTo(_,r+w),this.ctx.moveTo(_+y,w),this.ctx.lineTo(_+y,r+w),this.ctx.stroke(),this.ctx.strokeStyle=e,this.ctx.lineWidth=n},_getPrevNextSelection:function(t){var e,n,r,i;return i=t.collection.prev(t),r=t.collection.next(t),null!=i&&(n=this._getSelection(i)),null!=r&&(e=this._getSelection(r)),[n,e]}})},{underscore:150}],47:[function(t,e,n){var r,i,o,a,s,l,u,c;l=t("backbone-childs"),c=t("mouse-pos"),s=t("underscore"),u=t("jbone"),o=t("./CanvasCharCache"),a=t("./CanvasSelection"),i=t("./CanvasSeqDrawer"),r=t("./CanvasCoordsCache"),e.exports=l.extend({tagName:"canvas",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft change:_alignmentScrollTop",function(t,e,n){return null==(null!=n?n.origin:void 0)||"canvasseq"!==n.origin?this.render():void 0}),this.listenTo(this.g.columns,"change:hidden",this.render),this.listenTo(this.g.zoomer,"change:alignmentWidth change:alignmentHeight",this.render),this.listenTo(this.g.colorscheme,"change",this.render),this.listenTo(this.g.selcol,"reset add",this.render),this.listenTo(this.model,"reset add",this.render),this.el.style.display="inline-block",this.el.style.overflowX="hidden",this.el.style.overflowY="hidden",this.el.className="biojs_msa_seqblock",this.ctx=this.el.getContext("2d"),this.cache=new o(this.g),this.coordsCache=new r(this.g,this.model),this.listenTo(this.g.zoomer,"change:residueFont",function(){return this.cache=new o(this.g),this.render()}),this.sel=new a(this.g,this.ctx),this._setColor(),this.throttleTime=0,this.throttleCounts=0,null!=document.documentElement.style.webkitAppearance?this.throttledDraw=function(){var t,e;return t=+new Date,this.draw(),this.throttleTime+=+new Date-t,this.throttleCounts++,this.throttleCounts>15?(e=Math.ceil(this.throttleTime/this.throttleCounts),console.log("avgDrawTime/WebKit",e),this.throttledDraw=this.draw):void 0}:this.throttledDraw=s.throttle(this.throttledDraw,30),this.manageEvents()},throttledDraw:function(){var t,e;return t=+new Date,this.draw(),this.throttleTime+=+new Date-t,this.throttleCounts++,this.throttleCounts>15?(e=Math.ceil(this.throttleTime/this.throttleCounts),console.log("avgDrawTime",e),e*=1.2,e=Math.max(20,e),this.throttledDraw=s.throttle(this.draw,e)):void 0},manageEvents:function(){var t;return t={},t.mousedown="_onmousedown",t.touchstart="_ontouchstart",this.g.config.get("registerMouseClicks")&&(t.dblclick="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),t.mousewheel="_onmousewheel",t.DOMMouseScroll="_onmousewheel",this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.dragStart=[]},_setColor:function(){return this.color=this.g.colorscheme.getSelectedScheme()},draw:function(){return this.el.width=this.el.width,null!=this.seqDrawer&&this.model.length>0?(this.seqDrawer.drawLetters(),this.seqDrawer.drawRows(this.sel._appendSelection,this.sel),this.seqDrawer.drawRows(this.drawFeatures,this)):void 0},drawFeatures:function(t){var e,n,r;return r=this.g.zoomer.get("columnWidth"),n=this.g.zoomer.get("rowHeight"),t.model.attributes.height>1?(e=this.ctx,t.model.attributes.features.each(function(i){var o,a;return e.fillStyle=i.attributes.fillColor||"red",o=i.attributes.xEnd-i.attributes.xStart+1,a=(i.attributes.row+1)*n,e.fillRect(i.attributes.xStart*r+t.xZero,a+t.yZero,r*o,n)}),e.fillStyle="black",e.font=this.g.zoomer.get("residueFont")+"px mono",e.textBaseline="middle",e.textAlign="center",t.model.attributes.features.each(function(i){var o,a;return o=i.attributes.xEnd-i.attributes.xStart+1,a=(i.attributes.row+1)*n,e.fillText(i.attributes.text,t.xZero+i.attributes.xStart*r+o/2*r,t.yZero+.5*n+a)})):void 0},render:function(){return this.el.setAttribute("height",this.g.zoomer.get("alignmentHeight")+"px"),this.el.setAttribute("width",this.g.zoomer.getAlignmentWidth()+"px"),this.g.zoomer._checkScrolling(this._checkScrolling([this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")]),{header:"canvasseq"}),this._setColor(),this.seqDrawer=new i(this.g,this.ctx,this.model,{width:this.el.width,height:this.el.height,color:this.color,cache:this.cache}),this.throttledDraw(),this},_onmousemove:function(t,e){var n,r,i,o,a,s,l,u,f;if(0!==this.dragStart.length){for(n=c.abs(t),l=[n[0]-this.dragStart[0],n[1]-this.dragStart[1]],u=this.g.zoomer.get("canvasEventScale"),e&&(u=3),r=i=0;1>=i;r=i+=1)l[r]=l[r]*u;for(s=[this.dragStartScroll[0]-l[0],this.dragStartScroll[1]-l[1]],r=o=0;1>=o;r=o+=1)s[r]=Math.round(s[r]);for(f=this._checkScrolling(s),this.g.zoomer._checkScrolling(f,{origin:"canvasseq"}),r=a=0;1>=a;r=a+=1)f[r]!==s[r]&&(0===f[r]?(this.dragStart[r]=n[r],this.dragStartScroll[r]=0):this.dragStart[r]=n[r]-f[r]);return this.throttledDraw(),null!=t.preventDefault?(t.preventDefault(),t.stopPropagation()):void 0}},_ontouchmove:function(t){return this._onmousemove(t.changedTouches[0],!0),t.preventDefault(),t.stopPropagation()},_onmousedown:function(t){return this.dragStart=c.abs(t),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],u(document.body).on("mousemove.overmove",function(t){return function(e){return t._onmousemove(e)}}(this)),u(document.body).on("mouseup.overup",function(t){return function(){return t._cleanup()}}(this)),t.preventDefault()},_ontouchstart:function(t){return this.dragStart=c.abs(t.changedTouches[0]),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],u(document.body).on("touchmove.overtmove",function(t){return function(e){return t._ontouchmove(e)}}(this)),u(document.body).on("touchend.overtend touchleave.overtleave touchcancel.overtcanel",function(t){return function(e){return t._touchCleanup(e)}}(this))},_onmousewinout:function(t){return t.toElement===document.body.parentNode?this._cleanup():void 0},_cleanup:function(){return this.dragStart=[],u(document.body).off(".overmove"),u(document.body).off(".overup"),u(document.body).off(".overout")},_touchCleanup:function(t){return t.changedTouches.length>0&&this._onmousemove(t.changedTouches[0],!0),this.dragStart=[],u(document.body).off(".overtmove"),u(document.body).off(".overtend"),u(document.body).off(".overtleave"),u(document.body).off(".overtcancel")},_onmousewheel:function(t){var e;return e=c.wheelDelta(t),this.g.zoomer.set("_alignmentScrollLeft",this.g.zoomer.get("_alignmentScrollLeft")+e[0]),this.g.zoomer.set("_alignmentScrollTop",this.g.zoomer.get("_alignmentScrollTop")+e[1]),t.preventDefault()},_onclick:function(t){var e;return e=this._getClickPos(t),null!=e&&(null!=e.feature?this.g.trigger("feature:click",e):this.g.trigger("residue:click",e)),this.throttledDraw()},_onmousein:function(t){var e;return e=this._getClickPos(t),null!=e&&(null!=e.feature?this.g.trigger("feature:mousein",e):this.g.trigger("residue:mousein",e)),this.throttledDraw()},_onmouseout:function(t){var e;return e=this._getClickPos(t),null!=e&&(null!=e.feature?this.g.trigger("feature:mouseout",e):this.g.trigger("residue:mouseout",e)),this.throttledDraw()},_getClickPos:function(t){var e,n,r,i,o,a,s,l;return e=c.rel(t),e[0]+=this.g.zoomer.get("_alignmentScrollLeft"),s=Math.floor(e[0]/this.g.zoomer.get("columnWidth")),i=this.seqDrawer._getSeqForYClick(e[1]),l=i[0],o=i[1],s+=this.g.columns.calcHiddenColumns(s),l+=this.model.calcHiddenSeqs(l),s=Math.max(0,s),l=Math.max(0,l),a=this.model.at(l).get("id"),o>0?(r=this.model.at(l).get("features").getFeatureOnRow(o-1,s),0!==r.length?(n=r[0],console.log(r[0].attributes),{seqId:a,feature:n,rowPos:s,evt:t}):void 0):{seqId:a,rowPos:s,evt:t}},_checkScrolling:function(t){var e,n,r;for(r=[this.coordsCache.maxScrollWidth,this.coordsCache.maxScrollHeight],e=n=0;1>=n;e=n+=1)t[e]>r[e]&&(t[e]=r[e]),t[e]<0&&(t[e]=0);return t}})},{"./CanvasCharCache":44,"./CanvasCoordsCache":45,"./CanvasSelection":46,"./CanvasSeqDrawer":48,"backbone-childs":60,jbone:126,"mouse-pos":130,underscore:150}],48:[function(t,e,n){var r,i,o;r=t("underscore"),o={drawLetters:function(){var t;return t=this.rectHeight,this.ctx.globalAlpha=this.g.colorscheme.get("opacity"),this.drawSeqs(function(t){return this.drawSeq(t,this._drawRect)}),this.ctx.globalAlpha=1,this.drawSeqs(function(t){return this.drawSeq(t,this._drawLetter)})},drawSeqs:function(t,e){var n,r,i,o,a,s,l,u,c,f,h;for(n=this.g.columns.get("hidden"),e=e||this,o=this.getStartSeq(),f=o[0],h=o[1],l=[],r=i=a=f,s=this.model.length-1;s>=i;r=i+=1)if(u=this.model.at(r),!u.get("hidden")){if(t.call(e,{model:u,yPos:h,y:r,hidden:n}),c=(u.attributes.height||1)*this.rectHeight,h+=c,h>this.height)break;l.push(void 0)}return l},drawRows:function(t,e){return this.drawSeqs(function(n){return this.drawRow(n,t,e)})},drawRow:function(t,e,n){var r,i,o,a,s;return r=this.g.zoomer.get("columnWidth"),i=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/r))),o=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%r),a=o-i*r,s=t.yPos,e.call(n,{model:t.model,xZero:a,yZero:s,hidden:t.hidden})},getStartSeq:function(){var t,e,n,r;for(n=Math.max(0,Math.floor(this.g.zoomer.get("_alignmentScrollTop")/this.rectHeight))+1,t=0,e=0;n>t&&e<this.model.length;)t+=this.model.at(e).attributes.height||1,e++;return r=Math.max(0,this.g.zoomer.get("_alignmentScrollTop")-t*this.rectHeight+(this.model.at(e-1).attributes.height||1)*this.rectHeight),[e-1,-r]},_getSeqForYClick:function(t){var e,n,r,i,o,a,s,l;for(i=this.getStartSeq(),a=i[0],s=i[1],l=s%this.rectHeight,e=Math.max(0,Math.floor((t-l)/this.rectHeight))+1,n=0,r=a;e>n&&r<this.model.length;)n+=this.model.at(r).attributes.height||1,r++;return o=Math.max(0,Math.floor(t/this.rectHeight)-n+(this.model.at(r-1).get("height")||1)),[r-1,o]},drawSeq:function(t,e){var n,r,i,o,a,s,l,u,c,f,h,d,p,g;for(h=t.model.get("seq"),g=t.yPos,s=this.rectWidth,a=this.rectHeight,d=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/s))),p=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%s),c={rectWidth:s,rectHeight:a,yPos:g,y:t.y},r=this.width,f=[],i=o=l=d,u=h.length-1;u>=o;i=o+=1)if(n=h[i],n=n.toUpperCase(),c.x=i,c.c=n,c.xPos=p,t.hidden.indexOf(i)<0){if(e(this,c),p+=s,p>r)break;f.push(void 0)}return f},_drawRect:function(t,e){var n;return n=t.color.getColor(e.c,{pos:e.x,y:e.y}),null!=n?(t.ctx.fillStyle=n,t.ctx.fillRect(e.xPos,e.yPos,e.rectWidth,e.rectHeight)):void 0},_drawLetter:function(t,e){return t.ctx.drawImage(t.cache.getFontTile(e.c,e.rectWidth,e.rectHeight),e.xPos,e.yPos,e.rectWidth,e.rectHeight)}},e.exports=i=function(t,e,n,r){return this.g=t,this.ctx=e,this.model=n,this.width=r.width,this.height=r.height,this.color=r.color,this.cache=r.cache,this.rectHeight=this.g.zoomer.get("rowHeight"),this.rectWidth=this.g.zoomer.get("columnWidth"),this},r.extend(i.prototype,o)},{underscore:150}],49:[function(t,e,n){var r,i,o,a;a=t("backbone-viewj"),i=t("dom-helper"),o=t("../../utils/svg"),r=a.extend({className:"biojs_msa_conserv",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.g.stats,"reset",this.render),this.manageEvents()},render:function(){var t,e,n,r,a,s,l,u,c,f,h,d,p,g,v,m;for(n=this.g.stats.scale(this.g.stats.conservation()),i.removeAllChilds(this.el),f=this.model.getMaxLength(),e=this.g.zoomer.get("columnWidth"),u=20,v=e*(f-this.g.columns.get("hidden").length),p=o.base({height:u,width:v}),p.style.display="inline-block",p.style.cursor="pointer",g=this.g.zoomer.get("stepSize"),a=this.g.columns.get("hidden"),m=0,c=0;f>c;)if(a.indexOf(c)>=0)c+=g;else{for(v=e*g,t=0,s=l=0,d=g-1;d>=0?d>=l:l>=d;s=d>=0?++l:--l)t+=n[c];r=u*(t/g),h=o.rect({x:m,y:u-r,width:v-e/4,height:r,style:"stroke:red;stroke-width:1;"}),h.rowPos=c,p.appendChild(h),m+=v,c+=g}return this.el.appendChild(p),this},_onclick:function(t){var e,n,r,i,o,a;for(o=t.target.rowPos,a=this.g.zoomer.get("stepSize"),i=[],e=n=0,r=a-1;r>=n;e=n+=1)i.push(this.g.trigger("bar:click",{rowPos:o+e,evt:t}));return i},manageEvents:function(){var t;return t={},this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(t){var e;return e=this.g.zoomer.get("stepSize"*t.rowPos),this.g.trigger("bar:mousein",{rowPos:e,evt:t})},_onmouseout:function(t){var e;return e=this.g.zoomer.get("stepSize"*t.rowPos),this.g.trigger("bar:mouseout",{rowPos:e,evt:t})}}),e.exports=r},{"../../utils/svg":38,"backbone-viewj":67,"dom-helper":125}],50:[function(t,e,n){var r,i,o,a;a=t("backbone-viewj"),i=t("dom-helper"),o=t("../../utils/svg"),r=a.extend({className:"biojs_msa_gapview",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.model,"reset",this.render),this.manageEvents()},render:function(){var t,e,n,r,a,s,l,u,c,f,h,d,p,g,v,m;for(n=this.g.stats.gaps(),i.removeAllChilds(this.el),f=this.model.getMaxLength(),e=this.g.zoomer.get("columnWidth"),u=20,v=e*(f-this.g.columns.get("hidden").length),p=o.base({height:u,width:v}),p.style.display="inline-block",p.style.cursor="pointer",g=this.g.zoomer.get("stepSize"),a=this.g.columns.get("hidden"),m=0,c=0;f>c;)if(a.indexOf(c)>=0)c+=g;else{for(v=e*g,t=0,s=l=0,d=g-1;d>=0?d>=l:l>=d;s=d>=0?++l:--l)t+=n[c];r=u*(t/g),h=o.rect({x:m,y:u-r,width:v-e/4,height:r,style:"stroke:red;stroke-width:1;"}),h.rowPos=c,p.appendChild(h),m+=v,c+=g}return this.el.appendChild(p),this},_onclick:function(t){var e,n,r,i,o,a;for(o=t.target.rowPos,a=this.g.zoomer.get("stepSize"),i=[],e=n=0,r=a-1;r>=n;e=n+=1)i.push(this.g.trigger("gap:click",{rowPos:o+e,evt:t}));return i},manageEvents:function(){var t;return t={},this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(t){var e;return e=this.g.zoomer.get("stepSize"*t.rowPos),this.g.trigger("gap:mousein",{rowPos:e,evt:t})},_onmouseout:function(t){var e;return e=this.g.zoomer.get("stepSize"*t.rowPos),this.g.trigger("gap:mouseout",{rowPos:e,evt:t})}}),e.exports=r},{"../../utils/svg":38,"backbone-viewj":67,"dom-helper":125}],51:[function(t,e,n){var r,i,o;o=t("backbone-childs"),r=t("./LabelHeader"),i=t("./RightHeaderBlock"),e.exports=o.extend({initialize:function(t){return this.g=t.g,this.draw(),this.listenTo(this.g.vis,"change:labels change:metacell change:leftHeader",function(t){return function(){return t.draw(),t.render()}}(this))},draw:function(){var t,e;return this.removeViews(),this.g.vis.get("leftHeader")&&(this.g.vis.get("labels")||this.g.vis.get("metacell"))&&(t=new r({model:this.model,g:this.g}),t.ordering=-50,this.addView("lHeader",t)),e=new i({model:this.model,g:this.g}),e.ordering=0,this.addView("rHeader",e)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_header"}})},{"./LabelHeader":52,"./RightHeaderBlock":54,"backbone-childs":60}],52:[function(t,e,n){var r,i,o,a;o=t("koala-js"),a=t("backbone-viewj"),i=t("dom-helper"),e.exports=r=a.extend({className:"biojs_msa_headers",initialize:function(t){return this.g=t.g,this.listenTo(this.g.vis,"change:metacell change:labels",this.render),this.listenTo(this.g.zoomer,"change:labelWidth change:metaWidth",this.render)},render:function(){var t;return i.removeAllChilds(this.el),t=0,t+=this.g.zoomer.getLeftBlockWidth(),this.el.style.width=t+"px",this.g.vis.get("labels")&&this.el.appendChild(this.labelDOM()),this.g.vis.get("metacell")&&this.el.appendChild(this.metaDOM()),this.el.style.display="inline-block",this.el.style.fontSize=this.g.zoomer.get("markerFontsize"),this},labelDOM:function(){var t,e;return t=o.mk("div"),t.style.width=this.g.zoomer.getLabelWidth(),t.style.display="inline-block",this.g.vis.get("labelCheckbox")&&t.appendChild(this.addEl(".",10)),this.g.vis.get("labelId")&&t.appendChild(this.addEl("ID",this.g.zoomer.get("labelIdLength"))),this.g.vis.get("labelPartition")&&t.appendChild(this.addEl("part",15)),this.g.vis.get("labelName")&&(e=this.addEl("Label"),t.appendChild(e)),t},addEl:function(t,e){var n;return n=document.createElement("span"),n.textContent=t,null!=e&&(n.style.width=e+"px"),n.style.display="inline-block",n},metaDOM:function(){var t;return t=o.mk("div"),t.style.width=this.g.zoomer.getMetaWidth(),t.style.display="inline-block",this.g.vis.get("metaGaps")&&t.appendChild(this.addEl("Gaps",this.g.zoomer.get("metaGapWidth"))),this.g.vis.get("metaIdentity")&&t.appendChild(this.addEl("Ident",this.g.zoomer.get("metaIdentWidth"))),this.g.vis.get("metaLinks")&&t.appendChild(this.addEl("Links")),t}})},{"backbone-viewj":67,"dom-helper":125,"koala-js":127}],53:[function(t,e,n){var r,i,o,a,s;s=t("backbone-viewj"),i=t("dom-helper"),a=t("../../utils/svg"),o=t("jbone"),r=s.extend({className:"biojs_msa_marker",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth change:markerStepSize change:markerFontsize",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.manageEvents()},render:function(){var t,e,n,r,o,a,s;for(i.removeAllChilds(this.el),this.el.style.fontSize=this.g.zoomer.get("markerFontsize"),e=document.createElement("span"),
r=0,t=this.g.zoomer.get("columnWidth"),o=this.model.getMaxLength(),s=this.g.zoomer.get("stepSize"),n=this.g.columns.get("hidden");o>r;)n.indexOf(r)>=0?(this.markerHidden(a,r,s),r+=s):(a=document.createElement("span"),a.style.width=t*s+"px",a.style.display="inline-block",(r+1)%this.g.zoomer.get("markerStepSize")===0?a.textContent=r+1:a.textContent=".",a.rowPos=r,r+=s,e.appendChild(a));return this.el.appendChild(e),this},markerHidden:function(t,e,n){var r,i,s,l,u,c,f,h,d,p,g,v,m,y,b;for(r=this.g.columns.get("hidden").slice(0),f=Math.max(0,e-n),d=!0,l=i=p=f,g=e;g>=i;l=i+=1)d&=r.indexOf(l)>=0;if(!d){for(h=this.model.getMaxLength(),c=0,s=-1,e=u=v=e,m=h;m>=u&&(s>=0||(s=r.indexOf(e)),r.indexOf(e)>=0);e=u+=1)c++;return y=a.base({height:10,width:10}),y.style.position="relative",b=a.polygon({points:"0,0 5,5 10,0",style:"fill:lime;stroke:purple;stroke-width:1"}),o(b).on("click",function(t){return function(e){return r.splice(s,c),t.g.columns.set("hidden",r)}}(this)),y.appendChild(b),t.appendChild(y),y}},manageEvents:function(){var t;return t={},this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onclick:function(t){var e,n;return e=t.target.rowPos,n=this.g.zoomer.get("stepSize"),this.g.trigger("column:click",{rowPos:e,stepSize:n,evt:t})},_onmousein:function(t){var e,n;return e=this.g.zoomer.get("stepSize"*t.rowPos),n=this.g.zoomer.get("stepSize"),this.g.trigger("column:mousein",{rowPos:e,stepSize:n,evt:t})},_onmouseout:function(t){var e,n;return e=this.g.zoomer.get("stepSize"*t.rowPos),n=this.g.zoomer.get("stepSize"),this.g.trigger("column:mouseout",{rowPos:e,stepSize:n,evt:t})}}),e.exports=r},{"../../utils/svg":38,"backbone-viewj":67,"dom-helper":125,jbone:126}],54:[function(t,e,n){var r,i,o,a,s,l;o=t("./MarkerView"),r=t("./ConservationView"),l=t("backbone-childs"),s=t("underscore"),a=t("./SeqLogoWrapper"),i=t("./GapView"),e.exports=l.extend({initialize:function(t){return this.g=t.g,this.blockEvents=!1,this.listenTo(this.g.vis,"change:header",function(){return this.draw(),this.render()}),this.listenTo(this.g.vis,"change",this._setSpacer),this.listenTo(this.g.zoomer,"change:alignmentWidth",this._setWidth),this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft",this._adjustScrollingLeft),this.listenTo(this.g.columns,"change:hidden",function(){return this.draw(),this.render()}),this.draw(),this.g.vis.once("change:loaded",this._adjustScrollingLeft,this)},events:{scroll:"_sendScrollEvent"},draw:function(){var t,e,n,s;return this.removeViews(),this.g.vis.get("conserv")&&(t=new r({model:this.model,g:this.g}),t.ordering=-20,this.addView("conserv",t)),this.g.vis.get("markers")&&(n=new o({model:this.model,g:this.g}),n.ordering=-10,this.addView("marker",n)),this.g.vis.get("seqlogo")&&(s=new a({model:this.model,g:this.g}),s.ordering=-30,this.addView("seqlogo",s)),this.g.vis.get("gapHeader")?(e=new i({model:this.model,g:this.g}),e.ordering=-25,this.addView("gapview",e)):void 0},render:function(){return this.renderSubviews(),this._setSpacer(),this.el.className="biojs_msa_rheader",this.el.style.overflowX="auto",this.el.style.display="inline-block",this._setWidth(),this._adjustScrollingLeft(),this},_sendScrollEvent:function(){return this.blockEvents||this.g.zoomer.set("_alignmentScrollLeft",this.el.scrollLeft,{origin:"header"}),this.blockEvents=!1},_adjustScrollingLeft:function(t,e,n){var r;return null==(null!=n?n.origin:void 0)||"header"!==n.origin?(r=this.g.zoomer.get("_alignmentScrollLeft"),this.blockEvents=!0,this.el.scrollLeft=r):void 0},_setSpacer:function(){return this.el.style.marginLeft=this._getLabelWidth()+"px"},_getLabelWidth:function(){var t;return t=0,this.g.vis.get("leftHeader")||(t+=this.g.zoomer.getLeftBlockWidth()),t},_setWidth:function(){return this.el.style.width=this.g.zoomer.getAlignmentWidth()+"px"}})},{"./ConservationView":49,"./GapView":50,"./MarkerView":53,"./SeqLogoWrapper":55,"backbone-childs":60,underscore:150}],55:[function(t,e,n){var r,i,o;r=t("biojs-vis-seqlogo/light"),o=t("backbone-viewj"),i=t("dom-helper"),e.exports=o.extend({initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:alignmentWidth",this.render),this.listenTo(this.g.colorscheme,"change",function(){var t;return t=this.g.colorscheme.getSelectedScheme(),this.seqlogo.changeColors(t),this.render()}),this.listenTo(this.g.zoomer,"change:columnWidth",function(){return this.seqlogo.column_width=this.g.zoomer.get("columnWidth"),this.render()}),this.listenTo(this.g.stats,"reset",function(){return this.draw(),this.render()}),this.draw()},draw:function(){var t,e,n;return i.removeAllChilds(this.el),console.log("redraw seqlogo"),t=this.g.stats.conservResidue({scaled:!0}),t=_.map(t,function(t){return _.pick(t,function(t,e){return"-"!==e})}),n={alphabet:"aa",heightArr:t},e=this.g.colorscheme.getSelectedScheme(),this.seqlogo=new r({model:this.model,g:this.g,data:n,yaxis:!1,scroller:!1,xaxis:!1,height:100,column_width:this.g.zoomer.get("columnWidth"),positionMarker:!1,zoom:1,el:this.el,colors:e})},render:function(){return this.seqlogo.render()}})},{"backbone-viewj":67,"biojs-vis-seqlogo/light":108,"dom-helper":125}],56:[function(t,e,n){var r,i;r=t("./LabelRowView"),i=t("backbone-childs"),e.exports=i.extend({initialize:function(t){return this.g=t.g,this.draw(),this.listenTo(this.g.zoomer,"change:_alignmentScrollTop",this._adjustScrollingTop),this.g.vis.once("change:loaded",this._adjustScrollingTop,this),this.listenTo(this.g.zoomer,"change:alignmentHeight",this._setHeight),this.listenTo(this.model,"change:reference",this.draw),this.listenTo(this.model,"reset add remove",function(t){return function(){return t.draw(),t.render()}}(this))},draw:function(){var t,e,n,i,o;for(this.removeViews(),i=[],t=e=0,n=this.model.length-1;n>=e;t=e+=1)this.model.at(t).get("hidden")||(o=new r({model:this.model.at(t),g:this.g}),o.ordering=t,i.push(this.addView("row_"+t,o)));return i},events:{scroll:"_sendScrollEvent"},_sendScrollEvent:function(){return this.g.zoomer.set("_alignmentScrollTop",this.el.scrollTop,{origin:"label"})},_adjustScrollingTop:function(){return this.el.scrollTop=this.g.zoomer.get("_alignmentScrollTop")},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_labelblock",this.el.style.display="inline-block",this.el.style.verticalAlign="top",this.el.style.overflowY="auto",this.el.style.overflowX="hidden",this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this.el.style.lineHeight=""+this.g.zoomer.get("labelLineHeight"),this._setHeight(),this},_setHeight:function(){return this.el.style.height=this.g.zoomer.get("alignmentHeight")+"px"}})},{"./LabelRowView":57,"backbone-childs":60}],57:[function(t,e,n){var r,i,o;o=t("backbone-childs"),r=t("./LabelView"),i=t("./MetaView"),e.exports=o.extend({initialize:function(t){return this.g=t.g,this.draw(),this.listenTo(this.g.vis,"change:labels",this.drawR),this.listenTo(this.g.vis,"change:metacell",this.drawR),this.listenTo(this.g.zoomer,"change:rowHeight",function(){return this.el.style.height=this.g.zoomer.get("rowHeight")+"px"}),this.listenTo(this.g.selcol,"change reset add",this.setSelection)},draw:function(){var t;return this.removeViews(),this.g.vis.get("labels")&&this.addView("labels",new r({model:this.model,g:this.g})),this.g.vis.get("metacell")?(t=new i({model:this.model,g:this.g}),this.addView("metacell",t)):void 0},drawR:function(){return this.draw(),this.render()},render:function(){return this.renderSubviews(),this.el.setAttribute("class","biojs_msa_labelrow"),this.el.style.height=this.g.zoomer.get("rowHeight")*(this.model.attributes.height||1)+"px",this.setSelection(),this},setSelection:function(){var t;return t=this.g.selcol.getSelForRow(this.model.id),t.length>0?this.el.style.fontWeight="bold":this.el.style.fontWeight="normal"}})},{"./LabelView":58,"./MetaView":59,"backbone-childs":60}],58:[function(t,e,n){var r,i,o;o=t("backbone-viewj"),i=t("dom-helper"),r=o.extend({initialize:function(t){return this.seq=t.seq,this.g=t.g,this.manageEvents()},manageEvents:function(){var t;return t={},this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.listenTo(this.g.vis,"change:labelName change:labelId change:labelPartition change:labelCheckbox",this.render),this.listenTo(this.g.zoomer,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",this.render),this.listenTo(this.g.zoomer,"change:labelFontSize change:labelLineHeight change:labelWidth change:rowHeight",this.render)},render:function(){var t,e,n,r,o;return i.removeAllChilds(this.el),this.el.style.width=this.g.zoomer.getLabelWidth()+"px",this.el.setAttribute("class","biojs_msa_labels"),this.g.vis.get("labelCheckbox")&&(t=document.createElement("input"),t.setAttribute("type","checkbox"),t.value=this.model.get("id"),t.name="seq",t.style.width=this.g.zoomer.get("labelCheckLength")+"px",this.el.appendChild(t)),this.g.vis.get("labelId")&&(e=document.createElement("span"),o=this.model.get("id"),isNaN(o)||o++,e.textContent=o,e.style.width=this.g.zoomer.get("labelIdLength")+"px",e.style.display="inline-block",this.el.appendChild(e)),this.g.vis.get("labelPartition")&&(r=document.createElement("span"),r.style.width=this.g.zoomer.get("labelPartLength")+"px",r.textContent=this.model.get("partition"),r.style.display="inline-block",this.el.appendChild(e),this.el.appendChild(r)),this.g.vis.get("labelName")&&(n=document.createElement("span"),n.textContent=this.model.get("name"),this.model.get("ref")&&this.g.config.get("hasRef")&&(n.style.fontWeight="bold"),n.style.width=this.g.zoomer.get("labelNameLength")+"px",this.el.appendChild(n)),this.el.style.overflow=scroll,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this},_onclick:function(t){var e;return e=this.model.get("id"),this.g.trigger("row:click",{seqId:e,evt:t})},_onmousein:function(t){var e;return e=this.model.get("id"),this.g.trigger("row:mouseout",{seqId:e,evt:t})},_onmouseout:function(t){var e;return e=this.model.get("id"),this.g.trigger("row:mouseout",{seqId:e,evt:t})}}),e.exports=r},{"backbone-viewj":67,"dom-helper":125}],59:[function(t,e,n){var r,i,o,a,s,l;l=t("backbone-viewj"),r=t("../../menu/menubuilder"),o=t("underscore"),a=t("dom-helper"),s=t("msa-seqtools"),e.exports=i=l.extend({className:"biojs_msa_metaview",initialize:function(t){return this.g=t.g,this.listenTo(this.g.vis,"change:metacell",this.render),this.listenTo(this.g.zoomer,"change:metaWidth",this.render)},events:{click:"_onclick",mousein:"_onmousein",mouseout:"_onmouseout"},render:function(){var t,e,n,i,l,u,c,f,h;return a.removeAllChilds(this.el),this.el.style.display="inline-block",h=this.g.zoomer.getMetaWidth(),this.el.style.width=h-10,this.el.style.paddingRight=5,this.el.style.paddingLeft=5,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")-2+"px",this.g.vis.get("metaGaps")&&(f=this.model.get("seq"),e=o.reduce(f,function(t,e){return"-"===e&&t++,t},0),e=(100*e/f.length).toFixed(0)+"%",t=document.createElement("span"),t.textContent=e,t.style.display="inline-block",t.style.width=35,this.el.appendChild(t)),this.g.vis.get("metaIdentity")&&(n=this.g.stats.identity()[this.model.id],i=document.createElement("span"),this.model.get("ref")&&this.g.config.get("hasRef")?i.textContent="ref.":null!=n&&(i.textContent=n.toFixed(2)),i.style.display="inline-block",i.style.width=40,this.el.appendChild(i)),this.g.vis.get("metaLinks")&&this.model.attributes.ids&&(u=s.buildLinks(this.model.attributes.ids),o.keys(u).length>0)?(c=new r({name:"?"}),console.log(o.keys(u)),o.each(u,function(t,e){return c.addNode(e,function(e){return window.open(t)})}),l=c.buildDOM(),l.style.cursor="pointer",this.el.appendChild(l)):void 0},_onclick:function(t){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:t})})},_onmousein:function(t){return this.g.trigger("meta:mousein",{seqId:this.model.get("id",{evt:t})})},_onmouseout:function(t){return this.g.trigger("meta:mouseout",{seqId:this.model.get("id",{evt:t})})}})},{"../../menu/menubuilder":14,"backbone-viewj":67,"dom-helper":125,"msa-seqtools":148,underscore:150}],60:[function(t,e,n){function r(t){var e=t.parentNode,n=t.nextSibling;return e.removeChild(t),function(){n?e.insertBefore(t,n):e.appendChild(t)}}var i,o=t("underscore"),a=t("backbone-viewj"),s=function(t){for(var e;e=t.lastChild;)t.removeChild(e)};e.exports=i=a.extend({renderSubviews:function(){var t=this.el,e=void 0!=t.parentNode;if(e)var n=r(t);s(t);for(var i,a,l=document.createDocumentFragment(),u=this._views(),c=o.sortBy(u,function(t){return t.ordering}),f=0;f<c.length;f++)i=c[f],i.render(),a=i.el,null!=a&&l.appendChild(a);return t.appendChild(l),e&&n(),t},addView:function(t,e){var n=this._views();if(null==e)throw"Invalid plugin. ";return null==e.ordering&&(e.ordering=t),n[t]=e},removeViews:function(){var t,e,n=this._views();for(e in n)t=n[e],t.undelegateEvents(),t.unbind(),null!=t.removeViews&&t.removeViews(),t.remove();return this.views={}},removeView:function(t){var e=this._views();return e[t].remove(),delete e[t]},getView:function(t){var e=this._views();return e[t]},remove:function(){return this.removeViews(),a.prototype.remove.apply(this)},_views:function(){return null==this.views&&(this.views={}),this.views}})},{"backbone-viewj":67,underscore:150}],61:[function(t,e,n){var r=t("backbone-events-standalone"),i=t("backbone-extend-standalone"),o=t("underscore"),a=t("./model"),s=[],l=s.slice,u=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,o.extend({silent:!0},e))},c={add:!0,remove:!0,merge:!0},f={add:!0,remove:!1};o.extend(u.prototype,r,{model:a,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(t,e){return this.set(t,o.extend({merge:!1},e,f))},remove:function(t,e){var n=!o.isArray(t);t=n?[t]:o.clone(t),e||(e={});for(var r=0,i=t.length;i>r;r++){var a=t[r]=this.get(t[r]);if(a){var s=this.modelId(a.attributes);null!=s&&delete this._byId[s],delete this._byId[a.cid];var l=this.indexOf(a);this.models.splice(l,1),this.length--,e.silent||(e.index=l,a.trigger("remove",a,this,e)),this._removeReference(a,e)}}return n?t[0]:t},set:function(t,e){e=o.defaults({},e,c),e.parse&&(t=this.parse(t,e));var n=!o.isArray(t);t=n?t?[t]:[]:t.slice();for(var r,i,a,s,l,u=e.at,f=this.comparator&&null==u&&e.sort!==!1,h=o.isString(this.comparator)?this.comparator:null,d=[],p=[],g={},v=e.add,m=e.merge,y=e.remove,b=!(f||!v||!y)&&[],x=0,_=t.length;_>x;x++){if(a=t[x],s=this.get(a))y&&(g[s.cid]=!0),m&&a!==s&&(a=this._isModel(a)?a.attributes:a,e.parse&&(a=s.parse(a,e)),s.set(a,e),f&&!l&&s.hasChanged(h)&&(l=!0)),t[x]=s;else if(v){if(i=t[x]=this._prepareModel(a,e),!i)continue;d.push(i),this._addReference(i,e)}i=s||i,i&&(r=this.modelId(i.attributes),!b||!i.isNew()&&g[r]||b.push(i),g[r]=!0)}if(y){for(var x=0,_=this.length;_>x;x++)g[(i=this.models[x]).cid]||p.push(i);p.length&&this.remove(p,e)}if(d.length||b&&b.length)if(f&&(l=!0),this.length+=d.length,null!=u)for(var x=0,_=d.length;_>x;x++)this.models.splice(u+x,0,d[x]);else{b&&(this.models.length=0);for(var w=b||d,x=0,_=w.length;_>x;x++)this.models.push(w[x])}if(l&&this.sort({silent:!0}),!e.silent){for(var S=null!=u?o.clone(e):e,x=0,_=d.length;_>x;x++)null!=u&&(S.index=u+x),(i=d[x]).trigger("add",i,this,S);(l||b&&b.length)&&this.trigger("sort",this,e)}return n?t[0]:t},reset:function(t,e){e||(e={});for(var n=0,r=this.models.length;r>n;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,o.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,o.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,o.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return l.apply(this.models,arguments)},get:function(t){if(null!=t){var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]}},at:function(t){return 0>t&&(t+=this.length),this.models[t]},where:function(t,e){return o.isEmpty(t)?e?void 0:[]:this[e?"find":"filter"](function(e){for(var n in t)if(t[n]!==e.get(n))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t||(t={}),o.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(o.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return o.invoke(this.models,"get",t)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=t.success,n=this;return t.success=function(r){var i=t.reset?"reset":"set";n[i](r,t),e&&e(n,r,t),n.trigger("sync",n,r,t)},wrapError(this,t),this.sync("read",this,t)},create:function(t,e){if(e=e?o.clone(e):{},!(t=this._prepareModel(t,e)))return!1;e.wait||this.add(t,e);var n=this,r=e.success;return e.success=function(t,i){e.wait&&n.add(t,e),r&&r(t,i,e)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;e=e?o.clone(e):{},e.collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_isModel:function(t){return t instanceof a},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){if("add"!==t&&"remove"!==t||n===this){if("destroy"===t&&this.remove(e,r),"change"===t){var i=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);i!==o&&(null!=i&&delete this._byId[i],null!=o&&(this._byId[o]=e))}this.trigger.apply(this,arguments)}}});var h=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"];o.each(h,function(t){o[t]&&(u.prototype[t]=function(){var e=l.call(arguments);return e.unshift(this.models),o[t].apply(o,e)})});var d=["groupBy","countBy","sortBy","indexBy"];o.each(d,function(t){o[t]&&(u.prototype[t]=function(e,n){var r=o.isFunction(e)?e:function(t){return t.get(e)};return o[t](this.models,r,n)})}),u.extend=i,e.exports=u},{"./model":63,"backbone-events-standalone":65,"backbone-extend-standalone":66,underscore:150}],62:[function(t,e,n){e.exports.Model=t("./model"),e.exports.Collection=t("./collection"),e.exports.Events=t("backbone-events-standalone"),e.exports.extend=t("backbone-extend-standalone")},{"./collection":61,"./model":63,"backbone-events-standalone":65,"backbone-extend-standalone":66}],63:[function(t,e,n){var r=t("backbone-events-standalone"),i=t("backbone-extend-standalone"),o=t("underscore"),a=function(t,e){var n=t||{};e||(e={}),this.cid=o.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{}),n=o.defaults({},n,o.result(this,"defaults")),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};o.extend(a.prototype,r,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return o.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return o.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,i,a,s,l,u,c,f;if(null==t)return this;if("object"==typeof t?(i=t,n=e):(i={})[t]=e,n||(n={}),!this._validate(i,n))return!1;a=n.unset,l=n.silent,s=[],u=this._changing,this._changing=!0,u||(this._previousAttributes=o.clone(this.attributes),this.changed={}),f=this.attributes,c=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]);for(r in i)e=i[r],o.isEqual(f[r],e)||s.push(r),o.isEqual(c[r],e)?delete this.changed[r]:this.changed[r]=e,a?delete f[r]:f[r]=e;if(!l){s.length&&(this._pending=n);for(var h=0,d=s.length;d>h;h++)this.trigger("change:"+s[h],this,f[s[h]],n)}if(u)return this;if(!l)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,o.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,o.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!o.isEmpty(this.changed):o.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&o.clone(this.changed);var e,n=!1,r=this._changing?this._previousAttributes:this.attributes;for(var i in t)o.isEqual(r[i],e=t[i])||((n||(n={}))[i]=e);return n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return o.clone(this._previousAttributes)},fetch:function(t){t=t?o.clone(t):{},void 0===t.parse&&(t.parse=!0);var e=this,n=t.success;return t.success=function(r){return!!e.set(e.parse(r,t),t)&&(n&&n(e,r,t),void e.trigger("sync",e,r,t))},wrapError(this,t),this.sync("read",this,t)},save:function(t,e,n){var r,i,a,s=this.attributes;if(null==t||"object"==typeof t?(r=t,n=e):(r={})[t]=e,n=o.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=o.extend({},s,r)),void 0===n.parse&&(n.parse=!0);var l=this,u=n.success;return n.success=function(t){l.attributes=s;var e=l.parse(t,n);return n.wait&&(e=o.extend(r||{},e)),!(o.isObject(e)&&!l.set(e,n))&&(u&&u(l,t,n),void l.trigger("sync",l,t,n))},wrapError(this,n),i=this.isNew()?"create":n.patch?"patch":"update","patch"!==i||n.attrs||(n.attrs=r),a=this.sync(i,this,n),r&&n.wait&&(this.attributes=s),a},destroy:function(t){t=t?o.clone(t):{};var e=this,n=t.success,r=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};if(t.success=function(i){(t.wait||e.isNew())&&r(),n&&n(e,i,t),e.isNew()||e.trigger("sync",e,i,t)},this.isNew())return t.success(),!1;wrapError(this,t);var i=this.sync("delete",this,t);return t.wait||r(),i},url:function(){var t=o.result(this,"urlRoot")||o.result(this.collection,"url")||urlError();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},o.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=o.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,o.extend(e,{validationError:n})),!1)}});var s=["keys","values","pairs","invert","pick","omit","chain","isEmpty"];o.each(s,function(t){o[t]&&(a.prototype[t]=function(){var e=slice.call(arguments);return e.unshift(this.attributes),o[t].apply(o,e)})}),a.extend=i,e.exports=a},{"backbone-events-standalone":65,"backbone-extend-standalone":66,underscore:150}],64:[function(t,e,n){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++l+"";return t?t+e:e},has:function(t,e){return a.call(t,e)},each:function(t,e,n){if(null!=t)if(o&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;i>r;r++)e.call(n,t[r],r,t);else for(var a in t)this.has(t,a)&&e.call(n,t[a],a,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var r,i=this,o=Array.prototype.forEach,a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l=0,u=t();r={on:function(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var r=this,i=u.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,a,s,l,c,h;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:u.keys(this._events),s=0,l=a.length;l>s;s++)if(t=a[s],o=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,h=o.length;h>c;c++)i=o[c],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&h(n,e),r&&h(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}};var c=/\s+/,f=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var o=n.split(c),a=0,s=o.length;s>a;a++)t[e].apply(t,[o[a]].concat(r));return!1}return!0},h=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};u.each(d,function(t,e){r[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=r),n.BackboneEvents=r):"function"==typeof define&&"object"==typeof define.amd?define(function(){return r}):i.BackboneEvents=r}(this)},{}],65:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":64}],66:[function(t,e,n){!function(t){"object"==typeof n?e.exports=t():"function"==typeof define&&define.amd?define(t):window.BackboneExtend=t()}(function(){"use strict";var t={has:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},extend:function(t){for(var e=1;e<arguments.length;++e){var n=arguments[e];if(n)for(var r in n)t[r]=n[r]}return t}},e=function(e,n){var r,i=this;r=e&&t.has(e,"constructor")?e.constructor:function(){return i.apply(this,arguments)},t.extend(r,i,n);var o=function(){this.constructor=r};return o.prototype=i.prototype,r.prototype=new o,e&&t.extend(r.prototype,e),r.__super__=i.prototype,r};return e})},{}],67:[function(t,e,n){var r=t("underscore"),i=t("backbone-events-standalone"),o=t("backbone-extend-standalone"),a=t("jbone"),s=function(t){this.cid=r.uniqueId("view"),t||(t={}),r.extend(this,r.pick(t,u)),this._ensureElement(),this.initialize.apply(this,arguments)},l=/^(\S+)\s*(.*)$/,u=["model","collection","el","id","attributes","className","tagName","events"];r.extend(s.prototype,i,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof a?t:a(t),this.el=this.$el[0]},delegateEvents:function(t){if(!t&&!(t=r.result(this,"events")))return this;this.undelegateEvents();for(var e in t){var n=t[e];if(r.isFunction(n)||(n=this[t[e]]),n){var i=e.match(l);this.delegate(i[1],i[2],r.bind(n,this))}}return this},delegate:function(t,e,n){this.$el.on(t+".delegateEvents"+this.cid,e,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){this.$el.off(t+".delegateEvents"+this.cid,e,n)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(r.result(this,"el"));else{var t=r.extend({},r.result(this,"attributes"));this.id&&(t.id=r.result(this,"id")),this.className&&(t["class"]=r.result(this,"className")),this.setElement(this._createElement(r.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),s.extend=o,e.exports=s},{"backbone-events-standalone":69,"backbone-extend-standalone":70,jbone:126,underscore:150}],68:[function(t,e,n){arguments[4][64][0].apply(n,arguments)},{dup:64}],69:[function(t,e,n){arguments[4][65][0].apply(n,arguments)},{"./backbone-events-standalone":68,dup:65}],70:[function(t,e,n){arguments[4][66][0].apply(n,arguments)},{dup:66}],71:[function(t,e,n){var r=t("backbone-events-standalone");r.onAll=function(t,e){return this.on("all",t,e),this},r.oldMixin=r.mixin,r.mixin=function(t){r.oldMixin(t);for(var e=["onAll"],n=0;n<e.length;n++){var i=e[n];t[i]=this[i]}return t},e.exports=r},{"backbone-events-standalone":73}],72:[function(t,e,n){arguments[4][64][0].apply(n,arguments)},{dup:64}],73:[function(t,e,n){arguments[4][65][0].apply(n,arguments)},{"./backbone-events-standalone":72,dup:65}],74:[function(t,e,n){var r,i,o;i=t("biojs-io-parser"),o=t("msa-seqtools"),e.exports=r={parse:function(t){var e,n,r,i,a,s,l,u,c,f,h,d,p;if(d=[],l="[object Array]"===Object.prototype.toString.call(t)?t:t.split("\n"),l[0].slice(0,6)===!1)throw new Error("Invalid CLUSTAL Header");for(r=0,e=1,h=0;r<l.length;)r++,s=l[r],null!=s&&0!==s.length&&0!==s.trim().length?o.contains(s,"*")||(1===e&&(h=0,e=0),f=/^(?:\s*)(\S+)(?:\s+)(\S+)(?:\s*)(\d*)(?:\s*|$)/g,u=f.exec(s),null!=u?(a=u[1],p=u[2],h>=d.length?(c=o.getMeta(a),a=c.name,n=new o.model(p,a,h),n.ids=c.ids||{},n.details=c.details||{},i=Object.keys(n.ids),i.length>0&&(n.id=n.ids[i[0]]),d.push(n)):d[h].seq+=p,h++):console.log("parse error",s)):e=1;return d}},i.mixin(r)},{"biojs-io-parser":75,"msa-seqtools":148}],75:[function(t,e,n){var r,i=t("request"),o=t("vow");e.exports=r=function(){function t(){}return t.read=function(e,n){var r;if(r=function(e){return function(r,i,o){return t._onRetrieval(r,o,n,e)}}(this),"undefined"==typeof n){var a=o.defer();return n=function(t,e){t?a.reject(t):a.resolve(e)},i(e,r),a.promise()}return i(e,r)},t._onRetrieval=function(t,e,n,r){var i;return"undefined"!=typeof t&&(i=r.parse(e)),n.call(r,t,i)},t.extend=function(e,n){return extend(t,e,n)},t.mixin=function(e){var n=["read"];return"object"!=typeof e&&(e=e.prototype),n.forEach(function(n){e[n]=t[n]},this),e},t}()},{request:77,vow:76}],76:[function(t,e,n){(function(t){
!function(n){var r,i=function(){var e=[],r=function(t){return 1===e.push(t)},i=function(){var t=e,n=0,r=e.length;for(e=[];r>n;)t[n++]()};if("function"==typeof setImmediate)return function(t){r(t)&&setImmediate(i)};if("object"==typeof t&&t.nextTick)return function(e){r(e)&&t.nextTick(i)};var o=n.MutationObserver||n.WebKitMutationObserver;if(o){var a=1,s=document.createTextNode("");return new o(i).observe(s,{characterData:!0}),function(t){r(t)&&(s.data=a*=-1)}}if(n.postMessage){var l=!0;if(n.attachEvent){var u=function(){l=!1};n.attachEvent("onmessage",u),n.postMessage("__checkAsync","*"),n.detachEvent("onmessage",u)}if(l){var c="__promise"+ +new Date,f=function(t){t.data===c&&(t.stopPropagation&&t.stopPropagation(),i())};return n.addEventListener?n.addEventListener("message",f,!0):n.attachEvent("onmessage",f),function(t){r(t)&&n.postMessage(c,"*")}}}var h=n.document;if("onreadystatechange"in h.createElement("script")){var d=function(){var t=h.createElement("script");t.onreadystatechange=function(){t.parentNode.removeChild(t),t=t.onreadystatechange=null,i()},(h.documentElement||h.body).appendChild(t)};return function(t){r(t)&&d()}}return function(t){r(t)&&setTimeout(i,0)}}(),o=function(t){i(function(){throw t})},a=function(t){return"function"==typeof t},s=function(t){return null!==t&&"object"==typeof t},l=Object.prototype.toString,u=Array.isArray||function(t){return"[object Array]"===l.call(t)},c=function(t){for(var e=[],n=0,r=t.length;r>n;)e.push(n++);return e},f=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},h=function(t){var e=function(e){this.name=t,this.message=e};return e.prototype=new Error,e},d=function(t,e){return function(n){t.call(this,n,e)}},p=function(){this._promise=new v};p.prototype={promise:function(){return this._promise},resolve:function(t){this._promise.isResolved()||this._promise._resolve(t)},reject:function(t){this._promise.isResolved()||(b.isPromise(t)?(t=t.then(function(t){var e=b.defer();return e.reject(t),e.promise()}),this._promise._resolve(t)):this._promise._reject(t))},notify:function(t){this._promise.isResolved()||this._promise._notify(t)}};var g={PENDING:0,RESOLVED:1,FULFILLED:2,REJECTED:3},v=function(t){if(this._value=r,this._status=g.PENDING,this._fulfilledCallbacks=[],this._rejectedCallbacks=[],this._progressCallbacks=[],t){var e=this,n=t.length;t(function(t){e.isResolved()||e._resolve(t)},n>1?function(t){e.isResolved()||e._reject(t)}:r,n>2?function(t){e.isResolved()||e._notify(t)}:r)}};v.prototype={valueOf:function(){return this._value},isResolved:function(){return this._status!==g.PENDING},isFulfilled:function(){return this._status===g.FULFILLED},isRejected:function(){return this._status===g.REJECTED},then:function(t,e,n,r){var i=new p;return this._addCallbacks(i,t,e,n,r),i.promise()},"catch":function(t,e){return this.then(r,t,e)},fail:function(t,e){return this.then(r,t,e)},always:function(t,e){var n=this,r=function(){return t.call(this,n)};return this.then(r,r,e)},progress:function(t,e){return this.then(r,r,t,e)},spread:function(t,e,n){return this.then(function(e){return t.apply(this,e)},e,n)},done:function(t,e,n,r){this.then(t,e,n,r).fail(o)},delay:function(t){var e,n=this.then(function(n){var r=new p;return e=setTimeout(function(){r.resolve(n)},t),r.promise()});return n.always(function(){clearTimeout(e)}),n},timeout:function(t){var e=new p,n=setTimeout(function(){e.reject(new b.TimedOutError("timed out"))},t);return this.then(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise().always(function(){clearTimeout(n)}),e.promise()},_vow:!0,_resolve:function(t){if(!(this._status>g.RESOLVED)){if(t===this)return void this._reject(TypeError("Can't resolve promise with itself"));if(this._status=g.RESOLVED,t&&t._vow)return void(t.isFulfilled()?this._fulfill(t.valueOf()):t.isRejected()?this._reject(t.valueOf()):t.then(this._fulfill,this._reject,this._notify,this));if(s(t)||a(t)){var e;try{e=t.then}catch(n){return void this._reject(n)}if(a(e)){var r=this,i=!1;try{e.call(t,function(t){i||(i=!0,r._resolve(t))},function(t){i||(i=!0,r._reject(t))},function(t){r._notify(t)})}catch(n){i||this._reject(n)}return}}this._fulfill(t)}},_fulfill:function(t){this._status>g.RESOLVED||(this._status=g.FULFILLED,this._value=t,this._callCallbacks(this._fulfilledCallbacks,t),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=r)},_reject:function(t){this._status>g.RESOLVED||(this._status=g.REJECTED,this._value=t,this._callCallbacks(this._rejectedCallbacks,t),this._fulfilledCallbacks=this._rejectedCallbacks=this._progressCallbacks=r)},_notify:function(t){this._callCallbacks(this._progressCallbacks,t)},_addCallbacks:function(t,e,n,i,o){n&&!a(n)?(o=n,n=r):i&&!a(i)&&(o=i,i=r);var s;this.isRejected()||(s={defer:t,fn:a(e)?e:r,ctx:o},this.isFulfilled()?this._callCallbacks([s],this._value):this._fulfilledCallbacks.push(s)),this.isFulfilled()||(s={defer:t,fn:n,ctx:o},this.isRejected()?this._callCallbacks([s],this._value):this._rejectedCallbacks.push(s)),this._status<=g.RESOLVED&&this._progressCallbacks.push({defer:t,fn:i,ctx:o})},_callCallbacks:function(t,e){var n=t.length;if(n){var r=this.isResolved(),o=this.isFulfilled();i(function(){for(var i,a,s,l=0;n>l;)if(i=t[l++],a=i.defer,s=i.fn){var u,c=i.ctx;try{u=c?s.call(c,e):s(e)}catch(f){a.reject(f);continue}r?a.resolve(u):a.notify(u)}else r?o?a.resolve(e):a.reject(e):a.notify(e)})}}};var m={cast:function(t){return b.cast(t)},all:function(t){return b.all(t)},race:function(t){return b.anyResolved(t)},resolve:function(t){return b.resolve(t)},reject:function(t){return b.reject(t)}};for(var y in m)m.hasOwnProperty(y)&&(v[y]=m[y]);var b={Deferred:p,Promise:v,defer:function(){return new p},when:function(t,e,n,r,i){return b.cast(t).then(e,n,r,i)},fail:function(t,e,n){return b.when(t,r,e,n)},always:function(t,e,n){return b.when(t).always(e,n)},progress:function(t,e,n){return b.when(t).progress(e,n)},spread:function(t,e,n,r){return b.when(t).spread(e,n,r)},done:function(t,e,n,r,i){b.when(t).done(e,n,r,i)},isPromise:function(t){return s(t)&&a(t.then)},cast:function(t){return t&&t._vow?t:b.resolve(t)},valueOf:function(t){return t&&a(t.valueOf)?t.valueOf():t},isFulfilled:function(t){return!t||!a(t.isFulfilled)||t.isFulfilled()},isRejected:function(t){return!(!t||!a(t.isRejected))&&t.isRejected()},isResolved:function(t){return!t||!a(t.isResolved)||t.isResolved()},resolve:function(t){var e=b.defer();return e.resolve(t),e.promise()},fulfill:function(t){var e=b.defer(),n=e.promise();return e.resolve(t),n.isFulfilled()?n:n.then(null,function(t){return t})},reject:function(t){var e=b.defer();return e.reject(t),e.promise()},invoke:function(t,e){var r,i=Math.max(arguments.length-1,0);if(i){r=Array(i);for(var o=0;i>o;)r[o++]=arguments[o]}try{return b.resolve(r?t.apply(n,r):t.call(n))}catch(a){return b.reject(a)}},all:function(t){var e=new p,n=u(t),r=n?c(t):f(t),i=r.length,o=n?[]:{};if(!i)return e.resolve(o),e.promise();var a=i;return b._forEach(t,function(t,n){o[r[n]]=t,--a||e.resolve(o)},e.reject,e.notify,e,r),e.promise()},allResolved:function(t){var e=new p,n=u(t),r=n?c(t):f(t),i=r.length,o=n?[]:{};if(!i)return e.resolve(o),e.promise();var a=function(){--i||e.resolve(t)};return b._forEach(t,a,a,e.notify,e,r),e.promise()},allPatiently:function(t){return b.allResolved(t).then(function(){var e,n,r,i,o=u(t),a=o?c(t):f(t),s=a.length,l=0;if(!s)return o?[]:{};for(;s>l;)r=a[l++],i=t[r],b.isRejected(i)?(e||(e=o?[]:{}),o?e.push(i.valueOf()):e[r]=i.valueOf()):e||((n||(n=o?[]:{}))[r]=b.valueOf(i));if(e)throw e;return n})},any:function(t){var e=new p,n=t.length;if(!n)return e.reject(Error()),e.promise();var r,i=0;return b._forEach(t,e.resolve,function(t){i||(r=t),++i===n&&e.reject(r)},e.notify,e),e.promise()},anyResolved:function(t){var e=new p,n=t.length;return n?(b._forEach(t,e.resolve,e.reject,e.notify,e),e.promise()):(e.reject(Error()),e.promise())},delay:function(t,e){return b.resolve(t).delay(e)},timeout:function(t,e){return b.resolve(t).timeout(e)},_forEach:function(t,e,n,r,i,o){for(var a=o?o.length:t.length,s=0;a>s;)b.when(t[o?o[s]:s],d(e,s),n,r,i),++s},TimedOutError:h("TimedOut")},x=!0;"object"==typeof e&&"object"==typeof e.exports&&(e.exports=b,x=!1),"object"==typeof modules&&a(modules.define)&&(modules.define("vow",function(t){t(b)}),x=!1),"function"==typeof define&&(define(function(t,e,n){n.exports=b}),x=!1),x&&(n.vow=b)}(this)}).call(this,t("_process"))},{_process:1}],77:[function(t,e,n){"use strict";function r(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t,e){function n(){4===f.readyState&&u()}function o(){var t=void 0;if(f.response?t=f.response:"text"!==f.responseType&&f.responseType||(t=f.responseText||f.responseXML),x)try{t=JSON.parse(t)}catch(e){}return t}function a(t){clearTimeout(p),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,e(t,c)}function u(){if(!d){var n;clearTimeout(p),n=t.useXDR&&void 0===f.status?200:1223===f.status?204:f.status;var r=c,i=null;0!==n?(r={body:o(),statusCode:n,method:v,headers:{},url:g,rawRequest:f},f.getAllResponseHeaders&&(r.headers=l(f.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),e(i,r,r.body)}}var c={body:void 0,headers:{},statusCode:0,method:v,url:g,rawRequest:f};if("string"==typeof t&&(t={uri:t}),t=t||{},"undefined"==typeof e)throw new Error("callback argument missing");e=s(e);var f=t.xhr||null;f||(f=t.cors||t.useXDR?new i.XDomainRequest:new i.XMLHttpRequest);var h,d,p,g=f.url=t.uri||t.url,v=f.method=t.method||"GET",m=t.body||t.data,y=f.headers=t.headers||{},b=!!t.sync,x=!1;if("json"in t&&(x=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),m=JSON.stringify(t.json))),f.onreadystatechange=n,f.onload=u,f.onerror=a,f.onprogress=function(){},f.ontimeout=a,f.open(v,g,!b,t.username,t.password),b||(f.withCredentials=!!t.withCredentials),!b&&t.timeout>0&&(p=setTimeout(function(){d=!0,f.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",a(t)},t.timeout)),f.setRequestHeader)for(h in y)y.hasOwnProperty(h)&&f.setRequestHeader(h,y[h]);else if(t.headers&&!r(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(f.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(f),f.send(m),f}function o(){}var a=t("global/window"),s=t("once"),l=t("parse-headers");e.exports=i,i.XMLHttpRequest=a.XMLHttpRequest||o,i.XDomainRequest="withCredentials"in new i.XMLHttpRequest?i.XMLHttpRequest:a.XDomainRequest},{"global/window":78,once:79,"parse-headers":83}],78:[function(t,e,n){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],79:[function(t,e,n){function r(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}e.exports=r,r.proto=r(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return r(this)},configurable:!0})})},{}],80:[function(t,e,n){function r(t,e,n){if(!s(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===l.call(t)?i(t,e,n):"string"==typeof t?o(t,e,n):a(t,e,n)}function i(t,e,n){for(var r=0,i=t.length;i>r;r++)u.call(t,r)&&e.call(n,t[r],r,t)}function o(t,e,n){for(var r=0,i=t.length;i>r;r++)e.call(n,t.charAt(r),r,t)}function a(t,e,n){for(var r in t)u.call(t,r)&&e.call(n,t[r],r,t)}var s=t("is-function");e.exports=r;var l=Object.prototype.toString,u=Object.prototype.hasOwnProperty},{"is-function":81}],81:[function(t,e,n){function r(t){var e=i.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=r;var i=Object.prototype.toString},{}],82:[function(t,e,n){function r(t){return t.replace(/^\s*|\s*$/g,"")}n=e.exports=r,n.left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],83:[function(t,e,n){var r=t("trim"),i=t("for-each"),o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return i(r(t).split("\n"),function(t){var n=t.indexOf(":"),i=r(t.slice(0,n)).toLowerCase(),a=r(t.slice(n+1));"undefined"==typeof e[i]?e[i]=a:o(e[i])?e[i].push(a):e[i]=[e[i],a]}),e}},{"for-each":80,trim:82}],84:[function(t,e,n){var r,i,o;i=t("biojs-io-parser"),o=t("msa-seqtools"),e.exports=r={parse:function(t){var e,n,r,i,a,s,l,u;if(s=[],!t||0===t.length)return[];for("[object Array]"!==Object.prototype.toString.call(t)&&(t=t.split("\n")),l=0,u=t.length;u>l;l++)i=t[l],">"===i[0]||";"===i[0]?(r=i.slice(1),a=o.getMeta(r),r=a.name,e=new o.model("",r,s.length),e.ids=a.ids||{},n=Object.keys(e.ids),n.length>0&&(e.id=e.ids[n[0]]),e.details=a.details||{},s.push(e)):e.seq+=i;return s},write:function(t,e){var n,r,i,a;for(r="",i=0,a=t.length;a>i;i++)n=t[i],null!=e&&(n=e(n)),r+=">"+n.name+"\n",r+=o.splitNChars(n.seq,80).join("\n"),r+="\n";return r}},i.mixin(r)},{"biojs-io-parser":85,"msa-seqtools":148}],85:[function(t,e,n){arguments[4][75][0].apply(n,arguments)},{dup:75,request:87,vow:86}],86:[function(t,e,n){arguments[4][76][0].apply(n,arguments)},{_process:1,dup:76}],87:[function(t,e,n){arguments[4][77][0].apply(n,arguments)},{dup:77,"global/window":88,once:89,"parse-headers":93}],88:[function(t,e,n){arguments[4][78][0].apply(n,arguments)},{dup:78}],89:[function(t,e,n){arguments[4][79][0].apply(n,arguments)},{dup:79}],90:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80,"is-function":91}],91:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],92:[function(t,e,n){arguments[4][82][0].apply(n,arguments)},{dup:82}],93:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{dup:83,"for-each":90,trim:92}],94:[function(t,e,n){var r=t("biojs-io-parser"),i=function(){};r.mixin(i),e.exports=i;var o=t("./utils"),a=t("./jalview");i.parseLines=function(t){var e=t.split("\n"),n={},r=[];n.type=i._guessType(e);var o=0;if("jalview"===n.type){var s=a.readHeader(e);o=s.offset,n.colors=s.colors,r=s.features}for(var l=o;l<e.length;l++){var u=e[l];0!==u.length&&"#"!==u[0]&&(u=i.parseLine(u),void 0!==u&&r.push(u))}return{features:r,config:n}},i._guessType=function(t){return"##gff-version 3"===t[0].substring(0,15)?"gff3":t[0].indexOf("#")<0&&2===t[0].split("\t").length?"jalview":"gff3"},i.parseSeqs=i.parse=function(t){var e=i.parseLines(t),n={};return e.features.forEach(function(t){var e=t.seqname;void 0===n[e]&&(n[e]=[]),delete t.seqname,n[e].push(t)}),delete e.features,e.seqs=n,e},i.parseLine=function(t){var e={},n=t.split(/\s+/);if(1!==n.length){e.seqname=n[0],e.source=n[1],e.feature=n[2],e.start=parseInt(n[3]),e.end=parseInt(n[4]),e.score=n[5],e.strand=n[6],e.frame=n[7];var r=n.slice(8).join(" ");return Object.keys(e).forEach(function(t){"."===e[t]&&(e[t]=void 0)}),e.score&&(e.score=parseFloat(e.score)),e.frame&&(e.frame=parseInt(e.frame)),e.attributes=o.extractKeys(r),e}},i.exportLine=function(t){var e=Object.keys(t.attributes).map(function(e){return e+"="+t.attributes[e]}).join(";"),n=[t.seqname,t.source,t.feature,t.start,t.end,t.score,t.strand,t.frame,e];return n=n.map(function(t){return void 0===t?".":t}),n.join("\t")},i.exportLines=function(t){return"##gff-version 3\n"+t.map(i.exportLine).join("\n")},i.exportSeqs=i["export"]=function(t){var e=[],n=function(t){t.seqname=r,e.push(t)};for(var r in t)t[r].forEach(n);return i.exportLines(e)}},{"./jalview":95,"./utils":96,"biojs-io-parser":97}],95:[function(t,e,n){var r={};e.exports=r;var i=t("./utils");r.readHeader=function(t){for(var e,n={},i=0,o=[];i<t.length;i++){var a=t[i];if(a.indexOf("#")>=0)break;var s=a.split(/\t/),l=s[0].trim();if("GFF"===l)break;if(2===s.length)if("startgroup"===l)e=s[1].trim();else{if("endgroup"===l){e="";continue}n[s[0]]=r.parseColor(s[1])}else if(s.length>=5){var u=r.parseLine(s);e&&(u.attributes.Parent=e),o.push(u)}}return{offset:i,colors:n,features:o}},r.parseColor=function(t){return t.indexOf(",")>=0?i.rgbToHex(t.split(",").map(function(t){return parseInt(t)})):6===t.length&&parseInt(t.charAt(0),16)<=16&&"bisque"!==t?"#"+t:t},r.parseLine=function(t){var e={attributes:{}};return e.attributes.Name=t[0].trim(),e.seqname=t[1].trim(),e.start=parseInt(t[3]),e.end=parseInt(t[4]),e.feature=t[5].trim(),"ID_NOT_SPECIFIED"===e.seqname&&(e.seqname=t[2].trim()),e}},{"./utils":96}],96:[function(t,e,n){function r(t){var e=t.toString(16);return 1===e.length?"0"+e:e}var i={};e.exports=i,i.extractKeys=function(t){var e={},n=t.split(";");return n.forEach(function(t){var n,r,i;t.indexOf("=")>0?(n=t.split("="),r=n[0],i=n[1],e[r]=i):t.indexOf(" ")>0&&(n=t.split(" "),r=n[0],i=n[1].replace(/"/g,""),e[r]=i)}),e},i.rgbToHex=function(t,e,n){return 3===t.length?i.rgbToHex(t[0],t[1],t[2]):"#"+r(t)+r(e)+r(n)}},{}],97:[function(t,e,n){arguments[4][75][0].apply(n,arguments)},{dup:75,request:99,vow:98}],98:[function(t,e,n){arguments[4][76][0].apply(n,arguments)},{_process:1,dup:76}],99:[function(t,e,n){arguments[4][77][0].apply(n,arguments)},{dup:77,"global/window":100,once:101,"parse-headers":105}],100:[function(t,e,n){arguments[4][78][0].apply(n,arguments)},{dup:78}],101:[function(t,e,n){arguments[4][79][0].apply(n,arguments)},{dup:79}],102:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80,"is-function":103}],103:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],104:[function(t,e,n){arguments[4][82][0].apply(n,arguments)},{dup:82}],105:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{dup:83,"for-each":102,trim:104}],106:[function(t,e,n){e.exports.seq=t("./seq")},{"./seq":107}],107:[function(t,e,n){e.exports=function(t,e,n){this.seq=t,this.name=e,this.id=n,this.meta={}}},{}],108:[function(t,e,n){e.exports=t("./src/index.js")},{"./src/index.js":114}],109:[function(t,e,n){e.exports={render_x_axis_label:function(){var t="Model Position";this.display_ali_map&&(t="Alignment Column"),this.called_on.find(".logo_xaxis").remove(),this.called_on.prepend('<div class="logo_xaxis" class="centered" style="margin-left:40px"><p class="xaxis_text" style="width:10em;margin:1em auto">'+t+"</p></div>")},render_y_axis_label:function(){this.dom_element.parent().before('<canvas class="logo_yaxis" height="'+this.options.height+'" width="55"></canvas>');var t=this.called_on.find(".logo_yaxis"),e=(Math.abs(this.data.max_height),isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),null),n="Information Content (bits)";e=t[0].getContext("2d"),e.beginPath(),e.moveTo(55,1),e.lineTo(40,1),e.moveTo(55,this.info_content_height),e.lineTo(40,this.info_content_height),e.moveTo(55,this.info_content_height/2),e.lineTo(40,this.info_content_height/2),e.lineWidth=1,e.strokeStyle="#666666",e.stroke(),e.fillStyle="#666666",e.textAlign="right",e.font="bold 10px Arial",e.textBaseline="top",e.fillText(parseFloat(this.data.max_height).toFixed(1),38,0),e.textBaseline="middle",e.fillText(parseFloat(this.data.max_height/2).toFixed(1),38,this.info_content_height/2),e.fillText("0",38,this.info_content_height),"score"===this.data.height_calc&&(n="Score (bits)"),e.save(),e.translate(5,this.height/2-20),e.rotate(-Math.PI/2),e.textAlign="center",e.font="normal 12px Arial",e.fillText(n,1,0),e.restore(),e.fillText("occupancy",55,this.info_content_height+7),this.show_inserts&&(e.fillText("ins. prob.",50,280),e.fillText("ins. len.",46,296))}}},{}],110:[function(t,e,n){var r=null;e.exports=function(){if(!r){var t=document.createElement("canvas");r=!(!t.getContext||!t.getContext("2d"))}return r}},{}],111:[function(t,e,n){e.exports={A:"#FF9966",C:"#009999",D:"#FF0000",E:"#CC0033",F:"#00FF00",G:"#f2f20c",H:"#660033",I:"#CC9933",K:"#663300",L:"#FF9933",M:"#CC99CC",N:"#336666",P:"#0099FF",Q:"#6666CC",R:"#990000",S:"#0000FF",T:"#00FFFF",V:"#FFCC33",W:"#66CC66",Y:"#006600"}},{}],112:[function(t,e,n){e.exports={A:"#cbf751",C:"#5ec0cc",G:"#ffdf59",T:"#b51f16",U:"#b51f16"}},{}],113:[function(t,e,n){var r=t("jbone");e.exports=function(t,e,n){t.find(".logo_settings_switch, .logo_settings .close").on("click",function(t){t.preventDefault(),r(".logo_settings").toggle()}),t.find(".logo_reset").on("click",function(t){t.preventDefault(),e.changeZoom({target:e.default_zoom})}),t.find(".logo_change").on("click",function(t){t.preventDefault()}),t.find(".logo_zoomin").on("click",function(t){t.preventDefault(),e.changeZoom({distance:.1,direction:"+"})}),t.find(".logo_zoomout").on("click",function(t){t.preventDefault(),e.changeZoom({distance:.1,direction:"-"})}),t.find(".logo_scale").on("change",function(t){e.toggleScale(this.value)}),t.find(".logo_color").on("change",function(t){e.toggleColorscheme(this.value)}),t.find(".logo_ali_map").on("change",function(t){e.toggleAliMap(this.value)}),t.find(".logo_position").on("change",function(){this.value.match(/^\d+$/m)&&e.scrollToColumn(this.value,1)}),n.on("dblclick",function(n){console.log("dblclick",e),offset=e.logo_graphic.offset(),x=parseInt(n.pageX-offset.left,10),window_position=n.pageX-t.parent().offset().left,col=e.columnFromCoordinates(x),console.log("col",col),current=e.zoom,current<1?e.changeZoom({target:1,offset:window_position,column:col}):e.changeZoom({target:.3,offset:window_position,column:col})}),r(document).on(t.attr("id")+".scrolledTo",function(t,n,r,i){e.render({target:n})}),r(document).on("keydown",function(t){t.ctrlKey||(61!==t.which&&107!==t.which||(zoom+=.1,e.changeZoom({distance:.1,direction:"+"})),109!==t.which&&0!==t.which||(zoom-=.1,e.changeZoom({distance:.1,direction:"-"})))})}},{jbone:126}],114:[function(t,e,n){_=t("underscore");var r=t("./canvasSupport.js"),i=t("./render/render.js"),o=t("./model/letter.js"),a=t("backbone-viewj"),s=t("./axis"),l=t("./eventListener.js"),u=t("./info/settings.js"),c=t("jbone");e.exports=a.extend({options:{xaxis:!0,yaxis:!0,height:300,column_width:34,debug:!0,scale_height_enabled:!0,scaled_max:!0,zoom_buttons:!0,colorscheme:"default",data:void 0,start:1,end:void 0,zoom:.4,colors:void 0,divider:!1,show_probs:!1,divider_step:5,show_divider:!1,border:!1,settings:!1,scroller:!0,positionMarker:!0},loadDefault:function(e){this.data=e.data,this.display_ali_map=0,this.alphabet=e.data.alphabet||"dna",this.start=e.start,this.zoom=parseFloat(e.zoom)||.4,this.default_zoom=this.zoom,this.column_width=e.column_width,this.height=e.height,this.canvas_width=5e3,this.scale_height_enabled=e.scale_height_enabled,this.scrollme=null,this.previous_target=0,this.rendered=[],this.previous_zoom=0,void 0==this.data.max_height&&(this.data.max_height=this.calcMaxHeight(this.data.heightArr)),this.data.insert_probs&&this.data.delete_probs||(this.options.show_probs=!1),e.scaled_max?this.data.max_height=e.data.max_height_obs||this.data.max_height||2:this.data.max_height=e.data.max_height_theory||this.data.max_height||2,e.colors?this.changeColors(e.colors):"aa"===this.alphabet?(this.aa_colors=t("./colors/aa.js"),this.changeColors(this.aa_colors)):(this.dna_colors=t("./colors/dna.js"),this.changeColors(this.dna_colors))},initialize:function(t){if(!r())return void(this.el.textContent="Your browser doesn't support canvas.");void 0==t.data&&(this.el.textContent="No data added."),_.extend(this.options,t);var e=this.options;if(this.loadDefault(e),this.options.show_probs?this.data.processing&&/^observed|weighted/.test(this.data.processing)?(this.show_inserts=0,this.info_content_height=this.height-14):(this.show_inserts=1,this.info_content_height=this.height-44):this.info_content_height=this.height,this.$el=c(this.el),this.initDivs(),this.options.settings){var n=u(this,e);this.$el.append(n)}l(this.$el,this,this.logo_graphic)},initDivs:function(){var t=f("div");t.className="logo_graphic",this.logo_graphic=c(t);var e=f("div");if(e.className="logo_container",e.style.height=this.height,this.container=c(e),this.container.append(t),this.$el.append(e),this.options.divider){var n=f("div");n.className="logo_divider",this.$el.append(n)}this.dom_element=c(t),this.called_on=this.$el,this.options.xaxis&&s.render_x_axis_label.call(this),this.options.yaxis?s.render_y_axis_label.call(this):this.container[0].style.marginLeft="0px"},render:function(){return i.call(this),this},changeColors:function(t){this.colors=t;var e=void 0!=t&&void 0!=t.type;e&&(this.colorscheme="dynamic"),this.buildAlphabet()},buildAlphabet:function(){this.letters={};var t=this.colors;if("dynamic"==this.colorscheme){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");t={},e.forEach(function(e){t[e]=""})}for(var n in t)if(t.hasOwnProperty(n)){var r={color:t[n]};this.letters[n]=new o(n,r)}},toggleColorscheme:function(t){var e=this.currentColumn();t?"default"===t?this.colorscheme="default":this.colorscheme="consensus":"default"===this.colorscheme?this.colorscheme="consensus":this.colorscheme="default",this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},toggleScale:function(t){var e=this.currentColumn();t?"obs"===t?this.data.max_height=this.data.max_height_obs:this.data.max_height=this.data.max_height_theory:this.data.max_height===this.data.max_height_obs?this.data.max_height=this.data.max_height_theory:this.data.max_height=this.data.max_height_obs,this.rendered=[],this.logoYAxis&&this.logoYAxis.remove(),s.render_y_axis_label.call(this),this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},toggleAliMap:function(t){var e=this.currentColumn();t?"model"===t?this.display_ali_map=0:this.display_ali_map=1:1===this.display_ali_map?this.display_ali_map=0:this.display_ali_map=1,s.render_x_axis_label(this),this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},currentColumn:function(){var t=this.scrollme.scroller.getValues().left,e=this.column_width*this.zoom,n=t/e,r=this.container.width()/e/2,i=Math.ceil(n+r);return i},changeZoom:function(t){var e=.3,n=null;if(t.target?e=t.target:t.distance&&(e=(parseFloat(this.zoom)-parseFloat(t.distance)).toFixed(1),"+"===t.direction&&(e=(parseFloat(this.zoom)+parseFloat(t.distance)).toFixed(1))),e>1?e=1:.1>e&&(e=.1),n=this.logo_graphic.width()*e/this.zoom,n>this.container.width())if(t.column){this.zoom=e,this.render({zoom:this.zoom}),this.scrollme.reflow();var r=this.coordinatesFromColumn(t.column);this.scrollme.scroller.scrollTo(r-t.offset)}else{var i=this.currentColumn();this.zoom=e,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollToColumn(i)}return this.zoom},columnFromCoordinates:function(t){var e=Math.ceil(t/(this.column_width*this.zoom));return e},coordinatesFromColumn:function(t){var e=t-1,n=e*(this.column_width*this.zoom)+this.column_width*this.zoom/2;return n},scrollToColumn:function(t,e){var n=this.logo_container.width()/2,r=this.coordinatesFromColumn(t);this.scrollme.scroller.scrollTo(r-n,0,e)},calcMaxHeight:function(t){return t.reduce(function(t,e){var n=0;for(var r in e)n+=e[r];return n>t?n:t},0)}});var f=function(t){return document.createElement(t)}},{"./axis":109,"./canvasSupport.js":110,"./colors/aa.js":111,"./colors/dna.js":112,"./eventListener.js":113,"./info/settings.js":115,"./model/letter.js":116,"./render/render.js":120,"backbone-viewj":67,jbone:126,underscore:150}],115:[function(t,e,n){var r=t("jbone");e.exports=function(t,e){var n=r('<form class="logo_form"><fieldset><label for="position">Column number</label><input type="text" name="position" class="logo_position"></input><button class="button logo_change">Go</button></fieldset></form>'),i=r('<div class="logo_settings"></div>');if(i.append('<span class="close">x</span>'),t.scale_height_enabled&&t.data.max_height_obs<t.data.max_height_theory){var o="",a="",s="",l="";t.data.max_height_obs===t.data.max_height?o="checked":a="checked"}var u='<fieldset><legend>Scale</legend><label><input type="radio" name="scale" class="logo_scale" value="obs" '+o+"/>Maximum Observed "+l+'</label></br><label><input type="radio" name="scale" class="logo_scale" value="theory" '+a+"/>Maximum Theoretical "+s+"</label></fieldset>";if(i.append(u),"score"!==t.data.height_calc&&"aa"===t.data.alphabet&&t.data.probs_arr){var c=null,f=null,h="",d="";"default"===t.colorscheme?c="checked":f="checked",e.help&&(h='<a class="help" href="/help#colors_default" title="Each letter receives its own color."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',d='<a class="help" href="/help#colors_consensus" title="Letters are colored as in Clustalx and Jalview, with colors depending on composition of the column."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var p='<fieldset><legend>Color Scheme</legend><label><input type="radio" name="color" class="logo_color" value="default" '+c+"/>Default "+h+'</label></br><label><input type="radio" name="color" class="logo_color" value="consensus" '+f+"/>Consensus Colors "+d+"</label></fieldset>";i.append(p)}if(t.data.ali_map){var g=null,v=null,m="",y="";0===t.display_ali_map?g="checked":v="checked",e.help&&(m='<a class="help" href="/help#coords_model" title="The coordinates along the top of the plot show the model position."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',y='<a class="help" href="/help#coords_ali" title="The coordinates along the top of the plot show the column in the alignment associated with the model"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>');var b='<fieldset><legend>Coordinates</legend><label><input type="radio" name="coords" class="logo_ali_map" value="model" '+g+"/>Model "+m+'</label></br><label><input type="radio" name="coords" class="logo_ali_map" value="alignment" '+v+"/>Alignment "+y+"</label></fieldset>";i.append(b)}var x=r('<div class="logo_controls"></div>');return t.zoom_enabled&&x.append('<button class="logo_zoomout button">-</button><button class="logo_zoomin button">+</button>'),i.children().length>0&&(x.append('<button class="logo_settings_switch button">Settings</button>'),x.append(i)),n.append(x),n}},{jbone:126}],116:[function(t,e,n){e.exports=function(t,e){e=e||{},this.value=t,this.width=parseInt(e.width,10)||100,"W"===this.value&&(this.width+=30*this.width/100),this.height=parseInt(e.height,10)||100,this.color=e.color||"#000000",this.fontSize=e.fontSize||138,this.scaled=function(){},this.draw=function(t,e,n,r,i,o){var a=e/this.height,s=n/this.width,l=t.font;t.transform(s,0,0,a,r,i),t.fillStyle=o||this.color,t.textAlign="center",t.font="bold "+this.fontSize+"px Arial",t.fillText(this.value,0,0),t.setTransform(1,0,0,1,0,0),t.fillStyle="#000000",t.font=l}}},{}],117:[function(t,e,n){e.exports=function(t,e,n){t.beginPath(),t.moveTo(0,e),t.lineTo(n,e),t.lineWidth=1,t.strokeStyle="#999999",t.stroke()}},{}],118:[function(t,e,n){e.exports=function(t,e,n,r,i,o,a){t.font=o+"px Arial",t.textAlign=a?"right":"center",t.fillStyle="#666666",t.fillText(i,e+r/2,n)}},{}],119:[function(t,e,n){e.exports=function(t,e,n,r,i){i=i||"#999999",t.beginPath(),t.moveTo(e,n),t.lineTo(e,n+r),t.lineWidth=1,t.strokeStyle=i,t.stroke()}},{}],120:[function(t,e,n){function r(t,e,n,r,i){var o=a(t).find("#canv_"+r);return o.length||(a(t).append('<canvas class="canvas_logo" id="canv_'+r+'"  height="'+e+'" width="'+n+'" style="left:'+i*r+'px"></canvas>'),o=a(t).find("#canv_"+r)),a(o).attr("width",n).attr("height",e),o[0]}var i=t("./render_with_text.js"),o=t("./render_with_rects.js"),a=t("jbone");e.exports=function(t){if(this.data){t=t||{};var e=t.zoom||this.zoom,n=t.target||1,a=(t.scaled||null,this.dom_element.parent().attr("width")),s=1,l=null,u=null,c=0;if(this.previous_target=n,t.start&&(this.start=t.start),t.end&&(this.end=t.end),.1>=e?e=.1:e>=1&&(e=1),this.zoom=e,l=this.end||this.data.heightArr.length,u=this.start||1,l=l>this.data.heightArr.length?this.data.heightArr.length:l,l=u>l?u:l,u=u>l?l:u,u=u>1?u:1,this.y=this.height-20,this.max_width=this.column_width*(l-u+1),
a>this.max_width&&(e=1,this.zoom_enabled=!1),this.zoom=e,this.zoomed_column=this.column_width*e,this.total_width=this.zoomed_column*(l-u+1),1>e)for(;this.total_width<a&&(this.zoom+=.1,this.zoomed_column=this.column_width*this.zoom,this.total_width=this.zoomed_column*(l-u+1),this.zoom_enabled=!1,!(e>=1)););n>this.total_width&&(n=this.total_width),this.dom_element.attr({width:this.total_width+"px"}).css({width:this.total_width+"px"}),this.canvas_width=this.total_width;var f=Math.ceil(this.total_width/this.canvas_width);for(this.columns_per_canvas=Math.ceil(this.canvas_width/this.zoomed_column),this.previous_zoom!==this.zoom&&(this.dom_element.find("canvas").remove(),this.previous_zoom=this.zoom,this.rendered=[]),this.canvases=[],this.contexts=[],c=0;f>c;c++){var h=this.columns_per_canvas*c+u,d=h+this.columns_per_canvas-1;d>l&&(d=l);var p=(d-h+1)*this.zoomed_column;p>s&&(s=p);var g=s*c,v=g+p;if(v+v/2>n&&n>g-g/2)if(this.canvases[c]=r(this.dom_element,this.height,p,c,s),this.contexts[c]=this.canvases[c].getContext("2d"),this.contexts[c].setTransform(1,0,0,1,0,0),this.contexts[c].clearRect(0,0,p,this.height),this.contexts[c].fillStyle="#ffffff",this.contexts[c].fillRect(0,0,v,this.height),this.zoomed_column>12){var m=parseInt(10*e,10);m=m>10?10:m,this.debug&&o.call(this,h,d,c,1),i.call(this,h,d,c,m)}else o.call(this,h,d,c)}!this.scrollme&&this.options.scroller&&(this.scrollme=new EasyScroller(this.dom_element[0],{scrollingX:1,scrollingY:0,eventTarget:this.called_on})),1!==n&&this.scrollme.reflow()}}},{"./render_with_rects.js":121,"./render_with_text.js":122,jbone:126}],121:[function(t,e,n){function r(t,e,n,r,i,o,a,s){var l="#ffffff";s?(i>.1?l="#d7301f":i>.05?l="#fc8d59":i>.03&&(l="#fdcc8a"),t.fillStyle=l,t.fillRect(e,n+15,r,10),l="#ffffff",o>9?l="#d7301f":o>7?l="#fc8d59":o>4&&(l="#fdcc8a"),t.fillStyle=l,t.fillRect(e,n+30,r,10)):n+=30,l="#ffffff",.75>a?l="#2171b5":.85>a?l="#6baed6":.95>a&&(l="#bdd7e7"),t.fillStyle=l,t.fillRect(e,n,r,10)}var i=t("./draw/border.js"),o=t("./draw/ticks.js"),a=t("./draw/column_number.js");e.exports=function(t,e,n,s){var l=0,u=t,c=null,f=0,h=Math.abs(this.data.max_height),d=Math.abs(this.data.min_height_obs),p=h+d,g=Math.round(100*Math.abs(this.data.max_height)/p),v=Math.round(this.info_content_height*g/100),m=(this.info_content_height-v,10);for(f=t;e>=f;f++){if(this.data.mmline&&1===this.data.mmline[f-1])this.contexts[n].fillStyle="#cccccc",this.contexts[n].fillRect(l,10,this.zoomed_column,this.height-40);else{var y=this.data.heightArr[f-1],b=0,x=(y.length,0);for(var x in y)if(values=[x,y[x]],values[1]>.01){var _=parseFloat(values[1])/this.data.max_height,w=l,S=(this.info_content_height-2)*_,T=this.info_content_height-2-b-S,C=null;C="dynamic"===this.colorscheme?this.colors.getColor(values[0],{pos:f-1}):"consensus"===this.colorscheme?this.cmap[f-1][values[0]]||"#7a7a7a":this.colors[values[0]],s?(this.contexts[n].strokeStyle=C,this.contexts[n].strokeRect(w,T,this.zoomed_column,S)):(this.contexts[n].fillStyle=C,this.contexts[n].fillRect(w,T,this.zoomed_column,S)),b+=S}}this.zoom<.2?m=20:this.zoom<.3&&(m=10),this.options.positionMarker&&f%m===0&&(this.options.show_probs&&o(this.contexts[n],l+this.zoomed_column,this.height-30,parseFloat(this.height),"#dddddd"),o(this.contexts[n],l+this.zoomed_column,0,5),c=this.display_ali_map?this.data.ali_map[f-1]:u,a(this.contexts[n],l-2,10,this.zoomed_column,c,10,!0)),this.options.show_probs&&r(this.contexts[n],l,this.height-42,this.zoomed_column,this.data.insert_probs[f-1],this.data.insert_lengths[f-1],this.data.delete_probs[f-1],this.show_inserts),this.options.show_probs&&(this.show_inserts?i(this.contexts[n],this.height-45,this.total_width):i(this.contexts[n],this.height-15,this.total_width)),this.options.border&&i(this.contexts[n],0,this.total_width),l+=this.zoomed_column,u++}}},{"./draw/border.js":117,"./draw/column_number.js":118,"./draw/ticks.js":119}],122:[function(t,e,n){function r(t,e,n,r,o,a,s){var l=n-4,u="#ffffff",c="#555555";s&&(l=n-35),.75>o?(u="#2171b5",c="#ffffff"):.85>o?u="#6baed6":.95>o&&(u="#bdd7e7"),i(t,e,l,o,a,r,u,c)}function i(t,e,n,r,i,o,a,s){t.font=i+"px Arial",t.fillStyle=a,t.fillRect(e,n-10,o,14),t.textAlign="center",t.fillStyle=s,t.fillText(r,e+o/2,n)}function o(t,e){var n=e.ralign?e.x+t.zoomed_column:e.x,r=e.ralign?e.x+2:e.x;u(t.contexts[e.context_num],n,t.height-30,-30-t.height,"#dddddd"),u(t.contexts[e.context_num],n,0,5),c(t.contexts[e.context_num],r,10,t.zoomed_column,e.column_num,e.fontsize,e.ralign)}function a(t,e,n,r,o,a){var s=n-20,l="#ffffff",c="#555555";o>.1?(l="#d7301f",c="#ffffff"):o>.05?l="#fc8d59":o>.03&&(l="#fdcc8a"),i(t,e,s,o,a,r,l,c),o>.03&&u(t,e+r,n-30,-30-n,l)}function s(t,e,n,r,o,a){var s="#ffffff",l="#555555";o>9?(s="#d7301f",l="#ffffff"):o>7?s="#fc8d59":o>4&&(s="#fdcc8a"),i(t,e,n,o,a,r,s,l)}var l=t("./draw/border.js"),u=t("./draw/ticks.js"),c=t("./draw/column_number.js");e.exports=function(t,e,n,i){var c=0,f=t,h=null,d=0,p=Math.abs(this.data.max_height),g=isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),v=p+Math.abs(g),m=Math.round(100*Math.abs(this.data.max_height)/v),y=Math.round(this.info_content_height*m/100),b=this.info_content_height-y;for(y/this.info_content_height,b/this.info_content_height,e+3<=this.end&&(e+=3),d=t;e>=d;d++){if(this.data.mmline&&1===this.data.mmline[d-1])this.contexts[n].fillStyle="#cccccc",this.contexts[n].fillRect(c,10,this.zoomed_column,this.height-40);else{var x=this.data.heightArr[d-1],_=[];if(x){var w=0,S=(x.length,0),T=null;for(var S in x){var C=x[S],k=[S,C];if(x_pos=c+this.zoomed_column/2,letter_height=null,k[1]>.01){letter_height=parseFloat(k[1])/this.data.max_height;var A=this.info_content_height-2-w,D=(this.info_content_height-2)*letter_height;_[S]=[D,this.zoomed_column,x_pos,A],w+=D}}for(var S in x)_[S]&&this.letters[S]&&(T="dynamic"===this.colorscheme?this.colors.getColor(S,{pos:d-1}):"consensus"===this.colorscheme?this.cmap[d-1][S]||"#7a7a7a":null,this.letters[S].draw(this.contexts[n],_[S][0],_[S][1],_[S][2],_[S][3],T))}}h=this.display_ali_map?this.data.ali_map[d-1]:f,this.options.show_divider&&(this.zoom<.7?d%this.options.divider_step===0&&o(this,{context_num:n,x:c,fontsize:10,column_num:h,ralign:!0}):o(this,{context_num:n,x:c,fontsize:i,column_num:h})),this.options.show_probs&&(r(this.contexts[n],c,this.height,this.zoomed_column,this.data.delete_probs[d-1],i,this.show_inserts),u(this.contexts[n],c,this.height-15,5),this.show_inserts&&(a(this.contexts[n],c,this.height,this.zoomed_column,this.data.insert_probs[d-1],i),s(this.contexts[n],c,this.height-5,this.zoomed_column,this.data.insert_lengths[d-1],i),u(this.contexts[n],c,this.height-45,5),u(this.contexts[n],c,this.height-30,5))),c+=this.zoomed_column,f++}this.options.show_probs&&(this.show_inserts&&(l(this.contexts[n],this.height-30,this.total_width),l(this.contexts[n],this.height-45,this.total_width)),l(this.contexts[n],this.height-15,this.total_width)),this.options.border&&l(this.contexts[n],0,this.total_width)}},{"./draw/border.js":117,"./draw/column_number.js":118,"./draw/ticks.js":119}],123:[function(t,e,n){var r=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,i=window.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),o=i&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),a=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,s=(i||a)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(t){var e,n,r,s,l,u;for(e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):decodeURIComponent(t.split(",")[1]),n=new ArrayBuffer(e.length),r=new Uint8Array(n),s=0;s<e.length;s+=1)r[s]=e.charCodeAt(s);return l=t.split(",")[0].split(":")[1].split(";")[0],i?new Blob([o?r:n],{type:l}):(u=new a,u.append(n),u.getBlob(l))};window.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(t,e,n){t(n&&r.toDataURL&&s?s(this.toDataURL(e,n)):this.mozGetAsFile("blob",e))}:r.toDataURL&&s&&(r.toBlob=function(t,e,n){t(s(this.toDataURL(e,n)))})),e.exports=s},{}],124:[function(t,e,n){var r=r||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i=!t.externalHost&&"download"in r,o=function(n){var r=e.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},a=t.webkitRequestFileSystem,s=t.requestFileSystem||a||t.mozRequestFileSystem,l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},u="application/octet-stream",c=0,f=[],h=function(){for(var t=f.length;t--;){var e=f[t];"string"==typeof e?n().revokeObjectURL(e):e.remove()}f.length=0},d=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(o){l(o)}}},p=function(e,l){var h,p,g,v=this,m=e.type,y=!1,b=function(){var t=n().createObjectURL(e);return f.push(t),t},x=function(){d(v,"writestart progress write writeend".split(" "))},_=function(){!y&&h||(h=b(e)),p?p.location.href=h:window.open(h,"_blank"),v.readyState=v.DONE,x()},w=function(t){return function(){return v.readyState!==v.DONE?t.apply(this,arguments):void 0}},S={create:!0,exclusive:!1};return v.readyState=v.INIT,l||(l="download"),i?(h=b(e),r.href=h,r.download=l,o(r),v.readyState=v.DONE,void x()):(t.chrome&&m&&m!==u&&(g=e.slice||e.webkitSlice,e=g.call(e,0,e.size,u),y=!0),a&&"download"!==l&&(l+=".download"),(m===u||a)&&(p=t),s?(c+=e.size,void s(t.TEMPORARY,c,w(function(t){t.root.getDirectory("saved",S,w(function(t){var n=function(){t.getFile(l,S,w(function(t){t.createWriter(w(function(n){n.onwriteend=function(e){p.location.href=t.toURL(),f.push(t),v.readyState=v.DONE,d(v,"writeend",e)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&_()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=v["on"+t]}),n.write(e),v.abort=function(){n.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),_)}),_)};t.getFile(l,{create:!1},w(function(t){t.remove(),n()}),w(function(t){t.code===t.NOT_FOUND_ERR?n():_()}))}),_)}),_)):void _())},g=p.prototype,v=function(t,e){return new p(t,e)};return g.abort=function(){var t=this;t.readyState=t.DONE,d(t,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,t.addEventListener("unload",h,!1),v.unload=function(){h(),t.removeEventListener("unload",h,!1)},v}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);amdDefine=window.define,"undefined"==typeof amdDefine&&"undefined"!=typeof window.almond&&"define"in window.almond&&(amdDefine=window.almond.define),"undefined"!=typeof e&&null!==e?e.exports=r:"undefined"!=typeof amdDefine&&null!==amdDefine&&null!=amdDefine.amd&&amdDefine("saveAs",[],function(){return r})},{}],125:[function(t,e,n){var r={};r.removeToInsertLater=function(t){var e,n;return n=t.parentNode,e=t.nextSibling,n.removeChild(t),function(){e?n.insertBefore(t,e):n.appendChild(t)}},r.removeAllChilds=function(t){var e;for(e=0;t.firstChild;)e++,t.removeChild(t.firstChild)},e.exports=r},{}],126:[function(t,e,n){!function(t){function n(e){var n=e.length,r=typeof e;return!g(r)&&e!==t&&(!(1!==e.nodeType||!n)||(v(r)||0===n||"number"==typeof n&&n>0&&n-1 in e))}function r(t,e){var n,r;this.originalEvent=t,r=function(t,e){"preventDefault"===t?this[t]=function(){return this.defaultPrevented=!0,e[t]()}:"stopImmediatePropagation"===t?this[t]=function(){return this.immediatePropagationStopped=!0,e[t]()}:g(e[t])?this[t]=function(){return e[t]()}:this[t]=e[t]};for(n in t)(t[n]||"function"==typeof t[n])&&r.call(this,n,t);m.extend(this,e,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}var i,o=t.$,a=t.jBone,s=/^<(\w+)\s*\/?>$/,l=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,u=[].slice,c=[].splice,f=Object.keys,h=document,d=function(t){return"string"==typeof t},p=function(t){return t instanceof Object},g=function(t){return"[object Function]"==={}.toString.call(t)},v=function(t){return Array.isArray(t)},m=function(t,e){return new i.init(t,e)};m.noConflict=function(){return t.$=o,t.jBone=a,m},i=m.fn=m.prototype={init:function(t,e){var n,r,i,o;if(!t)return this;if(d(t)){if(r=s.exec(t))return this[0]=h.createElement(r[1]),this.length=1,p(e)&&this.attr(e),this;if((r=l.exec(t))&&r[1]){for(o=h.createDocumentFragment(),i=h.createElement("div"),i.innerHTML=t;i.lastChild;)o.appendChild(i.firstChild);return n=u.call(o.childNodes),m.merge(this,n)}if(m.isElement(e))return m(e).find(t);try{return n=h.querySelectorAll(t),m.merge(this,n)}catch(a){return this}}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?t():t instanceof m?t:m.makeArray(t,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0},i.constructor=m,i.init.prototype=i,m.setId=function(e){var n=e.jid;e===t?n="window":void 0===e.jid&&(e.jid=n=++m._cache.jid),m._cache.events[n]||(m._cache.events[n]={})},m.getData=function(e){e=e instanceof m?e[0]:e;var n=e===t?"window":e.jid;return{jid:n,events:m._cache.events[n]}},m.isElement=function(t){return t&&t instanceof m||t instanceof HTMLElement||d(t)},m._cache={events:{},jid:0},i.pushStack=function(t){var e=m.merge(this.constructor(),t);return e},m.merge=function(t,e){for(var n=e.length,r=t.length,i=0;n>i;)t[r++]=e[i++];return t.length=r,t},m.contains=function(t,e){return t.contains(e)},m.extend=function(t){var e;return c.call(arguments,1).forEach(function(n){if(e=t,n)for(var r in n)e[r]=n[r]}),t},m.makeArray=function(t,e){var r=e||[];return null!==t&&(n(t)?m.merge(r,d(t)?[t]:t):r.push(t)),r},m.unique=function(t){if(null==t)return[];for(var e=[],n=0,r=t.length;r>n;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}return e},m.Event=function(t,e){var n,r;return t.type&&!e&&(e=t,t=t.type),n=t.split(".").splice(1).join("."),r=t.split(".")[0],t=h.createEvent("Event"),t.initEvent(r,!0,!0),m.extend(t,{namespace:n,isDefaultPrevented:function(){return t.defaultPrevented}},e)},m.event={add:function(t,e,n,r,i){m.setId(t);var o,a,s,l=function(e){m.event.dispatch.call(t,e)},u=m.getData(t).events;for(e=e.split(" "),a=e.length;a--;)s=e[a],o=s.split(".")[0],u[o]=u[o]||[],u[o].length||t.addEventListener&&t.addEventListener(o,l,!1),u[o].push({namespace:s.split(".").splice(1).join("."),fn:l,selector:i,data:r,originfn:n})},remove:function(t,e,n){var r,i,o=function(t,e,r,i,o){var a;(n&&o.originfn===n||!n)&&(a=o.fn),t[e][r].fn===a&&(t[e].splice(r,1),t[e].length||i.removeEventListener(e,a))},a=m.getData(t).events;if(a)return!e&&a?f(a).forEach(function(e){for(i=a[e],r=i.length;r--;)o(a,e,r,t,i[r])}):void e.split(" ").forEach(function(e){var n,s=e.split(".")[0],l=e.split(".").splice(1).join(".");if(a[s])for(i=a[s],r=i.length;r--;)n=i[r],(!l||l&&n.namespace===l)&&o(a,s,r,t,n);else l&&f(a).forEach(function(e){for(i=a[e],r=i.length;r--;)n=i[r],n.namespace.split(".")[0]===l.split(".")[0]&&o(a,e,r,t,n)})})},trigger:function(t,e){var n=[];d(e)?n=e.split(" ").map(function(t){return m.Event(t)}):(e=e instanceof Event?e:m.Event(e),n=[e]),n.forEach(function(e){e.type&&t.dispatchEvent&&t.dispatchEvent(e)})},dispatch:function(t){for(var e,n,i,o,a,s=0,l=0,u=this,c=m.getData(u).events[t.type],f=c.length,h=[],d=[];f>s;s++)h.push(c[s]);for(s=0,f=h.length;f>s&&~c.indexOf(h[s])&&(!o||!o.isImmediatePropagationStopped());s++)if(n=null,a={},i=h[s],i.data&&(a.data=i.data),i.selector){if(~(d=m(u).find(i.selector)).indexOf(t.target)&&(n=t.target)||u!==t.target&&u.contains(t.target)){if(!n)for(e=d.length,l=0;e>l;l++)d[l]&&d[l].contains(t.target)&&(n=d[l]);if(!n)continue;a.currentTarget=n,o=new r(t,a),t.namespace&&t.namespace!==i.namespace||i.originfn.call(n,o)}}else o=new r(t,a),t.namespace&&t.namespace!==i.namespace||i.originfn.call(u,o)}},i.on=function(t,e,n,r){var i=this.length,o=0;if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),!r)return this;for(;i>o;o++)m.event.add(this[o],t,r,n,e);return this},i.one=function(t){var e,n=arguments,r=0,i=this.length,o=u.call(n,1,n.length-1),a=u.call(n,-1)[0];for(e=function(e){var n=m(e);t.split(" ").forEach(function(t){var r=function(i){n.off(t,r),a.call(e,i)};n.on.apply(n,[t].concat(o,r))})};i>r;r++)e(this[r]);return this},i.trigger=function(t){var e=0,n=this.length;if(!t)return this;for(;n>e;e++)m.event.trigger(this[e],t);return this},i.off=function(t,e){for(var n=0,r=this.length;r>n;n++)m.event.remove(this[n],t,e);return this},i.find=function(t){for(var e=[],n=0,r=this.length,i=function(n){g(n.querySelectorAll)&&[].forEach.call(n.querySelectorAll(t),function(t){e.push(t)})};r>n;n++)i(this[n]);return m(e)},i.get=function(t){return null!=t?0>t?this[t+this.length]:this[t]:u.call(this)},i.eq=function(t){return m(this[t])},i.parent=function(){for(var t,e=[],n=0,r=this.length;r>n;n++)!~e.indexOf(t=this[n].parentElement)&&t&&e.push(t);return m(e)},i.toArray=function(){return u.call(this)},i.is=function(){var t=arguments;return this.some(function(e){return e.tagName.toLowerCase()===t[0]})},i.has=function(){var t=arguments;return this.some(function(e){return e.querySelectorAll(t[0]).length})},i.add=function(t,e){return this.pushStack(m.unique(m.merge(this.get(),m(t,e))))},i.attr=function(t,e){var n,r=arguments,i=0,o=this.length;if(d(t)&&1===r.length)return this[0]&&this[0].getAttribute(t);for(2===r.length?n=function(n){n.setAttribute(t,e)}:p(t)&&(n=function(e){f(t).forEach(function(n){e.setAttribute(n,t[n])})});o>i;i++)n(this[i]);return this},i.removeAttr=function(t){for(var e=0,n=this.length;n>e;e++)this[e].removeAttribute(t);return this},i.val=function(t){var e=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;n>e;e++)this[e].value=t;return this},i.css=function(e,n){var r,i=arguments,o=0,a=this.length;if(d(e)&&1===i.length)return this[0]&&t.getComputedStyle(this[0])[e];for(2===i.length?r=function(t){t.style[e]=n}:p(e)&&(r=function(t){f(e).forEach(function(n){t.style[n]=e[n]})});a>o;o++)r(this[o]);return this},i.data=function(t,e){var n,r=arguments,i={},o=0,a=this.length,s=function(t,e,n){p(n)?(t.jdata=t.jdata||{},t.jdata[e]=n):t.dataset[e]=n},l=function(t){return"true"===t||"false"!==t&&t};if(0===r.length)return this[0].jdata&&(i=this[0].jdata),f(this[0].dataset).forEach(function(t){i[t]=l(this[0].dataset[t])},this),i;if(1===r.length&&d(t))return this[0]&&l(this[0].dataset[t]||this[0].jdata&&this[0].jdata[t]);for(1===r.length&&p(t)?n=function(e){f(t).forEach(function(n){s(e,n,t[n])})}:2===r.length&&(n=function(n){s(n,t,e)});a>o;o++)n(this[o]);return this},i.removeData=function(t){for(var e,n,r=0,i=this.length;i>r;r++)if(e=this[r].jdata,n=this[r].dataset,t)e&&e[t]&&delete e[t],delete n[t];else{for(t in e)delete e[t];for(t in n)delete n[t]}return this},i.addClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];r>e;e++)for(n=0,n=0;n<i.length;n++)this[e].classList.add(i[n]);return this},i.removeClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];r>e;e++)for(n=0,n=0;n<i.length;n++)this[e].classList.remove(i[n]);return this},i.toggleClass=function(t,e){var n=0,r=this.length,i="toggle";if(e===!0&&(i="add")||e===!1&&(i="remove"),t)for(;r>n;n++)this[n].classList[i](t);return this},i.hasClass=function(t){var e=0,n=this.length;if(t)for(;n>e;e++)if(this[e].classList.contains(t))return!0;return!1},i.html=function(t){var e,n=arguments;return 1===n.length&&void 0!==t?this.empty().append(t):0===n.length&&(e=this[0])?e.innerHTML:this},i.append=function(t){var e,n=0,r=this.length;for(d(t)&&l.exec(t)?t=m(t):p(t)||(t=document.createTextNode(t)),t=t instanceof m?t:m(t),e=function(e,n){t.forEach(function(t){n?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})};r>n;n++)e(this[n],n);return this},i.appendTo=function(t){return m(t).append(this),this},i.empty=function(){for(var t,e=0,n=this.length;n>e;e++)for(t=this[e];t.lastChild;)t.removeChild(t.lastChild);return this},i.remove=function(){var t,e=0,n=this.length;for(this.off();n>e;e++)t=this[e],delete t.jdata,t.parentNode&&t.parentNode.removeChild(t);return this},"object"==typeof e&&e&&"object"==typeof e.exports?e.exports=m:"function"==typeof define&&define.amd?(define(function(){return m}),t.jBone=t.$=m):"object"==typeof t&&"object"==typeof t.document&&(t.jBone=t.$=m)}(window)},{}],127:[function(t,e,n){var r={};r.d=r.defaultValue=function(t,e){return void 0===t?"function"==typeof t?e():e:t},r.id=function(t){return document.getElementById(t)},r.mk=function(t){return document.createElement(t)},void 0!==e&&void 0!==e.exports&&(e.exports=r)},{}],128:[function(t,e,n){e.exports=t("./lib/menubuilder")},{"./lib/menubuilder":129}],129:[function(t,e,n){var r,i,o;i=t("jbone"),o=t("backbone-viewj"),e.exports=r=o.extend({initialize:function(t){this._nodes=[],this.name=t.name||"",this.el.className+="smenubar"},render:function(){for(var t=this.el.firstChild;t;)this.el.removeChild(t),t=this.el.firstChild;this.el.appendChild(this.buildDOM())},setName:function(t){this.name=t},addNode:function(t,e,n){var r;null!=n&&(r=n.style),null==this._nodes&&(this._nodes=[]),this._nodes.push({label:t,callback:e,style:r})},getNode:function(t){var e=void 0;return this._nodes.forEach(function(n){n.label===t&&(e=n)}),e},modifyNode:function(t,e,n){var r=this.getNode(t);r.callback=e||r.callback,n=n||{},r.style=n.style||r.style},renameNode:function(t,e){var n=this.getNode(t);n.label=e||n.label},removeNode:function(t){var e=this.getNode(t);this._nodes.splice(this._nodes.indexOf(e),1)},removeAllNodes:function(){this._nodes=[]},buildDOM:function(){var t=document.createElement("span");return t.appendChild(this._buildM({nodes:this._nodes,name:this.name})),t},_buildM:function(t){var e,n,r,o,a,s,l,u=t.nodes,c=t.name,f=document.createElement("div");f.className="smenu-dropdown smenu-dropdown-tip",f.style.display="none";var h=document.createElement("ul");h.className="smenu-dropdown-menu";for(var d=0,p=u.length;p>d;d++){a=u[d],o=document.createElement("li"),o.textContent=a.label,l=a.style;for(r in l)s=l[r],o.style[r]=s;o.addEventListener("click",a.callback),this.trigger("new:node",o),h.appendChild(o)}return this.trigger("new:menu",h),f.appendChild(h),e=document.createElement("a"),e.textContent=c,e.className="smenubar_alink",this.trigger("new:button",e),i(e).on("click",function(t){return function(n){return t._showMenu(n,f,e),window.setTimeout(function(){return i(document.body).one("click",function(t){return f.style.display="none"})},5)}}(this)),n=document.createDocumentFragment(),n.appendChild(f),n.appendChild(e),n},_showMenu:function(t,e,n){var r;e.style.display="block",e.style.position="absolute",r=n.getBoundingClientRect(),e.style.left=r.left+"px",e.style.top=r.top+n.offsetHeight+"px"}})},{"backbone-viewj":67,jbone:126}],130:[function(t,e,n){var r;e.exports=r={rel:function(t){var e,n,r,i;return e=t.offsetX,n=t.offsetY,void 0==e&&(r=i.getBoundingClientRect(),i=t.target||t.srcElement,void 0==e&&(e=t.clientX-r.left,n=t.clientY-r.top),void 0==e&&(e=t.pageX-i.offsetLeft,n=t.pageY-i.offsetTop),void 0==e)?void console.log(t,"no mouse event defined. your browser sucks"):[e,n]},abs:function(t){var e,n;return e=t.pageX,n=t.pageY,void 0==e&&(e=t.layerX,n=t.layerY),void 0==e&&(e=t.clientX,n=t.clientY),void 0==e&&(e=t.x,n=t.y),[e,n]},wheelDelta:function(t){var e;return e=[t.deltaX,t.deltaY],void 0==e[0]&&t.mozMovementX&&(e=[0,t.mozMovementX]),isNaN(e[0])&&(e[0]=0),isNaN(e[1])&&(e[1]=0),e}}},{}],131:[function(t,e,n){e.exports={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"}},{}],132:[function(t,e,n){e.exports={A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"}},{}],133:[function(t,e,n){e.exports={A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"}},{}],134:[function(t,e,n){e.exports={A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"}},{}],135:[function(t,e,n){e.exports={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"}},{}],136:[function(t,e,n){e.exports={A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"}},{}],137:[function(t,e,n){function r(t){if(null==t||"object"!=typeof t)return t;var e=t.constructor();for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var i=t("./schemeclass"),o=i.stat,a=i.dyn,s=t("./buried"),l=t("./cinema"),u=t("./clustal"),c=t("./clustal2"),f=t("./helix"),h=t("./hydrophobicity"),d=t("./lesk"),p=t("./mae"),g=t("./nucleotide"),v=t("./purine"),m=t("./strand"),y=t("./taylor"),b=t("./turn"),x=t("./zappo"),_={buried:s,buried_index:s,cinema:l,clustal2:c,clustal:u,helix:f,helix_propensity:f,hydro:h,lesk:d,mae:p,nucleotide:g,purine:v,purine_pyrimidine:v,strand:m,strand_propensity:m,taylor:y,turn:b,turn_propensity:b,zappo:x},w=t("./pid_colors.js"),S={pid:w};e.exports=Colors=function(t){this.maps=r(_),this.dyn=r(S),this.opt=t},Colors.getScheme=function(t){return _[t]},Colors.prototype.getScheme=function(t){var e=this.maps[t];return void 0===e&&(e={},void 0!=this.dyn[t])?new a(this.dyn[t],this.opt):new o(e)},Colors.prototype.addStaticScheme=function(t,e){this.maps[t]=e},Colors.prototype.addDynScheme=function(t,e){this.dyn[t]=e}},{"./buried":131,"./cinema":132,"./clustal":133,"./clustal2":134,"./helix":135,"./hydrophobicity":136,"./lesk":138,"./mae":139,"./nucleotide":140,"./pid_colors.js":141,"./purine":142,"./schemeclass":143,"./strand":144,"./taylor":145,"./turn":146,"./zappo":147}],138:[function(t,e,n){e.exports={A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"}},{}],139:[function(t,e,n){e.exports={A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"}},{}],140:[function(t,e,n){e.exports={A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"}},{}],141:[function(t,e,n){var r;e.exports=r={},r.init=function(){this.cons=this.opt.conservation()},r.run=function(t,e){var n=this.cons[e.pos];return n>.8?"#6464ff":n>.6?"#9da5ff":n>.4?"#cccccc":"#ffffff"}},{}],142:[function(t,e,n){e.exports={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"}},{}],143:[function(t,e,n){var r=function(t){this.defaultColor="#ffffff",this.type="static",this.map=t,this.getColor=function(t){return void 0!==this.map[t]?this.map[t]:this.defaultColor}},i=function(t,e){this.type="dyn",this.opt=e,void 0!==t.init?(t.init.call(this),this.getColor=t.run,this.reset=t.init):this.getColor=t};e.exports.stat=r,e.exports.dyn=i},{}],144:[function(t,e,n){e.exports={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"}},{}],145:[function(t,e,n){e.exports={A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"}},{}],146:[function(t,e,n){e.exports={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"}},{}],147:[function(t,e,n){e.exports={A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},{}],148:[function(t,e,n){var r={};e.exports=r,r.getMeta=function(t){if(r.contains(t,"|")){for(var e,n,a=t.split("|"),s=0,l={};s<a.length-1;)e=a[s],n=a[s+1],l[e]=n,s+=2;var u=a[a.length-1];if(u.indexOf("=")>=0&&u.indexOf("OS")>=0){var c={},f=u.split(" ");c.en=f[0],f=f.splice(1);var h=i(f,"="),d=f.splice(h-1);u=f.join(" "),f=d,s=0;var p=[];return f.forEach(function(t){p.push(t),t.indexOf("=")>=0&&(o(p.join(" "),"=",c),p=[])}),{name:u,ids:l,details:c}}return{name:u,ids:l}}return{name:t}};var i=function(t,e){for(var n=0;n<t.lenght;n++)if(t[n].indexOf(n))return n;return t.length-1},o=function(t,e,n){n=n||{};var r=t.split(e);return n[r[0].toLowerCase()]=r[1],n},a={sp:{link:"http://www.uniprot.org/%s",name:"Uniprot"},tr:{link:"http://www.uniprot.org/%s",name:"Trembl"},gb:{link:"http://www.ncbi.nlm.nih.gov/nuccore/%s",name:"Genbank"},pdb:{link:"http://www.rcsb.org/pdb/explore/explore.do?structureId=%s",name:"PDB"}};r.buildLinks=function(t){var e={};return t=t||{},Object.keys(t).forEach(function(n){if(n in a){var r=a[n],i=r.link.replace("%s",t[n]);e[r.name]=i}}),e},r.contains=function(t,e){return-1!=="".indexOf.call(t,e,0)},r.splitNChars=function(t,e){var n,r;e=e||80;var i=[];for(n=0,r=t.length-1;r>=n;n+=e)i.push(t.substr(n,e));return i},r.reverse=function(t){return t.split("").reverse().join("")},r.complement=function(t){var e=t+"",n=[[/g/g,"0"],[/c/g,"1"],[/0/g,"c"],[/1/g,"g"],[/G/g,"0"],[/C/g,"1"],[/0/g,"C"],[/1/g,"G"],[/a/g,"0"],[/t/g,"1"],[/0/g,"t"],[/1/g,"a"],[/A/g,"0"],[/T/g,"1"],[/0/g,"T"],[/1/g,"A"]];for(var r in n)e=e.replace(n[r][0],n[r][1]);return e},r.reverseComplement=function(t){return r.reverse(r.complement(t))},r.model=function(t,e,n){this.seq=t,this.name=e,this.id=n,this.ids={}}},{}],149:[function(t,e,n){var r=t("underscore"),i=function(t,e){if(this.constructor!==i)return new i(t);if(void 0===t||"string"==typeof t)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(t),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["-","*"],r.extend(this,e)};i.prototype.addSeq=function(t){this.seqs.push(t),this._reset()},i.prototype.removeSeq=function(t){"number"==typeof t?this.seqs.splice(t,1):r.each(this.seqs,function(e,n){t===e&&this.seqs.splice(n,1)}.bind(this)),this._reset()},i.prototype.addSeqs=function(t){
t.forEach(function(t){this.addSeq(t)}.bind(this))},i.prototype.resetSeqs=function(t){if(this.seqs=[],!t instanceof Array||"at"in t){this.mseqs=t;var e=function(){var t=this.mseqs.pluck("seq");this.resetSeqs(t)};t.on("add change reset ",e,this),e.call(this)}else this.addSeqs(t),this._reset(),this.trigger("reset")};var o=["consensus","frequency","maxLength","ic","gaps"];i.prototype._reset=function(){for(var t=0;t<o.length;t++)this["_"+o[t]]=void 0;this._identity=void 0,this._background=void 0},i.prototype.setBackground=function(t){this._useBackground=t,this._reset()},i.prototype.useBackground=function(){this.setBackground(!0)},i.prototype.setDNA=function(){this.alphabetSize=4},i.prototype.setProtein=function(){this.alphabetSize=20},o.forEach(function(t){i.prototype[t]=function(){return void 0===this["_"+t]&&(this["_"+t]=this[t+"Calc"]()),this["_"+t]}}),i.prototype.identity=function(t){var e;return(void 0===this._identity||t)&&(e=this.identityCalc(t),this._identity=void 0),this._identity||e},i.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},i.prototype.frequencyCalc=function(t){var e,n;e=new Array(this.maxLength()),n=new Array(this.seqs.length);var i=this.ignoredChars;return void 0!==t&&t.all&&(i=[]),r.each(this.seqs,function(t){r.each(t,function(t,r){i.indexOf(t)>=0||(void 0===e[r]&&(e[r]={}),void 0===e[r][t]&&(e[r][t]=0),e[r][t]++,void 0===n[r]&&(n[r]=0),n[r]++)})}),r.each(e,function(t,i){return r.each(t,function(t,r){return e[i][r]=t/n[i]})}),this._frequency=e,e},i.prototype.backgroundCalc=function(){var t={},e=0;return r.each(this.seqs,function(n){r.each(n,function(n){return void 0===t[n]&&(t[n]=0),t[n]++,e++})}),t=r.mapValues(t,function(t){return t/e}),this._background=t,t},i.prototype.icCalc=function(){var t=this.frequency();if(this._useBackground)var e=this.background();var n=this.ignoredChars,i=this._useBackground,o=r.map(t,function(t){return r.reduce(t,function(t,r,o){return n.indexOf(o)>=0?t:(i&&(r/=e[o]),t-r*(Math.log(r)/Math.log(2)))},0)});return this._ic=o,o},i.prototype.conservation=function(t){var e=this.ic(),n=this.gaps(),i=this;t=t||this.alphabetSize;var o=Math.log(t)/Math.log(2),a=0,s=r.map(e,function(t){var e=o-t;return i.useGaps&&(e*=1-n[a++]),e});return s},i.prototype.conservResidue=function(t){var e,n=t?t.alphabetSize:void 0,i=this.ignoredChars;e=void 0!==t&&t.scaled?this.scale(this.conservation(n)):this.conservation(n);var o,a=this.frequency(),s=r.map(a,function(t,n){o=r.reject(r.keys(t),function(t){return i.indexOf(t)>=0});var a={};return r.each(o,function(r){a[r]=t[r]*e[n]}),a});return s},i.prototype.conservResidue2=function(t){var e=this.frequency(),n=this.conservation(t),i=this.background(),o=r.map(e,function(t,o){return r.map(t,function(t){var a=r.reduce(e[o],function(t,e){return t+e/i[o]},0);return t/i[o]/a*n[o]},0)});return o},i.prototype.scale=function(t,e){e=e||this.alphabetSize;var n=Math.log(e)/Math.log(2),i=r.map(t,function(t){return t/n});return i},i.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:r.max(this.seqs,function(t){return t.length}).length},i.prototype.consensusCalc=function(){var t=new Array(this.maxLength());return r.each(this.seqs,function(e){r.each(e,function(e,n){void 0===t[n]&&(t[n]={}),void 0===t[n][e]&&(t[n][e]=0),t[n][e]++})}),this._consensus=r.reduce(t,function(t,e){var n;return n=r.keys(e),t+=r.max(n,function(t){return e[t]})},""),this._consensus},i.prototype.identityCalc=function(t){var e=t||this.consensus();return this._identity=this.seqs.map(function(t){for(var n=0,r=0,i=0;i<t.length;i++)"-"!==t[i]&&"-"!==e[i]&&(r++,t[i]===e[i]&&n++);return n/r}),this._identity},i.prototype.gapsCalc=function(){var t=this.maxLength();if(1>=t||"undefined"==typeof t)return[];var e=new Array(this.maxLength());return r.each(this.seqs,function(t){r.each(t,function(t,n){void 0===e[n]&&(e[n]={g:0,t:0}),t="-"===t?"g":"t",e[n][t]++})}),this._gaps=r.map(e,function(t){return t.g/(t.g+t.t)}),this._gaps},r.mixin({mapValues:function(t,e){return r.object(r.keys(t),r.map(t,e))}}),t("biojs-events").mixin(i.prototype),e.exports=i},{"biojs-events":71,underscore:150}],150:[function(t,e,n){(function(){function t(t){function e(e,n,r,i,o,a){for(;o>=0&&a>o;o+=t){var s=i?i[o]:o;r=n(r,e[s],s,e)}return r}return function(n,r,i,o){r=_(r,o,4);var a=!D(n)&&x.keys(n),s=(a||n).length,l=t>0?0:s-1;return arguments.length<3&&(i=n[a?a[l]:l],l+=t),e(n,r,i,a,l,s)}}function r(t){return function(e,n,r){n=w(n,r);for(var i=A(e),o=t>0?0:i-1;o>=0&&i>o;o+=t)if(n(e[o],o,e))return o;return-1}}function i(t,e,n){return function(r,i,o){var a=0,s=A(r);if("number"==typeof o)t>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=e(h.call(r,a,s),x.isNaN),o>=0?o+a:-1;for(o=t>0?a:s-1;o>=0&&s>o;o+=t)if(r[o]===i)return o;return-1}}function o(t,e){var n=L.length,r=t.constructor,i=x.isFunction(r)&&r.prototype||u,o="constructor";for(x.has(t,o)&&!x.contains(e,o)&&e.push(o);n--;)o=L[n],o in t&&t[o]!==i[o]&&!x.contains(e,o)&&e.push(o)}var a=this,s=a._,l=Array.prototype,u=Object.prototype,c=Function.prototype,f=l.push,h=l.slice,d=u.toString,p=u.hasOwnProperty,g=Array.isArray,v=Object.keys,m=c.bind,y=Object.create,b=function(){},x=function(t){return t instanceof x?t:this instanceof x?void(this._wrapped=t):new x(t)};"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=x),n._=x):a._=x,x.VERSION="1.8.3";var _=function(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return function(){return t.apply(e,arguments)}},w=function(t,e,n){return null==t?x.identity:x.isFunction(t)?_(t,e,n):x.isObject(t)?x.matcher(t):x.property(t)};x.iteratee=function(t,e){return w(t,e,1/0)};var S=function(t,e){return function(n){var r=arguments.length;if(2>r||null==n)return n;for(var i=1;r>i;i++)for(var o=arguments[i],a=t(o),s=a.length,l=0;s>l;l++){var u=a[l];e&&void 0!==n[u]||(n[u]=o[u])}return n}},T=function(t){if(!x.isObject(t))return{};if(y)return y(t);b.prototype=t;var e=new b;return b.prototype=null,e},C=function(t){return function(e){return null==e?void 0:e[t]}},k=Math.pow(2,53)-1,A=C("length"),D=function(t){var e=A(t);return"number"==typeof e&&e>=0&&k>=e};x.each=x.forEach=function(t,e,n){e=_(e,n);var r,i;if(D(t))for(r=0,i=t.length;i>r;r++)e(t[r],r,t);else{var o=x.keys(t);for(r=0,i=o.length;i>r;r++)e(t[o[r]],o[r],t)}return t},x.map=x.collect=function(t,e,n){e=w(e,n);for(var r=!D(t)&&x.keys(t),i=(r||t).length,o=Array(i),a=0;i>a;a++){var s=r?r[a]:a;o[a]=e(t[s],s,t)}return o},x.reduce=x.foldl=x.inject=t(1),x.reduceRight=x.foldr=t(-1),x.find=x.detect=function(t,e,n){var r;return r=D(t)?x.findIndex(t,e,n):x.findKey(t,e,n),void 0!==r&&-1!==r?t[r]:void 0},x.filter=x.select=function(t,e,n){var r=[];return e=w(e,n),x.each(t,function(t,n,i){e(t,n,i)&&r.push(t)}),r},x.reject=function(t,e,n){return x.filter(t,x.negate(w(e)),n)},x.every=x.all=function(t,e,n){e=w(e,n);for(var r=!D(t)&&x.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(!e(t[a],a,t))return!1}return!0},x.some=x.any=function(t,e,n){e=w(e,n);for(var r=!D(t)&&x.keys(t),i=(r||t).length,o=0;i>o;o++){var a=r?r[o]:o;if(e(t[a],a,t))return!0}return!1},x.contains=x.includes=x.include=function(t,e,n,r){return D(t)||(t=x.values(t)),("number"!=typeof n||r)&&(n=0),x.indexOf(t,e,n)>=0},x.invoke=function(t,e){var n=h.call(arguments,2),r=x.isFunction(e);return x.map(t,function(t){var i=r?e:t[e];return null==i?i:i.apply(t,n)})},x.pluck=function(t,e){return x.map(t,x.property(e))},x.where=function(t,e){return x.filter(t,x.matcher(e))},x.findWhere=function(t,e){return x.find(t,x.matcher(e))},x.max=function(t,e,n){var r,i,o=-(1/0),a=-(1/0);if(null==e&&null!=t){t=D(t)?t:x.values(t);for(var s=0,l=t.length;l>s;s++)r=t[s],r>o&&(o=r)}else e=w(e,n),x.each(t,function(t,n,r){i=e(t,n,r),(i>a||i===-(1/0)&&o===-(1/0))&&(o=t,a=i)});return o},x.min=function(t,e,n){var r,i,o=1/0,a=1/0;if(null==e&&null!=t){t=D(t)?t:x.values(t);for(var s=0,l=t.length;l>s;s++)r=t[s],o>r&&(o=r)}else e=w(e,n),x.each(t,function(t,n,r){i=e(t,n,r),(a>i||i===1/0&&o===1/0)&&(o=t,a=i)});return o},x.shuffle=function(t){for(var e,n=D(t)?t:x.values(t),r=n.length,i=Array(r),o=0;r>o;o++)e=x.random(0,o),e!==o&&(i[o]=i[e]),i[e]=n[o];return i},x.sample=function(t,e,n){return null==e||n?(D(t)||(t=x.values(t)),t[x.random(t.length-1)]):x.shuffle(t).slice(0,Math.max(0,e))},x.sortBy=function(t,e,n){return e=w(e,n),x.pluck(x.map(t,function(t,n,r){return{value:t,index:n,criteria:e(t,n,r)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index-e.index}),"value")};var E=function(t){return function(e,n,r){var i={};return n=w(n,r),x.each(e,function(r,o){var a=n(r,o,e);t(i,r,a)}),i}};x.groupBy=E(function(t,e,n){x.has(t,n)?t[n].push(e):t[n]=[e]}),x.indexBy=E(function(t,e,n){t[n]=e}),x.countBy=E(function(t,e,n){x.has(t,n)?t[n]++:t[n]=1}),x.toArray=function(t){return t?x.isArray(t)?h.call(t):D(t)?x.map(t,x.identity):x.values(t):[]},x.size=function(t){return null==t?0:D(t)?t.length:x.keys(t).length},x.partition=function(t,e,n){e=w(e,n);var r=[],i=[];return x.each(t,function(t,n,o){(e(t,n,o)?r:i).push(t)}),[r,i]},x.first=x.head=x.take=function(t,e,n){return null!=t?null==e||n?t[0]:x.initial(t,t.length-e):void 0},x.initial=function(t,e,n){return h.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},x.last=function(t,e,n){return null!=t?null==e||n?t[t.length-1]:x.rest(t,Math.max(0,t.length-e)):void 0},x.rest=x.tail=x.drop=function(t,e,n){return h.call(t,null==e||n?1:e)},x.compact=function(t){return x.filter(t,x.identity)};var M=function(t,e,n,r){for(var i=[],o=0,a=r||0,s=A(t);s>a;a++){var l=t[a];if(D(l)&&(x.isArray(l)||x.isArguments(l))){e||(l=M(l,e,n));var u=0,c=l.length;for(i.length+=c;c>u;)i[o++]=l[u++]}else n||(i[o++]=l)}return i};x.flatten=function(t,e){return M(t,e,!1)},x.without=function(t){return x.difference(t,h.call(arguments,1))},x.uniq=x.unique=function(t,e,n,r){x.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=w(n,r));for(var i=[],o=[],a=0,s=A(t);s>a;a++){var l=t[a],u=n?n(l,a,t):l;e?(a&&o===u||i.push(l),o=u):n?x.contains(o,u)||(o.push(u),i.push(l)):x.contains(i,l)||i.push(l)}return i},x.union=function(){return x.uniq(M(arguments,!0,!0))},x.intersection=function(t){for(var e=[],n=arguments.length,r=0,i=A(t);i>r;r++){var o=t[r];if(!x.contains(e,o)){for(var a=1;n>a&&x.contains(arguments[a],o);a++);a===n&&e.push(o)}}return e},x.difference=function(t){var e=M(arguments,!0,!0,1);return x.filter(t,function(t){return!x.contains(e,t)})},x.zip=function(){return x.unzip(arguments)},x.unzip=function(t){for(var e=t&&x.max(t,A).length||0,n=Array(e),r=0;e>r;r++)n[r]=x.pluck(t,r);return n},x.object=function(t,e){for(var n={},r=0,i=A(t);i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},x.findIndex=r(1),x.findLastIndex=r(-1),x.sortedIndex=function(t,e,n,r){n=w(n,r,1);for(var i=n(e),o=0,a=A(t);a>o;){var s=Math.floor((o+a)/2);n(t[s])<i?o=s+1:a=s}return o},x.indexOf=i(1,x.findIndex,x.sortedIndex),x.lastIndexOf=i(-1,x.findLastIndex),x.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;r>o;o++,t+=n)i[o]=t;return i};var j=function(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);var o=T(t.prototype),a=t.apply(o,i);return x.isObject(a)?a:o};x.bind=function(t,e){if(m&&t.bind===m)return m.apply(t,h.call(arguments,1));if(!x.isFunction(t))throw new TypeError("Bind must be called on a function");var n=h.call(arguments,2),r=function(){return j(t,r,e,this,n.concat(h.call(arguments)))};return r},x.partial=function(t){var e=h.call(arguments,1),n=function(){for(var r=0,i=e.length,o=Array(i),a=0;i>a;a++)o[a]=e[a]===x?arguments[r++]:e[a];for(;r<arguments.length;)o.push(arguments[r++]);return j(t,n,this,this,o)};return n},x.bindAll=function(t){var e,n,r=arguments.length;if(1>=r)throw new Error("bindAll must be passed function names");for(e=1;r>e;e++)n=arguments[e],t[n]=x.bind(t[n],t);return t},x.memoize=function(t,e){var n=function(r){var i=n.cache,o=""+(e?e.apply(this,arguments):r);return x.has(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return n.cache={},n},x.delay=function(t,e){var n=h.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},x.defer=x.partial(x.delay,x,1),x.throttle=function(t,e,n){var r,i,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:x.now(),a=null,o=t.apply(r,i),a||(r=i=null)};return function(){var u=x.now();s||n.leading!==!1||(s=u);var c=e-(u-s);return r=this,i=arguments,0>=c||c>e?(a&&(clearTimeout(a),a=null),s=u,o=t.apply(r,i),a||(r=i=null)):a||n.trailing===!1||(a=setTimeout(l,c)),o}},x.debounce=function(t,e,n){var r,i,o,a,s,l=function(){var u=x.now()-a;e>u&&u>=0?r=setTimeout(l,e-u):(r=null,n||(s=t.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,a=x.now();var u=n&&!r;return r||(r=setTimeout(l,e)),u&&(s=t.apply(o,i),o=i=null),s}},x.wrap=function(t,e){return x.partial(e,t)},x.negate=function(t){return function(){return!t.apply(this,arguments)}},x.compose=function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},x.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},x.before=function(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),1>=t&&(e=null),n}},x.once=x.partial(x.before,2);var N=!{toString:null}.propertyIsEnumerable("toString"),L=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];x.keys=function(t){if(!x.isObject(t))return[];if(v)return v(t);var e=[];for(var n in t)x.has(t,n)&&e.push(n);return N&&o(t,e),e},x.allKeys=function(t){if(!x.isObject(t))return[];var e=[];for(var n in t)e.push(n);return N&&o(t,e),e},x.values=function(t){for(var e=x.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=t[e[i]];return r},x.mapObject=function(t,e,n){e=w(e,n);for(var r,i=x.keys(t),o=i.length,a={},s=0;o>s;s++)r=i[s],a[r]=e(t[r],r,t);return a},x.pairs=function(t){for(var e=x.keys(t),n=e.length,r=Array(n),i=0;n>i;i++)r[i]=[e[i],t[e[i]]];return r},x.invert=function(t){for(var e={},n=x.keys(t),r=0,i=n.length;i>r;r++)e[t[n[r]]]=n[r];return e},x.functions=x.methods=function(t){var e=[];for(var n in t)x.isFunction(t[n])&&e.push(n);return e.sort()},x.extend=S(x.allKeys),x.extendOwn=x.assign=S(x.keys),x.findKey=function(t,e,n){e=w(e,n);for(var r,i=x.keys(t),o=0,a=i.length;a>o;o++)if(r=i[o],e(t[r],r,t))return r},x.pick=function(t,e,n){var r,i,o={},a=t;if(null==a)return o;x.isFunction(e)?(i=x.allKeys(a),r=_(e,n)):(i=M(arguments,!1,!1,1),r=function(t,e,n){return e in n},a=Object(a));for(var s=0,l=i.length;l>s;s++){var u=i[s],c=a[u];r(c,u,a)&&(o[u]=c)}return o},x.omit=function(t,e,n){if(x.isFunction(e))e=x.negate(e);else{var r=x.map(M(arguments,!1,!1,1),String);e=function(t,e){return!x.contains(r,e)}}return x.pick(t,e,n)},x.defaults=S(x.allKeys,!0),x.create=function(t,e){var n=T(t);return e&&x.extendOwn(n,e),n},x.clone=function(t){return x.isObject(t)?x.isArray(t)?t.slice():x.extend({},t):t},x.tap=function(t,e){return e(t),t},x.isMatch=function(t,e){var n=x.keys(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;r>o;o++){var a=n[o];if(e[a]!==i[a]||!(a in i))return!1}return!0};var R=function(t,e,n,r){if(t===e)return 0!==t||1/t===1/e;if(null==t||null==e)return t===e;t instanceof x&&(t=t._wrapped),e instanceof x&&(e=e._wrapped);var i=d.call(t);if(i!==d.call(e))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!==+t?+e!==+e:0===+t?1/+t===1/e:+t===+e;case"[object Date]":case"[object Boolean]":return+t===+e}var o="[object Array]"===i;if(!o){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,s=e.constructor;if(a!==s&&!(x.isFunction(a)&&a instanceof a&&x.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}n=n||[],r=r||[];for(var l=n.length;l--;)if(n[l]===t)return r[l]===e;if(n.push(t),r.push(e),o){if(l=t.length,l!==e.length)return!1;for(;l--;)if(!R(t[l],e[l],n,r))return!1}else{var u,c=x.keys(t);if(l=c.length,x.keys(e).length!==l)return!1;for(;l--;)if(u=c[l],!x.has(e,u)||!R(t[u],e[u],n,r))return!1}return n.pop(),r.pop(),!0};x.isEqual=function(t,e){return R(t,e)},x.isEmpty=function(t){return null==t||(D(t)&&(x.isArray(t)||x.isString(t)||x.isArguments(t))?0===t.length:0===x.keys(t).length)},x.isElement=function(t){return!(!t||1!==t.nodeType)},x.isArray=g||function(t){return"[object Array]"===d.call(t)},x.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},x.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){x["is"+t]=function(e){return d.call(e)==="[object "+t+"]"}}),x.isArguments(arguments)||(x.isArguments=function(t){return x.has(t,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(x.isFunction=function(t){return"function"==typeof t||!1}),x.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},x.isNaN=function(t){return x.isNumber(t)&&t!==+t},x.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"===d.call(t)},x.isNull=function(t){return null===t},x.isUndefined=function(t){return void 0===t},x.has=function(t,e){return null!=t&&p.call(t,e)},x.noConflict=function(){return a._=s,this},x.identity=function(t){return t},x.constant=function(t){return function(){return t}},x.noop=function(){},x.property=C,x.propertyOf=function(t){return null==t?function(){}:function(e){return t[e]}},x.matcher=x.matches=function(t){return t=x.extendOwn({},t),function(e){return x.isMatch(e,t)}},x.times=function(t,e,n){var r=Array(Math.max(0,t));e=_(e,n,1);for(var i=0;t>i;i++)r[i]=e(i);return r},x.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},x.now=Date.now||function(){return(new Date).getTime()};var I={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},O=x.invert(I),F=function(t){var e=function(e){return t[e]},n="(?:"+x.keys(t).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,e):t}};x.escape=F(I),x.unescape=F(O),x.result=function(t,e,n){var r=null==t?void 0:t[e];return void 0===r&&(r=n),x.isFunction(r)?r.call(t):r};var z=0;x.uniqueId=function(t){var e=++z+"";return t?t+e:e},x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var P=/(.)^/,q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},H=/\\|'|\r|\n|\u2028|\u2029/g,B=function(t){return"\\"+q[t]};x.template=function(t,e,n){!e&&n&&(e=n),e=x.defaults({},e,x.templateSettings);var r=RegExp([(e.escape||P).source,(e.interpolate||P).source,(e.evaluate||P).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(r,function(e,n,r,a,s){return o+=t.slice(i,s).replace(H,B),i=s+e.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":a&&(o+="';\n"+a+"\n__p+='"),e}),o+="';\n",e.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var a=new Function(e.variable||"obj","_",o)}catch(s){throw s.source=o,s}var l=function(t){return a.call(this,t,x)},u=e.variable||"obj";return l.source="function("+u+"){\n"+o+"}",l},x.chain=function(t){var e=x(t);return e._chain=!0,e};var $=function(t,e){return t._chain?x(e).chain():e};x.mixin=function(t){x.each(x.functions(t),function(e){var n=x[e]=t[e];x.prototype[e]=function(){var t=[this._wrapped];return f.apply(t,arguments),$(this,n.apply(x,t))}})},x.mixin(x),x.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=l[t];x.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],$(this,n)}}),x.each(["concat","join","slice"],function(t){var e=l[t];x.prototype[t]=function(){return $(this,e.apply(this._wrapped,arguments))}}),x.prototype.value=function(){return this._wrapped},x.prototype.valueOf=x.prototype.toJSON=x.prototype.value,x.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return x})}).call(this)},{}],151:[function(t,e,n){function r(t,e){function n(){4===g.readyState&&S()}function r(){var t=null;if(g.response?t=g.response:"text"!==g.responseType&&g.responseType||(t=g.responseText||g.responseXML),w)try{t=JSON.parse(t)}catch(e){}return t}function o(){return 1223===g.status?204:g.status}function f(t,e){var n=null;if(0===t||t>=400&&600>t){var r="string"==typeof e&&e||l[String(t).charAt(0)];n=new Error(r),n.statusCode=t}return n}function h(){var t=o(),n=r(),i=f(t,n),a={body:n,statusCode:t,statusText:g.statusText,raw:g};g.getAllResponseHeaders?a.headers=s(g.getAllResponseHeaders()):a.headers={},e(i,a,a.body)}function d(){var t=o(),n=f(t);g.status=g.statusCode=t,g.body=r(),g.headers=s(g.getAllResponseHeaders()),e(n,g,g.body)}function p(t){e(t,g)}"string"==typeof t&&(t={uri:t}),t=t||{},e=a(e);var g=t.xhr||null;g||(g=t.cors||t.useXDR?new c:new u);var v,m=g.url=t.uri||t.url,y=g.method=t.method||"GET",b=t.body||t.data,x=g.headers=t.headers||{},_=!!t.sync,w=!1,S=t.response?h:d;if("json"in t&&(w=!0,x.Accept="application/json","GET"!==y&&"HEAD"!==y&&(x["Content-Type"]="application/json",b=JSON.stringify(t.json))),g.onreadystatechange=n,g.onload=S,g.onerror=p,g.onprogress=function(){},g.ontimeout=i,g.open(y,m,!_),(t.withCredentials||t.cors&&t.withCredentials!==!1)&&(g.withCredentials=!0),_||(g.timeout="timeout"in t?t.timeout:5e3),g.setRequestHeader)for(v in x)x.hasOwnProperty(v)&&g.setRequestHeader(v,x[v]);else if(t.headers)throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(g.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(g),g.send(b),g}function i(){}var o=t("global/window"),a=t("once"),s=t("parse-headers"),l={0:"Internal XMLHttpRequest Error",4:"4xx Client Error",5:"5xx Server Error"},u=o.XMLHttpRequest||i,c="withCredentials"in new u?u:o.XDomainRequest;e.exports=r},{"global/window":152,once:153,"parse-headers":157}],152:[function(t,e,n){arguments[4][78][0].apply(n,arguments)},{dup:78}],153:[function(t,e,n){arguments[4][79][0].apply(n,arguments)},{dup:79}],154:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80,"is-function":155}],155:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{dup:81}],156:[function(t,e,n){arguments[4][82][0].apply(n,arguments)},{dup:82}],157:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{dup:83,"for-each":154,trim:156}],msa:[function(t,e,n){var r;r=t("./msa"),e.exports=function(){var t;return t=function(t){return r.apply(this,t)},t.prototype=r.prototype,new t(arguments)},e.exports.msa=r,e.exports.model=t("./model"),e.exports.menu=t("./menu"),e.exports.utils=t("./utils"),e.exports.selection=t("./g/selection/Selection"),e.exports.selcol=t("./g/selection/SelectionCol"),e.exports.view=t("backbone-viewj"),e.exports.boneView=t("backbone-childs"),e.exports._=t("underscore"),e.exports.$=t("jbone"),e.exports.io={},e.exports.io.xhr=t("xhr"),e.exports.io.fasta=t("biojs-io-fasta"),e.exports.io.clustal=t("biojs-io-clustal"),e.exports.io.gff=t("biojs-io-gff"),e.exports.version="0.2.0"},{"./g/selection/Selection":6,"./g/selection/SelectionCol":7,"./menu":13,"./model":29,"./msa":30,"./utils":34,"backbone-childs":60,"backbone-viewj":67,"biojs-io-clustal":74,"biojs-io-fasta":84,"biojs-io-gff":94,jbone:126,underscore:150,xhr:151}]},{},[]),!function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return i(n?n:e)},u,u.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(t,e,n){"undefined"==typeof tnt&&(e.exports=tnt={}),tnt.tree=t("./index.js"),tnt.tree.node=t("tnt.tree.node"),tnt.tree.parse_newick=t("tnt.newick").parse_newick,tnt.tree.parse_nhx=t("tnt.newick").parse_nhx},{"./index.js":2,"tnt.newick":8,"tnt.tree.node":10}],2:[function(t,e,n){e.exports=tree=t("./src/index.js");var r=t("biojs-events");r.mixin(tree)},{"./src/index.js":17,"biojs-events":3}],3:[function(t,e,n){var r=t("backbone-events-standalone");r.onAll=function(t,e){return this.on("all",t,e),this},r.oldMixin=r.mixin,r.mixin=function(t){r.oldMixin(t);for(var e=["onAll"],n=0;n<e.length;n++){var i=e[n];t[i]=this[i]}return t},e.exports=r},{"backbone-events-standalone":5}],4:[function(t,e,n){!function(){function t(){return{keys:Object.keys||function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++l+"";return t?t+e:e},has:function(t,e){return a.call(t,e)},each:function(t,e,n){if(null!=t)if(o&&t.forEach===o)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;i>r;r++)e.call(n,t[r],r,t);else for(var a in t)this.has(t,a)&&e.call(n,t[a],a,t)},once:function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}}}}var r,i=this,o=Array.prototype.forEach,a=Object.prototype.hasOwnProperty,s=Array.prototype.slice,l=0,u=t();r={on:function(t,e,n){if(!f(this,"on",t,[e,n])||!e)return this;this._events||(this._events={});var r=this._events[t]||(this._events[t]=[]);return r.push({callback:e,context:n,ctx:n||this}),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var r=this,i=u.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,a,s,l,c,h;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=t?[t]:u.keys(this._events),s=0,l=a.length;l>s;s++)if(t=a[s],o=this._events[t]){if(this._events[t]=r=[],e||n)for(c=0,h=o.length;h>c;c++)i=o[c],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=s.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],r=this._events.all;return n&&h(n,e),r&&h(r,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i=!e&&!n;"object"==typeof e&&(n=this),t&&((r={})[t._listenerId]=t);for(var o in r)r[o].off(e,n,this),i&&delete this._listeners[o];return this}};var c=/\s+/,f=function(t,e,n,r){if(!n)return!0;if("object"==typeof n){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(c.test(n)){for(var o=n.split(c),a=0,s=o.length;s>a;a++)t[e].apply(t,[o[a]].concat(r));return!1}return!0},h=function(t,e){var n,r=-1,i=t.length,o=e[0],a=e[1],s=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,a,s);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},d={listenTo:"on",listenToOnce:"once"};u.each(d,function(t,e){r[e]=function(e,n,r){var i=this._listeners||(this._listeners={}),o=e._listenerId||(e._listenerId=u.uniqueId("l"));return i[o]=e,"object"==typeof n&&(r=this),e[t](n,r,this),this}}),r.bind=r.on,r.unbind=r.off,r.mixin=function(t){var e=["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"];return u.each(e,function(e){t[e]=this[e]},this),t},"undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=r),n.BackboneEvents=r):"function"==typeof define&&"object"==typeof define.amd?define(function(){return r}):i.BackboneEvents=r}(this)},{}],5:[function(t,e,n){e.exports=t("./backbone-events-standalone")},{"./backbone-events-standalone":4}],6:[function(t,e,n){e.exports=t("./src/api.js")},{"./src/api.js":7}],7:[function(t,e,n){var r=function(t){var e=function(){var t=[];return t.add_batch=function(e){t.unshift(e)},t.update=function(e,n){for(var r=0;r<t.length;r++)for(var i in t[r])if(i===e)return t[r][i]=n,!0;return!1},t.add=function(e,n){if(t.update(e,n));else{var r={};r[e]=n,t.add_batch(r)}},t.get=function(e){for(var n=0;n<t.length;n++)for(var r in t[n])if(r===e)return t[n][r]},t},n=e(),r=function(){};r.check=function(e,n,i){if(!(e instanceof Array))return"function"==typeof e?e.check(n,i):t[e].check(n,i),r;for(var o=0;o<e.length;o++)r.check(e[o],n,i)},r.transform=function(e,n){if(!(e instanceof Array))return"function"==typeof e?e.transform(n):t[e].transform(n),r;for(var i=0;i<e.length;i++)r.transform(e[i],n)};var i=function(e,r){var i=[],o=[],a=r.on_getter||function(){return n.get(e)},s=r.on_setter||function(t){for(var r=0;r<o.length;r++)t=o[r](t);for(var a=0;a<i.length;a++)if(!i[a].check(t)){var s=i[a].msg||"Value "+t+" doesn't seem to be valid for this method";throw s}n.add(e,t)},l=function(e){return arguments.length?(s(e),t):a()};l.check=function(t,e){return arguments.length?(i.push({check:t,msg:e}),this):i},l.transform=function(t){return arguments.length?(o.push(t),this):o},t[e]=l},o=function(t,e){if("object"==typeof t){n.add_batch(t);for(var r in t)i(r,e)}else n.add(t,e.default_value),i(t,e)};return r.getset=function(t,e){return o(t,{default_value:e}),r},r.get=function(t,e){var n=function(){throw"Method defined only as a getter (you are trying to use it as a setter"};return o(t,{default_value:e,on_setter:n}),r},r.set=function(t,e){var n=function(){throw"Method defined only as a setter (you are trying to use it as a getter"};return o(t,{default_value:e,on_getter:n}),r},r.method=function(e,n){if("object"==typeof e)for(var i in e)t[i]=e[i];else t[e]=n;return r},r};e.exports=n=r},{}],8:[function(t,e,n){e.exports=t("./src/newick.js")},{"./src/newick.js":9}],9:[function(t,e,n){e.exports={parse_newick:function(t){for(var e,n=[],r={},i=t.split(/\s*(;|\(|\)|,|:)\s*/),o=0;o<i.length;o++){var a=i[o];switch(a){case"(":e={},r.children=[e],n.push(r),r=e;break;case",":e={},n[n.length-1].children.push(e),r=e;break;case")":r=n.pop();break;case":":break;default:var s=i[o-1];")"==s||"("==s||","==s?r.name=a:":"==s&&(r.branch_length=parseFloat(a))}}return r},parse_nhx:function(t){for(var e,n=[],r={},i=t.split(/\s*(;|\(|\)|\[|\]|,|:|=)\s*/),o=0;o<i.length;o++){var a=i[o];switch(a){case"(":e={},r.children=[e],n.push(r),r=e;break;case",":e={},n[n.length-1].children.push(e),r=e;break;case")":r=n.pop();break;case":":break;default:var s=i[o-1];if(")"==s||"("==s||","==s)r.name=a;else if(":"==s)isNaN(a)||(r.branch_length=parseFloat(a));else if("="==s){var l=i[o-2];switch(l){case"D":r.duplication=a;break;case"G":r.gene_id=a;break;case"T":r.taxon_id=a;break;default:r[i[o-2]]=a}}}}return r}}},{}],10:[function(t,e,n){var r=t("./src/node.js");e.exports=n=r},{"./src/node.js":15}],11:[function(t,e,n){e.exports=t("./src/index.js")},{"./src/index.js":12}],12:[function(t,e,n){var r=t("./utils.js");r.reduce=t("./reduce.js"),e.exports=n=r},{"./reduce.js":13,"./utils.js":14}],13:[function(t,e,n){var r=function(){var t=5,e="val",n=function(t,e){return e>t?.2*e>=e-t:.2*t>=t-e},r=function(t){return t},i=function(t){if(!t.length)return t;var e=s(t),n=r(e);return n},o=function(t,n){if(n.sort(function(t,n){return t[e]-n[e]}),n.length%2)t[e]=n[~~(n.length/2)][e];else{var r=~~(n.length/2)-1;t[e]=(n[r][e]+n[r+1][e])/2}return t},a=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},s=function(e){if(0===t)return e;for(var n=[],r=0;r<e.length;r++){var i=t>r?0:r-t,s=r>e.length-t?e.length:r+t;n[r]=o(a(e[r]),e.slice(i,s+1))}return n};return i.reducer=function(t){return arguments.length?(r=t,i):r},i.redundant=function(t){return arguments.length?(n=t,i):n},i.value=function(t){return arguments.length?(e=t,i):e},i.smooth=function(e){return arguments.length?(t=e,
i):t},i},i=function(){var t=r().value("start"),e="end",n=function(n,r){return{object:{start:n.object[t.value()],end:r[e]},value:r[e]}};return t.reducer(function(r){for(var i=t.value(),o=t.redundant(),a=[],s={object:r[0],value:r[0][e]},l=1;l<r.length;l++)o(r[l][i],s.value)?s=n(s,r[l]):(a.push(s.object),s.object=r[l],s.value=r[l].end);return a.push(s.object),a}),r.join=function(e){return arguments.length?(n=e,t):n},r.value2=function(n){return arguments.length?(e=n,t):e},t},o=function(){var t=r();return t.reducer(function(e){for(var n=t.redundant(),r=t.value(),i=[],o=e[0],a=1;a<e.length-1;a++)n(e[a][r],o[r])||(i.push(o),o=e[a]);return i.push(o),i.push(e[e.length-1]),i}),t};e.exports=r,e.exports.line=o,e.exports.block=i},{}],14:[function(t,e,n){e.exports={iterator:function(t){var e=t||0,n=function(){return e++};return n},script_path:function(t){var e=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),n=new RegExp(e+"$"),r=new RegExp("(.*)"+e+"$"),i=document.getElementsByTagName("script"),o="";if(void 0!==i)for(var a in i)if(i[a].src&&i[a].src.match(n))return i[a].src.replace(r,"$1");return o},defer_cancel:function(t,e){var n,r=function(){var r=Array.prototype.slice.call(arguments),i=this;clearTimeout(n),n=setTimeout(function(){t.apply(i,r)},e)};return r}}},{}],15:[function(t,e,n){var r=t("tnt.api"),i=t("tnt.utils").iterator,o=function(t){"use strict";var e=function(){},n=r(e),a=function(t,e){if(e(t),void 0!==t.children)for(var n=0;n<t.children.length;n++)a(t.children[n],e)},s=function(){var e=i(1);a(t,function(t){void 0===t._id&&(t._id=e())})},l=function(t){if(void 0!==t&&void 0!==t.children)for(var e=0;e<t.children.length;e++)t.children[e]._parent=t,l(t.children[e])},u=function(t){a(t,function(t){var e;if(void 0===t._parent)t._root_dist=0;else{var e=0;t.branch_length&&(e=t.branch_length),t._root_dist=e+t._parent._root_dist}})};e.data=function(n){return arguments.length?(t=n,s(),l(t),u(t),e):t},e.data(t),n.method("find_all",function(t,n){var r=[];return e.apply(function(e){t(e)&&r.push(e)}),r}),n.method("find_node",function(n,r){if(n(e))return e;if(void 0!==t.children)for(var i=0;i<t.children.length;i++){var a=o(t.children[i]).find_node(n,r);if(a)return a}if(r&&void 0!==t._children)for(var s=0;s<t._children.length;s++){o(t._children[s]).find_node(n,r);var a=o(t._children[s]).find_node(n,r);if(a)return a}}),n.method("find_node_by_name",function(t,n){return e.find_node(function(e){return e.node_name()===t},n)}),n.method("toggle",function(){if(t)if(t.children){var n=0;e.apply(function(t){t.n_hidden()||0,n+=(t.n_hidden()||0)+1}),e.n_hidden(n-1),t._children=t.children,t.children=void 0}else e.n_hidden(0),t.children=t._children,t._children=void 0;return this}),n.method("is_collapsed",function(){return void 0!==t._children&&void 0===t.children});var c=function(t,e){if(t=t.data(),e=e.data(),void 0===t._parent)return!1;for(t=t._parent;;){if(void 0===t)return!1;if(t===e)return!0;t=t._parent}};n.method("lca",function(t){if(1===t.length)return t[0];for(var e=t[0],n=1;n<t.length;n++)e=f(e,t[n]);return e});var f=function(t,e){return t.data()===e.data()?t:c(t,e)?e:f(t,e.parent())};n.method("n_hidden",function(t){return arguments.length?(e.property("_hidden",t),e):e.property("_hidden")}),n.method("get_all_nodes",function(t){var n=[];return e.apply(function(t){n.push(t)},t),n}),n.method("get_all_leaves",function(t){var n=[];return e.apply(function(e){e.is_leaf(t)&&n.push(e)},t),n}),n.method("upstream",function(t){t(e);var n=e.parent();void 0!==n&&n.upstream(t)}),n.method("subtree",function(e,n){void 0===n&&(n=!1);for(var r={},i=0;i<e.length;i++){var a=e[i];void 0!==a&&a.upstream(function(t){var e=t.id();void 0===r[e]&&(r[e]=0),r[e]++})}var s=function(t){var e=0;if(void 0===t.children)return!1;for(var n=0;n<t.children.length;n++){var i=t.children[n]._id;r[i]>0&&e++}return 1===e},l={};return h(t,l,0,function(t){var e=t._id,i=r[e];return i>0&&!(s(t)&&!n)}),o(l.children[0])});var h=function(t,e,n,r){if(void 0!==t)if(r(t)){var i=d(t,n);if(void 0===e.children&&(e.children=[]),e.children.push(i),void 0===t.children)return;for(var o=0;o<t.children.length;o++)h(t.children[o],i,0,r)}else{if(void 0===t.children)return;n+=t.branch_length||0;for(var o=0;o<t.children.length;o++)h(t.children[o],e,n,r)}},d=function(t,e){var n={};for(var r in t)"children"!==r&&"_children"!==r&&"_parent"!==r&&"depth"!==r&&t.hasOwnProperty(r)&&(n[r]=t[r]);return void 0!==n.branch_length&&void 0!==e&&(n.branch_length+=e),n};return n.method("present",function(t){var n=!1;return e.apply(function(e){t(e)===!0&&(n=!0)}),n}),n.method("sort",function(e){if(void 0!==t.children){for(var n=[],r=0;r<t.children.length;r++)n.push(o(t.children[r]));n.sort(e),t.children=[];for(var r=0;r<n.length;r++)t.children.push(n[r].data());for(var r=0;r<t.children.length;r++)o(t.children[r]).sort(e)}}),n.method("flatten",function(t){if(e.is_leaf())return e;var n,r=e.data(),i=d(r);t?(n=e.get_all_nodes(),n.shift()):n=e.get_all_leaves(),i.children=[];for(var a=0;a<n.length;a++)delete n[a].children,i.children.push(d(n[a].data()));return o(i)}),n.method("apply",function(n,r){if(void 0===r&&(r=!1),n(e),void 0!==t.children)for(var i=0;i<t.children.length;i++){var a=o(t.children[i]);a.apply(n,r)}if(void 0!==t._children&&r)for(var s=0;s<t._children.length;s++){var a=o(t._children[s]);a.apply(n,r)}}),n.method("property",function(n,r){return 1===arguments.length?"function"==typeof n?n(t):t[n]:("function"==typeof n&&n(t,r),t[n]=r,e)}),n.method("is_leaf",function(e){return e?void 0===t.children&&void 0===t._children:void 0===t.children}),n.method("id",function(){return e.property("_id")}),n.method("node_name",function(){return e.property("name")}),n.method("branch_length",function(){return e.property("branch_length")}),n.method("root_dist",function(){return e.property("_root_dist")}),n.method("children",function(e){var n=[];if(t.children)for(var r=0;r<t.children.length;r++)n.push(o(t.children[r]));if(t._children&&e)for(var i=0;i<t._children.length;i++)n.push(o(t._children[i]));if(0!==n.length)return n}),n.method("parent",function(){return void 0!==t._parent?o(t._parent):void 0}),e};e.exports=n=o},{"tnt.api":6,"tnt.utils":11}],16:[function(t,e,n){var r=t("tnt.api"),i={};i.diagonal=function(){var t=function(e){var r=e.source,i=e.target,o=((r.x+i.x)/2,(r.y+i.y)/2,[r,{x:i.x,y:r.y},i]);return o=o.map(t.projection()),t.path()(o,n.call(this,o))},e=(r(t).getset("projection").getset("path"),function(t,e){var n,r=2*Math.PI,i=r/4,o=t[0]>=0?t[1]>=0?1:2:t[1]>=0?4:3,a=Math.abs(Math.asin(t[1]/e));switch(o){case 1:n=i-a;break;case 2:n=i+a;break;case 3:n=2*i+i-a;break;case 4:n=3*i+a}return n}),n=function(t){var n=t[0],r=t[1],i=(t[2],Math.sqrt(n[0]*n[0]+n[1]*n[1])),o=e(n,i),a=e(r,i),s=Math.abs(a-o)>Math.PI?o>=a:a>o;return{radius:i,clockwise:s}};return t},i.diagonal.vertical=function(t){var e=function(t,e){var n=t[0],r=t[1],i=t[2],o=2e3*(r[1]-n[1]);return"M"+n+" A"+[o,o]+" 0 0,0 "+r+"M"+r+"L"+i},n=function(t){return[t.y,t.x]};return i.diagonal().path(e).projection(n)},i.diagonal.radial=function(){var t=function(t,e){var n=t[0],r=t[1],i=t[2],o=e.radius,a=e.clockwise;return a?"M"+n+" A"+[o,o]+" 0 0,0 "+r+"M"+r+"L"+i:"M"+r+" A"+[o,o]+" 0 0,0 "+n+"M"+r+"L"+i},e=function(t){var e=t.y,n=(t.x-90)/180*Math.PI;return[e*Math.cos(n),e*Math.sin(n)]};return i.diagonal().path(t).projection(e)},e.exports=n=i.diagonal},{"tnt.api":6}],17:[function(t,e,n){var r=t("./tree.js");r.label=t("./label.js"),r.diagonal=t("./diagonal.js"),r.layout=t("./layout.js"),r.node_display=t("./node_display.js"),e.exports=n=r},{"./diagonal.js":16,"./label.js":18,"./layout.js":19,"./node_display.js":20,"./tree.js":21}],18:[function(t,e,n){var r=t("tnt.api"),i={};i.label=function(){"use strict";var t=d3.dispatch("click","dblclick","mouseover","mouseout"),e=function(n,r,i){if("function"!=typeof n)throw n;e.display().call(this,n,r).attr("class","tnt_tree_label").attr("transform",function(t){var o=e.transform()(n,r);return"translate ("+(o.translate[0]+i)+" "+o.translate[1]+")rotate("+o.rotate+")"}).on("click",function(){t.click.call(this,n)}).on("dblclick",function(){t.dblclick.call(this,n)}).on("mouseover",function(){t.mouseover.call(this,n)}).on("mouseout",function(){t.mouseout.call(this,n)})};return r(e).getset("width",function(){throw"Need a width callback"}).getset("height",function(){throw"Need a height callback"}).getset("display",function(){throw"Need a display callback"}).getset("transform",function(){throw"Need a transform callback"}),d3.rebind(e,t,"on")},i.label.text=function(){var t=i.label();return r(t).getset("fontsize",10).getset("fontweight","normal").getset("color","#000").getset("text",function(t){return t.data().name}),t.display(function(e,n){var r=d3.select(this).append("text").attr("text-anchor",function(t){return"radial"===n?t.x%360<180?"start":"end":"start"}).text(function(){return t.text()(e)}).style("font-size",function(){return d3.functor(t.fontsize())(e)+"px"}).style("font-weight",function(){return d3.functor(t.fontweight())(e)}).style("fill",d3.functor(t.color())(e));return r}),t.transform(function(e,n){var r=e.data(),i={translate:[5,5],rotate:0};return"radial"===n&&(i.translate[1]=i.translate[1]-(r.x%360<180?0:t.fontsize()),i.rotate=r.x%360<180?0:180),i}),t.width(function(e){var n=d3.select("body").append("svg").attr("height",0).style("visibility","hidden"),r=n.append("text").style("font-size",d3.functor(t.fontsize())(e)+"px").text(t.text()(e)),i=r.node().getBBox().width;return n.remove(),i}),t.height(function(e){return d3.functor(t.fontsize())(e)}),t},i.label.img=function(){var t=i.label();return r(t).getset("src",function(){}),t.display(function(e,n){if(t.src()(e)){var r=d3.select(this).append("image").attr("width",t.width()()).attr("height",t.height()()).attr("xlink:href",t.src()(e));return r}return d3.select(this).append("text").text("")}),t.transform(function(e,n){var r=e.data(),i={translate:[10,-t.height()()/2],rotate:0};return"radial"===n&&(i.translate[0]=i.translate[0]+(r.x%360<180?0:t.width()()),i.translate[1]=i.translate[1]+(r.x%360<180?0:t.height()()),i.rotate=r.x%360<180?0:180),i}),t},i.label.composite=function(){var t=[],e=function(e,n,r){for(var i=0,o=0;o<t.length;o++){var a=t[o];!function(t){a.transform(function(e,n){var r=a._super_.transform()(e,n),i={translate:[t+r.translate[0],r.translate[1]],rotate:r.rotate};return i})}(i),i+=10,i+=a.width()(e),a.call(this,e,n,r)}},n=r(e);return n.method("add_label",function(n,i){return n._super_={},r(n._super_).get("transform",n.transform()),t.push(n),e}),n.method("width",function(){return function(e){for(var n=0,r=0;r<t.length;r++)n+=parseInt(t[r].width()(e)),n+=parseInt(t[r]._super_.transform()(e).translate[0]);return n}}),n.method("height",function(){return function(e){for(var n=0,r=0;r<t.length;r++){var i=t[r].height()(e);i>n&&(n=i)}return n}}),e},e.exports=n=i.label},{"tnt.api":6}],19:[function(t,e,n){var r=t("tnt.api"),i=t("./diagonal.js"),o={};o.layout=function(){var t=function(){},e=d3.layout.cluster().sort(null).value(function(t){return t.length}).separation(function(){return 1}),n=r(t).getset("scale",!0).getset("max_leaf_label_width",0).method("cluster",e).method("yscale",function(){throw"yscale is not defined in the base object"}).method("adjust_cluster_size",function(){throw"adjust_cluster_size is not defined in the base object"}).method("width",function(){throw"width is not defined in the base object"}).method("height",function(){throw"height is not defined in the base object"});return n.method("scale_branch_lengths",function(e){if(t.scale()!==!1){var n=e.nodes,r=e.tree,i=n.map(function(t){return t._root_dist}),o=t.yscale(i);r.apply(function(t){t.property("y",o(t.root_dist()))})}}),t},o.layout.vertical=function(){var t=o.layout();t.type="vertical";var e=r(t).getset("width",360).get("translate_vis",[20,20]).method("diagonal",i.vertical).method("transform_node",function(t){return"translate("+t.y+","+t.x+")"});return e.method("height",function(t){return t.n_leaves*t.label_height}),e.method("yscale",function(e){return d3.scale.linear().domain([0,d3.max(e)]).range([0,t.width()-20-t.max_leaf_label_width()])}),e.method("adjust_cluster_size",function(e){var n=t.height(e),r=t.width()-t.max_leaf_label_width()-t.translate_vis()[0]-e.label_padding;return t.cluster.size([n,r]),t}),t},o.layout.radial=function(){var t=o.layout();t.type="radial";var e=360,n=e/2,a={width:360},s=r(t).getset(a).getset("translate_vis",[n,n]).method("transform_node",function(t){return"rotate("+(t.x-90)+")translate("+t.y+")"}).method("diagonal",i.radial).method("height",function(){return a.width});return t.width.transform(function(e){return n=e/2,t.cluster.size([360,n]),t.translate_vis([n,n]),e}),s.method("yscale",function(t){return d3.scale.linear().domain([0,d3.max(t)]).range([0,n])}),s.method("adjust_cluster_size",function(e){return n=t.width()/2-t.max_leaf_label_width()-20,t.cluster.size([360,n]),t}),t},e.exports=n=o.layout},{"./diagonal.js":16,"tnt.api":6}],20:[function(t,e,n){var r=t("tnt.api"),i={};i.node_display=function(){"use strict";var t=function(e){var n,r=d3.select(this).select(".tnt_tree_node_proxy");null===r[0][0]?(d3.functor(t.size())(e),n=d3.select(this).append("rect").attr("class","tnt_tree_node_proxy")):n=r,t.display().call(this,e);var i=this.getBBox();n.attr("x",i.x).attr("y",i.y).attr("width",i.width).attr("height",i.height)},e=r(t).getset("size",4.4).getset("fill","black").getset("stroke","black").getset("stroke_width","1px").getset("display",function(){throw"display is not defined in the base object"});return e.method("reset",function(){d3.select(this).selectAll("*:not(.tnt_tree_node_proxy)").remove()}),t},i.node_display.circle=function(){var t=i.node_display();return t.display(function(e){d3.select(this).append("circle").attr("r",function(n){return d3.functor(t.size())(e)}).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)}).attr("class","tnt_node_display_elem")}),t},i.node_display.square=function(){var t=i.node_display();return t.display(function(e){var n=d3.functor(t.size())(e);d3.select(this).append("rect").attr("x",function(t){return-n}).attr("y",function(t){return-n}).attr("width",function(t){return 2*n}).attr("height",function(t){return 2*n}).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)}).attr("class","tnt_node_display_elem")}),t},i.node_display.triangle=function(){var t=i.node_display();return t.display(function(e){var n=d3.functor(t.size())(e);d3.select(this).append("polygon").attr("points",-n+",0 "+n+","+-n+" "+n+","+n).attr("fill",function(n){return d3.functor(t.fill())(e)}).attr("stroke",function(n){return d3.functor(t.stroke())(e)}).attr("stroke-width",function(n){return d3.functor(t.stroke_width())(e)}).attr("class","tnt_node_display_elem")}),t},e.exports=n=i.node_display},{"tnt.api":6}],21:[function(t,e,n){var r=t("tnt.api"),i=t("tnt.tree.node"),o=function(){"use strict";var t,e,n,a,s,l,u=d3.dispatch("click","dblclick","mouseover","mouseout"),c={duration:500,node_display:o.node_display.circle(),label:o.label.text(),layout:o.layout.vertical(),branch_color:"black",id:function(t){return t._id}},f="cubic-in-out",h={tree:void 0,data:void 0,nodes:void 0,links:void 0},d={tree:void 0,data:void 0,nodes:void 0,links:void 0},p=function(t){e=d3.select(t).attr("id");var r=d3.select(t).append("div").style("width",c.layout.width()+"px").attr("class","tnt_groupDiv"),h=c.layout.cluster,v=d.tree.get_all_leaves().length,m=function(t){for(var e=0,n=t.get_all_leaves(),r=0;r<n.length;r++){var i=c.label.width()(n[r])+d3.functor(c.node_display.size())(n[r]);i>e&&(e=i)}return e},y=function(t){for(var e=0,n=t.get_all_leaves(),r=0;r<n.length;r++){var i=2*d3.functor(c.node_display.size())(n[r]),o=d3.functor(c.label.height())(n[r]);e=d3.max([e,i,o])}return e},b=m(d.tree);c.layout.max_leaf_label_width(b);var x=y(d.tree),_={n_leaves:v,label_height:x,label_padding:15};c.layout.adjust_cluster_size(_);var w=c.layout.diagonal(),S=c.layout.transform_node;n=r.append("svg").attr("width",c.layout.width()).attr("height",c.layout.height(_)+30).attr("fill","none"),a=n.append("g").attr("id","tnt_st_"+e).attr("transform","translate("+c.layout.translate_vis()[0]+","+c.layout.translate_vis()[1]+")"),d.nodes=h.nodes(d.data),c.layout.scale_branch_lengths(d),d.links=h.links(d.nodes),s=a.append("g").attr("class","links"),l=a.append("g").attr("class","nodes");var T=s.selectAll("path.tnt_tree_link").data(d.links,function(t){return c.id(t.target)});T.enter().append("path").attr("class","tnt_tree_link").attr("id",function(t){return"tnt_tree_link_"+e+"_"+c.id(t.target)}).style("stroke",function(t){return d3.functor(c.branch_color)(i(t.source),i(t.target))}).attr("d",w);var C=l.selectAll("g.tnt_tree_node").data(d.nodes,function(t){return c.id(t)}),k=C.enter().append("g").attr("class",function(t){return t.children?0===t.depth?"root tnt_tree_node":"inner tnt_tree_node":"leaf tnt_tree_node"}).attr("id",function(t){return"tnt_tree_node_"+e+"_"+t._id}).attr("transform",S);k.each(function(t){c.node_display.call(this,i(t))}),k.each(function(t){c.label.call(this,i(t),c.layout.type,d3.functor(c.node_display.size())(i(t)))}),k.on("click",function(t){var e=i(t);o.trigger("node:click",e),u.click.call(this,e)}),k.on("dblclick",function(t){var e=i(t);o.trigger("node:dblclick",e),u.dblclick.call(this,e)}),k.on("mouseover",function(t){var e=i(t);o.trigger("node:hover",i(t)),u.mouseover.call(this,e)}),k.on("mouseout",function(t){var e=i(t);o.trigger("node:mouseout",i(t)),u.mouseout.call(this,e)}),g.method("update",function(){r.style("width",c.layout.width()+"px"),n.attr("width",c.layout.width());var t=c.layout.cluster,h=c.layout.diagonal(),g=c.layout.transform_node,v=m(d.tree);c.layout.max_leaf_label_width(v);var b=y(d.tree),x=d.tree.get_all_leaves().length,_={n_leaves:x,label_height:b,label_padding:15};c.layout.adjust_cluster_size(_),n.transition().duration(c.duration).ease(f).attr("height",c.layout.height(_)+30),a.transition().duration(c.duration).attr("transform","translate("+c.layout.translate_vis()[0]+","+c.layout.translate_vis()[1]+")"),d.nodes=t.nodes(d.data),c.layout.scale_branch_lengths(d),d.links=t.links(d.nodes);var w=s.selectAll("path.tnt_tree_link").data(d.links,function(t){return c.id(t.target)}),S=l.selectAll("g.tnt_tree_node").data(d.nodes,function(t){return c.id(t)});w.exit().remove(),w.enter().append("path").attr("class","tnt_tree_link").attr("id",function(t){return"tnt_tree_link_"+e+"_"+c.id(t.target)}).attr("stroke",function(t){return d3.functor(c.branch_color)(i(t.source),i(t.target))}).attr("d",h),w.transition().ease(f).duration(c.duration).attr("d",h);var T=S.enter().append("g").attr("class",function(t){return t.children?0===t.depth?"root tnt_tree_node":"inner tnt_tree_node":"leaf tnt_tree_node"}).attr("id",function(t){return"tnt_tree_node_"+e+"_"+t._id}).attr("transform",g);S.exit().remove(),T.on("click",function(t){var e=i(t);o.trigger("node:click",e),u.click.call(this,e)}),T.on("dblclick",function(t){var e=i(t);o.trigger("node:dblclick",e),u.dblclick.call(this,e)}),T.on("mouseover",function(t){var e=i(t);o.trigger("node:hover",i(t)),u.mouseover.call(this,e)}),T.on("mouseout",function(t){var e=i(t);o.trigger("node:mouseout",i(t)),u.mouseout.call(this,e)}),p.update_nodes(),S.transition().ease(f).duration(c.duration).attr("transform",g)}),g.method("update_nodes",function(){var t=l.selectAll("g.tnt_tree_node");t.each(function(){c.node_display.reset.call(this)}),t.each(function(t){c.node_display.call(this,i(t))}),t.each(function(t){c.label.call(this,i(t),c.layout.type,d3.functor(c.node_display.size())(i(t)))})})},g=r(p).getset(c);return g.method("scale_bar",function(t,e){if(p.layout().scale()){e||(e="pixel");var n;if(s.select("path").each(function(r){var i=this.getAttribute("d"),o=i.split(/[MLA]/),a=o.pop(),s=o.pop(),l=s.split(","),u=a.split(","),c=u[0]-l[0],f=u[1]-l[1],h=Math.sqrt(c*c+f*f),d=r.source,p=r.target,g=p._root_dist-d._root_dist;"pixel"===e?n=g/h*t:"tree"===e&&(n=h/g*t)}),!isNaN(n))return n}}),g.method("data",function(t){if(!arguments.length)return h.data;h.data=t,d.data=t;var e=i(h.data);return p.root(e),o.trigger("data:hasChanged",h.data),this}),g.method("root",function(t){return arguments.length?(h.tree=t,d.tree=h.tree,this):d.tree}),g.method("subtree",function(t,e){var n=h.tree.subtree(t,e);return d.data=n.data(),d.tree=n,this}),g.method("focus_node",function(e,n){var r=p.root().find_node(function(t){return e.id()===t.id()});return t=r,p.subtree(r.get_all_leaves(),n),this}),g.method("has_focus",function(e){return void 0!==t&&t.id()===e.id()}),g.method("release_focus",function(){return p.data(h.data),t=void 0,this}),d3.rebind(p,u,"on")};e.exports=n=o},{"tnt.api":6,"tnt.tree.node":10}]},{},[1]),!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],function(n){return e(t,n)}):"object"==typeof exports?e(t,require("jquery")):e(t,t.jQuery)}("undefined"!=typeof window?window:this,function(t,e){"use strict";function n(t,e){for(var n=t.length;--n;)if(+t[n]!==+e[n])return!1;return!0}function r(t){var n={range:!0,animate:!0};return"boolean"==typeof t?n.animate=t:e.extend(n,t),n}function i(t,n,r,i,o,a,s,l,u){this.elements="array"===e.type(t)?[+t[0],+t[2],+t[4],+t[1],+t[3],+t[5],0,0,1]:[t,n,r,i,o,a,s||0,l||0,u||1]}function o(t,e,n){this.elements=[t,e,n]}function a(t,n){if(!(this instanceof a))return new a(t,n);1!==t.nodeType&&e.error("Panzoom called on non-Element node"),e.contains(document,t)||e.error("Panzoom element must be attached to the document");var r=e.data(t,f);if(r)return r;this.options=n=e.extend({},a.defaults,n),this.elem=t;var i=this.$elem=e(t);this.$set=n.$set&&n.$set.length?n.$set:i,this.$doc=e(t.ownerDocument||document),this.$parent=i.parent(),this.isSVG=g.test(t.namespaceURI)&&"svg"!==t.nodeName.toLowerCase(),this.panning=!1,this._buildTransform(),this._transform=!this.isSVG&&e.cssProps.transform.replace(p,"-$1").toLowerCase(),this._buildTransition(),this.resetDimensions();var o=e(),s=this;e.each(["$zoomIn","$zoomOut","$zoomRange","$reset"],function(t,e){s[e]=n[e]||o}),this.enable(),e.data(t,f,this)}var s="over out down up move enter leave cancel".split(" "),l=e.extend({},e.event.mouseHooks),u={};if(t.PointerEvent)e.each(s,function(t,n){e.event.fixHooks[u[n]="pointer"+n]=l});else{var c=l.props;l.props=c.concat(["touches","changedTouches","targetTouches","altKey","ctrlKey","metaKey","shiftKey"]),l.filter=function(t,e){var n,r=c.length;if(!e.pageX&&e.touches&&(n=e.touches[0]))for(;r--;)t[c[r]]=n[c[r]];return t},e.each(s,function(t,n){if(2>t)u[n]="mouse"+n;else{var r="touch"+("down"===n?"start":"up"===n?"end":n);e.event.fixHooks[r]=l,u[n]=r+" mouse"+n}})}e.pointertouch=u;var f="__pz__",h=Array.prototype.slice,d=!!t.PointerEvent,p=/([A-Z])/g,g=/^http:[\w\.\/]+svg$/,v=/^inline/,m="(\\-?[\\d\\.e]+)",y="\\,?\\s*",b=new RegExp("^matrix\\("+m+y+m+y+m+y+m+y+m+y+m+"\\)$");return i.prototype={x:function(t){var e=t instanceof o,n=this.elements,r=t.elements;return e&&3===r.length?new o(n[0]*r[0]+n[1]*r[1]+n[2]*r[2],n[3]*r[0]+n[4]*r[1]+n[5]*r[2],n[6]*r[0]+n[7]*r[1]+n[8]*r[2]):r.length===n.length&&new i(n[0]*r[0]+n[1]*r[3]+n[2]*r[6],n[0]*r[1]+n[1]*r[4]+n[2]*r[7],n[0]*r[2]+n[1]*r[5]+n[2]*r[8],n[3]*r[0]+n[4]*r[3]+n[5]*r[6],n[3]*r[1]+n[4]*r[4]+n[5]*r[7],n[3]*r[2]+n[4]*r[5]+n[5]*r[8],n[6]*r[0]+n[7]*r[3]+n[8]*r[6],n[6]*r[1]+n[7]*r[4]+n[8]*r[7],n[6]*r[2]+n[7]*r[5]+n[8]*r[8])},inverse:function(){var t=1/this.determinant(),e=this.elements;return new i(t*(e[8]*e[4]-e[7]*e[5]),t*-(e[8]*e[1]-e[7]*e[2]),t*(e[5]*e[1]-e[4]*e[2]),t*-(e[8]*e[3]-e[6]*e[5]),t*(e[8]*e[0]-e[6]*e[2]),t*-(e[5]*e[0]-e[3]*e[2]),t*(e[7]*e[3]-e[6]*e[4]),t*-(e[7]*e[0]-e[6]*e[1]),t*(e[4]*e[0]-e[3]*e[1]))},determinant:function(){var t=this.elements;return t[0]*(t[8]*t[4]-t[7]*t[5])-t[3]*(t[8]*t[1]-t[7]*t[2])+t[6]*(t[5]*t[1]-t[4]*t[2])}},o.prototype.e=i.prototype.e=function(t){return this.elements[t]},a.rmatrix=b,a.events=e.pointertouch,a.defaults={eventNamespace:".panzoom",transition:!0,cursor:"move",disablePan:!1,disableZoom:!1,increment:.3,minScale:.4,maxScale:5,rangeStep:.05,duration:200,easing:"ease-in-out",contain:!1},a.prototype={constructor:a,instance:function(){return this},enable:function(){this._initStyle(),this._bind(),this.disabled=!1},disable:function(){this.disabled=!0,this._resetStyle(),this._unbind()},isDisabled:function(){return this.disabled},destroy:function(){this.disable(),e.removeData(this.elem,f)},resetDimensions:function(){var t=this.$parent;this.container={width:t.innerWidth(),height:t.innerHeight()};var n,r=t.offset(),i=this.elem,o=this.$elem;this.isSVG?(n=i.getBoundingClientRect(),n={left:n.left-r.left,top:n.top-r.top,width:n.width,height:n.height,margin:{left:0,top:0}}):n={left:e.css(i,"left",!0)||0,top:e.css(i,"top",!0)||0,width:o.innerWidth(),height:o.innerHeight(),margin:{top:e.css(i,"marginTop",!0)||0,left:e.css(i,"marginLeft",!0)||0}},n.widthBorder=e.css(i,"borderLeftWidth",!0)+e.css(i,"borderRightWidth",!0)||0,n.heightBorder=e.css(i,"borderTopWidth",!0)+e.css(i,"borderBottomWidth",!0)||0,this.dimensions=n},reset:function(t){t=r(t);var e=this.setMatrix(this._origTransform,t);t.silent||this._trigger("reset",e)},resetZoom:function(t){t=r(t);var e=this.getMatrix(this._origTransform);t.dValue=e[3],this.zoom(e[0],t)},resetPan:function(t){var e=this.getMatrix(this._origTransform);this.pan(e[4],e[5],r(t))},setTransform:function(t){for(var n=this.isSVG?"attr":"style",r=this.$set,i=r.length;i--;)e[n](r[i],"transform",t)},getTransform:function(t){var n=this.$set,r=n[0];return t?this.setTransform(t):t=e[this.isSVG?"attr":"style"](r,"transform"),"none"===t||b.test(t)||this.setTransform(t=e.css(r,"transform")),t||"none"},getMatrix:function(t){var e=b.exec(t||this.getTransform());return e&&e.shift(),e||[1,0,0,1,0,0]},setMatrix:function(t,n){if(!this.disabled){n||(n={}),"string"==typeof t&&(t=this.getMatrix(t));var r,i,o,a,s,l,u,c,f,h,d=+t[0],p=this.$parent,g="undefined"!=typeof n.contain?n.contain:this.options.contain;return g&&(r=this._checkDims(),i=this.container,f=r.width+r.widthBorder,h=r.height+r.heightBorder,o=(f*Math.abs(d)-i.width)/2,a=(h*Math.abs(d)-i.height)/2,u=r.left+r.margin.left,c=r.top+r.margin.top,"invert"===g?(s=f>i.width?f-i.width:0,l=h>i.height?h-i.height:0,o+=(i.width-f)/2,a+=(i.height-h)/2,t[4]=Math.max(Math.min(t[4],o-u),-o-u-s),t[5]=Math.max(Math.min(t[5],a-c),-a-c-l+r.heightBorder)):(a+=r.heightBorder/2,s=i.width>f?i.width-f:0,l=i.height>h?i.height-h:0,"center"===p.css("textAlign")&&v.test(e.css(this.elem,"display"))?s=0:o=a=0,t[4]=Math.min(Math.max(t[4],o-u),-o-u+s),t[5]=Math.min(Math.max(t[5],a-c),-a-c+l))),"skip"!==n.animate&&this.transition(!n.animate),n.range&&this.$zoomRange.val(d),this.setTransform("matrix("+t.join(",")+")"),n.silent||this._trigger("change",t),t}},isPanning:function(){return this.panning},transition:function(t){if(this._transition)for(var n=t||!this.options.transition?"none":this._transition,r=this.$set,i=r.length;i--;)e.style(r[i],"transition")!==n&&e.style(r[i],"transition",n)},pan:function(t,e,n){if(!this.options.disablePan){n||(n={});var r=n.matrix;r||(r=this.getMatrix()),n.relative&&(t+=+r[4],e+=+r[5]),r[4]=t,r[5]=e,this.setMatrix(r,n),n.silent||this._trigger("pan",r[4],r[5])}},zoom:function(t,n){"object"==typeof t?(n=t,t=null):n||(n={});var r=e.extend({},this.options,n);if(!r.disableZoom){var a=!1,s=r.matrix||this.getMatrix();"number"!=typeof t&&(t=+s[0]+r.increment*(t?-1:1),a=!0),t>r.maxScale?t=r.maxScale:t<r.minScale&&(t=r.minScale);var l=r.focal;if(l&&!r.disablePan){var u=this._checkDims(),c=l.clientX,f=l.clientY;this.isSVG||(c-=(u.width+u.widthBorder)/2,f-=(u.height+u.heightBorder)/2);var h=new o(c,f,1),d=new i(s),p=this.parentOffset||this.$parent.offset(),g=new i(1,0,p.left-this.$doc.scrollLeft(),0,1,p.top-this.$doc.scrollTop()),v=d.inverse().x(g.inverse().x(h)),m=t/s[0];d=d.x(new i([m,0,0,m,0,0])),h=g.x(d.x(v)),s[4]=+s[4]+(c-h.e(0)),s[5]=+s[5]+(f-h.e(1))}s[0]=t,s[3]="number"==typeof r.dValue?r.dValue:t,this.setMatrix(s,{animate:"boolean"==typeof r.animate?r.animate:a,range:!r.noSetRange}),r.silent||this._trigger("zoom",s[0],r)}},option:function(t,n){var r;if(!t)return e.extend({},this.options);if("string"==typeof t){if(1===arguments.length)return void 0!==this.options[t]?this.options[t]:null;r={},r[t]=n}else r=t;this._setOptions(r)},_setOptions:function(t){e.each(t,e.proxy(function(t,n){switch(t){case"disablePan":this._resetStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._unbind()}switch(this.options[t]=n,t){case"disablePan":this._initStyle();case"$zoomIn":case"$zoomOut":case"$zoomRange":case"$reset":this[t]=n;case"disableZoom":case"onStart":case"onChange":case"onZoom":case"onPan":case"onEnd":case"onReset":case"eventNamespace":this._bind();break;case"cursor":e.style(this.elem,"cursor",n);break;case"minScale":this.$zoomRange.attr("min",n);break;case"maxScale":this.$zoomRange.attr("max",n);break;case"rangeStep":this.$zoomRange.attr("step",n);break;case"startTransform":this._buildTransform();break;case"duration":case"easing":this._buildTransition();case"transition":this.transition();break;case"$set":n instanceof e&&n.length&&(this.$set=n,this._initStyle(),this._buildTransform())}},this))},_initStyle:function(){var t={"backface-visibility":"hidden","transform-origin":this.isSVG?"0 0":"50% 50%"};this.options.disablePan||(t.cursor=this.options.cursor),this.$set.css(t);var n=this.$parent;n.length&&!e.nodeName(n[0],"body")&&(t={overflow:"hidden"},"static"===n.css("position")&&(t.position="relative"),n.css(t))},_resetStyle:function(){this.$elem.css({cursor:"",transition:""}),this.$parent.css({overflow:"",position:""})},_bind:function(){var t=this,n=this.options,r=n.eventNamespace,i=d?"pointerdown"+r:"touchstart"+r+" mousedown"+r,o=d?"pointerup"+r:"touchend"+r+" click"+r,s={},l=this.$reset,u=this.$zoomRange;if(e.each(["Start","Change","Zoom","Pan","End","Reset"],function(){var t=n["on"+this];e.isFunction(t)&&(s["panzoom"+this.toLowerCase()+r]=t)}),n.disablePan&&n.disableZoom||(s[i]=function(e){var r;("touchstart"===e.type?!(r=e.touches)||(1!==r.length||n.disablePan)&&2!==r.length:n.disablePan||1!==e.which)||(e.preventDefault(),e.stopPropagation(),t._startMove(e,r))}),this.$elem.on(s),l.length&&l.on(o,function(e){e.preventDefault(),t.reset()}),u.length&&u.attr({step:n.rangeStep===a.defaults.rangeStep&&u.attr("step")||n.rangeStep,min:n.minScale,max:n.maxScale}).prop({value:this.getMatrix()[0]}),!n.disableZoom){var c=this.$zoomIn,f=this.$zoomOut;c.length&&f.length&&(c.on(o,function(e){e.preventDefault(),t.zoom()}),f.on(o,function(e){e.preventDefault(),t.zoom(!0)})),u.length&&(s={},s[(d?"pointerdown":"mousedown")+r]=function(){t.transition(!0)},s["change"+r]=function(){t.zoom(+this.value,{noSetRange:!0})},u.on(s))}},_unbind:function(){this.$elem.add(this.$zoomIn).add(this.$zoomOut).add(this.$reset).off(this.options.eventNamespace)},_buildTransform:function(){return this._origTransform=this.getTransform(this.options.startTransform)},_buildTransition:function(){if(this._transform){var t=this.options;this._transition=this._transform+" "+t.duration+"ms "+t.easing}},_checkDims:function(){var t=this.dimensions;return t.width&&t.height||this.resetDimensions(),this.dimensions},_getDistance:function(t){var e=t[0],n=t[1];return Math.sqrt(Math.pow(Math.abs(n.clientX-e.clientX),2)+Math.pow(Math.abs(n.clientY-e.clientY),2))},_getMiddle:function(t){var e=t[0],n=t[1];return{clientX:(n.clientX-e.clientX)/2+e.clientX,clientY:(n.clientY-e.clientY)/2+e.clientY}},_trigger:function(t){"string"==typeof t&&(t="panzoom"+t),this.$elem.triggerHandler(t,[this].concat(h.call(arguments,1)))},_startMove:function(t,r){var i,o,a,s,l,u,c,f,h=this,p=this.options,g=p.eventNamespace,v=this.getMatrix(),m=v.slice(0),y=+m[4],b=+m[5],x={matrix:v,animate:"skip"};d?(o="pointermove",a="pointerup"):"touchstart"===t.type?(o="touchmove",
a="touchend"):(o="mousemove",a="mouseup"),o+=g,a+=g,this.transition(!0),this.panning=!0,this._trigger("start",t,r),r&&2===r.length?(s=this._getDistance(r),l=+v[0],u=this._getMiddle(r),i=function(t){t.preventDefault();var e=h._getMiddle(r=t.touches),n=h._getDistance(r)-s;h.zoom(n*(p.increment/100)+l,{focal:e,matrix:v,animate:!1}),h.pan(+v[4]+e.clientX-u.clientX,+v[5]+e.clientY-u.clientY,x),u=e}):(c=t.pageX,f=t.pageY,i=function(t){t.preventDefault(),h.pan(y+t.pageX-c,b+t.pageY-f,x)}),e(document).off(g).on(o,i).on(a,function(t){t.preventDefault(),e(this).off(g),h.panning=!1,t.type="panzoomend",h._trigger(t,v,!n(v,m))})}},e.Panzoom=a,e.fn.panzoom=function(t){var n,r,i,o;return"string"==typeof t?(o=[],r=h.call(arguments,1),this.each(function(){n=e.data(this,f),n?"_"!==t.charAt(0)&&"function"==typeof(i=n[t])&&void 0!==(i=i.apply(n,r))&&o.push(i):o.push(void 0)}),o.length?1===o.length?o[0]:o:this):this.each(function(){new a(this,t)})},a});var path_datatable1="./dataset/"+speciesAbbr+"-geneCluster.json",path_datatable2="./dataset/"+speciesAbbr+"-tnt-nodeAttri-dataTable.json",aln_file_path="./dataset/aln_files_"+speciesAbbr+"/",treeJsonPath="./dataset/"+speciesAbbr+"-tree-tnt-version.json",nodeAttriPath="./dataset/"+speciesAbbr+"-tnt-nodeAttri.json",sequenceJsonPath="./dataset/"+speciesAbbr+"-sequence.json",winInnerWidth=window.innerWidth,init_core_threshold=.99,node_color_tmp={},link_color_tmp={},link_width_tmp={},link_dasharray_tmp={},Initial_MsaGV="",geneId_GV="",ann_majority="",tooltipSlider=document.getElementById("changeCoreThreshold");noUiSlider.create(tooltipSlider,{start:.99,behaviour:"tap",connect:"upper",range:{min:0,max:1}});var creat_dropdown_menu=function(t,e){var n=d3.select(t),r=n.append("select").attr("class","form-control").attr("id","sel1").attr("onchange","location = this.options[this.selectedIndex].value;");r.append("option").attr("value",speciesAbbr).text(e[speciesAbbr]);for(var i in e){var o=e[i];i!=speciesAbbr&&r.append("option").attr("value",i).text(o)}};creat_dropdown_menu("#species-selector",species_dt);var dc_dataTable_columnDefs_config=[{targets:0,defaultContent:'<button type="button" class="btn btn-info btn-xs" >aa </button>'},{targets:1,defaultContent:'<button type="button" class="btn btn-primary btn-xs" >nuc</button>'},{targets:2,data:"count"},{targets:3,defaultContent:"",data:null,className:"dup-details-control",orderable:!1},{targets:4,data:"dupli"},{targets:5,data:"divers"},{targets:6,data:"geneLen"},{targets:7,defaultContent:"",data:null,className:"ann-details-control",orderable:!1},{targets:8,data:"ann"},{targets:9,data:"geneId",visible:!1},{targets:10,data:"allAnn",visible:!1},{targets:11,defaultContent:"",data:"locus",visible:!1}],creat_dataTable=function(t,e){var n=d3.select(t),r=n.append("thead").attr("align","left");r.append("tr").selectAll("th").data(e).enter().append("th").text(function(t){return t})},geneCluster_table_columns=["msa","msa","count","","duplicated","diversity","geneLen","","annotation","Id","allAnn","locus"];creat_dataTable("#dc-data-table",geneCluster_table_columns);var meta_table_columns=Object.keys(meta_display_set);meta_table_columns.unshift("accession"),creat_dataTable("#dc-data-table2",meta_table_columns);var chartExample={initChart:function(t){function e(){var e=t[1].count,n=document.getElementById("coreThreshold").value;return n=parseFloat(n),isNaN(n)&&(n=init_core_threshold),a.dimension(function(t){return t.count>=e*n?"Core":"Acc"})}function n(){dc.events.trigger(function(){alldata=l.top(1/0),$("#dc-data-table").dataTable().fnClearTable(),$("#dc-data-table").dataTable().fnAddData(alldata),$("#dc-data-table").dataTable().fnDraw()})}var r=dc.lineChart("#dc-straincount-chart").xAxisLabel("gene").yAxisLabel("strain count"),i=dc.barChart("#dc-geneLength-chart").yAxisLabel("gene count").xAxisLabel("gene length"),o=dc.pieChart("#dc-coreAcc-piechart"),a=crossfilter(t),s=a.groupAll();dc.dataCount("#dc-data-count").dimension(a).group(s);var l=a.dimension(function(t){return t.geneId}),u=l.group().reduceSum(function(t){return t.count}),c=a.dimension(function(t){return t.geneLen}),f=c.group(),h=e(),d=h.group(),p=Object.keys(t).length;r.width(winInnerWidth/4.5).height(150).x(d3.scale.linear().domain([1,p])).transitionDuration(500).dimension(l).group(u).renderArea(!0).renderHorizontalGridLines(!0).elasticY(!0).xAxis().ticks(5);var g=Math.max.apply(Math,t.map(function(t){return t.geneLen}));i.width(winInnerWidth/4.5).height(150).dimension(c).group(f).transitionDuration(500).centerBar(!0).gap(1).x(d3.scale.linear().domain([0,g])).elasticY(!0).mouseZoomable(!0).renderHorizontalGridLines(!0).xAxis().tickFormat(function(t){return t}).ticks(5),o.width(winInnerWidth/8).height(120).radius(60).innerRadius(12.5).dimension(h).title(function(t){return t.value}).group(d).label(function(t){if(o.hasFilter()&&!o.hasFilter(t.key))return t.key+"(0%)";var e=t.key;return s.value()&&(e+="("+Math.floor(t.value/s.value()*100)+"%)"),e});var v=document.getElementById("coreThreshold");tooltipSlider.noUiSlider.on("update",function(t,n){parseFloat(t[n])!==init_core_threshold&&(v.value=parseFloat(t[n]),v.innerHTML="cutoff:"+t[n],h.dispose(),h=e(),d=h.group(),o.dimension(h).group(d),dc.redrawAll())});var m=dc.dataCount(".dc-data-count");m.dimension(a).group(s).html({some:'<strong>%filter-count</strong> genes selected from <strong>%total-count</strong> total genes | <a href="javascript:dc.filterAll(); dc.renderAll();"">Reset All</a>',all:"All records selected. Please click on the graph to apply filters."}),datatable=$("#dc-data-table").DataTable({responsive:!0,search:!0,paging:!0,scrollX:!0,scrollY:"200px",bAutoWidth:!0,bDeferRender:!0,aaData:l.top(1/0),columnDefs:dc_dataTable_columnDefs_config,order:[[2,"desc"],[9,"asc"]]});var y=new $.fn.dataTable.TableTools(datatable,{sRowSelect:"os",aButtons:[]});$(y.fnContainer()).insertBefore("div.dataTables_wrapper"),clickShowMsa(datatable);for(var b=0;b<dc.chartRegistry.list().length;b++){var x=dc.chartRegistry.list()[b];x.on("filtered",n)}dc.renderAll()},initData:function(){d3.json(path_datatable1,function(t,e){Initial_MsaGV=e[0].msa,geneId_GV=e[0].geneId,ann_majority=e[0].ann,chartExample.initChart(e),msaLoad(aln_file_path+Initial_MsaGV,"taylor"),render("mytree2",aln_file_path+Initial_MsaGV.split(".")[0]+".tree.json",svg2)})}};chartExample.initData();var genePresence_Dt={};d3.json("./dataset/"+speciesAbbr+"-genePresence.json",function(t,e){for(var n in e)genePresence_Dt[n]=e[n]});var msa=require("msa"),chartExample2={dataTable2Fun:function(){var t=[];for(i=0;i<meta_table_columns.length;i++)t.push({targets:i,data:meta_table_columns[i]});datatable2=$("#dc-data-table2").DataTable({ajax:path_datatable2,responsive:!0,search:!0,paging:!0,scrollX:!0,scrollY:"200px",bAutoWidth:!0,bDeferRender:!0,columnDefs:t})}};chartExample2.dataTable2Fun();var tableTools=new $.fn.dataTable.TableTools(datatable2,{sRowSelect:"os",aButtons:[]});$(tableTools.fnContainer()).insertBefore("div.dataTables_wrapper");var svg1=d3.select("#mytree1"),svg2=d3.select("#mytree2"),svg_all=d3.select("#mytree1,#mytree2"),size_node_leaf=3.5,size_node_inner=2,size_node_leaf_highlight=8,size_font_inner_label=10,size_font_leaf_label=12,height_nodeLabel=12,color_leaf_label="steelblue",color_internal_label="steelblue",color_node_stroke="steelblue",color_node_fill="white",color_inner_node="black",color_leaf_node_highlight="#EE6363",color_inner_node_highlight="steelblue",branch_color="#4A4A4A",branch_color_highlight="#2D59B1",link_width="1px",link_dasharray="1px, 0px",subtree_node_colorSet=d3.scale.category20c(),render=function(t,e,n){"use strict";function r(t){$("#genetree_title").html("<div class='alert alert-info' role='alert'>Gene tree viewer | "+t.split("/").pop().replace(/.tree.json/,"")+" | "+ann_majority+" </div>"),$("#genetree_title").show(),$("#sequence_viewer_title").html("<div class='alert alert-info' role='alert'> Sequence alignment viewer | "+t.split("/").pop().replace(/.tree.json/,"")+" | "+ann_majority+" </div>"),$("#sequence_viewer_title").show()}var i=tnt.tree(),o=winInnerWidth/3,a="right-left",s=$("#ScalesToggle").prop("checked");if(0==$("#TreeViewSelect").prop("checked"))var l="vertical";else var l="radial";e.indexOf("tree.json")!==-1&&r(e);var u=function(){function t(t,e){var n=t.__proto__||t.constructor.prototype;return e in t&&(!(e in n)||n[e]!==t[e])}function e(){n.selectAll("g.tnt_tree_node.leaf").on("mouseover",tips_node.show).on("mouseout",tips_node.hide).call(tips_node)}function r(e,n){var r="";if(r=t(e,"target")?"link":"node","link"==r&&(void 0!=e.target.muts&&tips_link.show(e),e=e.target),removeLegend(),0!=e.name.indexOf("NODE_")&&""!=e.name)d3.selectAll("circle.pt"+e.name).style("fill",color_leaf_node_highlight).attr("r",size_node_leaf_highlight);else if(0==e.name.indexOf("NODE_")||""==e.name){this.style.cursor="pointer","node"==r?d3.select(this).style("stroke",color_inner_node_highlight).style("stroke-width","20px").style("fill","steelblue"):"link"==r&&(link_color_tmp[this.id]=this.style.stroke,link_width_tmp[this.id]=this.style["stroke-width"],link_dasharray_tmp[this.id]=this.style["stroke-dasharray"],d3.select(this).style("stroke",branch_color_highlight).style("stroke-width","3px"));var i=[],o=e.children,a=function(t){for(var e=0;e<t.length;e++)0!=t[e].name.indexOf("NODE_")&&""!=t[e].name?i.push(t[e].name):a(t[e].children)};a(o);for(var n=0;n<i.length;n++)d3.selectAll("circle.pt"+i[n]).style("fill",function(t){return subtree_node_colorSet(t.name)}).attr("r",size_node_leaf_highlight)}}function i(e,n){var r="";if(r=t(e,"target")?"link":"node","link"==r&&(tips_link.hide(e),e=e.target),makeLegend(legendOptionValue),0!=e.name.indexOf("NODE_")&&""!=e.name)d3.selectAll("circle.pt"+e.name).style("fill",node_color_tmp[e.name]).attr("r",size_node_leaf);else if(0==e.name.indexOf("NODE_")||""==e.name){"node"==r?d3.select(this).style("stroke-width","0px").style("fill",color_inner_node).attr("r",size_node_inner):"link"==r&&d3.select(this).style("stroke",function(){return void 0!=link_color_tmp[this.id]?link_color_tmp[this.id]:branch_color}).style("stroke-width",function(){return void 0!=link_width_tmp[this.id]?link_width_tmp[this.id]:link_width}).style("stroke-dasharray",function(){return void 0!=link_dasharray_tmp[this.id]?link_dasharray_tmp[this.id]:link_dasharray});var i=[],o=e.children,a=function(t){for(var e=0;e<t.length;e++)0!=t[e].name.indexOf("NODE_")&&""!=t[e].name?i.push(t[e].name):a(t[e].children)};a(o);for(var n=0;n<i.length;n++)d3.selectAll("circle.pt"+i[n]).style("fill",function(t){return node_color_tmp[t.name]}).attr("r",size_node_leaf)}}function o(e,n){var r="";r=t(e,"target")?"link":"node","link"==r&&(e=e.target);var i=[];if(0==e.name.indexOf("NODE_")||""==e.name){var o=e.children,a=function(t){for(var e=0;e<t.length;e++)0!=t[e].name.indexOf("NODE_")&&""!=t[e].name?i.push(t[e].name):a(t[e].children)};a(o)}else i=[e.name];d3.json(nodeAttriPath,function(t,e){function n(){for(var t=[],n=0;n<i.length;n++){var r=e[i[n]];r.accession=i[n],t.push(r)}$("#dc-data-table2").dataTable().fnClearTable(),$("#dc-data-table2").dataTable().fnAddData(t),$("#dc-data-table2").dataTable().fnDraw()}n()})}function a(){n.selectAll("circle").attr("class",function(t,e){return"pt"+t.name}).on("mouseover",r).on("mouseout",i).on("click",o)}function s(){n.selectAll("path.tnt_tree_link").on("mouseover",r).on("mouseout",i).call(tips_link).on("click",o)}e(),a(),s()};d3.json(e,function(e,r){var c=r,f=tnt.tree.label.text().text(function(t){var e=t.data().branch_length,n=e.toFixed(20).match(/^-?\d*\.?0*\d{0,2}/)[0];return 1==$("#TreeViewSelect").prop("checked")||0==n,""}).fontweight("bold").fontsize(size_font_inner_label).color("red").transform(function(t){return{translate:[-50,-5],rotate:-0}}),h=tnt.tree.label.text().fontsize(size_font_leaf_label).color(color_leaf_label),d=tnt.tree.label().width(h.width()).height(height_nodeLabel).display(function(t){return t.is_leaf()?0==$("#TreeViewSelect").prop("checked")?h.display().call(this,t,"vertical"):h.display().call(this,t,"radial"):0==$("#TreeViewSelect").prop("checked")?f.display().call(this,t,"vertical"):f.display().call(this,t,"radial")}).transform(function(t){return t.is_leaf()?0==$("#TreeViewSelect").prop("checked")?h.transform().call(this,t,"vertical"):h.transform().call(this,t,"radial"):0==$("#TreeViewSelect").prop("checked")?f.transform().call(this,t,"vertical"):f.transform().call(this,t,"radial")}),p=tnt.tree.node_display.circle().size(function(t){return t.is_leaf()?size_node_leaf:size_node_inner}).stroke(function(t){if(t.is_leaf())return color_node_stroke}).fill(function(t,e){return t.is_leaf()?0!==Object.keys(node_color_tmp).length?node_color_tmp[t.node_name()]:color_node_fill:color_inner_node}),g=tnt.tree.node_display().size(.1).display(function(t){p.display().call(this,t)});i.branch_color(branch_color).node_display(g).label(d).data(c).layout(tnt.tree.layout[l]().width(o).scale(s)).duration(500),i(document.getElementById(t));var v=n.selectAll("g.tnt_tree_link");v.style("stroke-width","5px");var m=i.scale_bar(50,"pixel").toFixed(3),y=d3.select("#"+t);y.append("div").style({width:"50px",height:"4px","background-color":"steelblue",margin:"6px 5px 5px 25px","float":"left"}),y.append("text").style({"font-size":"12px"}).text(m),u(),rotate_tree(svg2,a)}),$("#TreeViewSelect").change(function(){if(0==$("#TreeViewSelect").prop("checked")){var t="vertical";document.getElementById("tree-rotate-div").style.visibility="visible"}else{var t="radial";document.getElementById("tree-rotate-div").style.visibility="hidden"}var e=tnt.tree.layout[t]().width(o).scale($("#ScalesToggle").prop("checked"));i.layout(e),i.update(),u()}),$("#LabelsToggle").change(function(){0==$("#LabelsToggle").prop("checked")?n.selectAll("text").style("visibility","hidden"):n.selectAll("text").style("visibility","visible")}),$("#ScalesToggle").change(function(){if(0==$("#TreeViewSelect").prop("checked"))var t="vertical";else var t="radial";var e=tnt.tree.layout[t]().width(o).scale($(this).prop("checked"));i.layout(e),i.update(),u()}),$("#InnerNodeToggle").change(function(){if(0==$(this).prop("checked"))var t="hidden";else var t="visible";n.selectAll("circle").style("visibility",function(e){if(0==e.name.indexOf("NODE_"))return t})})};$("#tree-rotate").change(function(){var t=d3.select("#mytree2");if(0==$(this).prop("checked"))var e="right-left";else var e="left-right";rotate_tree(t,e)}),render("mytree1",treeJsonPath,svg1),$(window).load(function(){$("#mytree1,#mytree2").panzoom({$zoomRange:$(".zoom-range")})});var metaColor_sets={},metaColor_set_keys={},meta_types=Object.keys(meta_set);for(j=0;j<meta_types.length;j++){var tmp_meta_color_set={},tmp_meta_color_set_keys=[],meta_type_key=meta_types[j],meta_detail=meta_set[meta_type_key];if(isNumeric(meta_detail[0])){var index=meta_detail.indexOf("unknown");index>-1&&(meta_detail.splice(index,1),tmp_meta_color_set.unknown="#FFFFFF");var min=Math.min.apply(null,meta_detail),max=Math.max.apply(null,meta_detail),distance=max-min,num_interval=5,interval=distance/num_interval;for(i=0;i<=num_interval;i++){var legend_value=Math.round(10*(min+interval*i))/10;tmp_meta_color_set_keys.push(legend_value),tmp_meta_color_set[legend_value]=safe_color_set[i]}void 0!=tmp_meta_color_set.unknown&&tmp_meta_color_set_keys.push("unknown"),metaColor_sets[meta_type_key]=tmp_meta_color_set,metaColor_set_keys[meta_type_key]=tmp_meta_color_set_keys}else assign_color(more_color_set)}var legend=d3.select("#legend").attr("width",100).attr("height",380),legendRectSize=15,legendSpacing=4,legendOptionValue="",creat_dropdown=function(t){var e=d3.select(t),n=e.append("select").attr("id","dropdown_select").attr("class","form-control sm-customized"),r=Object.keys(meta_set);for(n.on("change",function(t){"Meta-info"!=this.value&&updateData(this.value)}),n.append("option").attr("value","Meta-info").attr("selected",1).text("Meta-info"),n.append("option").attr("value","genePresence").text("gene presence/absence"),i=0;i<r.length;i++)n.append("option").attr("value",r[i]).text(meta_display_set[r[i]])};creat_dropdown("#dropdown_list");var tips_node=d3.tip().attr("class","d3-tip").html(function(t){for(string="","undefined"!=typeof t.name&&(string+="NCBI accesion:  "+t.name),i=0;i<meta_types.length;i++){var e=meta_types[i];"undefined"!=typeof t[e]&&(string+="<br/>"+e+":  "+t[e])}if("undefined"!=typeof t.ann&&(string+="<br/>annotation:  "+t.ann),"undefined"!=typeof t.muts){var n=t.muts;n.length>50&&(n=n.substr(0,50)+"..."),string+="<br/>nucleotide mutations:  "+n}if("undefined"!=typeof t.aa_muts){var r=t.aa_muts;r.length>50&&(r=r.substr(0,50)+"..."),string+="<br/>amino acid mutations:  "+r}return string+='<div class="smallspacer"></div>',string}),tips_link=d3.tip().attr("class","d3-tip").html(function(t){if(string="","undefined"!=typeof t.target.muts){var e=t.target.muts;e.length>50&&(e=e.substr(0,50)+"..."),string+="<br/>nucleotide mutations:  "+e}if("undefined"!=typeof t.target.aa_muts){var n=t.target.aa_muts;n.length>50&&(n=n.substr(0,50)+"..."),string+="<br/>amino acid mutations:  "+n}return"undefined"!=typeof t.target.ann&&(string+="<br/>annotation:  "+t.target.ann),string+='<div class="smallspacer"></div>',string});